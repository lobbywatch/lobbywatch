/*!
 * Bootstrap v3.3.7 (http://getbootstrap.com)
 * Copyright 2011-2016 Twitter, Inc.
 * Licensed under the MIT license
 */
if(define("pgui.localizer",[],(function(){var e=null,t={translations:{}};return{load:function(){return e=e||$.getJSON("components/js/jslang.php").done((function(e){t=e}))},getString:function(e,n){return void 0!==t.translations[e]?t.translations[e]:n||e},getFirstDayOfWeek:function(){return t.firstDayOfWeek||0}}})),function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,(function(e,t){"use strict";var n=[],i=Object.getPrototypeOf,r=n.slice,o=n.flat?function(e){return n.flat.call(e)}:function(e){return n.concat.apply([],e)},a=n.push,s=n.indexOf,l={},c=l.toString,u=l.hasOwnProperty,d=u.toString,h=d.call(Object),f={},p=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item},m=function(e){return null!=e&&e===e.window},g=e.document,v={type:!0,src:!0,nonce:!0,noModule:!0};function b(e,t,n){var i,r,o=(n=n||g).createElement("script");if(o.text=e,t)for(i in v)(r=t[i]||t.getAttribute&&t.getAttribute(i))&&o.setAttribute(i,r);n.head.appendChild(o).parentNode.removeChild(o)}function y(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?l[c.call(e)]||"object":typeof e}var w="3.6.0",x=function(e,t){return new x.fn.init(e,t)};function C(e){var t=!!e&&"length"in e&&e.length,n=y(e);return!p(e)&&!m(e)&&("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}x.fn=x.prototype={jquery:w,constructor:x,length:0,toArray:function(){return r.call(this)},get:function(e){return null==e?r.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=x.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return x.each(this,e)},map:function(e){return this.pushStack(x.map(this,(function(t,n){return e.call(t,n,t)})))},slice:function(){return this.pushStack(r.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(x.grep(this,(function(e,t){return(t+1)%2})))},odd:function(){return this.pushStack(x.grep(this,(function(e,t){return t%2})))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:a,sort:n.sort,splice:n.splice},x.extend=x.fn.extend=function(){var e,t,n,i,r,o,a=arguments[0]||{},s=1,l=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[s]||{},s++),"object"==typeof a||p(a)||(a={}),s===l&&(a=this,s--);s<l;s++)if(null!=(e=arguments[s]))for(t in e)i=e[t],"__proto__"!==t&&a!==i&&(c&&i&&(x.isPlainObject(i)||(r=Array.isArray(i)))?(n=a[t],o=r&&!Array.isArray(n)?[]:r||x.isPlainObject(n)?n:{},r=!1,a[t]=x.extend(c,o,i)):void 0!==i&&(a[t]=i));return a},x.extend({expando:"jQuery"+(w+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==c.call(e)||(t=i(e))&&("function"!=typeof(n=u.call(t,"constructor")&&t.constructor)||d.call(n)!==h))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){b(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,i=0;if(C(e))for(n=e.length;i<n&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(C(Object(e))?x.merge(n,"string"==typeof e?[e]:e):a.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:s.call(t,e,n)},merge:function(e,t){for(var n=+t.length,i=0,r=e.length;i<n;i++)e[r++]=t[i];return e.length=r,e},grep:function(e,t,n){for(var i=[],r=0,o=e.length,a=!n;r<o;r++)!t(e[r],r)!==a&&i.push(e[r]);return i},map:function(e,t,n){var i,r,a=0,s=[];if(C(e))for(i=e.length;a<i;a++)null!=(r=t(e[a],a,n))&&s.push(r);else for(a in e)null!=(r=t(e[a],a,n))&&s.push(r);return o(s)},guid:1,support:f}),"function"==typeof Symbol&&(x.fn[Symbol.iterator]=n[Symbol.iterator]),x.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){l["[object "+t+"]"]=t.toLowerCase()}));var _=function(e){var t,n,i,r,o,a,s,l,c,u,d,h,f,p,m,g,v,b,y,w="sizzle"+1*new Date,x=e.document,C=0,_=0,k=le(),E=le(),S=le(),T=le(),D=function(e,t){return e===t&&(d=!0),0},$={}.hasOwnProperty,A=[],P=A.pop,j=A.push,O=A.push,I=A.slice,M=function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},N="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",F="[\\x20\\t\\r\\n\\f]",R="(?:\\\\[\\da-fA-F]{1,6}"+F+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",L="\\["+F+"*("+R+")(?:"+F+"*([*^$|!~]?=)"+F+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+R+"))|)"+F+"*\\]",z=":("+R+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+L+")*)|.*)\\)|)",H=new RegExp(F+"+","g"),B=new RegExp("^"+F+"+|((?:^|[^\\\\])(?:\\\\.)*)"+F+"+$","g"),q=new RegExp("^"+F+"*,"+F+"*"),U=new RegExp("^"+F+"*([>+~]|"+F+")"+F+"*"),W=new RegExp(F+"|>"),V=new RegExp(z),Y=new RegExp("^"+R+"$"),G={ID:new RegExp("^#("+R+")"),CLASS:new RegExp("^\\.("+R+")"),TAG:new RegExp("^("+R+"|[*])"),ATTR:new RegExp("^"+L),PSEUDO:new RegExp("^"+z),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+F+"*(even|odd|(([+-]|)(\\d*)n|)"+F+"*(?:([+-]|)"+F+"*(\\d+)|))"+F+"*\\)|)","i"),bool:new RegExp("^(?:"+N+")$","i"),needsContext:new RegExp("^"+F+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+F+"*((?:-\\d)?\\d*)"+F+"*\\)|)(?=[^-]|$)","i")},Z=/HTML$/i,Q=/^(?:input|select|textarea|button)$/i,K=/^h\d$/i,J=/^[^{]+\{\s*\[native \w/,X=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\[\\da-fA-F]{1,6}"+F+"?|\\\\([^\\r\\n\\f])","g"),ne=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},ie=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,re=function(e,t){return t?"\0"===e?"ï¿½":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},oe=function(){h()},ae=we((function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{O.apply(A=I.call(x.childNodes),x.childNodes),A[x.childNodes.length].nodeType}catch(t){O={apply:A.length?function(e,t){j.apply(e,I.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}function se(e,t,i,r){var o,s,c,u,d,p,v,b=t&&t.ownerDocument,x=t?t.nodeType:9;if(i=i||[],"string"!=typeof e||!e||1!==x&&9!==x&&11!==x)return i;if(!r&&(h(t),t=t||f,m)){if(11!==x&&(d=X.exec(e)))if(o=d[1]){if(9===x){if(!(c=t.getElementById(o)))return i;if(c.id===o)return i.push(c),i}else if(b&&(c=b.getElementById(o))&&y(t,c)&&c.id===o)return i.push(c),i}else{if(d[2])return O.apply(i,t.getElementsByTagName(e)),i;if((o=d[3])&&n.getElementsByClassName&&t.getElementsByClassName)return O.apply(i,t.getElementsByClassName(o)),i}if(n.qsa&&!T[e+" "]&&(!g||!g.test(e))&&(1!==x||"object"!==t.nodeName.toLowerCase())){if(v=e,b=t,1===x&&(W.test(e)||U.test(e))){for((b=ee.test(e)&&ve(t.parentNode)||t)===t&&n.scope||((u=t.getAttribute("id"))?u=u.replace(ie,re):t.setAttribute("id",u=w)),s=(p=a(e)).length;s--;)p[s]=(u?"#"+u:":scope")+" "+ye(p[s]);v=p.join(",")}try{return O.apply(i,b.querySelectorAll(v)),i}catch(t){T(e,!0)}finally{u===w&&t.removeAttribute("id")}}}return l(e.replace(B,"$1"),t,i,r)}function le(){var e=[];return function t(n,r){return e.push(n+" ")>i.cacheLength&&delete t[e.shift()],t[n+" "]=r}}function ce(e){return e[w]=!0,e}function ue(e){var t=f.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function de(e,t){for(var n=e.split("|"),r=n.length;r--;)i.attrHandle[n[r]]=t}function he(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function fe(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function pe(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function me(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&ae(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function ge(e){return ce((function(t){return t=+t,ce((function(n,i){for(var r,o=e([],n.length,t),a=o.length;a--;)n[r=o[a]]&&(n[r]=!(i[r]=n[r]))}))}))}function ve(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in n=se.support={},o=se.isXML=function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!Z.test(t||n&&n.nodeName||"HTML")},h=se.setDocument=function(e){var t,r,a=e?e.ownerDocument||e:x;return a!=f&&9===a.nodeType&&a.documentElement&&(p=(f=a).documentElement,m=!o(f),x!=f&&(r=f.defaultView)&&r.top!==r&&(r.addEventListener?r.addEventListener("unload",oe,!1):r.attachEvent&&r.attachEvent("onunload",oe)),n.scope=ue((function(e){return p.appendChild(e).appendChild(f.createElement("div")),void 0!==e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length})),n.attributes=ue((function(e){return e.className="i",!e.getAttribute("className")})),n.getElementsByTagName=ue((function(e){return e.appendChild(f.createComment("")),!e.getElementsByTagName("*").length})),n.getElementsByClassName=J.test(f.getElementsByClassName),n.getById=ue((function(e){return p.appendChild(e).id=w,!f.getElementsByName||!f.getElementsByName(w).length})),n.getById?(i.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}},i.find.ID=function(e,t){if(void 0!==t.getElementById&&m){var n=t.getElementById(e);return n?[n]:[]}}):(i.filter.ID=function(e){var t=e.replace(te,ne);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},i.find.ID=function(e,t){if(void 0!==t.getElementById&&m){var n,i,r,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];for(r=t.getElementsByName(e),i=0;o=r[i++];)if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),i.find.TAG=n.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],r=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[r++];)1===n.nodeType&&i.push(n);return i}return o},i.find.CLASS=n.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&m)return t.getElementsByClassName(e)},v=[],g=[],(n.qsa=J.test(f.querySelectorAll))&&(ue((function(e){var t;p.appendChild(e).innerHTML="<a id='"+w+"'></a><select id='"+w+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&g.push("[*^$]="+F+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||g.push("\\["+F+"*(?:value|"+N+")"),e.querySelectorAll("[id~="+w+"-]").length||g.push("~="),(t=f.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||g.push("\\["+F+"*name"+F+"*="+F+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||g.push(":checked"),e.querySelectorAll("a#"+w+"+*").length||g.push(".#.+[+~]"),e.querySelectorAll("\\\f"),g.push("[\\r\\n\\f]")})),ue((function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=f.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&g.push("name"+F+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&g.push(":enabled",":disabled"),p.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&g.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),g.push(",.*:")}))),(n.matchesSelector=J.test(b=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&ue((function(e){n.disconnectedMatch=b.call(e,"*"),b.call(e,"[s!='']:x"),v.push("!=",z)})),g=g.length&&new RegExp(g.join("|")),v=v.length&&new RegExp(v.join("|")),t=J.test(p.compareDocumentPosition),y=t||J.test(p.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},D=t?function(e,t){if(e===t)return d=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i||(1&(i=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===i?e==f||e.ownerDocument==x&&y(x,e)?-1:t==f||t.ownerDocument==x&&y(x,t)?1:u?M(u,e)-M(u,t):0:4&i?-1:1)}:function(e,t){if(e===t)return d=!0,0;var n,i=0,r=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!r||!o)return e==f?-1:t==f?1:r?-1:o?1:u?M(u,e)-M(u,t):0;if(r===o)return he(e,t);for(n=e;n=n.parentNode;)a.unshift(n);for(n=t;n=n.parentNode;)s.unshift(n);for(;a[i]===s[i];)i++;return i?he(a[i],s[i]):a[i]==x?-1:s[i]==x?1:0}),f},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if(h(e),n.matchesSelector&&m&&!T[t+" "]&&(!v||!v.test(t))&&(!g||!g.test(t)))try{var i=b.call(e,t);if(i||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(e){T(t,!0)}return 0<se(t,f,null,[e]).length},se.contains=function(e,t){return(e.ownerDocument||e)!=f&&h(e),y(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!=f&&h(e);var r=i.attrHandle[t.toLowerCase()],o=r&&$.call(i.attrHandle,t.toLowerCase())?r(e,t,!m):void 0;return void 0!==o?o:n.attributes||!m?e.getAttribute(t):(o=e.getAttributeNode(t))&&o.specified?o.value:null},se.escape=function(e){return(e+"").replace(ie,re)},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,i=[],r=0,o=0;if(d=!n.detectDuplicates,u=!n.sortStable&&e.slice(0),e.sort(D),d){for(;t=e[o++];)t===e[o]&&(r=i.push(o));for(;r--;)e.splice(i[r],1)}return u=null,e},r=se.getText=function(e){var t,n="",i=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=r(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[i++];)n+=r(t);return n},(i=se.selectors={cacheLength:50,createPseudo:ce,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return G.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&V.test(n)&&(t=a(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=k[e+" "];return t||(t=new RegExp("(^|"+F+")"+e+"("+F+"|$)"))&&k(e,(function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,n){return function(i){var r=se.attr(i,e);return null==r?"!="===t:!t||(r+="","="===t?r===n:"!="===t?r!==n:"^="===t?n&&0===r.indexOf(n):"*="===t?n&&-1<r.indexOf(n):"$="===t?n&&r.slice(-n.length)===n:"~="===t?-1<(" "+r.replace(H," ")+" ").indexOf(n):"|="===t&&(r===n||r.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,i,r){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===i&&0===r?function(e){return!!e.parentNode}:function(t,n,l){var c,u,d,h,f,p,m=o!==a?"nextSibling":"previousSibling",g=t.parentNode,v=s&&t.nodeName.toLowerCase(),b=!l&&!s,y=!1;if(g){if(o){for(;m;){for(h=t;h=h[m];)if(s?h.nodeName.toLowerCase()===v:1===h.nodeType)return!1;p=m="only"===e&&!p&&"nextSibling"}return!0}if(p=[a?g.firstChild:g.lastChild],a&&b){for(y=(f=(c=(u=(d=(h=g)[w]||(h[w]={}))[h.uniqueID]||(d[h.uniqueID]={}))[e]||[])[0]===C&&c[1])&&c[2],h=f&&g.childNodes[f];h=++f&&h&&h[m]||(y=f=0)||p.pop();)if(1===h.nodeType&&++y&&h===t){u[e]=[C,f,y];break}}else if(b&&(y=f=(c=(u=(d=(h=t)[w]||(h[w]={}))[h.uniqueID]||(d[h.uniqueID]={}))[e]||[])[0]===C&&c[1]),!1===y)for(;(h=++f&&h&&h[m]||(y=f=0)||p.pop())&&((s?h.nodeName.toLowerCase()!==v:1!==h.nodeType)||!++y||(b&&((u=(d=h[w]||(h[w]={}))[h.uniqueID]||(d[h.uniqueID]={}))[e]=[C,y]),h!==t)););return(y-=r)===i||y%i==0&&0<=y/i}}},PSEUDO:function(e,t){var n,r=i.pseudos[e]||i.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return r[w]?r(t):1<r.length?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?ce((function(e,n){for(var i,o=r(e,t),a=o.length;a--;)e[i=M(e,o[a])]=!(n[i]=o[a])})):function(e){return r(e,0,n)}):r}},pseudos:{not:ce((function(e){var t=[],n=[],i=s(e.replace(B,"$1"));return i[w]?ce((function(e,t,n,r){for(var o,a=i(e,null,r,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))})):function(e,r,o){return t[0]=e,i(t,null,o,n),t[0]=null,!n.pop()}})),has:ce((function(e){return function(t){return 0<se(e,t).length}})),contains:ce((function(e){return e=e.replace(te,ne),function(t){return-1<(t.textContent||r(t)).indexOf(e)}})),lang:ce((function(e){return Y.test(e||"")||se.error("unsupported lang: "+e),e=e.replace(te,ne).toLowerCase(),function(t){var n;do{if(n=m?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===p},focus:function(e){return e===f.activeElement&&(!f.hasFocus||f.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:me(!1),disabled:me(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return K.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ge((function(){return[0]})),last:ge((function(e,t){return[t-1]})),eq:ge((function(e,t,n){return[n<0?n+t:n]})),even:ge((function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e})),odd:ge((function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e})),lt:ge((function(e,t,n){for(var i=n<0?n+t:t<n?t:n;0<=--i;)e.push(i);return e})),gt:ge((function(e,t,n){for(var i=n<0?n+t:n;++i<t;)e.push(i);return e}))}}).pseudos.nth=i.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[t]=fe(t);for(t in{submit:!0,reset:!0})i.pseudos[t]=pe(t);function be(){}function ye(e){for(var t=0,n=e.length,i="";t<n;t++)i+=e[t].value;return i}function we(e,t,n){var i=t.dir,r=t.next,o=r||i,a=n&&"parentNode"===o,s=_++;return t.first?function(t,n,r){for(;t=t[i];)if(1===t.nodeType||a)return e(t,n,r);return!1}:function(t,n,l){var c,u,d,h=[C,s];if(l){for(;t=t[i];)if((1===t.nodeType||a)&&e(t,n,l))return!0}else for(;t=t[i];)if(1===t.nodeType||a)if(u=(d=t[w]||(t[w]={}))[t.uniqueID]||(d[t.uniqueID]={}),r&&r===t.nodeName.toLowerCase())t=t[i]||t;else{if((c=u[o])&&c[0]===C&&c[1]===s)return h[2]=c[2];if((u[o]=h)[2]=e(t,n,l))return!0}return!1}}function xe(e){return 1<e.length?function(t,n,i){for(var r=e.length;r--;)if(!e[r](t,n,i))return!1;return!0}:e[0]}function Ce(e,t,n,i,r){for(var o,a=[],s=0,l=e.length,c=null!=t;s<l;s++)(o=e[s])&&(n&&!n(o,i,r)||(a.push(o),c&&t.push(s)));return a}function _e(e,t,n,i,r,o){return i&&!i[w]&&(i=_e(i)),r&&!r[w]&&(r=_e(r,o)),ce((function(o,a,s,l){var c,u,d,h=[],f=[],p=a.length,m=o||function(e,t,n){for(var i=0,r=t.length;i<r;i++)se(e,t[i],n);return n}(t||"*",s.nodeType?[s]:s,[]),g=!e||!o&&t?m:Ce(m,h,e,s,l),v=n?r||(o?e:p||i)?[]:a:g;if(n&&n(g,v,s,l),i)for(c=Ce(v,f),i(c,[],s,l),u=c.length;u--;)(d=c[u])&&(v[f[u]]=!(g[f[u]]=d));if(o){if(r||e){if(r){for(c=[],u=v.length;u--;)(d=v[u])&&c.push(g[u]=d);r(null,v=[],c,l)}for(u=v.length;u--;)(d=v[u])&&-1<(c=r?M(o,d):h[u])&&(o[c]=!(a[c]=d))}}else v=Ce(v===a?v.splice(p,v.length):v),r?r(null,a,v,l):O.apply(a,v)}))}function ke(e){for(var t,n,r,o=e.length,a=i.relative[e[0].type],s=a||i.relative[" "],l=a?1:0,u=we((function(e){return e===t}),s,!0),d=we((function(e){return-1<M(t,e)}),s,!0),h=[function(e,n,i){var r=!a&&(i||n!==c)||((t=n).nodeType?u(e,n,i):d(e,n,i));return t=null,r}];l<o;l++)if(n=i.relative[e[l].type])h=[we(xe(h),n)];else{if((n=i.filter[e[l].type].apply(null,e[l].matches))[w]){for(r=++l;r<o&&!i.relative[e[r].type];r++);return _e(1<l&&xe(h),1<l&&ye(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(B,"$1"),n,l<r&&ke(e.slice(l,r)),r<o&&ke(e=e.slice(r)),r<o&&ye(e))}h.push(n)}return xe(h)}return be.prototype=i.filters=i.pseudos,i.setFilters=new be,a=se.tokenize=function(e,t){var n,r,o,a,s,l,c,u=E[e+" "];if(u)return t?0:u.slice(0);for(s=e,l=[],c=i.preFilter;s;){for(a in n&&!(r=q.exec(s))||(r&&(s=s.slice(r[0].length)||s),l.push(o=[])),n=!1,(r=U.exec(s))&&(n=r.shift(),o.push({value:n,type:r[0].replace(B," ")}),s=s.slice(n.length)),i.filter)!(r=G[a].exec(s))||c[a]&&!(r=c[a](r))||(n=r.shift(),o.push({value:n,type:a,matches:r}),s=s.slice(n.length));if(!n)break}return t?s.length:s?se.error(e):E(e,l).slice(0)},s=se.compile=function(e,t){var n,r,o,s,l,u,d=[],p=[],g=S[e+" "];if(!g){for(t||(t=a(e)),n=t.length;n--;)(g=ke(t[n]))[w]?d.push(g):p.push(g);(g=S(e,(r=p,s=0<(o=d).length,l=0<r.length,u=function(e,t,n,a,u){var d,p,g,v=0,b="0",y=e&&[],w=[],x=c,_=e||l&&i.find.TAG("*",u),k=C+=null==x?1:Math.random()||.1,E=_.length;for(u&&(c=t==f||t||u);b!==E&&null!=(d=_[b]);b++){if(l&&d){for(p=0,t||d.ownerDocument==f||(h(d),n=!m);g=r[p++];)if(g(d,t||f,n)){a.push(d);break}u&&(C=k)}s&&((d=!g&&d)&&v--,e&&y.push(d))}if(v+=b,s&&b!==v){for(p=0;g=o[p++];)g(y,w,t,n);if(e){if(0<v)for(;b--;)y[b]||w[b]||(w[b]=P.call(a));w=Ce(w)}O.apply(a,w),u&&!e&&0<w.length&&1<v+o.length&&se.uniqueSort(a)}return u&&(C=k,c=x),y},s?ce(u):u))).selector=e}return g},l=se.select=function(e,t,n,r){var o,l,c,u,d,h="function"==typeof e&&e,f=!r&&a(e=h.selector||e);if(n=n||[],1===f.length){if(2<(l=f[0]=f[0].slice(0)).length&&"ID"===(c=l[0]).type&&9===t.nodeType&&m&&i.relative[l[1].type]){if(!(t=(i.find.ID(c.matches[0].replace(te,ne),t)||[])[0]))return n;h&&(t=t.parentNode),e=e.slice(l.shift().value.length)}for(o=G.needsContext.test(e)?0:l.length;o--&&(c=l[o],!i.relative[u=c.type]);)if((d=i.find[u])&&(r=d(c.matches[0].replace(te,ne),ee.test(l[0].type)&&ve(t.parentNode)||t))){if(l.splice(o,1),!(e=r.length&&ye(l)))return O.apply(n,r),n;break}}return(h||s(e,f))(r,t,!m,n,!t||ee.test(e)&&ve(t.parentNode)||t),n},n.sortStable=w.split("").sort(D).join("")===w,n.detectDuplicates=!!d,h(),n.sortDetached=ue((function(e){return 1&e.compareDocumentPosition(f.createElement("fieldset"))})),ue((function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")}))||de("type|href|height|width",(function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)})),n.attributes&&ue((function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}))||de("value",(function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue})),ue((function(e){return null==e.getAttribute("disabled")}))||de(N,(function(e,t,n){var i;if(!n)return!0===e[t]?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null})),se}(e);x.find=_,x.expr=_.selectors,x.expr[":"]=x.expr.pseudos,x.uniqueSort=x.unique=_.uniqueSort,x.text=_.getText,x.isXMLDoc=_.isXML,x.contains=_.contains,x.escapeSelector=_.escape;var k=function(e,t,n){for(var i=[],r=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&x(e).is(n))break;i.push(e)}return i},E=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},S=x.expr.match.needsContext;function T(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var D=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function $(e,t,n){return p(t)?x.grep(e,(function(e,i){return!!t.call(e,i,e)!==n})):t.nodeType?x.grep(e,(function(e){return e===t!==n})):"string"!=typeof t?x.grep(e,(function(e){return-1<s.call(t,e)!==n})):x.filter(t,e,n)}x.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?x.find.matchesSelector(i,e)?[i]:[]:x.find.matches(e,x.grep(t,(function(e){return 1===e.nodeType})))},x.fn.extend({find:function(e){var t,n,i=this.length,r=this;if("string"!=typeof e)return this.pushStack(x(e).filter((function(){for(t=0;t<i;t++)if(x.contains(r[t],this))return!0})));for(n=this.pushStack([]),t=0;t<i;t++)x.find(e,r[t],n);return 1<i?x.uniqueSort(n):n},filter:function(e){return this.pushStack($(this,e||[],!1))},not:function(e){return this.pushStack($(this,e||[],!0))},is:function(e){return!!$(this,"string"==typeof e&&S.test(e)?x(e):e||[],!1).length}});var A,P=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(x.fn.init=function(e,t,n){var i,r;if(!e)return this;if(n=n||A,"string"==typeof e){if(!(i="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:P.exec(e))||!i[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof x?t[0]:t,x.merge(this,x.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:g,!0)),D.test(i[1])&&x.isPlainObject(t))for(i in t)p(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return(r=g.getElementById(i[2]))&&(this[0]=r,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):p(e)?void 0!==n.ready?n.ready(e):e(x):x.makeArray(e,this)}).prototype=x.fn,A=x(g);var j=/^(?:parents|prev(?:Until|All))/,O={children:!0,contents:!0,next:!0,prev:!0};function I(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}x.fn.extend({has:function(e){var t=x(e,this),n=t.length;return this.filter((function(){for(var e=0;e<n;e++)if(x.contains(this,t[e]))return!0}))},closest:function(e,t){var n,i=0,r=this.length,o=[],a="string"!=typeof e&&x(e);if(!S.test(e))for(;i<r;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&x.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(1<o.length?x.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?s.call(x(e),this[0]):s.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(x.uniqueSort(x.merge(this.get(),x(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),x.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return k(e,"parentNode")},parentsUntil:function(e,t,n){return k(e,"parentNode",n)},next:function(e){return I(e,"nextSibling")},prev:function(e){return I(e,"previousSibling")},nextAll:function(e){return k(e,"nextSibling")},prevAll:function(e){return k(e,"previousSibling")},nextUntil:function(e,t,n){return k(e,"nextSibling",n)},prevUntil:function(e,t,n){return k(e,"previousSibling",n)},siblings:function(e){return E((e.parentNode||{}).firstChild,e)},children:function(e){return E(e.firstChild)},contents:function(e){return null!=e.contentDocument&&i(e.contentDocument)?e.contentDocument:(T(e,"template")&&(e=e.content||e),x.merge([],e.childNodes))}},(function(e,t){x.fn[e]=function(n,i){var r=x.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=x.filter(i,r)),1<this.length&&(O[e]||x.uniqueSort(r),j.test(e)&&r.reverse()),this.pushStack(r)}}));var M=/[^\x20\t\r\n\f]+/g;function N(e){return e}function F(e){throw e}function R(e,t,n,i){var r;try{e&&p(r=e.promise)?r.call(e).done(t).fail(n):e&&p(r=e.then)?r.call(e,t,n):t.apply(void 0,[e].slice(i))}catch(e){n.apply(void 0,[e])}}x.Callbacks=function(e){var t,n;e="string"==typeof e?(t=e,n={},x.each(t.match(M)||[],(function(e,t){n[t]=!0})),n):x.extend({},e);var i,r,o,a,s=[],l=[],c=-1,u=function(){for(a=a||e.once,o=i=!0;l.length;c=-1)for(r=l.shift();++c<s.length;)!1===s[c].apply(r[0],r[1])&&e.stopOnFalse&&(c=s.length,r=!1);e.memory||(r=!1),i=!1,a&&(s=r?[]:"")},d={add:function(){return s&&(r&&!i&&(c=s.length-1,l.push(r)),function t(n){x.each(n,(function(n,i){p(i)?e.unique&&d.has(i)||s.push(i):i&&i.length&&"string"!==y(i)&&t(i)}))}(arguments),r&&!i&&u()),this},remove:function(){return x.each(arguments,(function(e,t){for(var n;-1<(n=x.inArray(t,s,n));)s.splice(n,1),n<=c&&c--})),this},has:function(e){return e?-1<x.inArray(e,s):0<s.length},empty:function(){return s&&(s=[]),this},disable:function(){return a=l=[],s=r="",this},disabled:function(){return!s},lock:function(){return a=l=[],r||i||(s=r=""),this},locked:function(){return!!a},fireWith:function(e,t){return a||(t=[e,(t=t||[]).slice?t.slice():t],l.push(t),i||u()),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!o}};return d},x.extend({Deferred:function(t){var n=[["notify","progress",x.Callbacks("memory"),x.Callbacks("memory"),2],["resolve","done",x.Callbacks("once memory"),x.Callbacks("once memory"),0,"resolved"],["reject","fail",x.Callbacks("once memory"),x.Callbacks("once memory"),1,"rejected"]],i="pending",r={state:function(){return i},always:function(){return o.done(arguments).fail(arguments),this},catch:function(e){return r.then(null,e)},pipe:function(){var e=arguments;return x.Deferred((function(t){x.each(n,(function(n,i){var r=p(e[i[4]])&&e[i[4]];o[i[1]]((function(){var e=r&&r.apply(this,arguments);e&&p(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[i[0]+"With"](this,r?[e]:arguments)}))})),e=null})).promise()},then:function(t,i,r){var o=0;function a(t,n,i,r){return function(){var s=this,l=arguments,c=function(){var e,c;if(!(t<o)){if((e=i.apply(s,l))===n.promise())throw new TypeError("Thenable self-resolution");c=e&&("object"==typeof e||"function"==typeof e)&&e.then,p(c)?r?c.call(e,a(o,n,N,r),a(o,n,F,r)):(o++,c.call(e,a(o,n,N,r),a(o,n,F,r),a(o,n,N,n.notifyWith))):(i!==N&&(s=void 0,l=[e]),(r||n.resolveWith)(s,l))}},u=r?c:function(){try{c()}catch(e){x.Deferred.exceptionHook&&x.Deferred.exceptionHook(e,u.stackTrace),o<=t+1&&(i!==F&&(s=void 0,l=[e]),n.rejectWith(s,l))}};t?u():(x.Deferred.getStackHook&&(u.stackTrace=x.Deferred.getStackHook()),e.setTimeout(u))}}return x.Deferred((function(e){n[0][3].add(a(0,e,p(r)?r:N,e.notifyWith)),n[1][3].add(a(0,e,p(t)?t:N)),n[2][3].add(a(0,e,p(i)?i:F))})).promise()},promise:function(e){return null!=e?x.extend(e,r):r}},o={};return x.each(n,(function(e,t){var a=t[2],s=t[5];r[t[1]]=a.add,s&&a.add((function(){i=s}),n[3-e][2].disable,n[3-e][3].disable,n[0][2].lock,n[0][3].lock),a.add(t[3].fire),o[t[0]]=function(){return o[t[0]+"With"](this===o?void 0:this,arguments),this},o[t[0]+"With"]=a.fireWith})),r.promise(o),t&&t.call(o,o),o},when:function(e){var t=arguments.length,n=t,i=Array(n),o=r.call(arguments),a=x.Deferred(),s=function(e){return function(n){i[e]=this,o[e]=1<arguments.length?r.call(arguments):n,--t||a.resolveWith(i,o)}};if(t<=1&&(R(e,a.done(s(n)).resolve,a.reject,!t),"pending"===a.state()||p(o[n]&&o[n].then)))return a.then();for(;n--;)R(o[n],s(n),a.reject);return a.promise()}});var L=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;x.Deferred.exceptionHook=function(t,n){e.console&&e.console.warn&&t&&L.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,n)},x.readyException=function(t){e.setTimeout((function(){throw t}))};var z=x.Deferred();function H(){g.removeEventListener("DOMContentLoaded",H),e.removeEventListener("load",H),x.ready()}x.fn.ready=function(e){return z.then(e).catch((function(e){x.readyException(e)})),this},x.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--x.readyWait:x.isReady)||(x.isReady=!0)!==e&&0<--x.readyWait||z.resolveWith(g,[x])}}),x.ready.then=z.then,"complete"===g.readyState||"loading"!==g.readyState&&!g.documentElement.doScroll?e.setTimeout(x.ready):(g.addEventListener("DOMContentLoaded",H),e.addEventListener("load",H));var B=function(e,t,n,i,r,o,a){var s=0,l=e.length,c=null==n;if("object"===y(n))for(s in r=!0,n)B(e,t,s,n[s],!0,o,a);else if(void 0!==i&&(r=!0,p(i)||(a=!0),c&&(a?(t.call(e,i),t=null):(c=t,t=function(e,t,n){return c.call(x(e),n)})),t))for(;s<l;s++)t(e[s],n,a?i:i.call(e[s],s,t(e[s],n)));return r?e:c?t.call(e):l?t(e[0],n):o},q=/^-ms-/,U=/-([a-z])/g;function W(e,t){return t.toUpperCase()}function V(e){return e.replace(q,"ms-").replace(U,W)}var Y=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function G(){this.expando=x.expando+G.uid++}G.uid=1,G.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Y(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var i,r=this.cache(e);if("string"==typeof t)r[V(t)]=n;else for(i in t)r[V(i)]=t[i];return r},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][V(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,i=e[this.expando];if(void 0!==i){if(void 0!==t){n=(t=Array.isArray(t)?t.map(V):(t=V(t))in i?[t]:t.match(M)||[]).length;for(;n--;)delete i[t[n]]}(void 0===t||x.isEmptyObject(i))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!x.isEmptyObject(t)}};var Z=new G,Q=new G,K=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,J=/[A-Z]/g;function X(e,t,n){var i,r;if(void 0===n&&1===e.nodeType)if(i="data-"+t.replace(J,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(i))){try{n="true"===(r=n)||"false"!==r&&("null"===r?null:r===+r+""?+r:K.test(r)?JSON.parse(r):r)}catch(e){}Q.set(e,t,n)}else n=void 0;return n}x.extend({hasData:function(e){return Q.hasData(e)||Z.hasData(e)},data:function(e,t,n){return Q.access(e,t,n)},removeData:function(e,t){Q.remove(e,t)},_data:function(e,t,n){return Z.access(e,t,n)},_removeData:function(e,t){Z.remove(e,t)}}),x.fn.extend({data:function(e,t){var n,i,r,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(r=Q.get(o),1===o.nodeType&&!Z.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&0===(i=a[n].name).indexOf("data-")&&(i=V(i.slice(5)),X(o,i,r[i]));Z.set(o,"hasDataAttrs",!0)}return r}return"object"==typeof e?this.each((function(){Q.set(this,e)})):B(this,(function(t){var n;if(o&&void 0===t)return void 0!==(n=Q.get(o,e))||void 0!==(n=X(o,e))?n:void 0;this.each((function(){Q.set(this,e,t)}))}),null,t,1<arguments.length,null,!0)},removeData:function(e){return this.each((function(){Q.remove(this,e)}))}}),x.extend({queue:function(e,t,n){var i;if(e)return t=(t||"fx")+"queue",i=Z.get(e,t),n&&(!i||Array.isArray(n)?i=Z.access(e,t,x.makeArray(n)):i.push(n)),i||[]},dequeue:function(e,t){t=t||"fx";var n=x.queue(e,t),i=n.length,r=n.shift(),o=x._queueHooks(e,t);"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===t&&n.unshift("inprogress"),delete o.stop,r.call(e,(function(){x.dequeue(e,t)}),o)),!i&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Z.get(e,n)||Z.access(e,n,{empty:x.Callbacks("once memory").add((function(){Z.remove(e,[t+"queue",n])}))})}}),x.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?x.queue(this[0],e):void 0===t?this:this.each((function(){var n=x.queue(this,e,t);x._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&x.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){x.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,r=x.Deferred(),o=this,a=this.length,s=function(){--i||r.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(n=Z.get(o[a],e+"queueHooks"))&&n.empty&&(i++,n.empty.add(s));return s(),r.promise(t)}});var ee=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,te=new RegExp("^(?:([+-])=|)("+ee+")([a-z%]*)$","i"),ne=["Top","Right","Bottom","Left"],ie=g.documentElement,re=function(e){return x.contains(e.ownerDocument,e)},oe={composed:!0};ie.getRootNode&&(re=function(e){return x.contains(e.ownerDocument,e)||e.getRootNode(oe)===e.ownerDocument});var ae=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&re(e)&&"none"===x.css(e,"display")};function se(e,t,n,i){var r,o,a=20,s=i?function(){return i.cur()}:function(){return x.css(e,t,"")},l=s(),c=n&&n[3]||(x.cssNumber[t]?"":"px"),u=e.nodeType&&(x.cssNumber[t]||"px"!==c&&+l)&&te.exec(x.css(e,t));if(u&&u[3]!==c){for(l/=2,c=c||u[3],u=+l||1;a--;)x.style(e,t,u+c),(1-o)*(1-(o=s()/l||.5))<=0&&(a=0),u/=o;u*=2,x.style(e,t,u+c),n=n||[]}return n&&(u=+u||+l||0,r=n[1]?u+(n[1]+1)*n[2]:+n[2],i&&(i.unit=c,i.start=u,i.end=r)),r}var le={};function ce(e,t){for(var n,i,r,o,a,s,l,c=[],u=0,d=e.length;u<d;u++)(i=e[u]).style&&(n=i.style.display,t?("none"===n&&(c[u]=Z.get(i,"display")||null,c[u]||(i.style.display="")),""===i.style.display&&ae(i)&&(c[u]=(l=a=o=void 0,a=(r=i).ownerDocument,s=r.nodeName,(l=le[s])||(o=a.body.appendChild(a.createElement(s)),l=x.css(o,"display"),o.parentNode.removeChild(o),"none"===l&&(l="block"),le[s]=l)))):"none"!==n&&(c[u]="none",Z.set(i,"display",n)));for(u=0;u<d;u++)null!=c[u]&&(e[u].style.display=c[u]);return e}x.fn.extend({show:function(){return ce(this,!0)},hide:function(){return ce(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){ae(this)?x(this).show():x(this).hide()}))}});var ue,de,he=/^(?:checkbox|radio)$/i,fe=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,pe=/^$|^module$|\/(?:java|ecma)script/i;ue=g.createDocumentFragment().appendChild(g.createElement("div")),(de=g.createElement("input")).setAttribute("type","radio"),de.setAttribute("checked","checked"),de.setAttribute("name","t"),ue.appendChild(de),f.checkClone=ue.cloneNode(!0).cloneNode(!0).lastChild.checked,ue.innerHTML="<textarea>x</textarea>",f.noCloneChecked=!!ue.cloneNode(!0).lastChild.defaultValue,ue.innerHTML="<option></option>",f.option=!!ue.lastChild;var me={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ge(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&T(e,t)?x.merge([e],n):n}function ve(e,t){for(var n=0,i=e.length;n<i;n++)Z.set(e[n],"globalEval",!t||Z.get(t[n],"globalEval"))}me.tbody=me.tfoot=me.colgroup=me.caption=me.thead,me.th=me.td,f.option||(me.optgroup=me.option=[1,"<select multiple='multiple'>","</select>"]);var be=/<|&#?\w+;/;function ye(e,t,n,i,r){for(var o,a,s,l,c,u,d=t.createDocumentFragment(),h=[],f=0,p=e.length;f<p;f++)if((o=e[f])||0===o)if("object"===y(o))x.merge(h,o.nodeType?[o]:o);else if(be.test(o)){for(a=a||d.appendChild(t.createElement("div")),s=(fe.exec(o)||["",""])[1].toLowerCase(),l=me[s]||me._default,a.innerHTML=l[1]+x.htmlPrefilter(o)+l[2],u=l[0];u--;)a=a.lastChild;x.merge(h,a.childNodes),(a=d.firstChild).textContent=""}else h.push(t.createTextNode(o));for(d.textContent="",f=0;o=h[f++];)if(i&&-1<x.inArray(o,i))r&&r.push(o);else if(c=re(o),a=ge(d.appendChild(o),"script"),c&&ve(a),n)for(u=0;o=a[u++];)pe.test(o.type||"")&&n.push(o);return d}var we=/^([^.]*)(?:\.(.+)|)/;function xe(){return!0}function Ce(){return!1}function _e(e,t){return e===function(){try{return g.activeElement}catch(e){}}()==("focus"===t)}function ke(e,t,n,i,r,o){var a,s;if("object"==typeof t){for(s in"string"!=typeof n&&(i=i||n,n=void 0),t)ke(e,s,n,i,t[s],o);return e}if(null==i&&null==r?(r=n,i=n=void 0):null==r&&("string"==typeof n?(r=i,i=void 0):(r=i,i=n,n=void 0)),!1===r)r=Ce;else if(!r)return e;return 1===o&&(a=r,(r=function(e){return x().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=x.guid++)),e.each((function(){x.event.add(this,t,r,i,n)}))}function Ee(e,t,n){n?(Z.set(e,t,!1),x.event.add(e,t,{namespace:!1,handler:function(e){var i,o,a=Z.get(this,t);if(1&e.isTrigger&&this[t]){if(a.length)(x.event.special[t]||{}).delegateType&&e.stopPropagation();else if(a=r.call(arguments),Z.set(this,t,a),i=n(this,t),this[t](),a!==(o=Z.get(this,t))||i?Z.set(this,t,!1):o={},a!==o)return e.stopImmediatePropagation(),e.preventDefault(),o&&o.value}else a.length&&(Z.set(this,t,{value:x.event.trigger(x.extend(a[0],x.Event.prototype),a.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Z.get(e,t)&&x.event.add(e,t,xe)}x.event={global:{},add:function(e,t,n,i,r){var o,a,s,l,c,u,d,h,f,p,m,g=Z.get(e);if(Y(e))for(n.handler&&(n=(o=n).handler,r=o.selector),r&&x.find.matchesSelector(ie,r),n.guid||(n.guid=x.guid++),(l=g.events)||(l=g.events=Object.create(null)),(a=g.handle)||(a=g.handle=function(t){return void 0!==x&&x.event.triggered!==t.type?x.event.dispatch.apply(e,arguments):void 0}),c=(t=(t||"").match(M)||[""]).length;c--;)f=m=(s=we.exec(t[c])||[])[1],p=(s[2]||"").split(".").sort(),f&&(d=x.event.special[f]||{},f=(r?d.delegateType:d.bindType)||f,d=x.event.special[f]||{},u=x.extend({type:f,origType:m,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&x.expr.match.needsContext.test(r),namespace:p.join(".")},o),(h=l[f])||((h=l[f]=[]).delegateCount=0,d.setup&&!1!==d.setup.call(e,i,p,a)||e.addEventListener&&e.addEventListener(f,a)),d.add&&(d.add.call(e,u),u.handler.guid||(u.handler.guid=n.guid)),r?h.splice(h.delegateCount++,0,u):h.push(u),x.event.global[f]=!0)},remove:function(e,t,n,i,r){var o,a,s,l,c,u,d,h,f,p,m,g=Z.hasData(e)&&Z.get(e);if(g&&(l=g.events)){for(c=(t=(t||"").match(M)||[""]).length;c--;)if(f=m=(s=we.exec(t[c])||[])[1],p=(s[2]||"").split(".").sort(),f){for(d=x.event.special[f]||{},h=l[f=(i?d.delegateType:d.bindType)||f]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=h.length;o--;)u=h[o],!r&&m!==u.origType||n&&n.guid!==u.guid||s&&!s.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(h.splice(o,1),u.selector&&h.delegateCount--,d.remove&&d.remove.call(e,u));a&&!h.length&&(d.teardown&&!1!==d.teardown.call(e,p,g.handle)||x.removeEvent(e,f,g.handle),delete l[f])}else for(f in l)x.event.remove(e,f+t[c],n,i,!0);x.isEmptyObject(l)&&Z.remove(e,"handle events")}},dispatch:function(e){var t,n,i,r,o,a,s=new Array(arguments.length),l=x.event.fix(e),c=(Z.get(this,"events")||Object.create(null))[l.type]||[],u=x.event.special[l.type]||{};for(s[0]=l,t=1;t<arguments.length;t++)s[t]=arguments[t];if(l.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,l)){for(a=x.event.handlers.call(this,l,c),t=0;(r=a[t++])&&!l.isPropagationStopped();)for(l.currentTarget=r.elem,n=0;(o=r.handlers[n++])&&!l.isImmediatePropagationStopped();)l.rnamespace&&!1!==o.namespace&&!l.rnamespace.test(o.namespace)||(l.handleObj=o,l.data=o.data,void 0!==(i=((x.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,s))&&!1===(l.result=i)&&(l.preventDefault(),l.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,l),l.result}},handlers:function(e,t){var n,i,r,o,a,s=[],l=t.delegateCount,c=e.target;if(l&&c.nodeType&&!("click"===e.type&&1<=e.button))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(o=[],a={},n=0;n<l;n++)void 0===a[r=(i=t[n]).selector+" "]&&(a[r]=i.needsContext?-1<x(r,this).index(c):x.find(r,this,null,[c]).length),a[r]&&o.push(i);o.length&&s.push({elem:c,handlers:o})}return c=this,l<t.length&&s.push({elem:c,handlers:t.slice(l)}),s},addProp:function(e,t){Object.defineProperty(x.Event.prototype,e,{enumerable:!0,configurable:!0,get:p(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[x.expando]?e:new x.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return he.test(t.type)&&t.click&&T(t,"input")&&Ee(t,"click",xe),!1},trigger:function(e){var t=this||e;return he.test(t.type)&&t.click&&T(t,"input")&&Ee(t,"click"),!0},_default:function(e){var t=e.target;return he.test(t.type)&&t.click&&T(t,"input")&&Z.get(t,"click")||T(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},x.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},x.Event=function(e,t){if(!(this instanceof x.Event))return new x.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?xe:Ce,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&x.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[x.expando]=!0},x.Event.prototype={constructor:x.Event,isDefaultPrevented:Ce,isPropagationStopped:Ce,isImmediatePropagationStopped:Ce,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=xe,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=xe,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=xe,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},x.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},x.event.addProp),x.each({focus:"focusin",blur:"focusout"},(function(e,t){x.event.special[e]={setup:function(){return Ee(this,e,_e),!1},trigger:function(){return Ee(this,e),!0},_default:function(){return!0},delegateType:t}})),x.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){x.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=e.relatedTarget,r=e.handleObj;return i&&(i===this||x.contains(this,i))||(e.type=r.origType,n=r.handler.apply(this,arguments),e.type=t),n}}})),x.fn.extend({on:function(e,t,n,i){return ke(this,e,t,n,i)},one:function(e,t,n,i){return ke(this,e,t,n,i,1)},off:function(e,t,n){var i,r;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,x(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Ce),this.each((function(){x.event.remove(this,e,n,t)}))}});var Se=/<script|<style|<link/i,Te=/checked\s*(?:[^=]|=\s*.checked.)/i,De=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function $e(e,t){return T(e,"table")&&T(11!==t.nodeType?t:t.firstChild,"tr")&&x(e).children("tbody")[0]||e}function Ae(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Pe(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function je(e,t){var n,i,r,o,a,s;if(1===t.nodeType){if(Z.hasData(e)&&(s=Z.get(e).events))for(r in Z.remove(t,"handle events"),s)for(n=0,i=s[r].length;n<i;n++)x.event.add(t,r,s[r][n]);Q.hasData(e)&&(o=Q.access(e),a=x.extend({},o),Q.set(t,a))}}function Oe(e,t,n,i){t=o(t);var r,a,s,l,c,u,d=0,h=e.length,m=h-1,g=t[0],v=p(g);if(v||1<h&&"string"==typeof g&&!f.checkClone&&Te.test(g))return e.each((function(r){var o=e.eq(r);v&&(t[0]=g.call(this,r,o.html())),Oe(o,t,n,i)}));if(h&&(a=(r=ye(t,e[0].ownerDocument,!1,e,i)).firstChild,1===r.childNodes.length&&(r=a),a||i)){for(l=(s=x.map(ge(r,"script"),Ae)).length;d<h;d++)c=r,d!==m&&(c=x.clone(c,!0,!0),l&&x.merge(s,ge(c,"script"))),n.call(e[d],c,d);if(l)for(u=s[s.length-1].ownerDocument,x.map(s,Pe),d=0;d<l;d++)c=s[d],pe.test(c.type||"")&&!Z.access(c,"globalEval")&&x.contains(u,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?x._evalUrl&&!c.noModule&&x._evalUrl(c.src,{nonce:c.nonce||c.getAttribute("nonce")},u):b(c.textContent.replace(De,""),c,u))}return e}function Ie(e,t,n){for(var i,r=t?x.filter(t,e):e,o=0;null!=(i=r[o]);o++)n||1!==i.nodeType||x.cleanData(ge(i)),i.parentNode&&(n&&re(i)&&ve(ge(i,"script")),i.parentNode.removeChild(i));return e}x.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var i,r,o,a,s,l,c,u=e.cloneNode(!0),d=re(e);if(!(f.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||x.isXMLDoc(e)))for(a=ge(u),i=0,r=(o=ge(e)).length;i<r;i++)s=o[i],"input"===(c=(l=a[i]).nodeName.toLowerCase())&&he.test(s.type)?l.checked=s.checked:"input"!==c&&"textarea"!==c||(l.defaultValue=s.defaultValue);if(t)if(n)for(o=o||ge(e),a=a||ge(u),i=0,r=o.length;i<r;i++)je(o[i],a[i]);else je(e,u);return 0<(a=ge(u,"script")).length&&ve(a,!d&&ge(e,"script")),u},cleanData:function(e){for(var t,n,i,r=x.event.special,o=0;void 0!==(n=e[o]);o++)if(Y(n)){if(t=n[Z.expando]){if(t.events)for(i in t.events)r[i]?x.event.remove(n,i):x.removeEvent(n,i,t.handle);n[Z.expando]=void 0}n[Q.expando]&&(n[Q.expando]=void 0)}}}),x.fn.extend({detach:function(e){return Ie(this,e,!0)},remove:function(e){return Ie(this,e)},text:function(e){return B(this,(function(e){return void 0===e?x.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return Oe(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||$e(this,e).appendChild(e)}))},prepend:function(){return Oe(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=$e(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return Oe(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return Oe(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(x.cleanData(ge(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return x.clone(this,e,t)}))},html:function(e){return B(this,(function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Se.test(e)&&!me[(fe.exec(e)||["",""])[1].toLowerCase()]){e=x.htmlPrefilter(e);try{for(;n<i;n++)1===(t=this[n]||{}).nodeType&&(x.cleanData(ge(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return Oe(this,arguments,(function(t){var n=this.parentNode;x.inArray(this,e)<0&&(x.cleanData(ge(this)),n&&n.replaceChild(t,this))}),e)}}),x.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){x.fn[e]=function(e){for(var n,i=[],r=x(e),o=r.length-1,s=0;s<=o;s++)n=s===o?this:this.clone(!0),x(r[s])[t](n),a.apply(i,n.get());return this.pushStack(i)}}));var Me=new RegExp("^("+ee+")(?!px)[a-z%]+$","i"),Ne=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)},Fe=function(e,t,n){var i,r,o={};for(r in t)o[r]=e.style[r],e.style[r]=t[r];for(r in i=n.call(e),t)e.style[r]=o[r];return i},Re=new RegExp(ne.join("|"),"i");function Le(e,t,n){var i,r,o,a,s=e.style;return(n=n||Ne(e))&&(""!==(a=n.getPropertyValue(t)||n[t])||re(e)||(a=x.style(e,t)),!f.pixelBoxStyles()&&Me.test(a)&&Re.test(t)&&(i=s.width,r=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=i,s.minWidth=r,s.maxWidth=o)),void 0!==a?a+"":a}function ze(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function t(){if(u){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ie.appendChild(c).appendChild(u);var t=e.getComputedStyle(u);i="1%"!==t.top,l=12===n(t.marginLeft),u.style.right="60%",a=36===n(t.right),r=36===n(t.width),u.style.position="absolute",o=12===n(u.offsetWidth/3),ie.removeChild(c),u=null}}function n(e){return Math.round(parseFloat(e))}var i,r,o,a,s,l,c=g.createElement("div"),u=g.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",f.clearCloneStyle="content-box"===u.style.backgroundClip,x.extend(f,{boxSizingReliable:function(){return t(),r},pixelBoxStyles:function(){return t(),a},pixelPosition:function(){return t(),i},reliableMarginLeft:function(){return t(),l},scrollboxSize:function(){return t(),o},reliableTrDimensions:function(){var t,n,i,r;return null==s&&(t=g.createElement("table"),n=g.createElement("tr"),i=g.createElement("div"),t.style.cssText="position:absolute;left:-11111px;border-collapse:separate",n.style.cssText="border:1px solid",n.style.height="1px",i.style.height="9px",i.style.display="block",ie.appendChild(t).appendChild(n).appendChild(i),r=e.getComputedStyle(n),s=parseInt(r.height,10)+parseInt(r.borderTopWidth,10)+parseInt(r.borderBottomWidth,10)===n.offsetHeight,ie.removeChild(t)),s}}))}();var He=["Webkit","Moz","ms"],Be=g.createElement("div").style,qe={};function Ue(e){return x.cssProps[e]||qe[e]||(e in Be?e:qe[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),n=He.length;n--;)if((e=He[n]+t)in Be)return e}(e)||e)}var We=/^(none|table(?!-c[ea]).+)/,Ve=/^--/,Ye={position:"absolute",visibility:"hidden",display:"block"},Ge={letterSpacing:"0",fontWeight:"400"};function Ze(e,t,n){var i=te.exec(t);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):t}function Qe(e,t,n,i,r,o){var a="width"===t?1:0,s=0,l=0;if(n===(i?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(l+=x.css(e,n+ne[a],!0,r)),i?("content"===n&&(l-=x.css(e,"padding"+ne[a],!0,r)),"margin"!==n&&(l-=x.css(e,"border"+ne[a]+"Width",!0,r))):(l+=x.css(e,"padding"+ne[a],!0,r),"padding"!==n?l+=x.css(e,"border"+ne[a]+"Width",!0,r):s+=x.css(e,"border"+ne[a]+"Width",!0,r));return!i&&0<=o&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-l-s-.5))||0),l}function Ke(e,t,n){var i=Ne(e),r=(!f.boxSizingReliable()||n)&&"border-box"===x.css(e,"boxSizing",!1,i),o=r,a=Le(e,t,i),s="offset"+t[0].toUpperCase()+t.slice(1);if(Me.test(a)){if(!n)return a;a="auto"}return(!f.boxSizingReliable()&&r||!f.reliableTrDimensions()&&T(e,"tr")||"auto"===a||!parseFloat(a)&&"inline"===x.css(e,"display",!1,i))&&e.getClientRects().length&&(r="border-box"===x.css(e,"boxSizing",!1,i),(o=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+Qe(e,t,n||(r?"border":"content"),o,i,a)+"px"}function Je(e,t,n,i,r){return new Je.prototype.init(e,t,n,i,r)}x.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Le(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,o,a,s=V(t),l=Ve.test(t),c=e.style;if(l||(t=Ue(s)),a=x.cssHooks[t]||x.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(r=a.get(e,!1,i))?r:c[t];"string"==(o=typeof n)&&(r=te.exec(n))&&r[1]&&(n=se(e,t,r),o="number"),null!=n&&n==n&&("number"!==o||l||(n+=r&&r[3]||(x.cssNumber[s]?"":"px")),f.clearCloneStyle||""!==n||0!==t.indexOf("background")||(c[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,i))||(l?c.setProperty(t,n):c[t]=n))}},css:function(e,t,n,i){var r,o,a,s=V(t);return Ve.test(t)||(t=Ue(s)),(a=x.cssHooks[t]||x.cssHooks[s])&&"get"in a&&(r=a.get(e,!0,n)),void 0===r&&(r=Le(e,t,i)),"normal"===r&&t in Ge&&(r=Ge[t]),""===n||n?(o=parseFloat(r),!0===n||isFinite(o)?o||0:r):r}}),x.each(["height","width"],(function(e,t){x.cssHooks[t]={get:function(e,n,i){if(n)return!We.test(x.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?Ke(e,t,i):Fe(e,Ye,(function(){return Ke(e,t,i)}))},set:function(e,n,i){var r,o=Ne(e),a=!f.scrollboxSize()&&"absolute"===o.position,s=(a||i)&&"border-box"===x.css(e,"boxSizing",!1,o),l=i?Qe(e,t,i,s,o):0;return s&&a&&(l-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(o[t])-Qe(e,t,"border",!1,o)-.5)),l&&(r=te.exec(n))&&"px"!==(r[3]||"px")&&(e.style[t]=n,n=x.css(e,t)),Ze(0,n,l)}}})),x.cssHooks.marginLeft=ze(f.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(Le(e,"marginLeft"))||e.getBoundingClientRect().left-Fe(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),x.each({margin:"",padding:"",border:"Width"},(function(e,t){x.cssHooks[e+t]={expand:function(n){for(var i=0,r={},o="string"==typeof n?n.split(" "):[n];i<4;i++)r[e+ne[i]+t]=o[i]||o[i-2]||o[0];return r}},"margin"!==e&&(x.cssHooks[e+t].set=Ze)})),x.fn.extend({css:function(e,t){return B(this,(function(e,t,n){var i,r,o={},a=0;if(Array.isArray(t)){for(i=Ne(e),r=t.length;a<r;a++)o[t[a]]=x.css(e,t[a],!1,i);return o}return void 0!==n?x.style(e,t,n):x.css(e,t)}),e,t,1<arguments.length)}}),((x.Tween=Je).prototype={constructor:Je,init:function(e,t,n,i,r,o){this.elem=e,this.prop=n,this.easing=r||x.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=o||(x.cssNumber[n]?"":"px")},cur:function(){var e=Je.propHooks[this.prop];return e&&e.get?e.get(this):Je.propHooks._default.get(this)},run:function(e){var t,n=Je.propHooks[this.prop];return this.options.duration?this.pos=t=x.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Je.propHooks._default.set(this),this}}).init.prototype=Je.prototype,(Je.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=x.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){x.fx.step[e.prop]?x.fx.step[e.prop](e):1!==e.elem.nodeType||!x.cssHooks[e.prop]&&null==e.elem.style[Ue(e.prop)]?e.elem[e.prop]=e.now:x.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=Je.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},x.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},x.fx=Je.prototype.init,x.fx.step={};var Xe,et,tt,nt,it=/^(?:toggle|show|hide)$/,rt=/queueHooks$/;function ot(){et&&(!1===g.hidden&&e.requestAnimationFrame?e.requestAnimationFrame(ot):e.setTimeout(ot,x.fx.interval),x.fx.tick())}function at(){return e.setTimeout((function(){Xe=void 0})),Xe=Date.now()}function st(e,t){var n,i=0,r={height:e};for(t=t?1:0;i<4;i+=2-t)r["margin"+(n=ne[i])]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function lt(e,t,n){for(var i,r=(ct.tweeners[t]||[]).concat(ct.tweeners["*"]),o=0,a=r.length;o<a;o++)if(i=r[o].call(n,t,e))return i}function ct(e,t,n){var i,r,o=0,a=ct.prefilters.length,s=x.Deferred().always((function(){delete l.elem})),l=function(){if(r)return!1;for(var t=Xe||at(),n=Math.max(0,c.startTime+c.duration-t),i=1-(n/c.duration||0),o=0,a=c.tweens.length;o<a;o++)c.tweens[o].run(i);return s.notifyWith(e,[c,i,n]),i<1&&a?n:(a||s.notifyWith(e,[c,1,0]),s.resolveWith(e,[c]),!1)},c=s.promise({elem:e,props:x.extend({},t),opts:x.extend(!0,{specialEasing:{},easing:x.easing._default},n),originalProperties:t,originalOptions:n,startTime:Xe||at(),duration:n.duration,tweens:[],createTween:function(t,n){var i=x.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(i),i},stop:function(t){var n=0,i=t?c.tweens.length:0;if(r)return this;for(r=!0;n<i;n++)c.tweens[n].run(1);return t?(s.notifyWith(e,[c,1,0]),s.resolveWith(e,[c,t])):s.rejectWith(e,[c,t]),this}}),u=c.props;for(function(e,t){var n,i,r,o,a;for(n in e)if(r=t[i=V(n)],o=e[n],Array.isArray(o)&&(r=o[1],o=e[n]=o[0]),n!==i&&(e[i]=o,delete e[n]),(a=x.cssHooks[i])&&"expand"in a)for(n in o=a.expand(o),delete e[i],o)n in e||(e[n]=o[n],t[n]=r);else t[i]=r}(u,c.opts.specialEasing);o<a;o++)if(i=ct.prefilters[o].call(c,e,u,c.opts))return p(i.stop)&&(x._queueHooks(c.elem,c.opts.queue).stop=i.stop.bind(i)),i;return x.map(u,lt,c),p(c.opts.start)&&c.opts.start.call(e,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),x.fx.timer(x.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c}x.Animation=x.extend(ct,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return se(n.elem,e,te.exec(t),n),n}]},tweener:function(e,t){p(e)?(t=e,e=["*"]):e=e.match(M);for(var n,i=0,r=e.length;i<r;i++)n=e[i],ct.tweeners[n]=ct.tweeners[n]||[],ct.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var i,r,o,a,s,l,c,u,d="width"in t||"height"in t,h=this,f={},p=e.style,m=e.nodeType&&ae(e),g=Z.get(e,"fxshow");for(i in n.queue||(null==(a=x._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,h.always((function(){h.always((function(){a.unqueued--,x.queue(e,"fx").length||a.empty.fire()}))}))),t)if(r=t[i],it.test(r)){if(delete t[i],o=o||"toggle"===r,r===(m?"hide":"show")){if("show"!==r||!g||void 0===g[i])continue;m=!0}f[i]=g&&g[i]||x.style(e,i)}if((l=!x.isEmptyObject(t))||!x.isEmptyObject(f))for(i in d&&1===e.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(c=g&&g.display)&&(c=Z.get(e,"display")),"none"===(u=x.css(e,"display"))&&(c?u=c:(ce([e],!0),c=e.style.display||c,u=x.css(e,"display"),ce([e]))),("inline"===u||"inline-block"===u&&null!=c)&&"none"===x.css(e,"float")&&(l||(h.done((function(){p.display=c})),null==c&&(u=p.display,c="none"===u?"":u)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",h.always((function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}))),l=!1,f)l||(g?"hidden"in g&&(m=g.hidden):g=Z.access(e,"fxshow",{display:c}),o&&(g.hidden=!m),m&&ce([e],!0),h.done((function(){for(i in m||ce([e]),Z.remove(e,"fxshow"),f)x.style(e,i,f[i])}))),l=lt(m?g[i]:0,i,h),i in g||(g[i]=l.start,m&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?ct.prefilters.unshift(e):ct.prefilters.push(e)}}),x.speed=function(e,t,n){var i=e&&"object"==typeof e?x.extend({},e):{complete:n||!n&&t||p(e)&&e,duration:e,easing:n&&t||t&&!p(t)&&t};return x.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in x.fx.speeds?i.duration=x.fx.speeds[i.duration]:i.duration=x.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){p(i.old)&&i.old.call(this),i.queue&&x.dequeue(this,i.queue)},i},x.fn.extend({fadeTo:function(e,t,n,i){return this.filter(ae).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var r=x.isEmptyObject(e),o=x.speed(t,n,i),a=function(){var t=ct(this,x.extend({},e),o);(r||Z.get(this,"finish"))&&t.stop(!0)};return a.finish=a,r||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each((function(){var t=!0,r=null!=e&&e+"queueHooks",o=x.timers,a=Z.get(this);if(r)a[r]&&a[r].stop&&i(a[r]);else for(r in a)a[r]&&a[r].stop&&rt.test(r)&&i(a[r]);for(r=o.length;r--;)o[r].elem!==this||null!=e&&o[r].queue!==e||(o[r].anim.stop(n),t=!1,o.splice(r,1));!t&&n||x.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,n=Z.get(this),i=n[e+"queue"],r=n[e+"queueHooks"],o=x.timers,a=i?i.length:0;for(n.finish=!0,x.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<a;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish}))}}),x.each(["toggle","show","hide"],(function(e,t){var n=x.fn[t];x.fn[t]=function(e,i,r){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(st(t,!0),e,i,r)}})),x.each({slideDown:st("show"),slideUp:st("hide"),slideToggle:st("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){x.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}})),x.timers=[],x.fx.tick=function(){var e,t=0,n=x.timers;for(Xe=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||x.fx.stop(),Xe=void 0},x.fx.timer=function(e){x.timers.push(e),x.fx.start()},x.fx.interval=13,x.fx.start=function(){et||(et=!0,ot())},x.fx.stop=function(){et=null},x.fx.speeds={slow:600,fast:200,_default:400},x.fn.delay=function(t,n){return t=x.fx&&x.fx.speeds[t]||t,n=n||"fx",this.queue(n,(function(n,i){var r=e.setTimeout(n,t);i.stop=function(){e.clearTimeout(r)}}))},tt=g.createElement("input"),nt=g.createElement("select").appendChild(g.createElement("option")),tt.type="checkbox",f.checkOn=""!==tt.value,f.optSelected=nt.selected,(tt=g.createElement("input")).value="t",tt.type="radio",f.radioValue="t"===tt.value;var ut,dt=x.expr.attrHandle;x.fn.extend({attr:function(e,t){return B(this,x.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each((function(){x.removeAttr(this,e)}))}}),x.extend({attr:function(e,t,n){var i,r,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?x.prop(e,t,n):(1===o&&x.isXMLDoc(e)||(r=x.attrHooks[t.toLowerCase()]||(x.expr.match.bool.test(t)?ut:void 0)),void 0!==n?null===n?void x.removeAttr(e,t):r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:(e.setAttribute(t,n+""),n):r&&"get"in r&&null!==(i=r.get(e,t))?i:null==(i=x.find.attr(e,t))?void 0:i)},attrHooks:{type:{set:function(e,t){if(!f.radioValue&&"radio"===t&&T(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,i=0,r=t&&t.match(M);if(r&&1===e.nodeType)for(;n=r[i++];)e.removeAttribute(n)}}),ut={set:function(e,t,n){return!1===t?x.removeAttr(e,n):e.setAttribute(n,n),n}},x.each(x.expr.match.bool.source.match(/\w+/g),(function(e,t){var n=dt[t]||x.find.attr;dt[t]=function(e,t,i){var r,o,a=t.toLowerCase();return i||(o=dt[a],dt[a]=r,r=null!=n(e,t,i)?a:null,dt[a]=o),r}}));var ht=/^(?:input|select|textarea|button)$/i,ft=/^(?:a|area)$/i;function pt(e){return(e.match(M)||[]).join(" ")}function mt(e){return e.getAttribute&&e.getAttribute("class")||""}function gt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(M)||[]}x.fn.extend({prop:function(e,t){return B(this,x.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each((function(){delete this[x.propFix[e]||e]}))}}),x.extend({prop:function(e,t,n){var i,r,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&x.isXMLDoc(e)||(t=x.propFix[t]||t,r=x.propHooks[t]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:e[t]=n:r&&"get"in r&&null!==(i=r.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=x.find.attr(e,"tabindex");return t?parseInt(t,10):ht.test(e.nodeName)||ft.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),f.optSelected||(x.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),x.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){x.propFix[this.toLowerCase()]=this})),x.fn.extend({addClass:function(e){var t,n,i,r,o,a,s,l=0;if(p(e))return this.each((function(t){x(this).addClass(e.call(this,t,mt(this)))}));if((t=gt(e)).length)for(;n=this[l++];)if(r=mt(n),i=1===n.nodeType&&" "+pt(r)+" "){for(a=0;o=t[a++];)i.indexOf(" "+o+" ")<0&&(i+=o+" ");r!==(s=pt(i))&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,i,r,o,a,s,l=0;if(p(e))return this.each((function(t){x(this).removeClass(e.call(this,t,mt(this)))}));if(!arguments.length)return this.attr("class","");if((t=gt(e)).length)for(;n=this[l++];)if(r=mt(n),i=1===n.nodeType&&" "+pt(r)+" "){for(a=0;o=t[a++];)for(;-1<i.indexOf(" "+o+" ");)i=i.replace(" "+o+" "," ");r!==(s=pt(i))&&n.setAttribute("class",s)}return this},toggleClass:function(e,t){var n=typeof e,i="string"===n||Array.isArray(e);return"boolean"==typeof t&&i?t?this.addClass(e):this.removeClass(e):p(e)?this.each((function(n){x(this).toggleClass(e.call(this,n,mt(this),t),t)})):this.each((function(){var t,r,o,a;if(i)for(r=0,o=x(this),a=gt(e);t=a[r++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else void 0!==e&&"boolean"!==n||((t=mt(this))&&Z.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":Z.get(this,"__className__")||""))}))},hasClass:function(e){var t,n,i=0;for(t=" "+e+" ";n=this[i++];)if(1===n.nodeType&&-1<(" "+pt(mt(n))+" ").indexOf(t))return!0;return!1}});var vt=/\r/g;x.fn.extend({val:function(e){var t,n,i,r=this[0];return arguments.length?(i=p(e),this.each((function(n){var r;1===this.nodeType&&(null==(r=i?e.call(this,n,x(this).val()):e)?r="":"number"==typeof r?r+="":Array.isArray(r)&&(r=x.map(r,(function(e){return null==e?"":e+""}))),(t=x.valHooks[this.type]||x.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))}))):r?(t=x.valHooks[r.type]||x.valHooks[r.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(r,"value"))?n:"string"==typeof(n=r.value)?n.replace(vt,""):null==n?"":n:void 0}}),x.extend({valHooks:{option:{get:function(e){var t=x.find.attr(e,"value");return null!=t?t:pt(x.text(e))}},select:{get:function(e){var t,n,i,r=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],l=a?o+1:r.length;for(i=o<0?l:a?o:0;i<l;i++)if(((n=r[i]).selected||i===o)&&!n.disabled&&(!n.parentNode.disabled||!T(n.parentNode,"optgroup"))){if(t=x(n).val(),a)return t;s.push(t)}return s},set:function(e,t){for(var n,i,r=e.options,o=x.makeArray(t),a=r.length;a--;)((i=r[a]).selected=-1<x.inArray(x.valHooks.option.get(i),o))&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),x.each(["radio","checkbox"],(function(){x.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<x.inArray(x(e).val(),t)}},f.checkOn||(x.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})})),f.focusin="onfocusin"in e;var bt=/^(?:focusinfocus|focusoutblur)$/,yt=function(e){e.stopPropagation()};x.extend(x.event,{trigger:function(t,n,i,r){var o,a,s,l,c,d,h,f,v=[i||g],b=u.call(t,"type")?t.type:t,y=u.call(t,"namespace")?t.namespace.split("."):[];if(a=f=s=i=i||g,3!==i.nodeType&&8!==i.nodeType&&!bt.test(b+x.event.triggered)&&(-1<b.indexOf(".")&&(b=(y=b.split(".")).shift(),y.sort()),c=b.indexOf(":")<0&&"on"+b,(t=t[x.expando]?t:new x.Event(b,"object"==typeof t&&t)).isTrigger=r?2:3,t.namespace=y.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+y.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),n=null==n?[t]:x.makeArray(n,[t]),h=x.event.special[b]||{},r||!h.trigger||!1!==h.trigger.apply(i,n))){if(!r&&!h.noBubble&&!m(i)){for(l=h.delegateType||b,bt.test(l+b)||(a=a.parentNode);a;a=a.parentNode)v.push(a),s=a;s===(i.ownerDocument||g)&&v.push(s.defaultView||s.parentWindow||e)}for(o=0;(a=v[o++])&&!t.isPropagationStopped();)f=a,t.type=1<o?l:h.bindType||b,(d=(Z.get(a,"events")||Object.create(null))[t.type]&&Z.get(a,"handle"))&&d.apply(a,n),(d=c&&a[c])&&d.apply&&Y(a)&&(t.result=d.apply(a,n),!1===t.result&&t.preventDefault());return t.type=b,r||t.isDefaultPrevented()||h._default&&!1!==h._default.apply(v.pop(),n)||!Y(i)||c&&p(i[b])&&!m(i)&&((s=i[c])&&(i[c]=null),x.event.triggered=b,t.isPropagationStopped()&&f.addEventListener(b,yt),i[b](),t.isPropagationStopped()&&f.removeEventListener(b,yt),x.event.triggered=void 0,s&&(i[c]=s)),t.result}},simulate:function(e,t,n){var i=x.extend(new x.Event,n,{type:e,isSimulated:!0});x.event.trigger(i,null,t)}}),x.fn.extend({trigger:function(e,t){return this.each((function(){x.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var n=this[0];if(n)return x.event.trigger(e,t,n,!0)}}),f.focusin||x.each({focus:"focusin",blur:"focusout"},(function(e,t){var n=function(e){x.event.simulate(t,e.target,x.event.fix(e))};x.event.special[t]={setup:function(){var i=this.ownerDocument||this.document||this,r=Z.access(i,t);r||i.addEventListener(e,n,!0),Z.access(i,t,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this.document||this,r=Z.access(i,t)-1;r?Z.access(i,t,r):(i.removeEventListener(e,n,!0),Z.remove(i,t))}}}));var wt=e.location,xt={guid:Date.now()},Ct=/\?/;x.parseXML=function(t){var n,i;if(!t||"string"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(t){}return i=n&&n.getElementsByTagName("parsererror")[0],n&&!i||x.error("Invalid XML: "+(i?x.map(i.childNodes,(function(e){return e.textContent})).join("\n"):t)),n};var _t=/\[\]$/,kt=/\r?\n/g,Et=/^(?:submit|button|image|reset|file)$/i,St=/^(?:input|select|textarea|keygen)/i;function Tt(e,t,n,i){var r;if(Array.isArray(t))x.each(t,(function(t,r){n||_t.test(e)?i(e,r):Tt(e+"["+("object"==typeof r&&null!=r?t:"")+"]",r,n,i)}));else if(n||"object"!==y(t))i(e,t);else for(r in t)Tt(e+"["+r+"]",t[r],n,i)}x.param=function(e,t){var n,i=[],r=function(e,t){var n=p(t)?t():t;i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!x.isPlainObject(e))x.each(e,(function(){r(this.name,this.value)}));else for(n in e)Tt(n,e[n],t,r);return i.join("&")},x.fn.extend({serialize:function(){return x.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=x.prop(this,"elements");return e?x.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!x(this).is(":disabled")&&St.test(this.nodeName)&&!Et.test(e)&&(this.checked||!he.test(e))})).map((function(e,t){var n=x(this).val();return null==n?null:Array.isArray(n)?x.map(n,(function(e){return{name:t.name,value:e.replace(kt,"\r\n")}})):{name:t.name,value:n.replace(kt,"\r\n")}})).get()}});var Dt=/%20/g,$t=/#.*$/,At=/([?&])_=[^&]*/,Pt=/^(.*?):[ \t]*([^\r\n]*)$/gm,jt=/^(?:GET|HEAD)$/,Ot=/^\/\//,It={},Mt={},Nt="*/".concat("*"),Ft=g.createElement("a");function Rt(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,r=0,o=t.toLowerCase().match(M)||[];if(p(n))for(;i=o[r++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function Lt(e,t,n,i){var r={},o=e===Mt;function a(s){var l;return r[s]=!0,x.each(e[s]||[],(function(e,s){var c=s(t,n,i);return"string"!=typeof c||o||r[c]?o?!(l=c):void 0:(t.dataTypes.unshift(c),a(c),!1)})),l}return a(t.dataTypes[0])||!r["*"]&&a("*")}function zt(e,t){var n,i,r=x.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((r[n]?e:i||(i={}))[n]=t[n]);return i&&x.extend(!0,e,i),e}Ft.href=wt.href,x.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:wt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(wt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Nt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":x.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?zt(zt(e,x.ajaxSettings),t):zt(x.ajaxSettings,e)},ajaxPrefilter:Rt(It),ajaxTransport:Rt(Mt),ajax:function(t,n){"object"==typeof t&&(n=t,t=void 0),n=n||{};var i,r,o,a,s,l,c,u,d,h,f=x.ajaxSetup({},n),p=f.context||f,m=f.context&&(p.nodeType||p.jquery)?x(p):x.event,v=x.Deferred(),b=x.Callbacks("once memory"),y=f.statusCode||{},w={},C={},_="canceled",k={readyState:0,getResponseHeader:function(e){var t;if(c){if(!a)for(a={};t=Pt.exec(o);)a[t[1].toLowerCase()+" "]=(a[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=a[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return c?o:null},setRequestHeader:function(e,t){return null==c&&(e=C[e.toLowerCase()]=C[e.toLowerCase()]||e,w[e]=t),this},overrideMimeType:function(e){return null==c&&(f.mimeType=e),this},statusCode:function(e){var t;if(e)if(c)k.always(e[k.status]);else for(t in e)y[t]=[y[t],e[t]];return this},abort:function(e){var t=e||_;return i&&i.abort(t),E(0,t),this}};if(v.promise(k),f.url=((t||f.url||wt.href)+"").replace(Ot,wt.protocol+"//"),f.type=n.method||n.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(M)||[""],null==f.crossDomain){l=g.createElement("a");try{l.href=f.url,l.href=l.href,f.crossDomain=Ft.protocol+"//"+Ft.host!=l.protocol+"//"+l.host}catch(t){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=x.param(f.data,f.traditional)),Lt(It,f,n,k),c)return k;for(d in(u=x.event&&f.global)&&0==x.active++&&x.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!jt.test(f.type),r=f.url.replace($t,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(Dt,"+")):(h=f.url.slice(r.length),f.data&&(f.processData||"string"==typeof f.data)&&(r+=(Ct.test(r)?"&":"?")+f.data,delete f.data),!1===f.cache&&(r=r.replace(At,"$1"),h=(Ct.test(r)?"&":"?")+"_="+xt.guid+++h),f.url=r+h),f.ifModified&&(x.lastModified[r]&&k.setRequestHeader("If-Modified-Since",x.lastModified[r]),x.etag[r]&&k.setRequestHeader("If-None-Match",x.etag[r])),(f.data&&f.hasContent&&!1!==f.contentType||n.contentType)&&k.setRequestHeader("Content-Type",f.contentType),k.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Nt+"; q=0.01":""):f.accepts["*"]),f.headers)k.setRequestHeader(d,f.headers[d]);if(f.beforeSend&&(!1===f.beforeSend.call(p,k,f)||c))return k.abort();if(_="abort",b.add(f.complete),k.done(f.success),k.fail(f.error),i=Lt(Mt,f,n,k)){if(k.readyState=1,u&&m.trigger("ajaxSend",[k,f]),c)return k;f.async&&0<f.timeout&&(s=e.setTimeout((function(){k.abort("timeout")}),f.timeout));try{c=!1,i.send(w,E)}catch(t){if(c)throw t;E(-1,t)}}else E(-1,"No Transport");function E(t,n,a,l){var d,h,g,w,C,_=n;c||(c=!0,s&&e.clearTimeout(s),i=void 0,o=l||"",k.readyState=0<t?4:0,d=200<=t&&t<300||304===t,a&&(w=function(e,t,n){for(var i,r,o,a,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(r in s)if(s[r]&&s[r].test(i)){l.unshift(r);break}if(l[0]in n)o=l[0];else{for(r in n){if(!l[0]||e.converters[r+" "+l[0]]){o=r;break}a||(a=r)}o=o||a}if(o)return o!==l[0]&&l.unshift(o),n[o]}(f,k,a)),!d&&-1<x.inArray("script",f.dataTypes)&&x.inArray("json",f.dataTypes)<0&&(f.converters["text script"]=function(){}),w=function(e,t,n,i){var r,o,a,s,l,c={},u=e.dataTypes.slice();if(u[1])for(a in e.converters)c[a.toLowerCase()]=e.converters[a];for(o=u.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=u.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(a=c[l+" "+o]||c["* "+o]))for(r in c)if((s=r.split(" "))[1]===o&&(a=c[l+" "+s[0]]||c["* "+s[0]])){!0===a?a=c[r]:!0!==c[r]&&(o=s[0],u.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}(f,w,k,d),d?(f.ifModified&&((C=k.getResponseHeader("Last-Modified"))&&(x.lastModified[r]=C),(C=k.getResponseHeader("etag"))&&(x.etag[r]=C)),204===t||"HEAD"===f.type?_="nocontent":304===t?_="notmodified":(_=w.state,h=w.data,d=!(g=w.error))):(g=_,!t&&_||(_="error",t<0&&(t=0))),k.status=t,k.statusText=(n||_)+"",d?v.resolveWith(p,[h,_,k]):v.rejectWith(p,[k,_,g]),k.statusCode(y),y=void 0,u&&m.trigger(d?"ajaxSuccess":"ajaxError",[k,f,d?h:g]),b.fireWith(p,[k,_]),u&&(m.trigger("ajaxComplete",[k,f]),--x.active||x.event.trigger("ajaxStop")))}return k},getJSON:function(e,t,n){return x.get(e,t,n,"json")},getScript:function(e,t){return x.get(e,void 0,t,"script")}}),x.each(["get","post"],(function(e,t){x[t]=function(e,n,i,r){return p(n)&&(r=r||i,i=n,n=void 0),x.ajax(x.extend({url:e,type:t,dataType:r,data:n,success:i},x.isPlainObject(e)&&e))}})),x.ajaxPrefilter((function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")})),x._evalUrl=function(e,t,n){return x.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){x.globalEval(e,t,n)}})},x.fn.extend({wrapAll:function(e){var t;return this[0]&&(p(e)&&(e=e.call(this[0])),t=x(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return p(e)?this.each((function(t){x(this).wrapInner(e.call(this,t))})):this.each((function(){var t=x(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)}))},wrap:function(e){var t=p(e);return this.each((function(n){x(this).wrapAll(t?e.call(this,n):e)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){x(this).replaceWith(this.childNodes)})),this}}),x.expr.pseudos.hidden=function(e){return!x.expr.pseudos.visible(e)},x.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},x.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var Ht={0:200,1223:204},Bt=x.ajaxSettings.xhr();f.cors=!!Bt&&"withCredentials"in Bt,f.ajax=Bt=!!Bt,x.ajaxTransport((function(t){var n,i;if(f.cors||Bt&&!t.crossDomain)return{send:function(r,o){var a,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)s[a]=t.xhrFields[a];for(a in t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest"),r)s.setRequestHeader(a,r[a]);n=function(e){return function(){n&&(n=i=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(Ht[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=n(),i=s.onerror=s.ontimeout=n("error"),void 0!==s.onabort?s.onabort=i:s.onreadystatechange=function(){4===s.readyState&&e.setTimeout((function(){n&&i()}))},n=n("abort");try{s.send(t.hasContent&&t.data||null)}catch(r){if(n)throw r}},abort:function(){n&&n()}}})),x.ajaxPrefilter((function(e){e.crossDomain&&(e.contents.script=!1)})),x.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return x.globalEval(e),e}}}),x.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),x.ajaxTransport("script",(function(e){var t,n;if(e.crossDomain||e.scriptAttrs)return{send:function(i,r){t=x("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&r("error"===e.type?404:200,e.type)}),g.head.appendChild(t[0])},abort:function(){n&&n()}}}));var qt,Ut=[],Wt=/(=)\?(?=&|$)|\?\?/;x.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Ut.pop()||x.expando+"_"+xt.guid++;return this[e]=!0,e}}),x.ajaxPrefilter("json jsonp",(function(t,n,i){var r,o,a,s=!1!==t.jsonp&&(Wt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Wt.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return r=t.jsonpCallback=p(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Wt,"$1"+r):!1!==t.jsonp&&(t.url+=(Ct.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return a||x.error(r+" was not called"),a[0]},t.dataTypes[0]="json",o=e[r],e[r]=function(){a=arguments},i.always((function(){void 0===o?x(e).removeProp(r):e[r]=o,t[r]&&(t.jsonpCallback=n.jsonpCallback,Ut.push(r)),a&&p(o)&&o(a[0]),a=o=void 0})),"script"})),f.createHTMLDocument=((qt=g.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===qt.childNodes.length),x.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(f.createHTMLDocument?((i=(t=g.implementation.createHTMLDocument("")).createElement("base")).href=g.location.href,t.head.appendChild(i)):t=g),o=!n&&[],(r=D.exec(e))?[t.createElement(r[1])]:(r=ye([e],t,o),o&&o.length&&x(o).remove(),x.merge([],r.childNodes)));var i,r,o},x.fn.load=function(e,t,n){var i,r,o,a=this,s=e.indexOf(" ");return-1<s&&(i=pt(e.slice(s)),e=e.slice(0,s)),p(t)?(n=t,t=void 0):t&&"object"==typeof t&&(r="POST"),0<a.length&&x.ajax({url:e,type:r||"GET",dataType:"html",data:t}).done((function(e){o=arguments,a.html(i?x("<div>").append(x.parseHTML(e)).find(i):e)})).always(n&&function(e,t){a.each((function(){n.apply(this,o||[e.responseText,t,e])}))}),this},x.expr.pseudos.animated=function(e){return x.grep(x.timers,(function(t){return e===t.elem})).length},x.offset={setOffset:function(e,t,n){var i,r,o,a,s,l,c=x.css(e,"position"),u=x(e),d={};"static"===c&&(e.style.position="relative"),s=u.offset(),o=x.css(e,"top"),l=x.css(e,"left"),("absolute"===c||"fixed"===c)&&-1<(o+l).indexOf("auto")?(a=(i=u.position()).top,r=i.left):(a=parseFloat(o)||0,r=parseFloat(l)||0),p(t)&&(t=t.call(e,n,x.extend({},s))),null!=t.top&&(d.top=t.top-s.top+a),null!=t.left&&(d.left=t.left-s.left+r),"using"in t?t.using.call(e,d):u.css(d)}},x.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){x.offset.setOffset(this,e,t)}));var t,n,i=this[0];return i?i.getClientRects().length?(t=i.getBoundingClientRect(),n=i.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,i=this[0],r={top:0,left:0};if("fixed"===x.css(i,"position"))t=i.getBoundingClientRect();else{for(t=this.offset(),n=i.ownerDocument,e=i.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===x.css(e,"position");)e=e.parentNode;e&&e!==i&&1===e.nodeType&&((r=x(e).offset()).top+=x.css(e,"borderTopWidth",!0),r.left+=x.css(e,"borderLeftWidth",!0))}return{top:t.top-r.top-x.css(i,"marginTop",!0),left:t.left-r.left-x.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===x.css(e,"position");)e=e.offsetParent;return e||ie}))}}),x.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var n="pageYOffset"===t;x.fn[e]=function(i){return B(this,(function(e,i,r){var o;if(m(e)?o=e:9===e.nodeType&&(o=e.defaultView),void 0===r)return o?o[t]:e[i];o?o.scrollTo(n?o.pageXOffset:r,n?r:o.pageYOffset):e[i]=r}),e,i,arguments.length)}})),x.each(["top","left"],(function(e,t){x.cssHooks[t]=ze(f.pixelPosition,(function(e,n){if(n)return n=Le(e,t),Me.test(n)?x(e).position()[t]+"px":n}))})),x.each({Height:"height",Width:"width"},(function(e,t){x.each({padding:"inner"+e,content:t,"":"outer"+e},(function(n,i){x.fn[i]=function(r,o){var a=arguments.length&&(n||"boolean"!=typeof r),s=n||(!0===r||!0===o?"margin":"border");return B(this,(function(t,n,r){var o;return m(t)?0===i.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===r?x.css(t,n,s):x.style(t,n,r,s)}),t,a?r:void 0,a)}}))})),x.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){x.fn[t]=function(e){return this.on(t,e)}})),x.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),x.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){x.fn[t]=function(e,n){return 0<arguments.length?this.on(t,null,e,n):this.trigger(t)}}));var Vt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;x.proxy=function(e,t){var n,i,o;if("string"==typeof t&&(n=e[t],t=e,e=n),p(e))return i=r.call(arguments,2),(o=function(){return e.apply(t||this,i.concat(r.call(arguments)))}).guid=e.guid=e.guid||x.guid++,o},x.holdReady=function(e){e?x.readyWait++:x.ready(!0)},x.isArray=Array.isArray,x.parseJSON=JSON.parse,x.nodeName=T,x.isFunction=p,x.isWindow=m,x.camelCase=V,x.type=y,x.now=Date.now,x.isNumeric=function(e){var t=x.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},x.trim=function(e){return null==e?"":(e+"").replace(Vt,"")},"function"==typeof define&&define.amd&&define("jquery",[],(function(){return x}));var Yt=e.jQuery,Gt=e.$;return x.noConflict=function(t){return e.$===x&&(e.$=Gt),t&&e.jQuery===x&&(e.jQuery=Yt),x},void 0===t&&(e.jQuery=e.$=x),x})),function(e){function t(t){if("string"==typeof t.data&&(t.data={keys:t.data}),t.data&&t.data.keys&&"string"==typeof t.data.keys){var n=t.handler,i=t.data.keys.toLowerCase().split(" ");t.handler=function(t){if(this===t.target||!(e.hotkeys.options.filterInputAcceptingElements&&e.hotkeys.textInputTypes.test(t.target.nodeName)||e.hotkeys.options.filterContentEditable&&e(t.target).attr("contenteditable")||e.hotkeys.options.filterTextInputs&&e.inArray(t.target.type,e.hotkeys.textAcceptingInputTypes)>-1)){var r="keypress"!==t.type&&e.hotkeys.specialKeys[t.which],o=String.fromCharCode(t.which).toLowerCase(),a="",s={};e.each(["alt","ctrl","shift"],(function(e,n){t[n+"Key"]&&r!==n&&(a+=n+"+")})),t.metaKey&&!t.ctrlKey&&"meta"!==r&&(a+="meta+"),t.metaKey&&"meta"!==r&&a.indexOf("alt+ctrl+shift+")>-1&&(a=a.replace("alt+ctrl+shift+","hyper+")),r?s[a+r]=!0:(s[a+o]=!0,s[a+e.hotkeys.shiftNums[o]]=!0,"shift+"===a&&(s[e.hotkeys.shiftNums[o]]=!0));for(var l=0,c=i.length;l<c;l++)if(s[i[l]])return n.apply(this,arguments)}}}}e.hotkeys={version:"0.2.0",specialKeys:{8:"backspace",9:"tab",10:"return",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",59:";",61:"=",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"},textAcceptingInputTypes:["text","password","number","email","url","range","date","month","week","time","datetime","datetime-local","search","color","tel"],textInputTypes:/textarea|input|select/i,options:{filterInputAcceptingElements:!0,filterTextInputs:!0,filterContentEditable:!0}},e.each(["keydown","keyup","keypress"],(function(){e.event.special[this]={add:t}}))}(jQuery||this.jQuery||window.jQuery),define("jquery.hotkeys",["jquery"],(function(){})),define("pgui.shortcuts",["jquery.hotkeys"],(function(){$.hotkeys.options=$.extend($.hotkeys.options,{filterInputAcceptingElements:!1,filterContentEditable:!1,filterTextInputs:!1});var e=[{keys:["Ctrl+[","Ctrl+]"],selector:".toggle-sidebar",scope:"common"},{keys:["Ctrl+left"],selector:".pgui-pagination .pgui-pagination-prev",scope:"grid"},{keys:["Ctrl+right"],selector:".pgui-pagination  .pgui-pagination-next",scope:"grid"},{keys:["Alt+Ctrl+I","Alt+Insert"],selector:".grid:first .pgui-add",scope:"grid"},{keys:["Ctrl+Shift+/"],selector:".grid:first .expand-all-details",scope:"grid"},{keys:["Ctrl+Shift+F"],selector:".grid:first .js-filter-builder-open",scope:"grid"},{keys:["Ctrl+Return"],selector:".js-form-container:visible .js-primary-save",ignoreFocusedInputs:!0,scope:"form"},{keys:["Ctrl+Shift+Return"],selector:".js-form-container:visible .js-save-insert",ignoreFocusedInputs:!0,scope:"form"},{keys:["Alt+Ctrl+I","Alt+Insert"],selector:".js-form-add:visible",scope:"form"},{keys:["Alt+Ctrl+I","Alt+Insert"],selector:".modal:visible .js-group-action-select[data-action=add-condition]",ignoreFocusedInputs:!0,scope:"filter_builder"},{keys:["Ctrl+Return"],selector:".modal:visible .js-filter-builder-commit",ignoreFocusedInputs:!0,scope:"filter_builder"},{keys:["Ctrl+Return"],selector:".webui-popover-content .js-save",ignoreFocusedInputs:!0,scope:"quick_edit"}],t={};$document=$(document);var n=[];function i(i){i=i||["grid","form"],n.push(i),$.each(e,(function(e,r){if(-1!==i.indexOf(r.scope)){var o=function(e,i,r,o){return t[e]||(t[e]=function(e){if("common"!==o&&-1===n[n.length-1].indexOf(o))return!0;if(!i&&/textarea|input|select/i.test(e.target.nodeName))return!0;var t=$(r).get(0);return t&&t.click(),!1}),t[e]}(r.keys.join("")+r.scope,r.ignoreFocusedInputs,r.selector,r.scope);$document.off("keydown",o),$.each(r.keys,(function(e,t){$document.on("keydown",null,t,o)}));var a=$(r.selector);if(a.length){var s=a.attr("title");s=s?s+" ":"",a.attr("title",s+"("+r.keys.join(", ")+")")}}}))}return $((function(){i(["common"])})),{push:i,pop:function(){n.pop()}}})),window.matchMedia||(window.matchMedia=function(e){var t,n=(p=e.document).documentElement,i=[],r=0,o="",a={},s=/\s*(only|not)?\s*(screen|print|[a-z\-]+)\s*(and)?\s*/i,l=/^\s*\(\s*(-[a-z]+-)?(min-|max-)?([a-z\-]+)\s*(:?\s*([0-9]+(\.[0-9]+)?|portrait|landscape)(px|em|dppx|dpcm|rem|%|in|cm|mm|ex|pt|pc|\/([0-9]+(\.[0-9]+)?))?)?\s*\)\s*$/,c=0,u=function(e){var t=-1!==e.indexOf(",")&&e.split(",")||[e],n=t.length-1,i=n,r=null,c=null,u="",d=0,h=!1,f="",p="",m=(r=null,c=0,p=null,""),g="",v="",b="",y="";m=!1;if(""===e)return!0;do{if(h=!1,(c=(r=t[i-n]).match(s))&&(u=c[0],d=c.index),!c||-1===r.substring(0,d).indexOf("(")&&(d||!c[3]&&u!==c.input))m=!1;else{if(p=r,h="not"===c[1],d||(f=c[2],p=r.substring(u.length)),m=f===o||"all"===f||""===f,c=(r=-1!==p.indexOf(" and ")&&p.split(" and ")||[p]).length-1,m&&0<=c&&""!==p)do{if(!(p=r[c].match(l))||!a[p[3]]){m=!1;break}if(m=p[2],b=g=p[5],v=p[7],y=a[p[3]],v&&(b="px"===v?Number(g):"em"===v||"rem"===v?16*g:p[8]?(g/p[8]).toFixed(2):"dppx"===v?96*g:"dpcm"===v?.3937*g:Number(g)),!(m="min-"===m&&b?y>=b:"max-"===m&&b?y<=b:b?y===b:!!y))break}while(c--);if(m)break}}while(n--);return h?!m:m},d=function(){var t=e.innerWidth||n.clientWidth,i=e.innerHeight||n.clientHeight,r=e.screen.width,o=e.screen.height,s=e.screen.colorDepth,l=e.devicePixelRatio;a.width=t,a.height=i,a["aspect-ratio"]=(t/i).toFixed(2),a["device-width"]=r,a["device-height"]=o,a["device-aspect-ratio"]=(r/o).toFixed(2),a.color=s,a["color-index"]=Math.pow(2,s),a.orientation=i>=t?"portrait":"landscape",a.resolution=l&&96*l||e.screen.deviceXDPI||96,a["device-pixel-ratio"]=l||1},h=function(){clearTimeout(c),c=setTimeout((function(){var t=null,n=r-1,o=n,a=!1;if(0<=n){d();do{if((t=i[o-n])&&((a=u(t.mql.media))&&!t.mql.matches||!a&&t.mql.matches)&&(t.mql.matches=a,t.listeners)){a=0;for(var s=t.listeners.length;a<s;a++)t.listeners[a]&&t.listeners[a].call(e,t.mql)}}while(n--)}}),10)},f=p.getElementsByTagName("head")[0],p=p.createElement("style"),m="screen print speech projection handheld tv braille embossed tty".split(" "),g=0,v=m.length,b="#mediamatchjs { position: relative; z-index: 0; }",y="",w=e.addEventListener||(y="on")&&e.attachEvent;for(p.type="text/css",p.id="mediamatchjs",f.appendChild(p),t=e.getComputedStyle&&e.getComputedStyle(p)||p.currentStyle;g<v;g++)b+="@media "+m[g]+" { #mediamatchjs { position: relative; z-index: "+g+" } }";return p.styleSheet?p.styleSheet.cssText=b:p.textContent=b,o=m[1*t.zIndex||0],f.removeChild(p),d(),w(y+"resize",h),w(y+"orientationchange",h),function(e){var t=r,n={matches:!1,media:e,addListener:function(e){i[t].listeners||(i[t].listeners=[]),e&&i[t].listeners.push(e)},removeListener:function(e){var n=i[t],r=0,o=0;if(n)for(o=n.listeners.length;r<o;r++)n.listeners[r]===e&&n.listeners.splice(r,1)}};return""===e?(n.matches=!0,n):(n.matches=u(e),r=i.push({mql:n,listeners:null}),n)}}(window)),define("libs/match-media",(function(){})),define("pgui.sidebar",["pgui.shortcuts","libs/match-media"],(function(){return function(e){function t(){var t=window.matchMedia("(max-width: 991px)").matches?"sidebar-active":"sidebar-desktop-active";e.toggleClass(t)}e.on("click touchstart",".sidebar-backdrop",t),e.on("click",".toggle-sidebar",t)}})),function(){function e(e){return function(t,n,i,r){n=y(n,r,4);var o=!S(t)&&b.keys(t),a=(o||t).length,s=e>0?0:a-1;return arguments.length<3&&(i=t[o?o[s]:s],s+=e),function(t,n,i,r,o,a){for(;o>=0&&a>o;o+=e){var s=r?r[o]:o;i=n(i,t[s],s,t)}return i}(t,n,i,o,s,a)}}function t(e){return function(t,n,i){n=w(n,i);for(var r=E(t),o=e>0?0:r-1;o>=0&&r>o;o+=e)if(n(t[o],o,t))return o;return-1}}function n(e,t,n){return function(i,r,o){var a=0,s=E(i);if("number"==typeof o)e>0?a=o>=0?o:Math.max(o+s,a):s=o>=0?Math.min(o+1,s):o+s+1;else if(n&&o&&s)return i[o=n(i,r)]===r?o:-1;if(r!=r)return(o=t(u.call(i,a,s),b.isNaN))>=0?o+a:-1;for(o=e>0?a:s-1;o>=0&&s>o;o+=e)if(i[o]===r)return o;return-1}}function i(e,t){var n=P.length,i=e.constructor,r=b.isFunction(i)&&i.prototype||s,o="constructor";for(b.has(e,o)&&!b.contains(t,o)&&t.push(o);n--;)(o=P[n])in e&&e[o]!==r[o]&&!b.contains(t,o)&&t.push(o)}var r=this,o=r._,a=Array.prototype,s=Object.prototype,l=Function.prototype,c=a.push,u=a.slice,d=s.toString,h=s.hasOwnProperty,f=Array.isArray,p=Object.keys,m=l.bind,g=Object.create,v=function(){},b=function(e){return e instanceof b?e:this instanceof b?void(this._wrapped=e):new b(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=b),exports._=b):r._=b,b.VERSION="1.8.3";var y=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)};case 4:return function(n,i,r,o){return e.call(t,n,i,r,o)}}return function(){return e.apply(t,arguments)}},w=function(e,t,n){return null==e?b.identity:b.isFunction(e)?y(e,t,n):b.isObject(e)?b.matcher(e):b.property(e)};b.iteratee=function(e,t){return w(e,t,1/0)};var x=function(e,t){return function(n){var i=arguments.length;if(2>i||null==n)return n;for(var r=1;i>r;r++)for(var o=arguments[r],a=e(o),s=a.length,l=0;s>l;l++){var c=a[l];t&&void 0!==n[c]||(n[c]=o[c])}return n}},C=function(e){if(!b.isObject(e))return{};if(g)return g(e);v.prototype=e;var t=new v;return v.prototype=null,t},_=function(e){return function(t){return null==t?void 0:t[e]}},k=Math.pow(2,53)-1,E=_("length"),S=function(e){var t=E(e);return"number"==typeof t&&t>=0&&k>=t};b.each=b.forEach=function(e,t,n){var i,r;if(t=y(t,n),S(e))for(i=0,r=e.length;r>i;i++)t(e[i],i,e);else{var o=b.keys(e);for(i=0,r=o.length;r>i;i++)t(e[o[i]],o[i],e)}return e},b.map=b.collect=function(e,t,n){t=w(t,n);for(var i=!S(e)&&b.keys(e),r=(i||e).length,o=Array(r),a=0;r>a;a++){var s=i?i[a]:a;o[a]=t(e[s],s,e)}return o},b.reduce=b.foldl=b.inject=e(1),b.reduceRight=b.foldr=e(-1),b.find=b.detect=function(e,t,n){var i;return void 0!==(i=S(e)?b.findIndex(e,t,n):b.findKey(e,t,n))&&-1!==i?e[i]:void 0},b.filter=b.select=function(e,t,n){var i=[];return t=w(t,n),b.each(e,(function(e,n,r){t(e,n,r)&&i.push(e)})),i},b.reject=function(e,t,n){return b.filter(e,b.negate(w(t)),n)},b.every=b.all=function(e,t,n){t=w(t,n);for(var i=!S(e)&&b.keys(e),r=(i||e).length,o=0;r>o;o++){var a=i?i[o]:o;if(!t(e[a],a,e))return!1}return!0},b.some=b.any=function(e,t,n){t=w(t,n);for(var i=!S(e)&&b.keys(e),r=(i||e).length,o=0;r>o;o++){var a=i?i[o]:o;if(t(e[a],a,e))return!0}return!1},b.contains=b.includes=b.include=function(e,t,n,i){return S(e)||(e=b.values(e)),("number"!=typeof n||i)&&(n=0),b.indexOf(e,t,n)>=0},b.invoke=function(e,t){var n=u.call(arguments,2),i=b.isFunction(t);return b.map(e,(function(e){var r=i?t:e[t];return null==r?r:r.apply(e,n)}))},b.pluck=function(e,t){return b.map(e,b.property(t))},b.where=function(e,t){return b.filter(e,b.matcher(t))},b.findWhere=function(e,t){return b.find(e,b.matcher(t))},b.max=function(e,t,n){var i,r,o=-1/0,a=-1/0;if(null==t&&null!=e)for(var s=0,l=(e=S(e)?e:b.values(e)).length;l>s;s++)(i=e[s])>o&&(o=i);else t=w(t,n),b.each(e,(function(e,n,i){((r=t(e,n,i))>a||r===-1/0&&o===-1/0)&&(o=e,a=r)}));return o},b.min=function(e,t,n){var i,r,o=1/0,a=1/0;if(null==t&&null!=e)for(var s=0,l=(e=S(e)?e:b.values(e)).length;l>s;s++)i=e[s],o>i&&(o=i);else t=w(t,n),b.each(e,(function(e,n,i){r=t(e,n,i),(a>r||1/0===r&&1/0===o)&&(o=e,a=r)}));return o},b.shuffle=function(e){for(var t,n=S(e)?e:b.values(e),i=n.length,r=Array(i),o=0;i>o;o++)(t=b.random(0,o))!==o&&(r[o]=r[t]),r[t]=n[o];return r},b.sample=function(e,t,n){return null==t||n?(S(e)||(e=b.values(e)),e[b.random(e.length-1)]):b.shuffle(e).slice(0,Math.max(0,t))},b.sortBy=function(e,t,n){return t=w(t,n),b.pluck(b.map(e,(function(e,n,i){return{value:e,index:n,criteria:t(e,n,i)}})).sort((function(e,t){var n=e.criteria,i=t.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return e.index-t.index})),"value")};var T=function(e){return function(t,n,i){var r={};return n=w(n,i),b.each(t,(function(i,o){var a=n(i,o,t);e(r,i,a)})),r}};b.groupBy=T((function(e,t,n){b.has(e,n)?e[n].push(t):e[n]=[t]})),b.indexBy=T((function(e,t,n){e[n]=t})),b.countBy=T((function(e,t,n){b.has(e,n)?e[n]++:e[n]=1})),b.toArray=function(e){return e?b.isArray(e)?u.call(e):S(e)?b.map(e,b.identity):b.values(e):[]},b.size=function(e){return null==e?0:S(e)?e.length:b.keys(e).length},b.partition=function(e,t,n){t=w(t,n);var i=[],r=[];return b.each(e,(function(e,n,o){(t(e,n,o)?i:r).push(e)})),[i,r]},b.first=b.head=b.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:b.initial(e,e.length-t)},b.initial=function(e,t,n){return u.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},b.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:b.rest(e,Math.max(0,e.length-t))},b.rest=b.tail=b.drop=function(e,t,n){return u.call(e,null==t||n?1:t)},b.compact=function(e){return b.filter(e,b.identity)};var D=function(e,t,n,i){for(var r=[],o=0,a=i||0,s=E(e);s>a;a++){var l=e[a];if(S(l)&&(b.isArray(l)||b.isArguments(l))){t||(l=D(l,t,n));var c=0,u=l.length;for(r.length+=u;u>c;)r[o++]=l[c++]}else n||(r[o++]=l)}return r};b.flatten=function(e,t){return D(e,t,!1)},b.without=function(e){return b.difference(e,u.call(arguments,1))},b.uniq=b.unique=function(e,t,n,i){b.isBoolean(t)||(i=n,n=t,t=!1),null!=n&&(n=w(n,i));for(var r=[],o=[],a=0,s=E(e);s>a;a++){var l=e[a],c=n?n(l,a,e):l;t?(a&&o===c||r.push(l),o=c):n?b.contains(o,c)||(o.push(c),r.push(l)):b.contains(r,l)||r.push(l)}return r},b.union=function(){return b.uniq(D(arguments,!0,!0))},b.intersection=function(e){for(var t=[],n=arguments.length,i=0,r=E(e);r>i;i++){var o=e[i];if(!b.contains(t,o)){for(var a=1;n>a&&b.contains(arguments[a],o);a++);a===n&&t.push(o)}}return t},b.difference=function(e){var t=D(arguments,!0,!0,1);return b.filter(e,(function(e){return!b.contains(t,e)}))},b.zip=function(){return b.unzip(arguments)},b.unzip=function(e){for(var t=e&&b.max(e,E).length||0,n=Array(t),i=0;t>i;i++)n[i]=b.pluck(e,i);return n},b.object=function(e,t){for(var n={},i=0,r=E(e);r>i;i++)t?n[e[i]]=t[i]:n[e[i][0]]=e[i][1];return n},b.findIndex=t(1),b.findLastIndex=t(-1),b.sortedIndex=function(e,t,n,i){for(var r=(n=w(n,i,1))(t),o=0,a=E(e);a>o;){var s=Math.floor((o+a)/2);n(e[s])<r?o=s+1:a=s}return o},b.indexOf=n(1,b.findIndex,b.sortedIndex),b.lastIndexOf=n(-1,b.findLastIndex),b.range=function(e,t,n){null==t&&(t=e||0,e=0),n=n||1;for(var i=Math.max(Math.ceil((t-e)/n),0),r=Array(i),o=0;i>o;o++,e+=n)r[o]=e;return r};var $=function(e,t,n,i,r){if(!(i instanceof t))return e.apply(n,r);var o=C(e.prototype),a=e.apply(o,r);return b.isObject(a)?a:o};b.bind=function(e,t){if(m&&e.bind===m)return m.apply(e,u.call(arguments,1));if(!b.isFunction(e))throw new TypeError("Bind must be called on a function");var n=u.call(arguments,2),i=function(){return $(e,i,t,this,n.concat(u.call(arguments)))};return i},b.partial=function(e){var t=u.call(arguments,1),n=function(){for(var i=0,r=t.length,o=Array(r),a=0;r>a;a++)o[a]=t[a]===b?arguments[i++]:t[a];for(;i<arguments.length;)o.push(arguments[i++]);return $(e,n,this,this,o)};return n},b.bindAll=function(e){var t,n,i=arguments.length;if(1>=i)throw new Error("bindAll must be passed function names");for(t=1;i>t;t++)e[n=arguments[t]]=b.bind(e[n],e);return e},b.memoize=function(e,t){var n=function(i){var r=n.cache,o=""+(t?t.apply(this,arguments):i);return b.has(r,o)||(r[o]=e.apply(this,arguments)),r[o]};return n.cache={},n},b.delay=function(e,t){var n=u.call(arguments,2);return setTimeout((function(){return e.apply(null,n)}),t)},b.defer=b.partial(b.delay,b,1),b.throttle=function(e,t,n){var i,r,o,a=null,s=0;n||(n={});var l=function(){s=!1===n.leading?0:b.now(),a=null,o=e.apply(i,r),a||(i=r=null)};return function(){var c=b.now();s||!1!==n.leading||(s=c);var u=t-(c-s);return i=this,r=arguments,0>=u||u>t?(a&&(clearTimeout(a),a=null),s=c,o=e.apply(i,r),a||(i=r=null)):a||!1===n.trailing||(a=setTimeout(l,u)),o}},b.debounce=function(e,t,n){var i,r,o,a,s,l=function(){var c=b.now()-a;t>c&&c>=0?i=setTimeout(l,t-c):(i=null,n||(s=e.apply(o,r),i||(o=r=null)))};return function(){o=this,r=arguments,a=b.now();var c=n&&!i;return i||(i=setTimeout(l,t)),c&&(s=e.apply(o,r),o=r=null),s}},b.wrap=function(e,t){return b.partial(t,e)},b.negate=function(e){return function(){return!e.apply(this,arguments)}},b.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,i=e[t].apply(this,arguments);n--;)i=e[n].call(this,i);return i}},b.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},b.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),1>=e&&(t=null),n}},b.once=b.partial(b.before,2);var A=!{toString:null}.propertyIsEnumerable("toString"),P=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];b.keys=function(e){if(!b.isObject(e))return[];if(p)return p(e);var t=[];for(var n in e)b.has(e,n)&&t.push(n);return A&&i(e,t),t},b.allKeys=function(e){if(!b.isObject(e))return[];var t=[];for(var n in e)t.push(n);return A&&i(e,t),t},b.values=function(e){for(var t=b.keys(e),n=t.length,i=Array(n),r=0;n>r;r++)i[r]=e[t[r]];return i},b.mapObject=function(e,t,n){t=w(t,n);for(var i,r=b.keys(e),o=r.length,a={},s=0;o>s;s++)a[i=r[s]]=t(e[i],i,e);return a},b.pairs=function(e){for(var t=b.keys(e),n=t.length,i=Array(n),r=0;n>r;r++)i[r]=[t[r],e[t[r]]];return i},b.invert=function(e){for(var t={},n=b.keys(e),i=0,r=n.length;r>i;i++)t[e[n[i]]]=n[i];return t},b.functions=b.methods=function(e){var t=[];for(var n in e)b.isFunction(e[n])&&t.push(n);return t.sort()},b.extend=x(b.allKeys),b.extendOwn=b.assign=x(b.keys),b.findKey=function(e,t,n){t=w(t,n);for(var i,r=b.keys(e),o=0,a=r.length;a>o;o++)if(t(e[i=r[o]],i,e))return i},b.pick=function(e,t,n){var i,r,o={},a=e;if(null==a)return o;b.isFunction(t)?(r=b.allKeys(a),i=y(t,n)):(r=D(arguments,!1,!1,1),i=function(e,t,n){return t in n},a=Object(a));for(var s=0,l=r.length;l>s;s++){var c=r[s],u=a[c];i(u,c,a)&&(o[c]=u)}return o},b.omit=function(e,t,n){if(b.isFunction(t))t=b.negate(t);else{var i=b.map(D(arguments,!1,!1,1),String);t=function(e,t){return!b.contains(i,t)}}return b.pick(e,t,n)},b.defaults=x(b.allKeys,!0),b.create=function(e,t){var n=C(e);return t&&b.extendOwn(n,t),n},b.clone=function(e){return b.isObject(e)?b.isArray(e)?e.slice():b.extend({},e):e},b.tap=function(e,t){return t(e),e},b.isMatch=function(e,t){var n=b.keys(t),i=n.length;if(null==e)return!i;for(var r=Object(e),o=0;i>o;o++){var a=n[o];if(t[a]!==r[a]||!(a in r))return!1}return!0};var j=function(e,t,n,i){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof b&&(e=e._wrapped),t instanceof b&&(t=t._wrapped);var r=d.call(e);if(r!==d.call(t))return!1;switch(r){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t}var o="[object Array]"===r;if(!o){if("object"!=typeof e||"object"!=typeof t)return!1;var a=e.constructor,s=t.constructor;if(a!==s&&!(b.isFunction(a)&&a instanceof a&&b.isFunction(s)&&s instanceof s)&&"constructor"in e&&"constructor"in t)return!1}i=i||[];for(var l=(n=n||[]).length;l--;)if(n[l]===e)return i[l]===t;if(n.push(e),i.push(t),o){if((l=e.length)!==t.length)return!1;for(;l--;)if(!j(e[l],t[l],n,i))return!1}else{var c,u=b.keys(e);if(l=u.length,b.keys(t).length!==l)return!1;for(;l--;)if(c=u[l],!b.has(t,c)||!j(e[c],t[c],n,i))return!1}return n.pop(),i.pop(),!0};b.isEqual=function(e,t){return j(e,t)},b.isEmpty=function(e){return null==e||(S(e)&&(b.isArray(e)||b.isString(e)||b.isArguments(e))?0===e.length:0===b.keys(e).length)},b.isElement=function(e){return!(!e||1!==e.nodeType)},b.isArray=f||function(e){return"[object Array]"===d.call(e)},b.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},b.each(["Arguments","Function","String","Number","Date","RegExp","Error"],(function(e){b["is"+e]=function(t){return d.call(t)==="[object "+e+"]"}})),b.isArguments(arguments)||(b.isArguments=function(e){return b.has(e,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(b.isFunction=function(e){return"function"==typeof e||!1}),b.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},b.isNaN=function(e){return b.isNumber(e)&&e!==+e},b.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"===d.call(e)},b.isNull=function(e){return null===e},b.isUndefined=function(e){return void 0===e},b.has=function(e,t){return null!=e&&h.call(e,t)},b.noConflict=function(){return r._=o,this},b.identity=function(e){return e},b.constant=function(e){return function(){return e}},b.noop=function(){},b.property=_,b.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},b.matcher=b.matches=function(e){return e=b.extendOwn({},e),function(t){return b.isMatch(t,e)}},b.times=function(e,t,n){var i=Array(Math.max(0,e));t=y(t,n,1);for(var r=0;e>r;r++)i[r]=t(r);return i},b.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},b.now=Date.now||function(){return(new Date).getTime()};var O={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},I=b.invert(O),M=function(e){var t=function(t){return e[t]},n="(?:"+b.keys(e).join("|")+")",i=RegExp(n),r=RegExp(n,"g");return function(e){return e=null==e?"":""+e,i.test(e)?e.replace(r,t):e}};b.escape=M(O),b.unescape=M(I),b.result=function(e,t,n){var i=null==e?void 0:e[t];return void 0===i&&(i=n),b.isFunction(i)?i.call(e):i};var N=0;b.uniqueId=function(e){var t=++N+"";return e?e+t:t},b.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var F=/(.)^/,R={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},L=/\\|'|\r|\n|\u2028|\u2029/g,z=function(e){return"\\"+R[e]};b.template=function(e,t,n){!t&&n&&(t=n),t=b.defaults({},t,b.templateSettings);var i=RegExp([(t.escape||F).source,(t.interpolate||F).source,(t.evaluate||F).source].join("|")+"|$","g"),r=0,o="__p+='";e.replace(i,(function(t,n,i,a,s){return o+=e.slice(r,s).replace(L,z),r=s+t.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?o+="'+\n((__t=("+i+"))==null?'':__t)+\n'":a&&(o+="';\n"+a+"\n__p+='"),t})),o+="';\n",t.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var a=new Function(t.variable||"obj","_",o)}catch(e){throw e.source=o,e}var s=function(e){return a.call(this,e,b)},l=t.variable||"obj";return s.source="function("+l+"){\n"+o+"}",s},b.chain=function(e){var t=b(e);return t._chain=!0,t};var H=function(e,t){return e._chain?b(t).chain():t};b.mixin=function(e){b.each(b.functions(e),(function(t){var n=b[t]=e[t];b.prototype[t]=function(){var e=[this._wrapped];return c.apply(e,arguments),H(this,n.apply(b,e))}}))},b.mixin(b),b.each(["pop","push","reverse","shift","sort","splice","unshift"],(function(e){var t=a[e];b.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],H(this,n)}})),b.each(["concat","join","slice"],(function(e){var t=a[e];b.prototype[e]=function(){return H(this,t.apply(this._wrapped,arguments))}})),b.prototype.value=function(){return this._wrapped},b.prototype.valueOf=b.prototype.toJSON=b.prototype.value,b.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],(function(){return b}))}.call(this),define("class",["require","exports","module"],(function(e,t,n){var i=!1,r=/xyz/.test((function(){xyz}))?/\b_super\b/:/.*/;n.exports=function(){},n.exports.extend=function(e){var t=this.prototype;i=!0;var n=new this;for(var o in i=!1,e)n[o]="function"==typeof e[o]&&"function"==typeof t[o]&&r.test(e[o])?function(e,n){return function(){var i=this._super;this._super=t[e];var r=n.apply(this,arguments);return this._super=i,r}}(o,e[o]):e[o];function a(){!i&&this.init&&this.init.apply(this,arguments)}return a.prototype=n,a.prototype.constructor=a,a.extend=arguments.callee,a}})),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");
/*! ========================================================================
 * Bootstrap Toggle: bootstrap-toggle.js v2.2.0
 * http://www.bootstraptoggle.com
 * ========================================================================
 * Copyright 2014 Min Hur, The New York Times Company
 * Licensed under MIT
 * ======================================================================== */
if(function(e){"use strict";var t=jQuery.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1==t[0]&&9==t[1]&&t[2]<1||t[0]>3)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4")}(),function(e){"use strict";e.fn.emulateTransitionEnd=function(t){var n=!1,i=this;e(this).one("bsTransitionEnd",(function(){n=!0}));return setTimeout((function(){n||e(i).trigger(e.support.transition.end)}),t),this},e((function(){e.support.transition=function(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(void 0!==e.style[n])return{end:t[n]};return!1}(),e.support.transition&&(e.event.special.bsTransitionEnd={bindType:e.support.transition.end,delegateType:e.support.transition.end,handle:function(t){if(e(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}})}))}(jQuery),function(e){"use strict";var t='[data-dismiss="alert"]',n=function(n){e(n).on("click",t,this.close)};n.VERSION="3.3.7",n.TRANSITION_DURATION=150,n.prototype.close=function(t){var i=e(this),r=i.attr("data-target");r||(r=(r=i.attr("href"))&&r.replace(/.*(?=#[^\s]*$)/,""));var o=e("#"===r?[]:r);function a(){o.detach().trigger("closed.bs.alert").remove()}t&&t.preventDefault(),o.length||(o=i.closest(".alert")),o.trigger(t=e.Event("close.bs.alert")),t.isDefaultPrevented()||(o.removeClass("in"),e.support.transition&&o.hasClass("fade")?o.one("bsTransitionEnd",a).emulateTransitionEnd(n.TRANSITION_DURATION):a())};var i=e.fn.alert;e.fn.alert=function(t){return this.each((function(){var i=e(this),r=i.data("bs.alert");r||i.data("bs.alert",r=new n(this)),"string"==typeof t&&r[t].call(i)}))},e.fn.alert.Constructor=n,e.fn.alert.noConflict=function(){return e.fn.alert=i,this},e(document).on("click.bs.alert.data-api",t,n.prototype.close)}(jQuery),function(e){"use strict";var t=function(n,i){this.$element=e(n),this.options=e.extend({},t.DEFAULTS,i),this.isLoading=!1};function n(n){return this.each((function(){var i=e(this),r=i.data("bs.button"),o="object"==typeof n&&n;r||i.data("bs.button",r=new t(this,o)),"toggle"==n?r.toggle():n&&r.setState(n)}))}t.VERSION="3.3.7",t.DEFAULTS={loadingText:"loading..."},t.prototype.setState=function(t){var n="disabled",i=this.$element,r=i.is("input")?"val":"html",o=i.data();t+="Text",null==o.resetText&&i.data("resetText",i[r]()),setTimeout(e.proxy((function(){i[r](null==o[t]?this.options[t]:o[t]),"loadingText"==t?(this.isLoading=!0,i.addClass(n).attr(n,n).prop(n,!0)):this.isLoading&&(this.isLoading=!1,i.removeClass(n).removeAttr(n).prop(n,!1))}),this),0)},t.prototype.toggle=function(){var e=!0,t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var n=this.$element.find("input");"radio"==n.prop("type")?(n.prop("checked")&&(e=!1),t.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==n.prop("type")&&(n.prop("checked")!==this.$element.hasClass("active")&&(e=!1),this.$element.toggleClass("active")),n.prop("checked",this.$element.hasClass("active")),e&&n.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var i=e.fn.button;e.fn.button=n,e.fn.button.Constructor=t,e.fn.button.noConflict=function(){return e.fn.button=i,this},e(document).on("click.bs.button.data-api",'[data-toggle^="button"]',(function(t){var i=e(t.target).closest(".btn");n.call(i,"toggle"),e(t.target).is('input[type="radio"], input[type="checkbox"]')||(t.preventDefault(),i.is("input,button")?i.trigger("focus"):i.find("input:visible,button:visible").first().trigger("focus"))})).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',(function(t){e(t.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(t.type))}))}(jQuery),function(e){"use strict";var t=function(t,n){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",e.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",e.proxy(this.pause,this)).on("mouseleave.bs.carousel",e.proxy(this.cycle,this))};function n(n){return this.each((function(){var i=e(this),r=i.data("bs.carousel"),o=e.extend({},t.DEFAULTS,i.data(),"object"==typeof n&&n),a="string"==typeof n?n:o.slide;r||i.data("bs.carousel",r=new t(this,o)),"number"==typeof n?r.to(n):a?r[a]():o.interval&&r.pause().cycle()}))}t.VERSION="3.3.7",t.TRANSITION_DURATION=600,t.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},t.prototype.keydown=function(e){if(!/input|textarea/i.test(e.target.tagName)){switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()}},t.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},t.prototype.getItemIndex=function(e){return this.$items=e.parent().children(".item"),this.$items.index(e||this.$active)},t.prototype.getItemForDirection=function(e,t){var n=this.getItemIndex(t);if(("prev"==e&&0===n||"next"==e&&n==this.$items.length-1)&&!this.options.wrap)return t;var i=(n+("prev"==e?-1:1))%this.$items.length;return this.$items.eq(i)},t.prototype.to=function(e){var t=this,n=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(e>this.$items.length-1||e<0))return this.sliding?this.$element.one("slid.bs.carousel",(function(){t.to(e)})):n==e?this.pause().cycle():this.slide(e>n?"next":"prev",this.$items.eq(e))},t.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},t.prototype.next=function(){if(!this.sliding)return this.slide("next")},t.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},t.prototype.slide=function(n,i){var r=this.$element.find(".item.active"),o=i||this.getItemForDirection(n,r),a=this.interval,s="next"==n?"left":"right",l=this;if(o.hasClass("active"))return this.sliding=!1;var c=o[0],u=e.Event("slide.bs.carousel",{relatedTarget:c,direction:s});if(this.$element.trigger(u),!u.isDefaultPrevented()){if(this.sliding=!0,a&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var d=e(this.$indicators.children()[this.getItemIndex(o)]);d&&d.addClass("active")}var h=e.Event("slid.bs.carousel",{relatedTarget:c,direction:s});return e.support.transition&&this.$element.hasClass("slide")?(o.addClass(n),o[0].offsetWidth,r.addClass(s),o.addClass(s),r.one("bsTransitionEnd",(function(){o.removeClass([n,s].join(" ")).addClass("active"),r.removeClass(["active",s].join(" ")),l.sliding=!1,setTimeout((function(){l.$element.trigger(h)}),0)})).emulateTransitionEnd(t.TRANSITION_DURATION)):(r.removeClass("active"),o.addClass("active"),this.sliding=!1,this.$element.trigger(h)),a&&this.cycle(),this}};var i=e.fn.carousel;e.fn.carousel=n,e.fn.carousel.Constructor=t,e.fn.carousel.noConflict=function(){return e.fn.carousel=i,this};var r=function(t){var i,r=e(this),o=e(r.attr("data-target")||(i=r.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,""));if(o.hasClass("carousel")){var a=e.extend({},o.data(),r.data()),s=r.attr("data-slide-to");s&&(a.interval=!1),n.call(o,a),s&&o.data("bs.carousel").to(s),t.preventDefault()}};e(document).on("click.bs.carousel.data-api","[data-slide]",r).on("click.bs.carousel.data-api","[data-slide-to]",r),e(window).on("load",(function(){e('[data-ride="carousel"]').each((function(){var t=e(this);n.call(t,t.data())}))}))}(jQuery),function(e){"use strict";var t=function(n,i){this.$element=e(n),this.options=e.extend({},t.DEFAULTS,i),this.$trigger=e('[data-toggle="collapse"][href="#'+n.id+'"],[data-toggle="collapse"][data-target="#'+n.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};function n(t){var n,i=t.attr("data-target")||(n=t.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"");return e(i)}function i(n){return this.each((function(){var i=e(this),r=i.data("bs.collapse"),o=e.extend({},t.DEFAULTS,i.data(),"object"==typeof n&&n);!r&&o.toggle&&/show|hide/.test(n)&&(o.toggle=!1),r||i.data("bs.collapse",r=new t(this,o)),"string"==typeof n&&r[n]()}))}t.VERSION="3.3.7",t.TRANSITION_DURATION=350,t.DEFAULTS={toggle:!0},t.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},t.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var n,r=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(r&&r.length&&(n=r.data("bs.collapse"))&&n.transitioning)){var o=e.Event("show.bs.collapse");if(this.$element.trigger(o),!o.isDefaultPrevented()){r&&r.length&&(i.call(r,"hide"),n||r.data("bs.collapse",null));var a=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[a](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var s=function(){this.$element.removeClass("collapsing").addClass("collapse in")[a](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return s.call(this);var l=e.camelCase(["scroll",a].join("-"));this.$element.one("bsTransitionEnd",e.proxy(s,this)).emulateTransitionEnd(t.TRANSITION_DURATION)[a](this.$element[0][l])}}}},t.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var n=e.Event("hide.bs.collapse");if(this.$element.trigger(n),!n.isDefaultPrevented()){var i=this.dimension();this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var r=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};if(!e.support.transition)return r.call(this);this.$element[i](0).one("bsTransitionEnd",e.proxy(r,this)).emulateTransitionEnd(t.TRANSITION_DURATION)}}},t.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},t.prototype.getParent=function(){return e(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(e.proxy((function(t,i){var r=e(i);this.addAriaAndCollapsedClass(n(r),r)}),this)).end()},t.prototype.addAriaAndCollapsedClass=function(e,t){var n=e.hasClass("in");e.attr("aria-expanded",n),t.toggleClass("collapsed",!n).attr("aria-expanded",n)};var r=e.fn.collapse;e.fn.collapse=i,e.fn.collapse.Constructor=t,e.fn.collapse.noConflict=function(){return e.fn.collapse=r,this},e(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',(function(t){var r=e(this);r.attr("data-target")||t.preventDefault();var o=n(r),a=o.data("bs.collapse")?"toggle":r.data();i.call(o,a)}))}(jQuery),function(e){"use strict";var t='[data-toggle="dropdown"]',n=function(t){e(t).on("click.bs.dropdown",this.toggle)};function i(t){var n=t.attr("data-target");n||(n=(n=t.attr("href"))&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var i=n&&e(n);return i&&i.length?i:t.parent()}function r(n){n&&3===n.which||(e(".dropdown-backdrop").remove(),e(t).each((function(){var t=e(this),r=i(t),o={relatedTarget:this};r.hasClass("open")&&(n&&"click"==n.type&&/input|textarea/i.test(n.target.tagName)&&e.contains(r[0],n.target)||(r.trigger(n=e.Event("hide.bs.dropdown",o)),n.isDefaultPrevented()||(t.attr("aria-expanded","false"),r.removeClass("open").trigger(e.Event("hidden.bs.dropdown",o)))))})))}n.VERSION="3.3.7",n.prototype.toggle=function(t){var n=e(this);if(!n.is(".disabled, :disabled")){var o=i(n),a=o.hasClass("open");if(r(),!a){"ontouchstart"in document.documentElement&&!o.closest(".navbar-nav").length&&e(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(e(this)).on("click",r);var s={relatedTarget:this};if(o.trigger(t=e.Event("show.bs.dropdown",s)),t.isDefaultPrevented())return;n.trigger("focus").attr("aria-expanded","true"),o.toggleClass("open").trigger(e.Event("shown.bs.dropdown",s))}return!1}},n.prototype.keydown=function(n){if(/(38|40|27|32)/.test(n.which)&&!/input|textarea/i.test(n.target.tagName)){var r=e(this);if(n.preventDefault(),n.stopPropagation(),!r.is(".disabled, :disabled")){var o=i(r),a=o.hasClass("open");if(!a&&27!=n.which||a&&27==n.which)return 27==n.which&&o.find(t).trigger("focus"),r.trigger("click");var s=o.find(".dropdown-menu li:not(.disabled):visible a");if(s.length){var l=s.index(n.target);38==n.which&&l>0&&l--,40==n.which&&l<s.length-1&&l++,~l||(l=0),s.eq(l).trigger("focus")}}}};var o=e.fn.dropdown;e.fn.dropdown=function(t){return this.each((function(){var i=e(this),r=i.data("bs.dropdown");r||i.data("bs.dropdown",r=new n(this)),"string"==typeof t&&r[t].call(i)}))},e.fn.dropdown.Constructor=n,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=o,this},e(document).on("click.bs.dropdown.data-api",r).on("click.bs.dropdown.data-api",".dropdown form",(function(e){e.stopPropagation()})).on("click.bs.dropdown.data-api",t,n.prototype.toggle).on("keydown.bs.dropdown.data-api",t,n.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",n.prototype.keydown)}(jQuery),function(e){"use strict";var t=function(t,n){this.options=n,this.$body=e(document.body),this.$element=e(t),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy((function(){this.$element.trigger("loaded.bs.modal")}),this))};function n(n,i){return this.each((function(){var r=e(this),o=r.data("bs.modal"),a=e.extend({},t.DEFAULTS,r.data(),"object"==typeof n&&n);o||r.data("bs.modal",o=new t(this,a)),"string"==typeof n?o[n](i):a.show&&o.show(i)}))}t.VERSION="3.3.7",t.TRANSITION_DURATION=300,t.BACKDROP_TRANSITION_DURATION=150,t.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},t.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)},t.prototype.show=function(n){var i=this,r=e.Event("show.bs.modal",{relatedTarget:n});this.$element.trigger(r),this.isShown||r.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",(function(){i.$element.one("mouseup.dismiss.bs.modal",(function(t){e(t.target).is(i.$element)&&(i.ignoreBackdropClick=!0)}))})),this.backdrop((function(){var r=e.support.transition&&i.$element.hasClass("fade");i.$element.parent().length||i.$element.appendTo(i.$body),i.$element.show().scrollTop(0),i.adjustDialog(),r&&i.$element[0].offsetWidth,i.$element.addClass("in"),i.enforceFocus();var o=e.Event("shown.bs.modal",{relatedTarget:n});r?i.$dialog.one("bsTransitionEnd",(function(){i.$element.trigger("focus").trigger(o)})).emulateTransitionEnd(t.TRANSITION_DURATION):i.$element.trigger("focus").trigger(o)})))},t.prototype.hide=function(n){n&&n.preventDefault(),n=e.Event("hide.bs.modal"),this.$element.trigger(n),this.isShown&&!n.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",e.proxy(this.hideModal,this)).emulateTransitionEnd(t.TRANSITION_DURATION):this.hideModal())},t.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy((function(e){document===e.target||this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")}),this))},t.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",e.proxy((function(e){27==e.which&&this.hide()}),this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},t.prototype.resize=function(){this.isShown?e(window).on("resize.bs.modal",e.proxy(this.handleUpdate,this)):e(window).off("resize.bs.modal")},t.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop((function(){e.$body.removeClass("modal-open"),e.resetAdjustments(),e.resetScrollbar(),e.$element.trigger("hidden.bs.modal")}))},t.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},t.prototype.backdrop=function(n){var i=this,r=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var o=e.support.transition&&r;if(this.$backdrop=e(document.createElement("div")).addClass("modal-backdrop "+r).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",e.proxy((function(e){this.ignoreBackdropClick?this.ignoreBackdropClick=!1:e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide())}),this)),o&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!n)return;o?this.$backdrop.one("bsTransitionEnd",n).emulateTransitionEnd(t.BACKDROP_TRANSITION_DURATION):n()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var a=function(){i.removeBackdrop(),n&&n()};e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",a).emulateTransitionEnd(t.BACKDROP_TRANSITION_DURATION):a()}else n&&n()},t.prototype.handleUpdate=function(){this.adjustDialog()},t.prototype.adjustDialog=function(){var e=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&e?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!e?this.scrollbarWidth:""})},t.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},t.prototype.checkScrollbar=function(){var e=window.innerWidth;if(!e){var t=document.documentElement.getBoundingClientRect();e=t.right-Math.abs(t.left)}this.bodyIsOverflowing=document.body.clientWidth<e,this.scrollbarWidth=this.measureScrollbar()},t.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",e+this.scrollbarWidth)},t.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},t.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure",this.$body.append(e);var t=e.offsetWidth-e.clientWidth;return this.$body[0].removeChild(e),t};var i=e.fn.modal;e.fn.modal=n,e.fn.modal.Constructor=t,e.fn.modal.noConflict=function(){return e.fn.modal=i,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',(function(t){var i=e(this),r=i.attr("href"),o=e(i.attr("data-target")||r&&r.replace(/.*(?=#[^\s]+$)/,"")),a=o.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(r)&&r},o.data(),i.data());i.is("a")&&t.preventDefault(),o.one("show.bs.modal",(function(e){e.isDefaultPrevented()||o.one("hidden.bs.modal",(function(){i.is(":visible")&&i.trigger("focus")}))})),n.call(o,a,this)}))}(jQuery),function(e){"use strict";var t=function(e,t){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",e,t)};t.VERSION="3.3.7",t.TRANSITION_DURATION=150,t.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},t.prototype.init=function(t,n,i){if(this.enabled=!0,this.type=t,this.$element=e(n),this.options=this.getOptions(i),this.$viewport=this.options.viewport&&e(e.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var r=this.options.trigger.split(" "),o=r.length;o--;){var a=r[o];if("click"==a)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=a){var s="hover"==a?"mouseenter":"focusin",l="hover"==a?"mouseleave":"focusout";this.$element.on(s+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.getOptions=function(t){return(t=e.extend({},this.getDefaults(),this.$element.data(),t)).delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},t.prototype.getDelegateOptions=function(){var t={},n=this.getDefaults();return this._options&&e.each(this._options,(function(e,i){n[e]!=i&&(t[e]=i)})),t},t.prototype.enter=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);if(n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),t instanceof e.Event&&(n.inState["focusin"==t.type?"focus":"hover"]=!0),n.tip().hasClass("in")||"in"==n.hoverState)n.hoverState="in";else{if(clearTimeout(n.timeout),n.hoverState="in",!n.options.delay||!n.options.delay.show)return n.show();n.timeout=setTimeout((function(){"in"==n.hoverState&&n.show()}),n.options.delay.show)}},t.prototype.isInStateTrue=function(){for(var e in this.inState)if(this.inState[e])return!0;return!1},t.prototype.leave=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);if(n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),t instanceof e.Event&&(n.inState["focusout"==t.type?"focus":"hover"]=!1),!n.isInStateTrue()){if(clearTimeout(n.timeout),n.hoverState="out",!n.options.delay||!n.options.delay.hide)return n.hide();n.timeout=setTimeout((function(){"out"==n.hoverState&&n.hide()}),n.options.delay.hide)}},t.prototype.show=function(){var n=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(n);var i=e.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(n.isDefaultPrevented()||!i)return;var r=this,o=this.tip(),a=this.getUID(this.type);this.setContent(),o.attr("id",a),this.$element.attr("aria-describedby",a),this.options.animation&&o.addClass("fade");var s="function"==typeof this.options.placement?this.options.placement.call(this,o[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,c=l.test(s);c&&(s=s.replace(l,"")||"top"),o.detach().css({top:0,left:0,display:"block"}).addClass(s).data("bs."+this.type,this),this.options.container?o.appendTo(this.options.container):o.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var u=this.getPosition(),d=o[0].offsetWidth,h=o[0].offsetHeight;if(c){var f=s,p=this.getPosition(this.$viewport);s="bottom"==s&&u.bottom+h>p.bottom?"top":"top"==s&&u.top-h<p.top?"bottom":"right"==s&&u.right+d>p.width?"left":"left"==s&&u.left-d<p.left?"right":s,o.removeClass(f).addClass(s)}var m=this.getCalculatedOffset(s,u,d,h);this.applyPlacement(m,s);var g=function(){var e=r.hoverState;r.$element.trigger("shown.bs."+r.type),r.hoverState=null,"out"==e&&r.leave(r)};e.support.transition&&this.$tip.hasClass("fade")?o.one("bsTransitionEnd",g).emulateTransitionEnd(t.TRANSITION_DURATION):g()}},t.prototype.applyPlacement=function(t,n){var i=this.tip(),r=i[0].offsetWidth,o=i[0].offsetHeight,a=parseInt(i.css("margin-top"),10),s=parseInt(i.css("margin-left"),10);isNaN(a)&&(a=0),isNaN(s)&&(s=0),t.top+=a,t.left+=s,e.offset.setOffset(i[0],e.extend({using:function(e){i.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),i.addClass("in");var l=i[0].offsetWidth,c=i[0].offsetHeight;"top"==n&&c!=o&&(t.top=t.top+o-c);var u=this.getViewportAdjustedDelta(n,t,l,c);u.left?t.left+=u.left:t.top+=u.top;var d=/top|bottom/.test(n),h=d?2*u.left-r+l:2*u.top-o+c,f=d?"offsetWidth":"offsetHeight";i.offset(t),this.replaceArrow(h,i[0][f],d)},t.prototype.replaceArrow=function(e,t,n){this.arrow().css(n?"left":"top",50*(1-e/t)+"%").css(n?"top":"left","")},t.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},t.prototype.hide=function(n){var i=this,r=e(this.$tip),o=e.Event("hide.bs."+this.type);function a(){"in"!=i.hoverState&&r.detach(),i.$element&&i.$element.removeAttr("aria-describedby").trigger("hidden.bs."+i.type),n&&n()}if(this.$element.trigger(o),!o.isDefaultPrevented())return r.removeClass("in"),e.support.transition&&r.hasClass("fade")?r.one("bsTransitionEnd",a).emulateTransitionEnd(t.TRANSITION_DURATION):a(),this.hoverState=null,this},t.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},t.prototype.hasContent=function(){return this.getTitle()},t.prototype.getPosition=function(t){var n=(t=t||this.$element)[0],i="BODY"==n.tagName,r=n.getBoundingClientRect();null==r.width&&(r=e.extend({},r,{width:r.right-r.left,height:r.bottom-r.top}));var o=window.SVGElement&&n instanceof window.SVGElement,a=i?{top:0,left:0}:o?null:t.offset(),s={scroll:i?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},l=i?{width:e(window).width(),height:e(window).height()}:null;return e.extend({},r,s,l,a)},t.prototype.getCalculatedOffset=function(e,t,n,i){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-n/2}:"top"==e?{top:t.top-i,left:t.left+t.width/2-n/2}:"left"==e?{top:t.top+t.height/2-i/2,left:t.left-n}:{top:t.top+t.height/2-i/2,left:t.left+t.width}},t.prototype.getViewportAdjustedDelta=function(e,t,n,i){var r={top:0,left:0};if(!this.$viewport)return r;var o=this.options.viewport&&this.options.viewport.padding||0,a=this.getPosition(this.$viewport);if(/right|left/.test(e)){var s=t.top-o-a.scroll,l=t.top+o-a.scroll+i;s<a.top?r.top=a.top-s:l>a.top+a.height&&(r.top=a.top+a.height-l)}else{var c=t.left-o,u=t.left+o+n;c<a.left?r.left=a.left-c:u>a.right&&(r.left=a.left+a.width-u)}return r},t.prototype.getTitle=function(){var e=this.$element,t=this.options;return e.attr("data-original-title")||("function"==typeof t.title?t.title.call(e[0]):t.title)},t.prototype.getUID=function(e){do{e+=~~(1e6*Math.random())}while(document.getElementById(e));return e},t.prototype.tip=function(){if(!this.$tip&&(this.$tip=e(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},t.prototype.enable=function(){this.enabled=!0},t.prototype.disable=function(){this.enabled=!1},t.prototype.toggleEnabled=function(){this.enabled=!this.enabled},t.prototype.toggle=function(t){var n=this;t&&((n=e(t.currentTarget).data("bs."+this.type))||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n))),t?(n.inState.click=!n.inState.click,n.isInStateTrue()?n.enter(n):n.leave(n)):n.tip().hasClass("in")?n.leave(n):n.enter(n)},t.prototype.destroy=function(){var e=this;clearTimeout(this.timeout),this.hide((function(){e.$element.off("."+e.type).removeData("bs."+e.type),e.$tip&&e.$tip.detach(),e.$tip=null,e.$arrow=null,e.$viewport=null,e.$element=null}))};var n=e.fn.tooltip;e.fn.tooltip=function(n){return this.each((function(){var i=e(this),r=i.data("bs.tooltip"),o="object"==typeof n&&n;!r&&/destroy|hide/.test(n)||(r||i.data("bs.tooltip",r=new t(this,o)),"string"==typeof n&&r[n]())}))},e.fn.tooltip.Constructor=t,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=n,this}}(jQuery),function(e){"use strict";var t=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");t.VERSION="3.3.7",t.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),(t.prototype=e.extend({},e.fn.tooltip.Constructor.prototype)).constructor=t,t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof n?"html":"append":"text"](n),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},t.prototype.hasContent=function(){return this.getTitle()||this.getContent()},t.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var n=e.fn.popover;e.fn.popover=function(n){return this.each((function(){var i=e(this),r=i.data("bs.popover"),o="object"==typeof n&&n;!r&&/destroy|hide/.test(n)||(r||i.data("bs.popover",r=new t(this,o)),"string"==typeof n&&r[n]())}))},e.fn.popover.Constructor=t,e.fn.popover.noConflict=function(){return e.fn.popover=n,this}}(jQuery),function(e){"use strict";function t(n,i){this.$body=e(document.body),this.$scrollElement=e(n).is(document.body)?e(window):e(n),this.options=e.extend({},t.DEFAULTS,i),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",e.proxy(this.process,this)),this.refresh(),this.process()}function n(n){return this.each((function(){var i=e(this),r=i.data("bs.scrollspy"),o="object"==typeof n&&n;r||i.data("bs.scrollspy",r=new t(this,o)),"string"==typeof n&&r[n]()}))}t.VERSION="3.3.7",t.DEFAULTS={offset:10},t.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},t.prototype.refresh=function(){var t=this,n="offset",i=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),e.isWindow(this.$scrollElement[0])||(n="position",i=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map((function(){var t=e(this),r=t.data("target")||t.attr("href"),o=/^#./.test(r)&&e(r);return o&&o.length&&o.is(":visible")&&[[o[n]().top+i,r]]||null})).sort((function(e,t){return e[0]-t[0]})).each((function(){t.offsets.push(this[0]),t.targets.push(this[1])}))},t.prototype.process=function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,n=this.getScrollHeight(),i=this.options.offset+n-this.$scrollElement.height(),r=this.offsets,o=this.targets,a=this.activeTarget;if(this.scrollHeight!=n&&this.refresh(),t>=i)return a!=(e=o[o.length-1])&&this.activate(e);if(a&&t<r[0])return this.activeTarget=null,this.clear();for(e=r.length;e--;)a!=o[e]&&t>=r[e]&&(void 0===r[e+1]||t<r[e+1])&&this.activate(o[e])},t.prototype.activate=function(t){this.activeTarget=t,this.clear();var n=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',i=e(n).parents("li").addClass("active");i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active")),i.trigger("activate.bs.scrollspy")},t.prototype.clear=function(){e(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var i=e.fn.scrollspy;e.fn.scrollspy=n,e.fn.scrollspy.Constructor=t,e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=i,this},e(window).on("load.bs.scrollspy.data-api",(function(){e('[data-spy="scroll"]').each((function(){var t=e(this);n.call(t,t.data())}))}))}(jQuery),function(e){"use strict";var t=function(t){this.element=e(t)};function n(n){return this.each((function(){var i=e(this),r=i.data("bs.tab");r||i.data("bs.tab",r=new t(this)),"string"==typeof n&&r[n]()}))}t.VERSION="3.3.7",t.TRANSITION_DURATION=150,t.prototype.show=function(){var t=this.element,n=t.closest("ul:not(.dropdown-menu)"),i=t.data("target");if(i||(i=(i=t.attr("href"))&&i.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var r=n.find(".active:last a"),o=e.Event("hide.bs.tab",{relatedTarget:t[0]}),a=e.Event("show.bs.tab",{relatedTarget:r[0]});if(r.trigger(o),t.trigger(a),!a.isDefaultPrevented()&&!o.isDefaultPrevented()){var s=e(i);this.activate(t.closest("li"),n),this.activate(s,s.parent(),(function(){r.trigger({type:"hidden.bs.tab",relatedTarget:t[0]}),t.trigger({type:"shown.bs.tab",relatedTarget:r[0]})}))}}},t.prototype.activate=function(n,i,r){var o=i.find("> .active"),a=r&&e.support.transition&&(o.length&&o.hasClass("fade")||!!i.find("> .fade").length);function s(){o.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),n.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),a?(n[0].offsetWidth,n.addClass("in")):n.removeClass("fade"),n.parent(".dropdown-menu").length&&n.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),r&&r()}o.length&&a?o.one("bsTransitionEnd",s).emulateTransitionEnd(t.TRANSITION_DURATION):s(),o.removeClass("in")};var i=e.fn.tab;e.fn.tab=n,e.fn.tab.Constructor=t,e.fn.tab.noConflict=function(){return e.fn.tab=i,this};var r=function(t){t.preventDefault(),n.call(e(this),"show")};e(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',r).on("click.bs.tab.data-api",'[data-toggle="pill"]',r)}(jQuery),function(e){"use strict";var t=function(n,i){this.options=e.extend({},t.DEFAULTS,i),this.$target=e(this.options.target).on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this)),this.$element=e(n),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};function n(n){return this.each((function(){var i=e(this),r=i.data("bs.affix"),o="object"==typeof n&&n;r||i.data("bs.affix",r=new t(this,o)),"string"==typeof n&&r[n]()}))}t.VERSION="3.3.7",t.RESET="affix affix-top affix-bottom",t.DEFAULTS={offset:0,target:window},t.prototype.getState=function(e,t,n,i){var r=this.$target.scrollTop(),o=this.$element.offset(),a=this.$target.height();if(null!=n&&"top"==this.affixed)return r<n&&"top";if("bottom"==this.affixed)return null!=n?!(r+this.unpin<=o.top)&&"bottom":!(r+a<=e-i)&&"bottom";var s=null==this.affixed,l=s?r:o.top;return null!=n&&r<=n?"top":null!=i&&l+(s?a:t)>=e-i&&"bottom"},t.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(t.RESET).addClass("affix");var e=this.$target.scrollTop(),n=this.$element.offset();return this.pinnedOffset=n.top-e},t.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)},t.prototype.checkPosition=function(){if(this.$element.is(":visible")){var n=this.$element.height(),i=this.options.offset,r=i.top,o=i.bottom,a=Math.max(e(document).height(),e(document.body).height());"object"!=typeof i&&(o=r=i),"function"==typeof r&&(r=i.top(this.$element)),"function"==typeof o&&(o=i.bottom(this.$element));var s=this.getState(a,n,r,o);if(this.affixed!=s){null!=this.unpin&&this.$element.css("top","");var l="affix"+(s?"-"+s:""),c=e.Event(l+".bs.affix");if(this.$element.trigger(c),c.isDefaultPrevented())return;this.affixed=s,this.unpin="bottom"==s?this.getPinnedOffset():null,this.$element.removeClass(t.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}"bottom"==s&&this.$element.offset({top:a-n-o})}};var i=e.fn.affix;e.fn.affix=n,e.fn.affix.Constructor=t,e.fn.affix.noConflict=function(){return e.fn.affix=i,this},e(window).on("load",(function(){e('[data-spy="affix"]').each((function(){var t=e(this),i=t.data();i.offset=i.offset||{},null!=i.offsetBottom&&(i.offset.bottom=i.offsetBottom),null!=i.offsetTop&&(i.offset.top=i.offsetTop),n.call(t,i)}))}))}(jQuery),define("bootstrap",["jquery"],(function(){})),new function(e){var t=e.separator||"&",n=!1!==e.spaces,i=(e.suffix,!1!==e.prefix?!0===e.hash?"#":"?":""),r=!1!==e.numbers;jQuery.query=new function(){var e=function(e,t){return null!=e&&null!==e&&(!t||e.constructor==t)},o=function(e){for(var t,n=/\[([^[]*)\]/g,i=/^([^[]+)(\[.*\])?$/.exec(e),r=i[1],o=[];t=n.exec(i[2]);)o.push(t[1]);return[r,o]},a=function(t,n,i){var r=n.shift();if("object"!=typeof t&&(t=null),""===r)if(t||(t=[]),e(t,Array))t.push(0==n.length?i:a(null,n.slice(0),i));else if(e(t,Object)){for(var o=0;null!=t[o++];);t[--o]=0==n.length?i:a(t[o],n.slice(0),i)}else(t=[]).push(0==n.length?i:a(null,n.slice(0),i));else if(r&&r.match(/^\s*[0-9]+\s*$/)){t||(t=[]),t[s=parseInt(r,10)]=0==n.length?i:a(t[s],n.slice(0),i)}else{if(!r)return i;var s=r.replace(/^\s*|\s*$/g,"");if(t||(t={}),e(t,Array)){var l={};for(o=0;o<t.length;++o)l[o]=t[o];t=l}t[s]=0==n.length?i:a(t[s],n.slice(0),i)}return t},s=function(e){var t=this;return t.keys={},e.queryObject?jQuery.each(e.get(),(function(e,n){t.SET(e,n)})):t.parseNew.apply(t,arguments),t};return s.prototype={queryObject:!0,parseNew:function(){var e=this;return e.keys={},jQuery.each(arguments,(function(){var t=""+this;t=(t=t.replace(/^[?#]/,"")).replace(/[;&]$/,""),n&&(t=t.replace(/[+]/g," ")),jQuery.each(t.split(/[&;]/),(function(){var t=decodeURIComponent(this.split("=")[0]||""),n=decodeURIComponent(this.split("=")[1]||"");t&&(r&&(/^[+-]?[0-9]+\.[0-9]*$/.test(n)?n=parseFloat(n):/^[+-]?[1-9][0-9]*$/.test(n)&&(n=parseInt(n,10))),n=!n&&0!==n||n,e.SET(t,n))}))})),e},has:function(t,n){var i=this.get(t);return e(i,n)},GET:function(t){if(!e(t))return this.keys;for(var n=o(t),i=n[0],r=n[1],a=this.keys[i];null!=a&&0!=r.length;)a=a[r.shift()];return"number"==typeof a?a:a||""},get:function(t){var n=this.GET(t);return e(n,Object)?jQuery.extend(!0,{},n):e(n,Array)?n.slice(0):n},SET:function(t,n){var i=e(n)?n:null,r=o(t),s=r[0],l=r[1],c=this.keys[s];return this.keys[s]=a(c,l.slice(0),i),this},set:function(e,t){return this.copy().SET(e,t)},REMOVE:function(t,n){if(n){var i=this.GET(t);if(e(i,Array)){for(tval in i)i[tval]=i[tval].toString();var r=$.inArray(n,i);if(!(r>=0))return;t=(t=i.splice(r,1))[r]}else if(n!=i)return}return this.SET(t,null).COMPACT()},remove:function(e,t){return this.copy().REMOVE(e,t)},EMPTY:function(){var e=this;return jQuery.each(e.keys,(function(t,n){delete e.keys[t]})),e},load:function(e){var t=e.replace(/^.*?[#](.+?)(?:\?.+)?$/,"$1"),n=e.replace(/^.*?[?](.+?)(?:#.+)?$/,"$1");return new s(e.length==n.length?"":n,e.length==t.length?"":t)},empty:function(){return this.copy().EMPTY()},copy:function(){return new s(this)},COMPACT:function(){return this.keys=function t(n){var i="object"==typeof n?e(n,Array)?[]:{}:n;if("object"==typeof n){jQuery.each(n,(function(n,r){if(!e(r))return!0;!function(t,n,i){e(t,Array)?t.push(i):t[n]=i}(i,n,t(r))}))}return i}(this.keys),this},compact:function(){return this.copy().COMPACT()},toString:function(){var r=[],o=[],a=function(e){return e+="",e=encodeURIComponent(e),n&&(e=e.replace(/%20/g,"+")),e},s=function(t,n){var i=function(e){return n&&""!=n?[n,"[",e,"]"].join(""):[e].join("")};jQuery.each(t,(function(t,n){"object"==typeof n?s(n,i(t)):function(t,n,i){if(e(i)&&!1!==i){var r=[a(n)];!0!==i&&(r.push("="),r.push(a(i))),t.push(r.join(""))}}(o,i(t),n)}))};return s(this.keys),o.length>0&&r.push(i),r.push(o.join(t)),r.join("")}},new s(location.search,location.hash)}}(jQuery.query||{}),define("jquery.query",(function(){})),define("pgui.page_settings",["class","underscore","bootstrap","jquery.query"],(function(e,t){var n=e.extend({init:function(e){this.container=e,this._initializeElements(),this._initializeParameters(),this._initializeEvents(),this._selectDefaults()},_initializeElements:function(){this.$Dialog=this.container.find(".js-page-settings-dialog"),this.$PageSizeContainer=this.container.find(".js-page-settings-page-size-container"),this.$PageSizeControl=this.container.find(".js-page-settings-page-size-control"),this.$PageSizeCustomContainer=this.container.find(".js-page-settings-custom-page-size-container"),this.$PageSizeCustomControl=this.container.find(".js-page-settings-custom-page-size-control"),this.$PageSizeCustomCounter=this.container.find(".js-page-settings-custom-page-size-pager"),this.$PageSizeSave=this.container.find(".js-page-settings-save"),this.$PageSizeCancel=this.container.find(".js-page-settings-cancel"),this.$ViewModeControl=this.container.find(".js-page-settings-viewmode-control"),this.$CardColumnCount=this.container.find(".js-page-settings-card-column-count")},_initializeParameters:function(){this.totalRecordCount=this.$Dialog.data("total-record-count"),this.defaultRecordCountPerPage=parseInt(this.$Dialog.data("record-count-per-page")),this.pageSizeIsCustom=!1,this.initValues={viewMode:this.$ViewModeControl.val(),cardsCount:this._getCardCountValues(),recordPerPage:this.defaultRecordCountPerPage}},_getCardCountValues:function(){return t.reduce(this.$CardColumnCount.toArray(),(function(e,t){var n=$(t);return e[n.data("size")]=n.val(),e}),{})},_initializeEvents:function(){var e=this;this.$PageSizeControl.on("change",(function(){"custom"==$(this).val()&&e._selectCustomPageSize()})),this.$PageSizeCustomControl.on("keyup, change",(function(){e._calcCustomCountPage($(this).val())})),this.$PageSizeSave.on("click",(function(){e._applyPageSettings()})),this.$ViewModeControl.on("change",(function(){e._changeModeHandler()})),this.$PageSizeCancel.on("click",(function(){e.$ViewModeControl.val(e.initValues.viewMode),e.$CardColumnCount.each((function(t,n){var i=$(n);i.val(e.initValues.cardsCount[i.data("size")])})),e._selectDefaults()}))},_pageSizeValues:[],_getPageSizeValues:function(){if(0==this._pageSizeValues.length){var e=[];this.$PageSizeControl.find("option").each((function(){e.push(parseInt($(this).val()))})),this._pageSizeValues=e}return this._pageSizeValues},_selectDefaults:function(){(this._changeModeHandler(),this._isPageSizeVariable())&&(-1===this._getPageSizeValues().indexOf(this.defaultRecordCountPerPage)?(this._selectCustomPageSize(),this._calcCustomCountPage(this.defaultRecordCountPerPage)):(this._selectPredefinedPageSize(),this.$PageSizeControl.val(this.defaultRecordCountPerPage)))},_isPageSizeVariable:function(){return this.$PageSizeCustomControl.length>0&&this.$PageSizeControl.length>0},_getPageCountForPageSize:function(e,t){return e>0?Math.floor(t/e)+(Math.floor(t/e)==t/e?0:1):1},_calcCustomCountPage:function(e){this.$PageSizeCustomCounter.text(this._getPageCountForPageSize(e,this.totalRecordCount))},_selectCustomPageSize:function(){this.$PageSizeContainer.hide(),this.$PageSizeCustomContainer.show(),this.pageSizeIsCustom=!0,this.$PageSizeCustomControl.val(this.defaultRecordCountPerPage),this._calcCustomCountPage(this.defaultRecordCountPerPage)},_selectPredefinedPageSize:function(){this.$PageSizeContainer.show(),this.$PageSizeCustomContainer.hide(),this.pageSizeIsCustom=!1},_changeModeHandler:function(){var e=this.$ViewModeControl.find("option:selected").data("name");this.$CardColumnCount.prop("disabled","CardViewMode"!=e)},_applyPageSettings:function(){var e=this,t=jQuery.query;t=(t=t.set("viewmode",e.$ViewModeControl.val())).set("cardcountinrow",e._getCardCountValues()),e._isPageSizeVariable()&&(t=t.set("recperpage",e.pageSizeIsCustom?e.$PageSizeCustomControl.val():e.$PageSizeControl.val())),window.location=t}});return function(e){new n(e)}})),define("pgui.filter_common",["class","underscore"],(function(e,t){var n=e.extend({init:function(e){this.operator=e,this.enabled=!0},isEnabled:function(){return this.enabled},setEnabled:function(e){return this.enabled=e,this},getOperator:function(){return this.operator},setOperator:function(e){return this.operator=e,this},isGroup:function(){return!1},isCondition:function(){return!1}}),i=n.extend({init:function(e,t){this._super(e||l.OPERATOR_AND),this.children=t||{}},setChildren:function(e){return this.children=e,this},addChild:function(e,t){return t=t||Date.now(),this.children[t]=e,this},removeChild:function(e){var n=t.findKey(this.children,(function(t){return t===e}));return t.isUndefined(n)?t.each(this.children,(function(t){t.removeChild(e)})):delete this.children[n],this},getChildren:function(){return this.children},getChild:function(e){return this.children[e]},deserialize:function(e,n){return this.setOperator(n.operator).setEnabled(n.isEnabled).setChildren(t.mapObject(n.children,t.bind((function(t){return(t.type===a.GROUP?new this.constructor:this.createCondition()).deserialize(e,t)}),this)))},serialize:function(){return{type:a.GROUP,isEnabled:this.isEnabled(),operator:this.getOperator(),children:t.mapObject(this.children,(function(e){return e.serialize()}))}},isEmpty:function(){return!t.find(this.children,(function(e){return!e.isEmpty()}))},createCondition:function(){return new r},isGroup:function(){return!0}}),r=n.extend({init:function(e,n,i){this._super(n||e?t.first(e.getOperators()):s.EQUALS),this.column=e,this.values=i||[],this.displayValues=t.clone(this.values)},getColumnName:function(){return this.column.getName()},setColumn:function(e){return this.column=e,this.values=[],this.displayValues=[],this.setOperator(t.first(e.getOperators())),this},getValues:function(){return this.values},getValueAt:function(e){return void 0===this.values[e]?null:this.values[e]},setValues:function(e){return this.values=e,this},setValueAt:function(e,t){return this.values[e]=t,this},setDisplayValues:function(e){return this.displayValues=e,this},setDisplayValueAt:function(e,t){return this.displayValues[e]=t,this},getDisplayValues:function(e){return this.displayValues},getDisplayValueAt:function(e){return void 0===this.displayValues[e]?null:this.displayValues[e]},serialize:function(){return{type:a.CONDITION,isEnabled:this.isEnabled(),column:this.column.getName(),operator:this.getOperator(),values:this.getValues(),displayValues:this.getDisplayValues()}},deserialize:function(e,n){return this.setColumn(t.find(e,(function(e){return e.getName()===n.column}))).setOperator(n.operator).setValues(n.values).setDisplayValues(n.displayValues).setEnabled(n.isEnabled)},isEmpty:function(){return!1},removeChild:function(){},isCondition:function(){return!0}}),o=e.extend({init:function(e,t,n){this.name=e,this.caption=t,this.operators=n},getName:function(){return this.name},getCaption:function(){return this.caption},getOperators:function(){return this.operators}}),a={GROUP:"group",CONDITION:"condition"},s={EQUALS:"Equals",DOES_NOT_EQUAL:"DoesNotEqual",IS_GREATER_THAN:"IsGreaterThan",IS_GREATER_THAN_OR_EQUAL_TO:"IsGreaterThanOrEqualTo",IS_LESS_THAN:"IsLessThan",IS_LESS_THAN_OR_EQUAL_TO:"IsLessThanOrEqualTo",IS_BETWEEN:"IsBetween",IS_NOT_BETWEEN:"IsNotBetween",CONTAINS:"Contains",DOES_NOT_CONTAIN:"DoesNotContain",BEGINS_WITH:"BeginsWith",ENDS_WITH:"EndsWith",IS_LIKE:"IsLike",IS_NOT_LIKE:"IsNotLike",IS_BLANK:"IsBlank",IS_NOT_BLANK:"IsNotBlank",DATE_EQUALS:"DateEquals",DATE_DOES_NOT_EQUAL:"DateDoesNotEqual",YEAR_EQUALS:"YearEquals",YEAR_DOES_NOT_EQUAL:"YearDoesNotEqual",MONTH_EQUALS:"MonthEquals",MONTH_DOES_NOT_EQUAL:"MonthDoesNotEqual",IN:"In",NOT_IN:"NotIn",TODAY:"Today",THIS_MONTH:"ThisMonth",PREV_MONTH:"PrevMonth",THIS_YEAR:"ThisYear",PREV_YEAR:"PrevYear"},l={OPERATOR_AND:"AND",OPERATOR_OR:"OR",OPERATOR_NONE:"NONE"};return{Column:o,Group:i,Condition:r,ComponentType:a,ConditionOperator:s,GroupOperator:l}})),define("microevent",["require","exports","module"],(function(e,t,n){var i=function(){};i.prototype={bind:function(e,t){this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(t)},once:function(e,t){this._onceEvents=this._onceEvents||{},this._onceEvents[e]=this._onceEvents[e]||[],this._onceEvents[e].push(t)},unbind:function(e,t){this._events=this._events||{},e in this._events!=!1&&this._events[e].splice(this._events[e].indexOf(t),1)},trigger:function(e){var t;if(this._events=this._events||{},this._onceEvents=this._onceEvents||{},e in this._events!=!1)for(t=0;t<this._events[e].length;t++)this._events[e][t].apply(this,Array.prototype.slice.call(arguments,1));if(e in this._onceEvents!=!1){for(t=0;t<this._onceEvents[e].length;t++)this._onceEvents[e][t].apply(this,Array.prototype.slice.call(arguments,1));this._onceEvents[e].splice(0,this._onceEvents[e].length)}}},i.mixin=function(e){for(var t=["bind","unbind","trigger","once"],n=0;n<t.length;n++)e.prototype[t[n]]=i.prototype[t[n]];return e},void 0!==n&&"exports"in n&&(n.exports=i)})),define("pgui.events",["class","microevent"],(function(e,t){var n=e.extend({init:function(e){this.$input=e},onChange:function(e){this.bind("changed",e)},changed:function(){this.trigger("changed")}});return{InputEvents:t.mixin(n),setupInputEvents:function(e){e.data("pg-events",new n(e))}}})),define("pgui.editors/custom",["class","microevent","underscore"],(function(e,t,n){return t.mixin(e.extend({init:function(e,t){this.rootElement=e,this.fieldName=this.rootElement.attr("data-field-name");var i=e.data("editor-visible");n.isUndefined(i)||this.setVisible(i),n.isFunction(t)&&t(this)},doChanged:function(){this.trigger("onChangeEvent",this,0)},getValue:function(){return null},getValueEx:function(){return this.getValue()},setValue:function(e){return this},setValueEx:function(e){this.setValue(e)},getDisplayValue:function(){return this.getValue()},getData:function(){return this.getValue()},setData:function(e){return this.setValue(e),this},onChange:function(e){return this.bind("onChangeEvent",e),this},getRootElement:function(){return this.rootElement},getFieldName:function(){return this.fieldName},isReadOnly:function(){return this.readonly()},getVisible:function(){return this.rootElement.closest(".form-group").is(":visible")},setVisible:function(e){return this.rootElement.closest(".form-group").toggle(e).prev(".form-group-label").toggle(e),this._getLabelGroup().toggle(e),this},visible:function(e){if(0!==this.rootElement.closest(".form-group").length)return n.isUndefined(e)?this.getVisible():void this.setVisible(e)},enabled:function(e){if(n.isUndefined(e))return this.getEnabled();this.getEnabled()!=e&&this.setEnabled(e)},getEnabled:function(){return!0},setEnabled:function(e){return this},readonly:function(e){if(n.isUndefined(e))return this.getReadonly();this.getReadonly()!=e&&this.setReadonly(e)},getReadonly:function(){return!1},setReadonly:function(e){return this},setValidationErrorMessage:function(e,t){var n=this.rootElement.closest("form").data("validator");if(!n)return this;var i=this.rootElement.closest(".col-input").find("input,select,textarea").first().attr("name");return i&&n.settings.messages[i]&&(n.settings.messages[i][e]=t,"required"===e&&(n.settings.messages[i].required_custom=t)),this},getState:function(){var e=this.rootElement.closest(".form-group"),t=["warning","error","success"];for(var n in t)if(e.hasClass("has-"+t[n]))return t[n];return"normal"},setState:function(e){if(-1!==["normal","warning","error","info","success"].indexOf(e)){var t="has-warning has-error has-success",n=this._getLabelGroup().removeClass(t),i=this.rootElement.closest(".form-group").removeClass(t);return"normal"===e||(n.addClass("has-"+e),i.addClass("has-"+e)),this}},setHint:function(e){var t=this.rootElement.closest(".form-group"),n=t.find(".help-block");return e?(0===n.length?t.append($("<p>").addClass("help-block").html(e)):n.html(e),this):(n.remove(),this)},isMultivalue:function(){return!1},destroy:function(){},setRequired:function(e){this._getLabelGroup().find("span.required-mark").toggle(Boolean(e));var t=e?"add":"remove",n=this._getSetRequiredTarget();return n.rules(t,"required_custom"),n.rules(t,"required"),this},getRequired:function(){return this._getLabelGroup().find("span.required-mark").is(":visible")},_getSetRequiredTarget:function(){return this.getRootElement()},_getLabelGroup:function(){return $(".control-label[for="+this._getId()+"]").closest(".form-group")},_getId:function(){return this.rootElement.attr("id")}}))})),define("pgui.editors/select2_format",["class"],(function(Class){return Class.extend({init:function(){this._formatCallbacks=[]},setCallback:function(e,t,n){"function"==typeof t?(n=n||0,this._formatCallbacks[n]||(this._formatCallbacks[n]={}),this._formatCallbacks[n][e]=t):console.error("select2: callback argument must be a valid function")},setFormatCallbacksFromElement:function(e,t){t=t||0;var n=this._evalFormatFunction(e.data("format-result")),i=this._evalFormatFunction(e.data("format-selection"));n&&this.setCallback("result",n,t),i&&this.setCallback("selection",i,t)},getFormatClojure:function(e,t){var n=this;return t=t||0,function(i){return n._hasFormatCallback(e,t)?n._formatCallbacks[t][e](i):i.text}},_hasFormatCallback:function(e,t){return!!this._formatCallbacks[t]&&!!this._formatCallbacks[t][e]},_evalFormatFunction:function(expr){if(!expr)return null;var result=void 0;return eval("var result = function (item) { "+expr+" };"),result}})})),function(e){var t={not_string:/[^s]/,number:/[dief]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fijosuxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/};function n(){var e=arguments[0],t=n.cache;return t[e]&&t.hasOwnProperty(e)||(t[e]=n.parse(e)),n.format.call(null,t[e],arguments)}n.format=function(e,i){var o,a,s,l,c,u,d,h,f=1,p=e.length,m="",g=[],v=!0,b="";for(a=0;a<p;a++)if("string"===(m=r(e[a])))g[g.length]=e[a];else if("array"===m){if((l=e[a])[2])for(o=i[f],s=0;s<l[2].length;s++){if(!o.hasOwnProperty(l[2][s]))throw new Error(n("[sprintf] property '%s' does not exist",l[2][s]));o=o[l[2][s]]}else o=l[1]?i[l[1]]:i[f++];if("function"==r(o)&&(o=o()),t.not_string.test(l[8])&&t.not_json.test(l[8])&&"number"!=r(o)&&isNaN(o))throw new TypeError(n("[sprintf] expecting number but found %s",r(o)));switch(t.number.test(l[8])&&(v=o>=0),l[8]){case"b":o=o.toString(2);break;case"c":o=String.fromCharCode(o);break;case"d":case"i":o=parseInt(o,10);break;case"j":o=JSON.stringify(o,null,l[6]?parseInt(l[6]):0);break;case"e":o=l[7]?o.toExponential(l[7]):o.toExponential();break;case"f":o=l[7]?parseFloat(o).toFixed(l[7]):parseFloat(o);break;case"o":o=o.toString(8);break;case"s":o=(o=String(o))&&l[7]?o.substring(0,l[7]):o;break;case"u":o>>>=0;break;case"x":o=o.toString(16);break;case"X":o=o.toString(16).toUpperCase()}t.json.test(l[8])?g[g.length]=o:(!t.number.test(l[8])||v&&!l[3]?b="":(b=v?"+":"-",o=o.toString().replace(t.sign,"")),u=l[4]?"0"===l[4]?"0":l[4].charAt(1):" ",d=l[6]-(b+o).length,c=l[6]&&d>0?(h=u,Array(d+1).join(h)):"",g[g.length]=l[5]?b+o+c:"0"===u?b+c+o:c+b+o)}return g.join("")},n.cache={},n.parse=function(e){for(var n=e,i=[],r=[],o=0;n;){if(null!==(i=t.text.exec(n)))r[r.length]=i[0];else if(null!==(i=t.modulo.exec(n)))r[r.length]="%";else{if(null===(i=t.placeholder.exec(n)))throw new SyntaxError("[sprintf] unexpected placeholder");if(i[2]){o|=1;var a=[],s=i[2],l=[];if(null===(l=t.key.exec(s)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(a[a.length]=l[1];""!==(s=s.substring(l[0].length));)if(null!==(l=t.key_access.exec(s)))a[a.length]=l[1];else{if(null===(l=t.index_access.exec(s)))throw new SyntaxError("[sprintf] failed to parse named argument key");a[a.length]=l[1]}i[2]=a}else o|=2;if(3===o)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");r[r.length]=i}n=n.substring(i[0].length)}return r};var i=function(e,t,i){return(i=(t||[]).slice(0)).splice(0,0,e),n.apply(null,i)};function r(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}"undefined"!=typeof exports?(exports.sprintf=n,exports.vsprintf=i):(e.sprintf=n,e.vsprintf=i,"function"==typeof define&&define.amd&&define("libs/sprintf",[],(function(){return{sprintf:n,vsprintf:i}})))}("undefined"==typeof window?this:window),function(e){void 0===e.fn.each2&&e.extend(e.fn,{each2:function(t){for(var n=e([0]),i=-1,r=this.length;++i<r&&(n.context=n[0]=this[i])&&!1!==t.call(n[0],i,n););return this}})}(jQuery),function(e,t){"use strict";if(window.Select2===t){var n,i,r,o,a,s,l,c,u={x:0,y:0},d={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(e){switch(e=e.which?e.which:e){case d.LEFT:case d.RIGHT:case d.UP:case d.DOWN:return!0}return!1},isControl:function(e){switch(e.which){case d.SHIFT:case d.CTRL:case d.ALT:return!0}return!!e.metaKey},isFunctionKey:function(e){return(e=e.which?e.which:e)>=112&&e<=123}},h={"â¶":"A","ï¼¡":"A","Ã":"A","Ã":"A","Ã":"A","áº¦":"A","áº¤":"A","áºª":"A","áº¨":"A","Ã":"A","Ä":"A","Ä":"A","áº°":"A","áº®":"A","áº´":"A","áº²":"A","È¦":"A","Ç ":"A","Ã":"A","Ç":"A","áº¢":"A","Ã":"A","Çº":"A","Ç":"A","È":"A","È":"A","áº ":"A","áº¬":"A","áº¶":"A","á¸":"A","Ä":"A","Èº":"A","â±¯":"A","ê²":"AA","Ã":"AE","Ç¼":"AE","Ç¢":"AE","ê´":"AO","ê¶":"AU","ê¸":"AV","êº":"AV","ê¼":"AY","â·":"B","ï¼¢":"B","á¸":"B","á¸":"B","á¸":"B","É":"B","Æ":"B","Æ":"B","â¸":"C","ï¼£":"C","Ä":"C","Ä":"C","Ä":"C","Ä":"C","Ã":"C","á¸":"C","Æ":"C","È»":"C","ê¾":"C","â¹":"D","ï¼¤":"D","á¸":"D","Ä":"D","á¸":"D","á¸":"D","á¸":"D","á¸":"D","Ä":"D","Æ":"D","Æ":"D","Æ":"D","ê¹":"D","Ç±":"DZ","Ç":"DZ","Ç²":"Dz","Ç":"Dz","âº":"E","ï¼¥":"E","Ã":"E","Ã":"E","Ã":"E","á»":"E","áº¾":"E","á»":"E","á»":"E","áº¼":"E","Ä":"E","á¸":"E","á¸":"E","Ä":"E","Ä":"E","Ã":"E","áºº":"E","Ä":"E","È":"E","È":"E","áº¸":"E","á»":"E","È¨":"E","á¸":"E","Ä":"E","á¸":"E","á¸":"E","Æ":"E","Æ":"E","â»":"F","ï¼¦":"F","á¸":"F","Æ":"F","ê»":"F","â¼":"G","ï¼§":"G","Ç´":"G","Ä":"G","á¸ ":"G","Ä":"G","Ä ":"G","Ç¦":"G","Ä¢":"G","Ç¤":"G","Æ":"G","ê ":"G","ê½":"G","ê¾":"G","â½":"H","ï¼¨":"H","Ä¤":"H","á¸¢":"H","á¸¦":"H","È":"H","á¸¤":"H","á¸¨":"H","á¸ª":"H","Ä¦":"H","â±§":"H","â±µ":"H","ê":"H","â¾":"I","ï¼©":"I","Ã":"I","Ã":"I","Ã":"I","Ä¨":"I","Äª":"I","Ä¬":"I","Ä°":"I","Ã":"I","á¸®":"I","á»":"I","Ç":"I","È":"I","È":"I","á»":"I","Ä®":"I","á¸¬":"I","Æ":"I","â¿":"J","ï¼ª":"J","Ä´":"J","É":"J","â":"K","ï¼«":"K","á¸°":"K","Ç¨":"K","á¸²":"K","Ä¶":"K","á¸´":"K","Æ":"K","â±©":"K","ê":"K","ê":"K","ê":"K","ê¢":"K","â":"L","ï¼¬":"L","Ä¿":"L","Ä¹":"L","Ä½":"L","á¸¶":"L","á¸¸":"L","Ä»":"L","á¸¼":"L","á¸º":"L","Å":"L","È½":"L","â±¢":"L","â± ":"L","ê":"L","ê":"L","ê":"L","Ç":"LJ","Ç":"Lj","â":"M","ï¼­":"M","á¸¾":"M","á¹":"M","á¹":"M","â±®":"M","Æ":"M","â":"N","ï¼®":"N","Ç¸":"N","Å":"N","Ã":"N","á¹":"N","Å":"N","á¹":"N","Å":"N","á¹":"N","á¹":"N","È ":"N","Æ":"N","ê":"N","ê¤":"N","Ç":"NJ","Ç":"Nj","â":"O","ï¼¯":"O","Ã":"O","Ã":"O","Ã":"O","á»":"O","á»":"O","á»":"O","á»":"O","Ã":"O","á¹":"O","È¬":"O","á¹":"O","Å":"O","á¹":"O","á¹":"O","Å":"O","È®":"O","È°":"O","Ã":"O","Èª":"O","á»":"O","Å":"O","Ç":"O","È":"O","È":"O","Æ ":"O","á»":"O","á»":"O","á» ":"O","á»":"O","á»¢":"O","á»":"O","á»":"O","Çª":"O","Ç¬":"O","Ã":"O","Ç¾":"O","Æ":"O","Æ":"O","ê":"O","ê":"O","Æ¢":"OI","ê":"OO","È¢":"OU","â":"P","ï¼°":"P","á¹":"P","á¹":"P","Æ¤":"P","â±£":"P","ê":"P","ê":"P","ê":"P","â":"Q","ï¼±":"Q","ê":"Q","ê":"Q","É":"Q","â":"R","ï¼²":"R","Å":"R","á¹":"R","Å":"R","È":"R","È":"R","á¹":"R","á¹":"R","Å":"R","á¹":"R","É":"R","â±¤":"R","ê":"R","ê¦":"R","ê":"R","â":"S","ï¼³":"S","áº":"S","Å":"S","á¹¤":"S","Å":"S","á¹ ":"S","Å ":"S","á¹¦":"S","á¹¢":"S","á¹¨":"S","È":"S","Å":"S","â±¾":"S","ê¨":"S","ê":"S","â":"T","ï¼´":"T","á¹ª":"T","Å¤":"T","á¹¬":"T","È":"T","Å¢":"T","á¹°":"T","á¹®":"T","Å¦":"T","Æ¬":"T","Æ®":"T","È¾":"T","ê":"T","ê¨":"TZ","â":"U","ï¼µ":"U","Ã":"U","Ã":"U","Ã":"U","Å¨":"U","á¹¸":"U","Åª":"U","á¹º":"U","Å¬":"U","Ã":"U","Ç":"U","Ç":"U","Ç":"U","Ç":"U","á»¦":"U","Å®":"U","Å°":"U","Ç":"U","È":"U","È":"U","Æ¯":"U","á»ª":"U","á»¨":"U","á»®":"U","á»¬":"U","á»°":"U","á»¤":"U","á¹²":"U","Å²":"U","á¹¶":"U","á¹´":"U","É":"U","â":"V","ï¼¶":"V","á¹¼":"V","á¹¾":"V","Æ²":"V","ê":"V","É":"V","ê ":"VY","â":"W","ï¼·":"W","áº":"W","áº":"W","Å´":"W","áº":"W","áº":"W","áº":"W","â±²":"W","â":"X","ï¼¸":"X","áº":"X","áº":"X","â":"Y","ï¼¹":"Y","á»²":"Y","Ã":"Y","Å¶":"Y","á»¸":"Y","È²":"Y","áº":"Y","Å¸":"Y","á»¶":"Y","á»´":"Y","Æ³":"Y","É":"Y","á»¾":"Y","â":"Z","ï¼º":"Z","Å¹":"Z","áº":"Z","Å»":"Z","Å½":"Z","áº":"Z","áº":"Z","Æµ":"Z","È¤":"Z","â±¿":"Z","â±«":"Z","ê¢":"Z","â":"a","ï½":"a","áº":"a","Ã ":"a","Ã¡":"a","Ã¢":"a","áº§":"a","áº¥":"a","áº«":"a","áº©":"a","Ã£":"a","Ä":"a","Ä":"a","áº±":"a","áº¯":"a","áºµ":"a","áº³":"a","È§":"a","Ç¡":"a","Ã¤":"a","Ç":"a","áº£":"a","Ã¥":"a","Ç»":"a","Ç":"a","È":"a","È":"a","áº¡":"a","áº­":"a","áº·":"a","á¸":"a","Ä":"a","â±¥":"a","É":"a","ê³":"aa","Ã¦":"ae","Ç½":"ae","Ç£":"ae","êµ":"ao","ê·":"au","ê¹":"av","ê»":"av","ê½":"ay","â":"b","ï½":"b","á¸":"b","á¸":"b","á¸":"b","Æ":"b","Æ":"b","É":"b","â":"c","ï½":"c","Ä":"c","Ä":"c","Ä":"c","Ä":"c","Ã§":"c","á¸":"c","Æ":"c","È¼":"c","ê¿":"c","â":"c","â":"d","ï½":"d","á¸":"d","Ä":"d","á¸":"d","á¸":"d","á¸":"d","á¸":"d","Ä":"d","Æ":"d","É":"d","É":"d","êº":"d","Ç³":"dz","Ç":"dz","â":"e","ï½":"e","Ã¨":"e","Ã©":"e","Ãª":"e","á»":"e","áº¿":"e","á»":"e","á»":"e","áº½":"e","Ä":"e","á¸":"e","á¸":"e","Ä":"e","Ä":"e","Ã«":"e","áº»":"e","Ä":"e","È":"e","È":"e","áº¹":"e","á»":"e","È©":"e","á¸":"e","Ä":"e","á¸":"e","á¸":"e","É":"e","É":"e","Ç":"e","â":"f","ï½":"f","á¸":"f","Æ":"f","ê¼":"f","â":"g","ï½":"g","Çµ":"g","Ä":"g","á¸¡":"g","Ä":"g","Ä¡":"g","Ç§":"g","Ä£":"g","Ç¥":"g","É ":"g","ê¡":"g","áµ¹":"g","ê¿":"g","â":"h","ï½":"h","Ä¥":"h","á¸£":"h","á¸§":"h","È":"h","á¸¥":"h","á¸©":"h","á¸«":"h","áº":"h","Ä§":"h","â±¨":"h","â±¶":"h","É¥":"h","Æ":"hv","â":"i","ï½":"i","Ã¬":"i","Ã­":"i","Ã®":"i","Ä©":"i","Ä«":"i","Ä­":"i","Ã¯":"i","á¸¯":"i","á»":"i","Ç":"i","È":"i","È":"i","á»":"i","Ä¯":"i","á¸­":"i","É¨":"i","Ä±":"i","â":"j","ï½":"j","Äµ":"j","Ç°":"j","É":"j","â":"k","ï½":"k","á¸±":"k","Ç©":"k","á¸³":"k","Ä·":"k","á¸µ":"k","Æ":"k","â±ª":"k","ê":"k","ê":"k","ê":"k","ê£":"k","â":"l","ï½":"l","Å":"l","Äº":"l","Ä¾":"l","á¸·":"l","á¸¹":"l","Ä¼":"l","á¸½":"l","á¸»":"l","Å¿":"l","Å":"l","Æ":"l","É«":"l","â±¡":"l","ê":"l","ê":"l","ê":"l","Ç":"lj","â":"m","ï½":"m","á¸¿":"m","á¹":"m","á¹":"m","É±":"m","É¯":"m","â":"n","ï½":"n","Ç¹":"n","Å":"n","Ã±":"n","á¹":"n","Å":"n","á¹":"n","Å":"n","á¹":"n","á¹":"n","Æ":"n","É²":"n","Å":"n","ê":"n","ê¥":"n","Ç":"nj","â":"o","ï½":"o","Ã²":"o","Ã³":"o","Ã´":"o","á»":"o","á»":"o","á»":"o","á»":"o","Ãµ":"o","á¹":"o","È­":"o","á¹":"o","Å":"o","á¹":"o","á¹":"o","Å":"o","È¯":"o","È±":"o","Ã¶":"o","È«":"o","á»":"o","Å":"o","Ç":"o","È":"o","È":"o","Æ¡":"o","á»":"o","á»":"o","á»¡":"o","á»":"o","á»£":"o","á»":"o","á»":"o","Ç«":"o","Ç­":"o","Ã¸":"o","Ç¿":"o","É":"o","ê":"o","ê":"o","Éµ":"o","Æ£":"oi","È£":"ou","ê":"oo","â":"p","ï½":"p","á¹":"p","á¹":"p","Æ¥":"p","áµ½":"p","ê":"p","ê":"p","ê":"p","â ":"q","ï½":"q","É":"q","ê":"q","ê":"q","â¡":"r","ï½":"r","Å":"r","á¹":"r","Å":"r","È":"r","È":"r","á¹":"r","á¹":"r","Å":"r","á¹":"r","É":"r","É½":"r","ê":"r","ê§":"r","ê":"r","â¢":"s","ï½":"s","Ã":"s","Å":"s","á¹¥":"s","Å":"s","á¹¡":"s","Å¡":"s","á¹§":"s","á¹£":"s","á¹©":"s","È":"s","Å":"s","È¿":"s","ê©":"s","ê":"s","áº":"s","â£":"t","ï½":"t","á¹«":"t","áº":"t","Å¥":"t","á¹­":"t","È":"t","Å£":"t","á¹±":"t","á¹¯":"t","Å§":"t","Æ­":"t","Ê":"t","â±¦":"t","ê":"t","ê©":"tz","â¤":"u","ï½":"u","Ã¹":"u","Ãº":"u","Ã»":"u","Å©":"u","á¹¹":"u","Å«":"u","á¹»":"u","Å­":"u","Ã¼":"u","Ç":"u","Ç":"u","Ç":"u","Ç":"u","á»§":"u","Å¯":"u","Å±":"u","Ç":"u","È":"u","È":"u","Æ°":"u","á»«":"u","á»©":"u","á»¯":"u","á»­":"u","á»±":"u","á»¥":"u","á¹³":"u","Å³":"u","á¹·":"u","á¹µ":"u","Ê":"u","â¥":"v","ï½":"v","á¹½":"v","á¹¿":"v","Ê":"v","ê":"v","Ê":"v","ê¡":"vy","â¦":"w","ï½":"w","áº":"w","áº":"w","Åµ":"w","áº":"w","áº":"w","áº":"w","áº":"w","â±³":"w","â§":"x","ï½":"x","áº":"x","áº":"x","â¨":"y","ï½":"y","á»³":"y","Ã½":"y","Å·":"y","á»¹":"y","È³":"y","áº":"y","Ã¿":"y","á»·":"y","áº":"y","á»µ":"y","Æ´":"y","É":"y","á»¿":"y","â©":"z","ï½":"z","Åº":"z","áº":"z","Å¼":"z","Å¾":"z","áº":"z","áº":"z","Æ¶":"z","È¥":"z","É":"z","â±¬":"z","ê£":"z","Î":"Î","Î":"Î","Î":"Î","Î":"Î","Îª":"Î","Î":"Î","Î":"Î¥","Î«":"Î¥","Î":"Î©","Î¬":"Î±","Î­":"Îµ","Î®":"Î·","Î¯":"Î¹","Ï":"Î¹","Î":"Î¹","Ï":"Î¿","Ï":"Ï","Ï":"Ï","Î°":"Ï","Ï":"Ï","Ï":"Ï"};s=e(document),c=1,o=function(){return c++},n=j(Object,{bind:function(e){var t=this;return function(){e.apply(t,arguments)}},init:function(n){var i,r,a=".select2-results";this.opts=n=this.prepareOpts(n),this.id=n.id,n.element.data("select2")!==t&&null!==n.element.data("select2")&&n.element.data("select2").destroy(),this.container=this.createContainer(),this.liveRegion=e(".select2-hidden-accessible"),0==this.liveRegion.length&&(this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(document.body)),this.containerId="s2id_"+(n.element.attr("id")||"autogen"+o()),this.containerEventName=this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.container.attr("title",n.element.attr("title")),this.body=e(document.body),C(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",n.element.attr("style")),this.container.css($(n.containerCss,this.opts.element)),this.container.addClass($(n.containerCssClass,this.opts.element)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",x),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),C(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass($(n.dropdownCssClass,this.opts.element)),this.dropdown.data("select2",this),this.dropdown.on("click",x),this.results=i=this.container.find(a),this.search=r=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",x),this.results.on("mousemove",(function(n){var i=u;i!==t&&i.x===n.pageX&&i.y===n.pageY||e(n.target).trigger("mousemove-filtered",n)})),this.dropdown.on("mousemove-filtered",a,this.bind(this.highlightUnderEvent)),this.dropdown.on("touchstart touchmove touchend",a,this.bind((function(e){this._touchEvent=!0,this.highlightUnderEvent(e)}))),this.dropdown.on("touchmove",a,this.bind(this.touchMoved)),this.dropdown.on("touchstart touchend",a,this.bind(this.clearTouchMoved)),this.dropdown.on("click",this.bind((function(e){this._touchEvent&&(this._touchEvent=!1,this.selectHighlighted())}))),function(e,t){var n=w(e,(function(e){t.trigger("scroll-debounced",e)}));t.on("scroll",(function(e){m(e.target,t.get())>=0&&n(e)}))}(80,this.results),this.dropdown.on("scroll-debounced",a,this.bind(this.loadMoreIfNeeded)),e(this.container).on("change",".select2-input",(function(e){e.stopPropagation()})),e(this.dropdown).on("change",".select2-input",(function(e){e.stopPropagation()})),e.fn.mousewheel&&i.mousewheel((function(e,t,n,r){var o=i.scrollTop();r>0&&o-r<=0?(i.scrollTop(0),x(e)):r<0&&i.get(0).scrollHeight-i.scrollTop()+r<=i.height()&&(i.scrollTop(i.get(0).scrollHeight-i.height()),x(e))})),y(r),r.on("keyup-change input paste",this.bind(this.updateResults)),r.on("focus",(function(){r.addClass("select2-focused")})),r.on("blur",(function(){r.removeClass("select2-focused")})),this.dropdown.on("mouseup",a,this.bind((function(t){e(t.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(t),this.selectHighlighted(t))}))),this.dropdown.on("click mouseup mousedown touchstart touchend focusin",(function(e){e.stopPropagation()})),this.nextSearchTerm=t,e.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==n.maximumInputLength&&this.search.attr("maxlength",n.maximumInputLength);var s=n.element.prop("disabled");s===t&&(s=!1),this.enable(!s);var c=n.element.prop("readonly");c===t&&(c=!1),this.readonly(c),l=l||function(){var t=e("<div class='select2-measure-scrollbar'></div>");t.appendTo(document.body);var n={width:t.width()-t[0].clientWidth,height:t.height()-t[0].clientHeight};return t.remove(),n}(),this.autofocus=n.element.prop("autofocus"),n.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.search.attr("placeholder",n.searchInputPlaceholder)},destroy:function(){var e=this.opts.element,n=e.data("select2"),i=this;this.close(),e.length&&e[0].detachEvent&&i._sync&&e.each((function(){i._sync&&this.detachEvent("onpropertychange",i._sync)})),this.propertyObserver&&(this.propertyObserver.disconnect(),this.propertyObserver=null),this._sync=null,n!==t&&(n.container.remove(),n.liveRegion.remove(),n.dropdown.remove(),e.show().removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?e.attr({tabindex:this.elementTabIndex}):e.removeAttr("tabindex"),e.show()),P.call(this,"container","liveRegion","dropdown","results","search")},optionToData:function(e){return e.is("option")?{id:e.prop("value"),text:e.text(),element:e.get(),css:e.attr("class"),disabled:e.prop("disabled"),locked:g(e.attr("locked"),"locked")||g(e.data("locked"),!0)}:e.is("optgroup")?{text:e.attr("label"),children:[],element:e.get(),css:e.attr("class")}:void 0},prepareOpts:function(n){var i,r,a,s,l=this;if("select"===(i=n.element).get(0).tagName.toLowerCase()&&(this.select=r=n.element),r&&e.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],(function(){if(this in n)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")})),"function"!=typeof(n=e.extend({},{populateResults:function(i,r,a){var s,c=this.opts.id,u=this.liveRegion;s=function(i,r,d){var h,f,p,m,g,v,b,y,w,x,C=[];for(h=0,f=(i=n.sortResults(i,r,a)).length;h<f;h+=1)m=!(g=!0===(p=i[h]).disabled)&&c(p)!==t,v=p.children&&p.children.length>0,(b=e("<li></li>")).addClass("select2-results-dept-"+d),b.addClass("select2-result"),b.addClass(m?"select2-result-selectable":"select2-result-unselectable"),g&&b.addClass("select2-disabled"),v&&b.addClass("select2-result-with-children"),b.addClass(l.opts.formatResultCssClass(p)),b.attr("role","presentation"),(y=e(document.createElement("div"))).addClass("select2-result-label"),y.attr("id","select2-result-label-"+o()),y.attr("role","option"),(x=n.formatResult(p,y,a,l.opts.escapeMarkup))!==t&&(y.html(x),b.append(y)),v&&((w=e("<ul></ul>")).addClass("select2-result-sub"),s(p.children,w,d+1),b.append(w)),b.data("select2-data",p),C.push(b[0]);r.append(C),u.text(n.formatMatches(i.length))},s(r,i,0)}},e.fn.select2.defaults,n)).id&&(a=n.id,n.id=function(e){return e[a]}),e.isArray(n.element.data("select2Tags"))){if("tags"in n)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+n.element.attr("id");n.tags=n.element.data("select2Tags")}if(r?(n.query=this.bind((function(e){var n,r,o,a={results:[],more:!1},s=e.term;o=function(t,n){var i;t.is("option")?e.matcher(s,t.text(),t)&&n.push(l.optionToData(t)):t.is("optgroup")&&(i=l.optionToData(t),t.children().each2((function(e,t){o(t,i.children)})),i.children.length>0&&n.push(i))},n=i.children(),this.getPlaceholder()!==t&&n.length>0&&(r=this.getPlaceholderOption())&&(n=n.not(r)),n.each2((function(e,t){o(t,a.results)})),e.callback(a)})),n.id=function(e){return e.id}):"query"in n||("ajax"in n?((s=n.element.data("ajax-url"))&&s.length>0&&(n.ajax.url=s),n.query=E.call(n.element,n.ajax)):"data"in n?n.query=S(n.data):"tags"in n&&(n.query=T(n.tags),n.createSearchChoice===t&&(n.createSearchChoice=function(t){return{id:e.trim(t),text:e.trim(t)}}),n.initSelection===t&&(n.initSelection=function(t,i){var r=[];e(v(t.val(),n.separator,n.transformVal)).each((function(){var t={id:this,text:this},i=n.tags;e.isFunction(i)&&(i=i()),e(i).each((function(){if(g(this.id,t.id))return t=this,!1})),r.push(t)})),i(r)}))),"function"!=typeof n.query)throw"query function not defined for Select2 "+n.element.attr("id");if("top"===n.createSearchChoicePosition)n.createSearchChoicePosition=function(e,t){e.unshift(t)};else if("bottom"===n.createSearchChoicePosition)n.createSearchChoicePosition=function(e,t){e.push(t)};else if("function"!=typeof n.createSearchChoicePosition)throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function";return n},monitorSource:function(){var n,i=this.opts.element,r=this;i.on("change.select2",this.bind((function(e){!0!==this.opts.element.data("select2-change-triggered")&&this.initSelection()}))),this._sync=this.bind((function(){var e=i.prop("disabled");e===t&&(e=!1),this.enable(!e);var n=i.prop("readonly");n===t&&(n=!1),this.readonly(n),this.container&&(C(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass($(this.opts.containerCssClass,this.opts.element))),this.dropdown&&(C(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass($(this.opts.dropdownCssClass,this.opts.element)))})),i.length&&i[0].attachEvent&&i.each((function(){this.attachEvent("onpropertychange",r._sync)})),(n=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)!==t&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new n((function(t){e.each(t,r._sync)})),this.propertyObserver.observe(i.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(t){var n=e.Event("select2-selecting",{val:this.id(t),object:t,choice:t});return this.opts.element.trigger(n),!n.isDefaultPrevented()},triggerChange:function(t){t=t||{},t=e.extend({},t,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(t),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return!0===this.enabledInterface},enableInterface:function(){var e=this._enabled&&!this._readonly,t=!e;return e!==this.enabledInterface&&(this.container.toggleClass("select2-container-disabled",t),this.close(),this.enabledInterface=e,!0)},enable:function(e){e===t&&(e=!0),this._enabled!==e&&(this._enabled=e,this.opts.element.prop("disabled",!e),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(e){e===t&&(e=!1),this._readonly!==e&&(this._readonly=e,this.opts.element.prop("readonly",e),this.enableInterface())},opened:function(){return!!this.container&&this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var t,n,i,r,o,a=this.dropdown,s=this.container,c=s.offset(),u=s.outerHeight(!1),d=s.outerWidth(!1),h=a.outerHeight(!1),f=e(window),p=f.width(),m=f.height(),g=f.scrollLeft()+p,v=f.scrollTop()+m,b=c.top+u,y=c.left,w=b+h<=v,x=c.top-h>=f.scrollTop(),C=a.outerWidth(!1);a.hasClass("select2-drop-above")?(n=!0,!x&&w&&(i=!0,n=!1)):(n=!1,!w&&x&&(i=!0,n=!0)),i&&(a.hide(),c=this.container.offset(),u=this.container.outerHeight(!1),d=this.container.outerWidth(!1),h=a.outerHeight(!1),g=f.scrollLeft()+p,v=f.scrollTop()+m,b=c.top+u,y=c.left,C=a.outerWidth(!1),a.show(),this.focusSearch()),this.opts.dropdownAutoWidth?(o=e(".select2-results",a)[0],a.addClass("select2-drop-auto-width"),a.css("width",""),(C=a.outerWidth(!1)+(o.scrollHeight===o.clientHeight?0:l.width))>d?d=C:C=d,h=a.outerHeight(!1)):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body.css("position")&&(b-=(t=this.body.offset()).top,y-=t.left),!(y+C<=g)&&c.left+g+s.outerWidth(!1)>C&&(y=c.left+this.container.outerWidth(!1)-C),r={left:y,width:d},n?(r.top=c.top-h,r.bottom="auto",this.container.addClass("select2-drop-above"),a.addClass("select2-drop-above")):(r.top=b,r.bottom="auto",this.container.removeClass("select2-drop-above"),a.removeClass("select2-drop-above")),r=e.extend(r,$(this.opts.dropdownCss,this.opts.element)),a.css(r)},shouldOpen:function(){var t;return!this.opened()&&(!1!==this._enabled&&!0!==this._readonly&&(t=e.Event("select2-opening"),this.opts.element.trigger(t),!t.isDefaultPrevented()))},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return!!this.shouldOpen()&&(this.opening(),s.on("mousemove.select2Event",(function(e){u.x=e.pageX,u.y=e.pageY})),!0)},opening:function(){var t,n=this.containerEventName,i="scroll."+n,r="resize."+n,o="orientationchange."+n;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body.children().last()[0]&&this.dropdown.detach().appendTo(this.body),0===(t=e("#select2-drop-mask")).length&&((t=e(document.createElement("div"))).attr("id","select2-drop-mask").attr("class","select2-drop-mask"),t.hide(),t.appendTo(this.body),t.on("mousedown touchstart click",(function(n){f(t);var i,r=e("#select2-drop");r.length>0&&((i=r.data("select2")).opts.selectOnBlur&&i.selectHighlighted({noFocus:!0}),i.close(),n.preventDefault(),n.stopPropagation())}))),this.dropdown.prev()[0]!==t[0]&&this.dropdown.before(t),e("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),t.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var a=this;this.container.parents().add(window).each((function(){e(this).on(r+" "+i+" "+o,(function(e){a.opened()&&a.positionDropdown()}))}))},close:function(){if(this.opened()){var t=this.containerEventName,n="scroll."+t,i="resize."+t,r="orientationchange."+t;this.container.parents().add(window).each((function(){e(this).off(n).off(i).off(r)})),this.clearDropdownAlignmentPreference(),e("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),s.off("mousemove.select2Event"),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(e.Event("select2-close"))}},externalSearch:function(e){this.open(),this.search.val(e),this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return $(this.opts.maximumSelectionSize,this.opts.element)},ensureHighlightVisible:function(){var t,n,i,r,o,a,s,l,c=this.results;(n=this.highlight())<0||(0!=n?(t=this.findHighlightableChoices().find(".select2-result-label"),r=(l=((i=e(t[n])).offset()||{}).top||0)+i.outerHeight(!0),n===t.length-1&&(s=c.find("li.select2-more-results")).length>0&&(r=s.offset().top+s.outerHeight(!0)),r>(o=c.offset().top+c.outerHeight(!1))&&c.scrollTop(c.scrollTop()+(r-o)),(a=l-c.offset().top)<0&&"none"!=i.css("display")&&c.scrollTop(c.scrollTop()+a)):c.scrollTop(0))},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},moveHighlight:function(t){for(var n=this.findHighlightableChoices(),i=this.highlight();i>-1&&i<n.length;){var r=e(n[i+=t]);if(r.hasClass("select2-result-selectable")&&!r.hasClass("select2-disabled")&&!r.hasClass("select2-selected")){this.highlight(i);break}}},highlight:function(t){var n,i,r=this.findHighlightableChoices();if(0===arguments.length)return m(r.filter(".select2-highlighted")[0],r.get());t>=r.length&&(t=r.length-1),t<0&&(t=0),this.removeHighlight(),(n=e(r[t])).addClass("select2-highlighted"),this.search.attr("aria-activedescendant",n.find(".select2-result-label").attr("id")),this.ensureHighlightVisible(),this.liveRegion.text(n.text()),(i=n.data("select2-data"))&&this.opts.element.trigger({type:"select2-highlight",val:this.id(i),choice:i})},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=!0},clearTouchMoved:function(){this._touchMoved=!1},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(t){var n=e(t.target).closest(".select2-result-selectable");if(n.length>0&&!n.is(".select2-highlighted")){var i=this.findHighlightableChoices();this.highlight(i.index(n))}else 0==n.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var e=this.results,t=e.find("li.select2-more-results"),n=this.resultsPage+1,i=this,r=this.search.val(),o=this.context;0!==t.length&&t.offset().top-e.offset().top-e.height()<=this.opts.loadMorePadding&&(t.addClass("select2-active"),this.opts.query({element:this.opts.element,term:r,page:n,context:o,matcher:this.opts.matcher,callback:this.bind((function(a){i.opened()&&(i.opts.populateResults.call(this,e,a.results,{term:r,page:n,context:o}),i.postprocessResults(a,!1,!1),!0===a.more?(t.detach().appendTo(e).html(i.opts.escapeMarkup($(i.opts.formatLoadMore,i.opts.element,n+1))),window.setTimeout((function(){i.loadMoreIfNeeded()}),10)):t.remove(),i.positionDropdown(),i.resultsPage=n,i.context=a.context,this.opts.element.trigger({type:"select2-loaded",items:a}))}))}))},tokenize:function(){},updateResults:function(n){var i,r,o,a=this.search,s=this.results,l=this.opts,c=this,u=a.val(),d=e.data(this.container,"select2-last-term");if((!0===n||!d||!g(u,d))&&(e.data(this.container,"select2-last-term",u),!0===n||!1!==this.showSearchInput&&this.opened())){o=++this.queryCount;var h=this.getMaximumSelectionSize();if(!(h>=1&&(i=this.data(),e.isArray(i)&&i.length>=h&&D(l.formatSelectionTooBig,"formatSelectionTooBig"))))return a.val().length<l.minimumInputLength?(D(l.formatInputTooShort,"formatInputTooShort")?p("<li class='select2-no-results'>"+$(l.formatInputTooShort,l.element,a.val(),l.minimumInputLength)+"</li>"):p(""),void(n&&this.showSearch&&this.showSearch(!0))):void(l.maximumInputLength&&a.val().length>l.maximumInputLength?D(l.formatInputTooLong,"formatInputTooLong")?p("<li class='select2-no-results'>"+$(l.formatInputTooLong,l.element,a.val(),l.maximumInputLength)+"</li>"):p(""):(l.formatSearching&&0===this.findHighlightableChoices().length&&p("<li class='select2-searching'>"+$(l.formatSearching,l.element)+"</li>"),a.addClass("select2-active"),this.removeHighlight(),(r=this.tokenize())!=t&&null!=r&&a.val(r),this.resultsPage=1,l.query({element:l.element,term:a.val(),page:this.resultsPage,context:null,matcher:l.matcher,callback:this.bind((function(i){var r;o==this.queryCount&&(this.opened()?i.hasError!==t&&D(l.formatAjaxError,"formatAjaxError")?p("<li class='select2-ajax-error'>"+$(l.formatAjaxError,l.element,i.jqXHR,i.textStatus,i.errorThrown)+"</li>"):(this.context=i.context===t?null:i.context,this.opts.createSearchChoice&&""!==a.val()&&(r=this.opts.createSearchChoice.call(c,a.val(),i.results))!==t&&null!==r&&c.id(r)!==t&&null!==c.id(r)&&0===e(i.results).filter((function(){return g(c.id(this),c.id(r))})).length&&this.opts.createSearchChoicePosition(i.results,r),0===i.results.length&&D(l.formatNoMatches,"formatNoMatches")?p("<li class='select2-no-results'>"+$(l.formatNoMatches,l.element,a.val())+"</li>"):(s.empty(),c.opts.populateResults.call(this,s,i.results,{term:a.val(),page:this.resultsPage,context:null}),!0===i.more&&D(l.formatLoadMore,"formatLoadMore")&&(s.append("<li class='select2-more-results'>"+l.escapeMarkup($(l.formatLoadMore,l.element,this.resultsPage))+"</li>"),window.setTimeout((function(){c.loadMoreIfNeeded()}),10)),this.postprocessResults(i,n),f(),this.opts.element.trigger({type:"select2-loaded",items:i}))):this.search.removeClass("select2-active"))}))})));p("<li class='select2-selection-limit'>"+$(l.formatSelectionTooBig,l.element,h)+"</li>")}function f(){a.removeClass("select2-active"),c.positionDropdown(),s.find(".select2-no-results,.select2-selection-limit,.select2-searching").length?c.liveRegion.text(s.text()):c.liveRegion.text(c.opts.formatMatches(s.find('.select2-result-selectable:not(".select2-selected")').length))}function p(e){s.html(e),f()}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){var e;(e=this.search)[0]!==document.activeElement&&window.setTimeout((function(){var t,n=e[0],i=e.val().length;e.focus(),(n.offsetWidth>0||n.offsetHeight>0)&&n===document.activeElement&&(n.setSelectionRange?n.setSelectionRange(i,i):n.createTextRange&&((t=n.createTextRange()).collapse(!1),t.select()))}),0)},selectHighlighted:function(e){if(this._touchMoved)this.clearTouchMoved();else{var t=this.highlight(),n=this.results.find(".select2-highlighted").closest(".select2-result").data("select2-data");n?(this.highlight(t),this.onSelect(n,e)):e&&e.noFocus&&this.close()}},getPlaceholder:function(){var e;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((e=this.getPlaceholderOption())!==t?e.text():t)},getPlaceholderOption:function(){if(this.select){var n=this.select.children("option").first();if(this.opts.placeholderOption!==t)return"first"===this.opts.placeholderOption&&n||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===e.trim(n.text())&&""===n.val())return n}},initContainerWidth:function(){var n=function(){var n,i,r,o,a;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if((n=this.opts.element.attr("style"))!==t)for(o=0,a=(i=n.split(";")).length;o<a;o+=1)if(null!==(r=i[o].replace(/\s/g,"").match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i))&&r.length>=1)return r[1];return"resolve"===this.opts.width?(n=this.opts.element.css("width")).indexOf("%")>0?n:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px":null}return e.isFunction(this.opts.width)?this.opts.width():this.opts.width}.call(this);null!==n&&this.container.css("width",n)}}),i=j(n,{createContainer:function(){return e(document.createElement("div")).attr({class:"select2-container"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>","</a>","<label for='' class='select2-offscreen'></label>","<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <label for='' class='select2-offscreen'></label>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'","       aria-autocomplete='list' />","   </div>","   <ul class='select2-results' role='listbox'>","   </ul>","</div>"].join(""))},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var n,i,r;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),!1!==this.showSearchInput&&this.search.val(this.focusser.val()),this.opts.shouldFocusInput(this)&&(this.search.focus(),(n=this.search.get(0)).createTextRange?((i=n.createTextRange()).collapse(!1),i.select()):n.setSelectionRange&&(r=this.search.val().length,n.setSelectionRange(r,r))),""===this.search.val()&&this.nextSearchTerm!=t&&(this.search.val(this.nextSearchTerm),this.search.select()),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(e.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus()},destroy:function(){e("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),P.call(this,"selection","focusser")},initContainer:function(){var t,n,i=this.container,r=this.dropdown,a=o();this.opts.minimumResultsForSearch<0?this.showSearch(!1):this.showSearch(!0),this.selection=t=i.find(".select2-choice"),this.focusser=i.find(".select2-focusser"),t.find(".select2-chosen").attr("id","select2-chosen-"+a),this.focusser.attr("aria-labelledby","select2-chosen-"+a),this.results.attr("id","select2-results-"+a),this.search.attr("aria-owns","select2-results-"+a),this.focusser.attr("id","s2id_autogen"+a),n=e("label[for='"+this.opts.element.attr("id")+"']"),this.opts.element.focus(this.bind((function(){this.focus()}))),this.focusser.prev().text(n.text()).attr("for",this.focusser.attr("id"));var s=this.opts.element.attr("title");this.opts.element.attr("title",s||n.text()),this.focusser.attr("tabindex",this.elementTabIndex),this.search.attr("id",this.focusser.attr("id")+"_search"),this.search.prev().text(e("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("keydown",this.bind((function(e){if(this.isInterfaceEnabled()&&229!=e.keyCode)if(e.which!==d.PAGE_UP&&e.which!==d.PAGE_DOWN)switch(e.which){case d.UP:case d.DOWN:return this.moveHighlight(e.which===d.UP?-1:1),void x(e);case d.ENTER:return this.selectHighlighted(),void x(e);case d.TAB:return void this.selectHighlighted({noFocus:!0});case d.ESC:return this.cancel(e),void x(e)}else x(e)}))),this.search.on("blur",this.bind((function(e){document.activeElement===this.body.get(0)&&window.setTimeout(this.bind((function(){this.opened()&&this.search.focus()})),0)}))),this.focusser.on("keydown",this.bind((function(e){if(this.isInterfaceEnabled()&&e.which!==d.TAB&&!d.isControl(e)&&!d.isFunctionKey(e)&&e.which!==d.ESC){if(!1!==this.opts.openOnEnter||e.which!==d.ENTER){if(e.which==d.DOWN||e.which==d.UP||e.which==d.ENTER&&this.opts.openOnEnter){if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return;return this.open(),void x(e)}return e.which==d.DELETE||e.which==d.BACKSPACE?(this.opts.allowClear&&this.clear(),void x(e)):void 0}x(e)}}))),y(this.focusser),this.focusser.on("keyup-change input",this.bind((function(e){if(this.opts.minimumResultsForSearch>=0){if(e.stopPropagation(),this.opened())return;this.open()}}))),t.on("mousedown touchstart","abbr",this.bind((function(e){this.isInterfaceEnabled()&&(this.clear(),function(e){e.preventDefault(),e.stopImmediatePropagation()}(e),this.close(),this.selection&&this.selection.focus())}))),t.on("mousedown touchstart",this.bind((function(n){f(t),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),x(n)}))),r.on("mousedown touchstart",this.bind((function(){this.opts.shouldFocusInput(this)&&this.search.focus()}))),t.on("focus",this.bind((function(e){x(e)}))),this.focusser.on("focus",this.bind((function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")}))).on("blur",this.bind((function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(e.Event("select2-blur")))}))),this.search.on("focus",this.bind((function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")}))),this.initContainerWidth(),this.opts.element.hide(),this.setPlaceholder()},clear:function(t){var n=this.selection.data("select2-data");if(n){var i=e.Event("select2-clearing");if(this.opts.element.trigger(i),i.isDefaultPrevented())return;var r=this.getPlaceholderOption();this.opts.element.val(r?r.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),!1!==t&&(this.opts.element.trigger({type:"select2-removed",val:this.id(n),choice:n}),this.triggerChange({removed:n}))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var e=this;this.opts.initSelection.call(null,this.opts.element,(function(n){n!==t&&null!==n&&(e.updateSelection(n),e.close(),e.setPlaceholder(),e.nextSearchTerm=e.opts.nextSearchTerm(n,e.search.val()))}))}},isPlaceholderOptionSelected:function(){var e;return this.getPlaceholder()!==t&&((e=this.getPlaceholderOption())!==t&&e.prop("selected")||""===this.opts.element.val()||this.opts.element.val()===t||null===this.opts.element.val())},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),n=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var i=e.find("option").filter((function(){return this.selected&&!this.disabled}));t(n.optionToData(i))}:"data"in t&&(t.initSelection=t.initSelection||function(n,i){var r=n.val(),o=null;t.query({matcher:function(e,n,i){var a=g(r,t.id(i));return a&&(o=i),a},callback:e.isFunction(i)?function(){i(o)}:e.noop})}),t},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===t?t:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var e=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&e!==t){if(this.select&&this.getPlaceholderOption()===t)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(e)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(e,t,n){var i=0,r=this;if(this.findHighlightableChoices().each2((function(e,t){if(g(r.id(t.data("select2-data")),r.opts.element.val()))return i=e,!1})),!1!==n&&(!0===t&&i>=0?this.highlight(i):this.highlight(0)),!0===t){var o=this.opts.minimumResultsForSearch;o>=0&&this.showSearch(A(e.results)>=o)}},showSearch:function(t){this.showSearchInput!==t&&(this.showSearchInput=t,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!t),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!t),e(this.dropdown,this.container).toggleClass("select2-with-searchbox",t))},onSelect:function(e,t){if(this.triggerSelect(e)){var n=this.opts.element.val(),i=this.data();this.opts.element.val(this.id(e)),this.updateSelection(e),this.opts.element.trigger({type:"select2-selected",val:this.id(e),choice:e}),this.nextSearchTerm=this.opts.nextSearchTerm(e,this.search.val()),this.close(),t&&t.noFocus||!this.opts.shouldFocusInput(this)||this.focusser.focus(),g(n,this.id(e))||this.triggerChange({added:e,removed:i})}},updateSelection:function(e){var n,i,r=this.selection.find(".select2-chosen");this.selection.data("select2-data",e),r.empty(),null!==e&&(n=this.opts.formatSelection(e,r,this.opts.escapeMarkup)),n!==t&&r.append(n),(i=this.opts.formatSelectionCssClass(e,r))!==t&&r.addClass(i),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==t&&this.container.addClass("select2-allowclear")},val:function(){var e,n=!1,i=null,r=this,o=this.data();if(0===arguments.length)return this.opts.element.val();if(e=arguments[0],arguments.length>1&&(n=arguments[1]),this.select)this.select.val(e).find("option").filter((function(){return this.selected})).each2((function(e,t){return i=r.optionToData(t),!1})),this.updateSelection(i),this.setPlaceholder(),n&&this.triggerChange({added:i,removed:o});else{if(!e&&0!==e)return void this.clear(n);if(this.opts.initSelection===t)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(e),this.opts.initSelection(this.opts.element,(function(e){r.opts.element.val(e?r.id(e):""),r.updateSelection(e),r.setPlaceholder(),n&&r.triggerChange({added:e,removed:o})}))}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(e){var n,i=!1;if(0===arguments.length)return(n=this.selection.data("select2-data"))==t&&(n=null),n;arguments.length>1&&(i=arguments[1]),e?(n=this.data(),this.opts.element.val(e?this.id(e):""),this.updateSelection(e),i&&this.triggerChange({added:e,removed:n})):this.clear(i)}}),r=j(n,{createContainer:function(){return e(document.createElement("div")).attr({class:"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <label for='' class='select2-offscreen'></label>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""))},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),n=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var i=[];e.find("option").filter((function(){return this.selected&&!this.disabled})).each2((function(e,t){i.push(n.optionToData(t))})),t(i)}:"data"in t&&(t.initSelection=t.initSelection||function(n,i){var r=v(n.val(),t.separator,t.transformVal),o=[];t.query({matcher:function(n,i,a){var s=e.grep(r,(function(e){return g(e,t.id(a))})).length;return s&&o.push(a),s},callback:e.isFunction(i)?function(){for(var e=[],n=0;n<r.length;n++)for(var a=r[n],s=0;s<o.length;s++){var l=o[s];if(g(a,t.id(l))){e.push(l),o.splice(s,1);break}}i(e)}:e.noop})}),t},selectChoice:function(e){var t=this.container.find(".select2-search-choice-focus");t.length&&e&&e[0]==t[0]||(t.length&&this.opts.element.trigger("choice-deselected",t),t.removeClass("select2-search-choice-focus"),e&&e.length&&(this.close(),e.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",e)))},destroy:function(){e("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),P.call(this,"searchContainer","selection")},initContainer:function(){var t,n=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=t=this.container.find(n);var i=this;this.selection.on("click",".select2-container:not(.select2-container-disabled) .select2-search-choice:not(.select2-locked)",(function(t){i.search[0].focus(),i.selectChoice(e(this))})),this.search.attr("id","s2id_autogen"+o()),this.search.prev().text(e("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.opts.element.focus(this.bind((function(){this.focus()}))),this.search.on("input paste",this.bind((function(){this.search.attr("placeholder")&&0==this.search.val().length||this.isInterfaceEnabled()&&(this.opened()||this.open())}))),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind((function(n){if(this.isInterfaceEnabled()){++this.keydowns;var i=t.find(".select2-search-choice-focus"),r=i.prev(".select2-search-choice:not(.select2-locked)"),o=i.next(".select2-search-choice:not(.select2-locked)"),a=function(t){var n=0,i=0;if("selectionStart"in(t=e(t)[0]))n=t.selectionStart,i=t.selectionEnd-n;else if("selection"in document){t.focus();var r=document.selection.createRange();i=document.selection.createRange().text.length,r.moveStart("character",-t.value.length),n=r.text.length-i}return{offset:n,length:i}}(this.search);if(i.length&&(n.which==d.LEFT||n.which==d.RIGHT||n.which==d.BACKSPACE||n.which==d.DELETE||n.which==d.ENTER)){var s=i;return n.which==d.LEFT&&r.length?s=r:n.which==d.RIGHT?s=o.length?o:null:n.which===d.BACKSPACE?this.unselect(i.first())&&(this.search.width(10),s=r.length?r:o):n.which==d.DELETE?this.unselect(i.first())&&(this.search.width(10),s=o.length?o:null):n.which==d.ENTER&&(s=null),this.selectChoice(s),x(n),void(s&&s.length||this.open())}if((n.which===d.BACKSPACE&&1==this.keydowns||n.which==d.LEFT)&&0==a.offset&&!a.length)return this.selectChoice(t.find(".select2-search-choice:not(.select2-locked)").last()),void x(n);if(this.selectChoice(null),this.opened())switch(n.which){case d.UP:case d.DOWN:return this.moveHighlight(n.which===d.UP?-1:1),void x(n);case d.ENTER:return this.selectHighlighted(),void x(n);case d.TAB:return this.selectHighlighted({noFocus:!0}),void this.close();case d.ESC:return this.cancel(n),void x(n)}if(n.which!==d.TAB&&!d.isControl(n)&&!d.isFunctionKey(n)&&n.which!==d.BACKSPACE&&n.which!==d.ESC){if(n.which===d.ENTER){if(!1===this.opts.openOnEnter)return;if(n.altKey||n.ctrlKey||n.shiftKey||n.metaKey)return}this.open(),n.which!==d.PAGE_UP&&n.which!==d.PAGE_DOWN||x(n),n.which===d.ENTER&&x(n)}}}))),this.search.on("keyup",this.bind((function(e){this.keydowns=0,this.resizeSearch()}))),this.search.on("blur",this.bind((function(t){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),t.stopImmediatePropagation(),this.opts.element.trigger(e.Event("select2-blur"))}))),this.container.on("click",n,this.bind((function(t){this.isInterfaceEnabled()&&(e(t.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.open(),this.focusSearch(),t.preventDefault()))}))),this.container.on("focus",n,this.bind((function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())}))),this.initContainerWidth(),this.opts.element.hide(),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var e=this;this.opts.initSelection.call(null,this.opts.element,(function(n){n!==t&&null!==n&&(e.updateSelection(n),e.close(),e.clearSearch())}))}},clearSearch:function(){var e=this.getPlaceholder(),n=this.getMaxSearchWidth();e!==t&&0===this.getVal().length&&!1===this.search.hasClass("select2-focused")?(this.search.val(e).addClass("select2-default"),this.search.width(n>0?n:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),""===this.search.val()&&this.nextSearchTerm!=t&&(this.search.val(this.nextSearchTerm),this.search.select()),this.updateResults(!0),this.opts.shouldFocusInput(this)&&this.search.focus(),this.opts.element.trigger(e.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(t){var n=[],i=[],r=this;e(t).each((function(){m(r.id(this),n)<0&&(n.push(r.id(this)),i.push(this))})),t=i,this.selection.find(".select2-search-choice").remove(),e(t).each((function(){r.addSelectedChoice(this)})),r.postprocessResults()},tokenize:function(){var e=this.search.val();null!=(e=this.opts.tokenizer.call(this,e,this.data(),this.bind(this.onSelect),this.opts))&&e!=t&&(this.search.val(e),e.length>0&&this.open())},onSelect:function(e,n){this.triggerSelect(e)&&""!==e.text&&(this.addSelectedChoice(e),this.opts.element.trigger({type:"selected",val:this.id(e),choice:e}),this.nextSearchTerm=this.opts.nextSearchTerm(e,this.search.val()),this.clearSearch(),this.updateResults(),!this.select&&this.opts.closeOnSelect||this.postprocessResults(e,!1,!0===this.opts.closeOnSelect),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()?this.updateResults(!0):this.nextSearchTerm!=t&&(this.search.val(this.nextSearchTerm),this.updateResults(),this.search.select()),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:e}),n&&n.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(n){var i,r,o=!n.locked,a=e("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),s=e("<li class='select2-search-choice select2-locked'><div></div></li>"),l=o?a:s,c=this.id(n),u=this.getVal();(i=this.opts.formatSelection(n,l.find("div"),this.opts.escapeMarkup))!=t&&l.find("div").replaceWith(e("<div></div>").html(i)),(r=this.opts.formatSelectionCssClass(n,l.find("div")))!=t&&l.addClass(r),o&&l.find(".select2-search-choice-close").on("mousedown",x).on("click dblclick",this.bind((function(t){this.isInterfaceEnabled()&&(this.unselect(e(t.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),x(t),this.close(),this.focusSearch())}))).on("focus",this.bind((function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))}))),l.data("select2-data",n),l.insertBefore(this.searchContainer),u.push(c),this.setVal(u)},unselect:function(t){var n,i,r=this.getVal();if(0===(t=t.closest(".select2-search-choice")).length)throw"Invalid argument: "+t+". Must be .select2-search-choice";if(n=t.data("select2-data")){var o=e.Event("select2-removing");if(o.val=this.id(n),o.choice=n,this.opts.element.trigger(o),o.isDefaultPrevented())return!1;for(;(i=m(this.id(n),r))>=0;)r.splice(i,1),this.setVal(r),this.select&&this.postprocessResults();return t.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(n),choice:n}),this.triggerChange({removed:n}),!0}},postprocessResults:function(e,t,n){var i=this.getVal(),r=this.results.find(".select2-result"),o=this.results.find(".select2-result-with-children"),a=this;r.each2((function(e,t){m(a.id(t.data("select2-data")),i)>=0&&(t.addClass("select2-selected"),t.find(".select2-result-selectable").addClass("select2-selected"))})),o.each2((function(e,t){t.is(".select2-result-selectable")||0!==t.find(".select2-result-selectable:not(.select2-selected)").length||t.addClass("select2-selected")})),-1==this.highlight()&&!1!==n&&!0===this.opts.closeOnSelect&&a.highlight(0),!this.opts.createSearchChoice&&!r.filter(".select2-result:not(.select2-selected)").length>0&&(!e||e&&!e.more&&0===this.results.find(".select2-no-results").length)&&D(a.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+$(a.opts.formatNoMatches,a.opts.element,a.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-b(this.search)},resizeSearch:function(){var t,n,i,r,o=b(this.search);t=function(t){if(!a){var n=t[0].currentStyle||window.getComputedStyle(t[0],null);(a=e(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:n.fontSize,fontFamily:n.fontFamily,fontStyle:n.fontStyle,fontWeight:n.fontWeight,letterSpacing:n.letterSpacing,textTransform:n.textTransform,whiteSpace:"nowrap"})).attr("class","select2-sizer"),e(document.body).append(a)}return a.text(t.val()),a.width()}(this.search)+10,n=this.search.offset().left,(r=(i=this.selection.width())-(n-this.selection.offset().left)-o)<t&&(r=i-o),r<40&&(r=i-o),r<=0&&(r=t),this.search.width(Math.floor(r))},getVal:function(){var e;return this.select?null===(e=this.select.val())?[]:e:v(e=this.opts.element.val(),this.opts.separator,this.opts.transformVal)},setVal:function(t){var n;this.select?this.select.val(t):(n=[],e(t).each((function(){m(this,n)<0&&n.push(this)})),this.opts.element.val(0===n.length?"":n.join(this.opts.separator)))},buildChangeDetails:function(e,t){t=t.slice(0),e=e.slice(0);for(var n=0;n<t.length;n++)for(var i=0;i<e.length;i++)g(this.opts.id(t[n]),this.opts.id(e[i]))&&(t.splice(n,1),n>0&&n--,e.splice(i,1),i--);return{added:t,removed:e}},val:function(n,i){var r,o=this;if(0===arguments.length)return this.getVal();if((r=this.data()).length||(r=[]),!n&&0!==n)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),void(i&&this.triggerChange({added:this.data(),removed:r}));if(this.setVal(n),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),i&&this.triggerChange(this.buildChangeDetails(r,this.data()));else{if(this.opts.initSelection===t)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,(function(t){var n=e.map(t,o.id);o.setVal(n),o.updateSelection(t),o.clearSearch(),i&&o.triggerChange(o.buildChangeDetails(r,o.data()))}))}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var t=[],n=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each((function(){t.push(n.opts.id(e(this).data("select2-data")))})),this.setVal(t),this.triggerChange()},data:function(t,n){var i,r,o=this;if(0===arguments.length)return this.selection.children(".select2-search-choice").map((function(){return e(this).data("select2-data")})).get();r=this.data(),t||(t=[]),i=e.map(t,(function(e){return o.opts.id(e)})),this.setVal(i),this.updateSelection(t),this.clearSearch(),n&&this.triggerChange(this.buildChangeDetails(r,this.data()))}}),e.fn.select2=function(){var n,i,r,o,a,s=Array.prototype.slice.call(arguments,0),l=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],c=["opened","isFocused","container","dropdown"],u=["val","data"],d={search:"externalSearch"};return this.each((function(){if(0===s.length||"object"==typeof s[0])(n=0===s.length?{}:e.extend({},s[0])).element=e(this),"select"===n.element.get(0).tagName.toLowerCase()?a=n.element.prop("multiple"):(a=n.multiple||!1,"tags"in n&&(n.multiple=a=!0)),(i=a?new window.Select2.class.multi:new window.Select2.class.single).init(n);else{if("string"!=typeof s[0])throw"Invalid arguments to select2 plugin: "+s;if(m(s[0],l)<0)throw"Unknown method: "+s[0];if(o=t,(i=e(this).data("select2"))===t)return;if("container"===(r=s[0])?o=i.container:"dropdown"===r?o=i.dropdown:(d[r]&&(r=d[r]),o=i[r].apply(i,s.slice(1))),m(s[0],c)>=0||m(s[0],u)>=0&&1==s.length)return!1}})),o===t?this:o},e.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(e,t,n,i){var r=[];return _(this.text(e),n.term,r,i),r.join("")},transformVal:function(t){return e.trim(t)},formatSelection:function(e,n,i){return e?i(this.text(e)):t},sortResults:function(e,t,n){return e},formatResultCssClass:function(e){return e.css},formatSelectionCssClass:function(e,n){return t},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(e){return e==t?null:e.id},text:function(t){return t&&this.data&&this.data.text?e.isFunction(this.data.text)?this.data.text(t):t[this.data.text]:t.text},matcher:function(e,t){return p(""+t).toUpperCase().indexOf(p(""+e).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:function(e,n,i,r){var o,a,s,l,c,u=e,d=!1;if(!r.createSearchChoice||!r.tokenSeparators||r.tokenSeparators.length<1)return t;for(;;){for(a=-1,s=0,l=r.tokenSeparators.length;s<l&&(c=r.tokenSeparators[s],!((a=e.indexOf(c))>=0));s++);if(a<0)break;if(o=e.substring(0,a),e=e.substring(a+c.length),o.length>0&&(o=r.createSearchChoice.call(this,o,n))!==t&&null!==o&&r.id(o)!==t&&null!==r.id(o)){for(d=!1,s=0,l=n.length;s<l;s++)if(g(r.id(o),r.id(n[s]))){d=!0;break}d||i(o)}}return u!==e?e:void 0},escapeMarkup:k,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(e){return e},adaptDropdownCssClass:function(e){return null},nextSearchTerm:function(e,n){return t},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(e){return!("ontouchstart"in window||navigator.msMaxTouchPoints>0)||!(e.opts.minimumResultsForSearch<0)}},e.fn.select2.locales=[],e.fn.select2.locales.en={formatMatches:function(e){return 1===e?"One result is available, press enter to select it.":e+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},formatAjaxError:function(e,t,n){return"Loading failed"},formatInputTooShort:function(e,t){var n=t-e.length;return"Please enter "+n+" or more character"+(1==n?"":"s")},formatInputTooLong:function(e,t){var n=e.length-t;return"Please delete "+n+" character"+(1==n?"":"s")},formatSelectionTooBig:function(e){return"You can only select "+e+" item"+(1==e?"":"s")},formatLoadMore:function(e){return"Loading more resultsâ¦"},formatSearching:function(){return"Searchingâ¦"}},e.extend(e.fn.select2.defaults,e.fn.select2.locales.en),e.fn.select2.ajaxDefaults={transport:e.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:E,local:S,tags:T},util:{debounce:w,markMatch:_,escapeMarkup:k,stripDiacritics:p},class:{abstract:n,single:i,multi:r}}}function f(t){var n=e(document.createTextNode(""));t.before(n),n.before(t),n.remove()}function p(e){return e.replace(/[^\u0000-\u007E]/g,(function(e){return h[e]||e}))}function m(e,t){for(var n=0,i=t.length;n<i;n+=1)if(g(e,t[n]))return n;return-1}function g(e,n){return e===n||e!==t&&n!==t&&(null!==e&&null!==n&&(e.constructor===String?e+""==n+"":n.constructor===String&&n+""==e+""))}function v(e,t,n){var i,r,o;if(null===e||e.length<1)return[];for(r=0,o=(i=e.split(t)).length;r<o;r+=1)i[r]=n(i[r]);return i}function b(e){return e.outerWidth(!1)-e.width()}function y(n){var i="keyup-change-value";n.on("keydown",(function(){e.data(n,i)===t&&e.data(n,i,n.val())})),n.on("keyup",(function(){var r=e.data(n,i);r!==t&&n.val()!==r&&(e.removeData(n,i),n.trigger("keyup-change"))}))}function w(e,n,i){var r;return i=i||t,function(){var t=arguments;window.clearTimeout(r),r=window.setTimeout((function(){n.apply(i,t)}),e)}}function x(e){e.preventDefault(),e.stopPropagation()}function C(t,n,i){var r,o,a=[];(r=e.trim(t.attr("class")))&&e((r=""+r).split(/\s+/)).each2((function(){0===this.indexOf("select2-")&&a.push(this)})),(r=e.trim(n.attr("class")))&&e((r=""+r).split(/\s+/)).each2((function(){0!==this.indexOf("select2-")&&(o=i(this))&&a.push(o)})),t.attr("class",a.join(" "))}function _(e,t,n,i){var r=p(e.toUpperCase()).indexOf(p(t.toUpperCase())),o=t.length;r<0?n.push(i(e)):(n.push(i(e.substring(0,r))),n.push("<span class='select2-match'>"),n.push(i(e.substring(r,r+o))),n.push("</span>"),n.push(i(e.substring(r+o,e.length))))}function k(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(e).replace(/[&<>"'\/\\]/g,(function(e){return t[e]}))}function E(n){var i,r=null,o=n.quietMillis||100,a=n.url,s=this;return function(l){window.clearTimeout(i),i=window.setTimeout((function(){var i=n.data,o=a,c=n.transport||e.fn.select2.ajaxDefaults.transport,u={type:n.type||"GET",cache:n.cache||!1,jsonpCallback:n.jsonpCallback||t,dataType:n.dataType||"json"},d=e.extend({},e.fn.select2.ajaxDefaults.params,u);i=i?i.call(s,l.term,l.page,l.context):null,o="function"==typeof o?o.call(s,l.term,l.page,l.context):o,r&&"function"==typeof r.abort&&r.abort(),n.params&&(e.isFunction(n.params)?e.extend(d,n.params.call(s)):e.extend(d,n.params)),e.extend(d,{url:o,dataType:n.dataType,data:i,success:function(e){var t=n.results(e,l.page,l);l.callback(t)},error:function(e,t,n){var i={hasError:!0,jqXHR:e,textStatus:t,errorThrown:n};l.callback(i)}}),r=c.call(s,d)}),o)}}function S(t){var n,i,r=t,o=function(e){return""+e.text};e.isArray(r)&&(r={results:i=r}),!1===e.isFunction(r)&&(i=r,r=function(){return i});var a=r();return a.text&&(o=a.text,e.isFunction(o)||(n=a.text,o=function(e){return e[n]})),function(t){var n,i=t.term,a={results:[]};""!==i?(n=function(r,a){var s,l;if((r=r[0]).children){for(l in s={},r)r.hasOwnProperty(l)&&(s[l]=r[l]);s.children=[],e(r.children).each2((function(e,t){n(t,s.children)})),(s.children.length||t.matcher(i,o(s),r))&&a.push(s)}else t.matcher(i,o(r),r)&&a.push(r)},e(r().results).each2((function(e,t){n(t,a.results)})),t.callback(a)):t.callback(r())}}function T(n){var i=e.isFunction(n);return function(r){var o=r.term,a={results:[]},s=i?n(r):n;e.isArray(s)&&(e(s).each((function(){var e=this.text!==t,n=e?this.text:this;(""===o||r.matcher(o,n))&&a.results.push(e?this:{id:this,text:this})})),r.callback(a))}}function D(t,n){if(e.isFunction(t))return!0;if(!t)return!1;if("string"==typeof t)return!0;throw new Error(n+" must be a string, function, or falsy value")}function $(t,n){if(e.isFunction(t)){var i=Array.prototype.slice.call(arguments,2);return t.apply(n,i)}return t}function A(t){var n=0;return e.each(t,(function(e,t){t.children?n+=A(t.children):n++})),n}function P(){var t=this;e.each(arguments,(function(e,n){t[n].remove(),t[n]=null}))}function j(t,n){var i=function(){};return(i.prototype=new t).constructor=i,i.prototype.parent=t.prototype,i.prototype=e.extend(i.prototype,n),i}}(jQuery),define("libs/select2",(function(){})),define("locales/select2_locale",["libs/sprintf","pgui.localizer","libs/select2"],(function(e,t){var n=e.sprintf;$.fn.select2.locales.php_gen={formatMatches:function(e){return 1===e?t.getString("Select2MatchesOne"):n(t.getString("Select2MatchesMoreOne"),e)},formatNoMatches:function(){return t.getString("Select2NoMatches")},formatAjaxError:function(e,n,i){return t.getString(t.getString("Select2AjaxError"))},formatInputTooShort:function(e,i){var r=i-e.length;return n(t.getString("Select2InputTooShort"),r)},formatInputTooLong:function(e,i){var r=e.length-i;return n(t.getString("Select2InputTooLong"),r)},formatSelectionTooBig:function(e){return n(t.getString("Select2SelectionTooBig"),e)},formatLoadMore:function(e){return t.getString("Select2LoadMore")},formatSearching:function(){return t.getString("Select2Searching")}},$.extend($.fn.select2.defaults,$.fn.select2.locales.php_gen)})),define("pgui.editors/dynamic_combobox",["pgui.editors/custom","pgui.editors/select2_format","locales/select2_locale","libs/select2"],(function(e,t){return e.extend({init:function(e,n){this.queryFunction=function(e){return{term:e}},this._super(e,n),this.formatFunctions=new t,this.formatFunctions.setFormatCallbacksFromElement($(e)),this.processElement(e),this.bind("submit.pgui.nested-insert",function(e,t){this.setValue(t)}.bind(this))},processElement:function(){var e=this,t=$(this.rootElement);t.on("change",(function(n,i){if("function"==typeof t.valid){var r=$(this.form);r.length&&_.keys(r.data("validator").submitted).length&&t.valid()}i||e.doChanged()})),$("label[for="+t.attr("id")+"]").on("click",(function(){t.select2("focus")})),t.select2({ajax:{url:t.attr("data-url"),dataType:"json",results:function(e){return{results:$.map(e,(function(e){return{id:e.id,text:e.value,formatted_value:e.formatted_value,fields:e.fields}}))}},data:function(t){return e.queryFunction(t)}},initSelection:function(n,i){var r=n.val();$.ajax({url:t.data("url"),data:{id:r},dataType:"json"}).done((function(t){$.each(t,(function(t,n){if(n.id==r)return i({id:n.id,text:n.value,formatted_value:n.formatted_value,fields:n.fields}),e.rootElement.trigger("select2-init"),!1}))}))},width:"100%",minimumInputLength:t.data("minimal-input-length"),allowClear:t.data("allowclear"),formatSelection:e.formatFunctions.getFormatClojure("selection"),formatResult:e.formatFunctions.getFormatClojure("result")})},setValue:function(e){return this.rootElement.val(e),this.rootElement.select2&&(this.rootElement.select2("val",this.rootElement.val()),this.rootElement.trigger("change")),this},getValue:function(){return this.rootElement.select2("val")},getDisplayValue:function(){var e=this.getData();return e&&e.text?e.text:this.getValue()},getData:function(){return this.rootElement.select2("data")},setData:function(e){return this.rootElement.select2("data",e),this},setEnabled:function(e){return this.rootElement.prop("disabled",!e),this.rootElement.select2("enable",!!e),this},getEnabled:function(){return!this.rootElement.prop("disabled")},getReadonly:function(){return!!this.rootElement.prop("readonly")},setReadonly:function(e){return this.rootElement.select2("readonly",!!e),this.rootElement.prop("readonly",!!e),this},setFormatSelection:function(e){return this.formatFunctions.setCallback("selection",e),$(this.rootElement).trigger("change",!0),this},setFormatResult:function(e){return this.formatFunctions.setCallback("result",e),$(this.rootElement).trigger("change",!0),this},setQueryFunction:function(e){return this.queryFunction=e,this}})})),define("pgui.editors/plain",["underscore","pgui.editors/custom"],(function(e,t){return t.extend({init:function(t,n){this._super(t,n),this.rootElement.change(e.bind((function(){this.doChanged()}),this))},_getAttribute:function(e){return this.rootElement.attr(e)},_setAttribute:function(e,t){this.rootElement.attr(e,t)},getValue:function(){return this.rootElement.val()},setValue:function(e){return this.rootElement.val(e),this},getEnabled:function(){return!this.rootElement.prop("disabled")},setEnabled:function(e){return this.rootElement.prop("disabled",!e),this},getReadonly:function(){return Boolean(this.rootElement.attr("readonly"))},setReadonly:function(e){return this.rootElement.prop("readonly",e),this},doChanged:function(){this.trigger("onChangeEvent",this,0)},onChange:function(e){return this.bind("onChangeEvent",e),this}})})),
/*
 * jQuery.bind-first library v0.2.3
 * Copyright (c) 2013 Vladimir Zhuravlev
 *
 * Released under MIT License
 * @license
 *
 * Date: Thu Feb  6 10:13:59 ICT 2014
 **/
function(e){var t=e.fn.jquery.split("."),n=parseInt(t[0]),i=parseInt(t[1]),r=n<1||1==n&&i<7;function o(t,n,i){var o=function(t){return r?t.data("events"):e._data(t[0]).events}(t),a=o[n];if(r)i?o.live.unshift(o.live.pop()):a.unshift(a.pop());else{var s=i?a.splice(a.delegateCount-1,1)[0]:a.pop();a.splice(i?0:a.delegateCount||0,0,s)}}function a(t,n,i){var r=n.split(/\s+/);t.each((function(){for(var t=0;t<r.length;++t){var n=e.trim(r[t]).match(/[^\.]+/i)[0];o(e(this),n,i)}}))}function s(t){e.fn[t+"First"]=function(){var n=e.makeArray(arguments).shift();return n&&(e.fn[t].apply(this,arguments),a(this,n)),this}}s("bind"),s("one"),e.fn.delegateFirst=function(){var t=e.makeArray(arguments),n=t[1];return n&&(t.splice(0,2),e.fn.delegate.apply(this,arguments),a(this,n,!0)),this},e.fn.liveFirst=function(){var t=e.makeArray(arguments);return t.unshift(this.selector),e.fn.delegateFirst.apply(e(document),t),this},r||(e.fn.onFirst=function(t,n){var i=e(this),r="string"==typeof n;if(e.fn.on.apply(i,arguments),"object"==typeof t)for(type in t)t.hasOwnProperty(type)&&a(i,type,r);else"string"==typeof t&&a(i,t,r);return i})}(jQuery),define("jquery.bind-first",(function(){})),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");!function(e){"use strict";var t=function(t,n){this.$element=e(t),this.options=e.extend({},this.defaults(),n),this.render()};t.VERSION="2.2.0",t.DEFAULTS={on:"On",off:"Off",onstyle:"primary",offstyle:"default",size:"small",style:"",width:null,height:null},t.prototype.defaults=function(){return{on:this.$element.attr("data-on")||t.DEFAULTS.on,off:this.$element.attr("data-off")||t.DEFAULTS.off,onstyle:this.$element.attr("data-onstyle")||t.DEFAULTS.onstyle,offstyle:this.$element.attr("data-offstyle")||t.DEFAULTS.offstyle,size:this.$element.attr("data-size")||t.DEFAULTS.size,style:this.$element.attr("data-style")||t.DEFAULTS.style,width:this.$element.attr("data-width")||t.DEFAULTS.width,height:this.$element.attr("data-height")||t.DEFAULTS.height}},t.prototype.render=function(){this._onstyle="btn-"+this.options.onstyle,this._offstyle="btn-"+this.options.offstyle;var t="large"===this.options.size?"btn-lg":"small"===this.options.size?"btn-sm":"mini"===this.options.size?"btn-xs":"",n=e('<label class="btn">').html(this.options.on).addClass(this._onstyle+" "+t),i=n.clone(),r=e('<label class="btn">').html(this.options.off).addClass(this._offstyle+" "+t+" active"),o=r.clone(),a=e('<span class="toggle-handle btn btn-default">').addClass(t),s=a.clone(),l=e('<div class="toggle-group">').append(n,r,a),c=e('<div class="toggle btn" data-toggle="toggle">').addClass(this.$element.prop("checked")?this._onstyle:this._offstyle+" off").addClass(t).addClass(this.options.style);this.$element.wrap(c),e.extend(this,{$toggle:this.$element.parent(),$toggleOn:n,$toggleOff:r,$toggleGroup:l}),this.$toggle.append(l),i.hide().appendTo(document.body),o.hide().appendTo(document.body),s.hide().appendTo(document.body);var u=this.options.width||Math.max(i.outerWidth(),o.outerWidth())+s.outerWidth()/2,d=this.options.height||Math.max(i.outerHeight(),o.outerHeight());i.remove(),o.remove(),s.remove(),n.addClass("toggle-on"),r.addClass("toggle-off"),this.$toggle.css({width:u,height:d}),this.options.height&&(n.css("line-height",n.height()+"px"),r.css("line-height",r.height()+"px")),this.update(!0),this.trigger(!0)},t.prototype.toggle=function(){this.$element.prop("checked")?this.off():this.on()},t.prototype.on=function(e){if(this.$element.prop("disabled")||this.$element.prop("readonly"))return!1;this.$toggle.removeClass(this._offstyle+" off").addClass(this._onstyle),this.$element.prop("checked",!0),e||this.trigger()},t.prototype.off=function(e){if(this.$element.prop("disabled")||this.$element.prop("readonly"))return!1;this.$toggle.removeClass(this._onstyle).addClass(this._offstyle+" off"),this.$element.prop("checked",!1),e||this.trigger()},t.prototype.enable=function(){this.$toggle.removeAttr("disabled"),this.$element.prop("disabled",!1)},t.prototype.disable=function(){this.$toggle.attr("disabled","disabled"),this.$element.prop("disabled",!0)},t.prototype.update=function(e){this.$element.prop("disabled")?this.disable():this.enable(),this.$element.prop("checked")?this.on(e):this.off(e)},t.prototype.trigger=function(t){this.$element.off("change.bs.toggle"),t||this.$element.change(),this.$element.on("change.bs.toggle",e.proxy((function(){this.update()}),this))},t.prototype.destroy=function(){this.$element.off("change.bs.toggle"),this.$toggleGroup.remove(),this.$element.removeData("bs.toggle"),this.$element.unwrap()};var n=e.fn.bootstrapToggle;e.fn.bootstrapToggle=function(n){return this.each((function(){var i=e(this),r=i.data("bs.toggle"),o="object"==typeof n&&n;r||i.data("bs.toggle",r=new t(this,o)),"string"==typeof n&&r[n]&&r[n]()}))},e.fn.bootstrapToggle.Constructor=t,e.fn.toggle.noConflict=function(){return e.fn.bootstrapToggle=n,this},e((function(){e("input[type=checkbox][data-toggle^=toggle]").bootstrapToggle()})),e(document).on("click.bs.toggle","div[data-toggle^=toggle]",(function(t){e(this).find("input[type=checkbox]").bootstrapToggle("toggle"),t.preventDefault()}))}(jQuery),define("bootstrap.toggle",["jquery"],(function(){})),define("pgui.editors/checkbox",["pgui.editors/plain","jquery.bind-first","bootstrap.toggle"],(function(e){return e.extend({init:function(e,t){if(this._super(e,t),"toggle"===e.attr("data-editor")){var n={on:e.data("toggle-on-caption"),off:e.data("toggle-off-caption"),size:e.data("toggle-size"),onstyle:e.data("toggle-on-style"),offstyle:e.data("toggle-off-style")};e.data("toggle-width")&&(n.width=e.data("toggle-width")),e.data("toggle-height")&&(n.height=e.data("toggle-height")),e.bootstrapToggle(n)}},getValue:function(){return this.rootElement.is(":checked")},setValue:function(e){return this.rootElement.prop("checked",!!e),this},setReadonly:function(e){this._super(e);var t=this.rootElement;return e?(t.onFirst("click.AUX",(function(){return event.preventDefault(),event.stopImmediatePropagation(),!1})),t.onFirst("change.AUX",(function(e){return e.preventDefault(),e.stopImmediatePropagation(),!1}))):(t.off("click.AUX"),t.off("change.AUX")),this}})})),define("pgui.editors/checkboxgroup",["pgui.editors/plain","underscore","pgui.editors/checkbox"],(function(e,t,n){var i='<input type="checkbox" name="<%=editorName%>[]" value="<%=value%>"><%=caption%>',r=t.template('<div class="checkbox js-value"><label>'+i+"</label></div>"),o=t.template('<label class="checkbox-inline js-value">'+i+"</label>");return e.extend({init:function(e,n){this._super(e,n),this.rootElement.find("input").change(t.bind((function(){this.doChanged()}),this)),this.bind("submit.pgui.nested-insert",function(e,t,n){this.addItem(n[e.data("stored-field-name")],n[e.data("display-field-name")],!0)}.bind(this))},getValue:function(){return t.toArray(this.rootElement.find("input:checked").map((function(e,t){return $(t).attr("value")})))},getDisplayValue:function(){return t.toArray(this.rootElement.find("input:checked").map((function(e,t){return $(t).closest("label").text()})))},setValue:function(e){if(e.split){var t,n=e.split(",");this.rootElement.find("input").each((function(e,i){var r=!1;for(t=0;t<n.length;++t)if($(i).attr("value")==n[t]){$(i).prop("checked",!0),r=!0;break}r||$(i).prop("checked",!1)}))}},getEnabled:function(){return this.rootElement.find("input:enabled").length>0},setEnabled:function(e){this.rootElement.find("input").each((function(t,i){new n($(i)).setEnabled(e)}))},getReadonly:function(){return 1===this.rootElement.find("input:enabled").length},setReadonly:function(e){this.rootElement.find("input").each((function(t,i){new n($(i)).setReadonly(e)}))},clear:function(){this.rootElement.find(".checkbox, .checkbox-inline").remove()},addItem:function(e,t,n){var i=this.rootElement,a=i.data("inline"),s={editorName:i.attr("data-editor-name"),value:e,caption:t},l=$(a?o(s):r(s));return"boolean"==typeof n&&n&&l.find("input").prop("checked",!0),this.getItemCount()>0?i.find(".js-value").last().after(l):i.prepend(l),this},removeItem:function(e){this.rootElement.find("input[value='"+e+"']").parent().remove()},getItems:function(){return this.rootElement.find("input").map((function(e,t){return{value:$(t).attr("value"),caption:$(t).closest("label").text()}}))},getItemCount:function(){return this.rootElement.find("input").length},isMultivalue:function(){return!0},_getSetRequiredTarget:function(){return this.rootElement.find("input[type=checkbox]")}})})),define("pgui.editors/combobox",["pgui.editors/plain"],(function(e){return e.extend({init:function(e,t){this._super(e,t),this.setReadonly(this.getReadonly()),this.bind("submit.pgui.nested-insert",function(e,t,n){this.addItem(t,n[e.data("display-field-name")]),this.setValue(t)}.bind(this))},clear:function(){return this.rootElement.find("option:enabled[value!='']").remove(),this},addItem:function(e,t){return this.rootElement.append($("<option></option>").attr("value",e).html(t)),this},removeItem:function(e){return this.rootElement.find("option[value='"+e+"']").remove(),this},getItems:function(){return this.rootElement.find("option:enabled[value!='']").map((function(e,t){return{value:$(t).attr("value"),caption:$(t).text()}}))},getItemCount:function(){return this.rootElement.find("option[value!='']").length},setValue:function(e){this.setReadonly(!1),this._super(e),this.setReadonly(this.getReadonly())},getReadonly:function(){return Boolean(this.rootElement.attr("readonly"))||this.rootElement.prop("readonly")},setReadonly:function(e){this._super(e),e?(this.rootElement.attr("readonly","readonly"),this.rootElement.closest(".input-group").find(".js-nested-insert").first().attr("disabled","disabled")):(this.rootElement.removeAttr("readonly"),this.rootElement.closest(".input-group").find(".js-nested-insert").first().removeAttr("disabled"));var t=this.getValue();return this.rootElement.find("option").each((function(n,i){var r=$(i);r.prop("disabled",e&&r.attr("value")!=t)})),this},getCaption:function(){return this.rootElement.find("option:selected").text()},getDisplayValue:function(){return this.rootElement.find("option:selected").first().text()}})})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("moment",t):e.moment=t()}(this,(function(){"use strict";var e,t;function n(){return e.apply(null,arguments)}function i(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function r(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function o(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function a(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(o(e,t))return!1;return!0}function s(e){return void 0===e}function l(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function c(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function u(e,t){var n,i=[],r=e.length;for(n=0;n<r;++n)i.push(t(e[n],n));return i}function d(e,t){for(var n in t)o(t,n)&&(e[n]=t[n]);return o(t,"toString")&&(e.toString=t.toString),o(t,"valueOf")&&(e.valueOf=t.valueOf),e}function h(e,t,n,i){return jt(e,t,n,i,!0).utc()}function f(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}),e._pf}function p(e){if(null==e._isValid){var n=f(e),i=t.call(n.parsedDateParts,(function(e){return null!=e})),r=!isNaN(e._d.getTime())&&n.overflow<0&&!n.empty&&!n.invalidEra&&!n.invalidMonth&&!n.invalidWeekday&&!n.weekdayMismatch&&!n.nullInput&&!n.invalidFormat&&!n.userInvalidated&&(!n.meridiem||n.meridiem&&i);if(e._strict&&(r=r&&0===n.charsLeftOver&&0===n.unusedTokens.length&&void 0===n.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return r;e._isValid=r}return e._isValid}function m(e){var t=h(NaN);return null!=e?d(f(t),e):f(t).userInvalidated=!0,t}t=Array.prototype.some?Array.prototype.some:function(e){var t,n=Object(this),i=n.length>>>0;for(t=0;t<i;t++)if(t in n&&e.call(this,n[t],t,n))return!0;return!1};var g=n.momentProperties=[],v=!1;function b(e,t){var n,i,r,o=g.length;if(s(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),s(t._i)||(e._i=t._i),s(t._f)||(e._f=t._f),s(t._l)||(e._l=t._l),s(t._strict)||(e._strict=t._strict),s(t._tzm)||(e._tzm=t._tzm),s(t._isUTC)||(e._isUTC=t._isUTC),s(t._offset)||(e._offset=t._offset),s(t._pf)||(e._pf=f(t)),s(t._locale)||(e._locale=t._locale),o>0)for(n=0;n<o;n++)s(r=t[i=g[n]])||(e[i]=r);return e}function y(e){b(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===v&&(v=!0,n.updateOffset(this),v=!1)}function w(e){return e instanceof y||null!=e&&null!=e._isAMomentObject}function x(e){!1===n.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function C(e,t){var i=!0;return d((function(){if(null!=n.deprecationHandler&&n.deprecationHandler(null,e),i){var r,a,s,l=[],c=arguments.length;for(a=0;a<c;a++){if(r="","object"==typeof arguments[a]){for(s in r+="\n["+a+"] ",arguments[0])o(arguments[0],s)&&(r+=s+": "+arguments[0][s]+", ");r=r.slice(0,-2)}else r=arguments[a];l.push(r)}x(e+"\nArguments: "+Array.prototype.slice.call(l).join("")+"\n"+(new Error).stack),i=!1}return t.apply(this,arguments)}),t)}var _,k={};function E(e,t){null!=n.deprecationHandler&&n.deprecationHandler(e,t),k[e]||(x(t),k[e]=!0)}function S(e){return"undefined"!=typeof Function&&e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function T(e,t){var n,i=d({},e);for(n in t)o(t,n)&&(r(e[n])&&r(t[n])?(i[n]={},d(i[n],e[n]),d(i[n],t[n])):null!=t[n]?i[n]=t[n]:delete i[n]);for(n in e)o(e,n)&&!o(t,n)&&r(e[n])&&(i[n]=d({},i[n]));return i}function D(e){null!=e&&this.set(e)}n.suppressDeprecationWarnings=!1,n.deprecationHandler=null,_=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)o(e,t)&&n.push(t);return n};function $(e,t,n){var i=""+Math.abs(e),r=t-i.length;return(e>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+i}var A=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,P=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,j={},O={};function I(e,t,n,i){var r=i;"string"==typeof i&&(r=function(){return this[i]()}),e&&(O[e]=r),t&&(O[t[0]]=function(){return $(r.apply(this,arguments),t[1],t[2])}),n&&(O[n]=function(){return this.localeData().ordinal(r.apply(this,arguments),e)})}function M(e,t){return e.isValid()?(t=N(t,e.localeData()),j[t]=j[t]||function(e){var t,n,i,r=e.match(A);for(t=0,n=r.length;t<n;t++)O[r[t]]?r[t]=O[r[t]]:r[t]=(i=r[t]).match(/\[[\s\S]/)?i.replace(/^\[|\]$/g,""):i.replace(/\\/g,"");return function(t){var i,o="";for(i=0;i<n;i++)o+=S(r[i])?r[i].call(t,e):r[i];return o}}(t),j[t](e)):e.localeData().invalidDate()}function N(e,t){var n=5;function i(e){return t.longDateFormat(e)||e}for(P.lastIndex=0;n>=0&&P.test(e);)e=e.replace(P,i),P.lastIndex=0,n-=1;return e}var F={};function R(e,t){var n=e.toLowerCase();F[n]=F[n+"s"]=F[t]=e}function L(e){return"string"==typeof e?F[e]||F[e.toLowerCase()]:void 0}function z(e){var t,n,i={};for(n in e)o(e,n)&&(t=L(n))&&(i[t]=e[n]);return i}var H={};function B(e,t){H[e]=t}function q(e){return e%4==0&&e%100!=0||e%400==0}function U(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function W(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=U(t)),n}function V(e,t){return function(i){return null!=i?(G(this,e,i),n.updateOffset(this,t),this):Y(this,e)}}function Y(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function G(e,t,n){e.isValid()&&!isNaN(n)&&("FullYear"===t&&q(e.year())&&1===e.month()&&29===e.date()?(n=W(n),e._d["set"+(e._isUTC?"UTC":"")+t](n,e.month(),$e(n,e.month()))):e._d["set"+(e._isUTC?"UTC":"")+t](n))}var Z,Q=/\d/,K=/\d\d/,J=/\d{3}/,X=/\d{4}/,ee=/[+-]?\d{6}/,te=/\d\d?/,ne=/\d\d\d\d?/,ie=/\d\d\d\d\d\d?/,re=/\d{1,3}/,oe=/\d{1,4}/,ae=/[+-]?\d{1,6}/,se=/\d+/,le=/[+-]?\d+/,ce=/Z|[+-]\d\d:?\d\d/gi,ue=/Z|[+-]\d\d(?::?\d\d)?/gi,de=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function he(e,t,n){Z[e]=S(t)?t:function(e,i){return e&&n?n:t}}function fe(e,t){return o(Z,e)?Z[e](t._strict,t._locale):new RegExp(pe(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(e,t,n,i,r){return t||n||i||r}))))}function pe(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}Z={};var me={};function ge(e,t){var n,i,r=t;for("string"==typeof e&&(e=[e]),l(t)&&(r=function(e,n){n[t]=W(e)}),i=e.length,n=0;n<i;n++)me[e[n]]=r}function ve(e,t){ge(e,(function(e,n,i,r){i._w=i._w||{},t(e,i._w,i,r)}))}function be(e,t,n){null!=t&&o(me,e)&&me[e](t,n._a,n,e)}var ye,we=0,xe=1,Ce=2,_e=3,ke=4,Ee=5,Se=6,Te=7,De=8;function $e(e,t){if(isNaN(e)||isNaN(t))return NaN;var n,i=(t%(n=12)+n)%n;return e+=(t-i)/12,1===i?q(e)?29:28:31-i%7%2}ye=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},I("M",["MM",2],"Mo",(function(){return this.month()+1})),I("MMM",0,0,(function(e){return this.localeData().monthsShort(this,e)})),I("MMMM",0,0,(function(e){return this.localeData().months(this,e)})),R("month","M"),B("month",8),he("M",te),he("MM",te,K),he("MMM",(function(e,t){return t.monthsShortRegex(e)})),he("MMMM",(function(e,t){return t.monthsRegex(e)})),ge(["M","MM"],(function(e,t){t[xe]=W(e)-1})),ge(["MMM","MMMM"],(function(e,t,n,i){var r=n._locale.monthsParse(e,i,n._strict);null!=r?t[xe]=r:f(n).invalidMonth=e}));var Ae="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Pe="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),je=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Oe=de,Ie=de;function Me(e,t,n){var i,r,o,a=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)o=h([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(o,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(r=ye.call(this._shortMonthsParse,a))?r:null:-1!==(r=ye.call(this._longMonthsParse,a))?r:null:"MMM"===t?-1!==(r=ye.call(this._shortMonthsParse,a))||-1!==(r=ye.call(this._longMonthsParse,a))?r:null:-1!==(r=ye.call(this._longMonthsParse,a))||-1!==(r=ye.call(this._shortMonthsParse,a))?r:null}function Ne(e,t){var n;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=W(t);else if(!l(t=e.localeData().monthsParse(t)))return e;return n=Math.min(e.date(),$e(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function Fe(e){return null!=e?(Ne(this,e),n.updateOffset(this,!0),this):Y(this,"Month")}function Re(){function e(e,t){return t.length-e.length}var t,n,i=[],r=[],o=[];for(t=0;t<12;t++)n=h([2e3,t]),i.push(this.monthsShort(n,"")),r.push(this.months(n,"")),o.push(this.months(n,"")),o.push(this.monthsShort(n,""));for(i.sort(e),r.sort(e),o.sort(e),t=0;t<12;t++)i[t]=pe(i[t]),r[t]=pe(r[t]);for(t=0;t<24;t++)o[t]=pe(o[t]);this._monthsRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+i.join("|")+")","i")}function Le(e){return q(e)?366:365}I("Y",0,0,(function(){var e=this.year();return e<=9999?$(e,4):"+"+e})),I(0,["YY",2],0,(function(){return this.year()%100})),I(0,["YYYY",4],0,"year"),I(0,["YYYYY",5],0,"year"),I(0,["YYYYYY",6,!0],0,"year"),R("year","y"),B("year",1),he("Y",le),he("YY",te,K),he("YYYY",oe,X),he("YYYYY",ae,ee),he("YYYYYY",ae,ee),ge(["YYYYY","YYYYYY"],we),ge("YYYY",(function(e,t){t[we]=2===e.length?n.parseTwoDigitYear(e):W(e)})),ge("YY",(function(e,t){t[we]=n.parseTwoDigitYear(e)})),ge("Y",(function(e,t){t[we]=parseInt(e,10)})),n.parseTwoDigitYear=function(e){return W(e)+(W(e)>68?1900:2e3)};var ze=V("FullYear",!0);function He(e,t,n,i,r,o,a){var s;return e<100&&e>=0?(s=new Date(e+400,t,n,i,r,o,a),isFinite(s.getFullYear())&&s.setFullYear(e)):s=new Date(e,t,n,i,r,o,a),s}function Be(e){var t,n;return e<100&&e>=0?((n=Array.prototype.slice.call(arguments))[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function qe(e,t,n){var i=7+t-n;return-((7+Be(e,0,i).getUTCDay()-t)%7)+i-1}function Ue(e,t,n,i,r){var o,a,s=1+7*(t-1)+(7+n-i)%7+qe(e,i,r);return s<=0?a=Le(o=e-1)+s:s>Le(e)?(o=e+1,a=s-Le(e)):(o=e,a=s),{year:o,dayOfYear:a}}function We(e,t,n){var i,r,o=qe(e.year(),t,n),a=Math.floor((e.dayOfYear()-o-1)/7)+1;return a<1?i=a+Ve(r=e.year()-1,t,n):a>Ve(e.year(),t,n)?(i=a-Ve(e.year(),t,n),r=e.year()+1):(r=e.year(),i=a),{week:i,year:r}}function Ve(e,t,n){var i=qe(e,t,n),r=qe(e+1,t,n);return(Le(e)-i+r)/7}I("w",["ww",2],"wo","week"),I("W",["WW",2],"Wo","isoWeek"),R("week","w"),R("isoWeek","W"),B("week",5),B("isoWeek",5),he("w",te),he("ww",te,K),he("W",te),he("WW",te,K),ve(["w","ww","W","WW"],(function(e,t,n,i){t[i.substr(0,1)]=W(e)}));function Ye(e,t){return e.slice(t,7).concat(e.slice(0,t))}I("d",0,"do","day"),I("dd",0,0,(function(e){return this.localeData().weekdaysMin(this,e)})),I("ddd",0,0,(function(e){return this.localeData().weekdaysShort(this,e)})),I("dddd",0,0,(function(e){return this.localeData().weekdays(this,e)})),I("e",0,0,"weekday"),I("E",0,0,"isoWeekday"),R("day","d"),R("weekday","e"),R("isoWeekday","E"),B("day",11),B("weekday",11),B("isoWeekday",11),he("d",te),he("e",te),he("E",te),he("dd",(function(e,t){return t.weekdaysMinRegex(e)})),he("ddd",(function(e,t){return t.weekdaysShortRegex(e)})),he("dddd",(function(e,t){return t.weekdaysRegex(e)})),ve(["dd","ddd","dddd"],(function(e,t,n,i){var r=n._locale.weekdaysParse(e,i,n._strict);null!=r?t.d=r:f(n).invalidWeekday=e})),ve(["d","e","E"],(function(e,t,n,i){t[i]=W(e)}));var Ge="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Ze="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Qe="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Ke=de,Je=de,Xe=de;function et(e,t,n){var i,r,o,a=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)o=h([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(o,"").toLocaleLowerCase();return n?"dddd"===t?-1!==(r=ye.call(this._weekdaysParse,a))?r:null:"ddd"===t?-1!==(r=ye.call(this._shortWeekdaysParse,a))?r:null:-1!==(r=ye.call(this._minWeekdaysParse,a))?r:null:"dddd"===t?-1!==(r=ye.call(this._weekdaysParse,a))||-1!==(r=ye.call(this._shortWeekdaysParse,a))||-1!==(r=ye.call(this._minWeekdaysParse,a))?r:null:"ddd"===t?-1!==(r=ye.call(this._shortWeekdaysParse,a))||-1!==(r=ye.call(this._weekdaysParse,a))||-1!==(r=ye.call(this._minWeekdaysParse,a))?r:null:-1!==(r=ye.call(this._minWeekdaysParse,a))||-1!==(r=ye.call(this._weekdaysParse,a))||-1!==(r=ye.call(this._shortWeekdaysParse,a))?r:null}function tt(){function e(e,t){return t.length-e.length}var t,n,i,r,o,a=[],s=[],l=[],c=[];for(t=0;t<7;t++)n=h([2e3,1]).day(t),i=pe(this.weekdaysMin(n,"")),r=pe(this.weekdaysShort(n,"")),o=pe(this.weekdays(n,"")),a.push(i),s.push(r),l.push(o),c.push(i),c.push(r),c.push(o);a.sort(e),s.sort(e),l.sort(e),c.sort(e),this._weekdaysRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function nt(){return this.hours()%12||12}function it(e,t){I(e,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)}))}function rt(e,t){return t._meridiemParse}I("H",["HH",2],0,"hour"),I("h",["hh",2],0,nt),I("k",["kk",2],0,(function(){return this.hours()||24})),I("hmm",0,0,(function(){return""+nt.apply(this)+$(this.minutes(),2)})),I("hmmss",0,0,(function(){return""+nt.apply(this)+$(this.minutes(),2)+$(this.seconds(),2)})),I("Hmm",0,0,(function(){return""+this.hours()+$(this.minutes(),2)})),I("Hmmss",0,0,(function(){return""+this.hours()+$(this.minutes(),2)+$(this.seconds(),2)})),it("a",!0),it("A",!1),R("hour","h"),B("hour",13),he("a",rt),he("A",rt),he("H",te),he("h",te),he("k",te),he("HH",te,K),he("hh",te,K),he("kk",te,K),he("hmm",ne),he("hmmss",ie),he("Hmm",ne),he("Hmmss",ie),ge(["H","HH"],_e),ge(["k","kk"],(function(e,t,n){var i=W(e);t[_e]=24===i?0:i})),ge(["a","A"],(function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e})),ge(["h","hh"],(function(e,t,n){t[_e]=W(e),f(n).bigHour=!0})),ge("hmm",(function(e,t,n){var i=e.length-2;t[_e]=W(e.substr(0,i)),t[ke]=W(e.substr(i)),f(n).bigHour=!0})),ge("hmmss",(function(e,t,n){var i=e.length-4,r=e.length-2;t[_e]=W(e.substr(0,i)),t[ke]=W(e.substr(i,2)),t[Ee]=W(e.substr(r)),f(n).bigHour=!0})),ge("Hmm",(function(e,t,n){var i=e.length-2;t[_e]=W(e.substr(0,i)),t[ke]=W(e.substr(i))})),ge("Hmmss",(function(e,t,n){var i=e.length-4,r=e.length-2;t[_e]=W(e.substr(0,i)),t[ke]=W(e.substr(i,2)),t[Ee]=W(e.substr(r))}));var ot=V("Hours",!0);var at,st={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Ae,monthsShort:Pe,week:{dow:0,doy:6},weekdays:Ge,weekdaysMin:Qe,weekdaysShort:Ze,meridiemParse:/[ap]\.?m?\.?/i},lt={},ct={};function ut(e,t){var n,i=Math.min(e.length,t.length);for(n=0;n<i;n+=1)if(e[n]!==t[n])return n;return i}function dt(e){return e?e.toLowerCase().replace("_","-"):e}function ht(e){var t=null;if(void 0===lt[e]&&"undefined"!=typeof module&&module&&module.exports&&function(e){return null!=e.match("^[^/\\\\]*$")}(e))try{t=at._abbr,require("./locale/"+e),ft(t)}catch(t){lt[e]=null}return lt[e]}function ft(e,t){var n;return e&&((n=s(t)?mt(e):pt(e,t))?at=n:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),at._abbr}function pt(e,t){if(null!==t){var n,i=st;if(t.abbr=e,null!=lt[e])E("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),i=lt[e]._config;else if(null!=t.parentLocale)if(null!=lt[t.parentLocale])i=lt[t.parentLocale]._config;else{if(null==(n=ht(t.parentLocale)))return ct[t.parentLocale]||(ct[t.parentLocale]=[]),ct[t.parentLocale].push({name:e,config:t}),null;i=n._config}return lt[e]=new D(T(i,t)),ct[e]&&ct[e].forEach((function(e){pt(e.name,e.config)})),ft(e),lt[e]}return delete lt[e],null}function mt(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return at;if(!i(e)){if(t=ht(e))return t;e=[e]}return function(e){for(var t,n,i,r,o=0;o<e.length;){for(t=(r=dt(e[o]).split("-")).length,n=(n=dt(e[o+1]))?n.split("-"):null;t>0;){if(i=ht(r.slice(0,t).join("-")))return i;if(n&&n.length>=t&&ut(r,n)>=t-1)break;t--}o++}return at}(e)}function gt(e){var t,n=e._a;return n&&-2===f(e).overflow&&(t=n[xe]<0||n[xe]>11?xe:n[Ce]<1||n[Ce]>$e(n[we],n[xe])?Ce:n[_e]<0||n[_e]>24||24===n[_e]&&(0!==n[ke]||0!==n[Ee]||0!==n[Se])?_e:n[ke]<0||n[ke]>59?ke:n[Ee]<0||n[Ee]>59?Ee:n[Se]<0||n[Se]>999?Se:-1,f(e)._overflowDayOfYear&&(t<we||t>Ce)&&(t=Ce),f(e)._overflowWeeks&&-1===t&&(t=Te),f(e)._overflowWeekday&&-1===t&&(t=De),f(e).overflow=t),e}var vt=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,bt=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,yt=/Z|[+-]\d\d(?::?\d\d)?/,wt=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],xt=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Ct=/^\/?Date\((-?\d+)/i,_t=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,kt={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Et(e){var t,n,i,r,o,a,s=e._i,l=vt.exec(s)||bt.exec(s),c=wt.length,u=xt.length;if(l){for(f(e).iso=!0,t=0,n=c;t<n;t++)if(wt[t][1].exec(l[1])){r=wt[t][0],i=!1!==wt[t][2];break}if(null==r)return void(e._isValid=!1);if(l[3]){for(t=0,n=u;t<n;t++)if(xt[t][1].exec(l[3])){o=(l[2]||" ")+xt[t][0];break}if(null==o)return void(e._isValid=!1)}if(!i&&null!=o)return void(e._isValid=!1);if(l[4]){if(!yt.exec(l[4]))return void(e._isValid=!1);a="Z"}e._f=r+(o||"")+(a||""),At(e)}else e._isValid=!1}function St(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function Tt(e){var t,n,i,r,o,a,s,l,c=_t.exec(e._i.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(c){if(n=c[4],i=c[3],r=c[2],o=c[5],a=c[6],s=c[7],l=[St(n),Pe.indexOf(i),parseInt(r,10),parseInt(o,10),parseInt(a,10)],s&&l.push(parseInt(s,10)),t=l,!function(e,t,n){return!e||Ze.indexOf(e)===new Date(t[0],t[1],t[2]).getDay()||(f(n).weekdayMismatch=!0,n._isValid=!1,!1)}(c[1],t,e))return;e._a=t,e._tzm=function(e,t,n){if(e)return kt[e];if(t)return 0;var i=parseInt(n,10),r=i%100;return(i-r)/100*60+r}(c[8],c[9],c[10]),e._d=Be.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),f(e).rfc2822=!0}else e._isValid=!1}function Dt(e,t,n){return null!=e?e:null!=t?t:n}function $t(e){var t,i,r,o,a,s=[];if(!e._d){for(r=function(e){var t=new Date(n.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}(e),e._w&&null==e._a[Ce]&&null==e._a[xe]&&function(e){var t,n,i,r,o,a,s,l,c;t=e._w,null!=t.GG||null!=t.W||null!=t.E?(o=1,a=4,n=Dt(t.GG,e._a[we],We(Ot(),1,4).year),i=Dt(t.W,1),((r=Dt(t.E,1))<1||r>7)&&(l=!0)):(o=e._locale._week.dow,a=e._locale._week.doy,c=We(Ot(),o,a),n=Dt(t.gg,e._a[we],c.year),i=Dt(t.w,c.week),null!=t.d?((r=t.d)<0||r>6)&&(l=!0):null!=t.e?(r=t.e+o,(t.e<0||t.e>6)&&(l=!0)):r=o);i<1||i>Ve(n,o,a)?f(e)._overflowWeeks=!0:null!=l?f(e)._overflowWeekday=!0:(s=Ue(n,i,r,o,a),e._a[we]=s.year,e._dayOfYear=s.dayOfYear)}(e),null!=e._dayOfYear&&(a=Dt(e._a[we],r[we]),(e._dayOfYear>Le(a)||0===e._dayOfYear)&&(f(e)._overflowDayOfYear=!0),i=Be(a,0,e._dayOfYear),e._a[xe]=i.getUTCMonth(),e._a[Ce]=i.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=s[t]=r[t];for(;t<7;t++)e._a[t]=s[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[_e]&&0===e._a[ke]&&0===e._a[Ee]&&0===e._a[Se]&&(e._nextDay=!0,e._a[_e]=0),e._d=(e._useUTC?Be:He).apply(null,s),o=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[_e]=24),e._w&&void 0!==e._w.d&&e._w.d!==o&&(f(e).weekdayMismatch=!0)}}function At(e){if(e._f!==n.ISO_8601)if(e._f!==n.RFC_2822){e._a=[],f(e).empty=!0;var t,i,r,o,a,s,l,c=""+e._i,u=c.length,d=0;for(l=(r=N(e._f,e._locale).match(A)||[]).length,t=0;t<l;t++)o=r[t],(i=(c.match(fe(o,e))||[])[0])&&((a=c.substr(0,c.indexOf(i))).length>0&&f(e).unusedInput.push(a),c=c.slice(c.indexOf(i)+i.length),d+=i.length),O[o]?(i?f(e).empty=!1:f(e).unusedTokens.push(o),be(o,i,e)):e._strict&&!i&&f(e).unusedTokens.push(o);f(e).charsLeftOver=u-d,c.length>0&&f(e).unusedInput.push(c),e._a[_e]<=12&&!0===f(e).bigHour&&e._a[_e]>0&&(f(e).bigHour=void 0),f(e).parsedDateParts=e._a.slice(0),f(e).meridiem=e._meridiem,e._a[_e]=function(e,t,n){var i;if(null==n)return t;return null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?((i=e.isPM(n))&&t<12&&(t+=12),i||12!==t||(t=0),t):t}(e._locale,e._a[_e],e._meridiem),null!==(s=f(e).era)&&(e._a[we]=e._locale.erasConvertYear(s,e._a[we])),$t(e),gt(e)}else Tt(e);else Et(e)}function Pt(e){var t=e._i,o=e._f;return e._locale=e._locale||mt(e._l),null===t||void 0===o&&""===t?m({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),w(t)?new y(gt(t)):(c(t)?e._d=t:i(o)?function(e){var t,n,i,r,o,a,s=!1,l=e._f.length;if(0===l)return f(e).invalidFormat=!0,void(e._d=new Date(NaN));for(r=0;r<l;r++)o=0,a=!1,t=b({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[r],At(t),p(t)&&(a=!0),o+=f(t).charsLeftOver,o+=10*f(t).unusedTokens.length,f(t).score=o,s?o<i&&(i=o,n=t):(null==i||o<i||a)&&(i=o,n=t,a&&(s=!0));d(e,n||t)}(e):o?At(e):function(e){var t=e._i;s(t)?e._d=new Date(n.now()):c(t)?e._d=new Date(t.valueOf()):"string"==typeof t?function(e){var t=Ct.exec(e._i);null===t?(Et(e),!1===e._isValid&&(delete e._isValid,Tt(e),!1===e._isValid&&(delete e._isValid,e._strict?e._isValid=!1:n.createFromInputFallback(e)))):e._d=new Date(+t[1])}(e):i(t)?(e._a=u(t.slice(0),(function(e){return parseInt(e,10)})),$t(e)):r(t)?function(e){if(!e._d){var t=z(e._i),n=void 0===t.day?t.date:t.day;e._a=u([t.year,t.month,n,t.hour,t.minute,t.second,t.millisecond],(function(e){return e&&parseInt(e,10)})),$t(e)}}(e):l(t)?e._d=new Date(t):n.createFromInputFallback(e)}(e),p(e)||(e._d=null),e))}function jt(e,t,n,o,s){var l,c={};return!0!==t&&!1!==t||(o=t,t=void 0),!0!==n&&!1!==n||(o=n,n=void 0),(r(e)&&a(e)||i(e)&&0===e.length)&&(e=void 0),c._isAMomentObject=!0,c._useUTC=c._isUTC=s,c._l=n,c._i=e,c._f=t,c._strict=o,(l=new y(gt(Pt(c))))._nextDay&&(l.add(1,"d"),l._nextDay=void 0),l}function Ot(e,t,n,i){return jt(e,t,n,i,!1)}n.createFromInputFallback=C("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))})),n.ISO_8601=function(){},n.RFC_2822=function(){};var It=C("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=Ot.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:m()})),Mt=C("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=Ot.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:m()}));function Nt(e,t){var n,r;if(1===t.length&&i(t[0])&&(t=t[0]),!t.length)return Ot();for(n=t[0],r=1;r<t.length;++r)t[r].isValid()&&!t[r][e](n)||(n=t[r]);return n}var Ft=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Rt(e){var t=z(e),n=t.year||0,i=t.quarter||0,r=t.month||0,a=t.week||t.isoWeek||0,s=t.day||0,l=t.hour||0,c=t.minute||0,u=t.second||0,d=t.millisecond||0;this._isValid=function(e){var t,n,i=!1,r=Ft.length;for(t in e)if(o(e,t)&&(-1===ye.call(Ft,t)||null!=e[t]&&isNaN(e[t])))return!1;for(n=0;n<r;++n)if(e[Ft[n]]){if(i)return!1;parseFloat(e[Ft[n]])!==W(e[Ft[n]])&&(i=!0)}return!0}(t),this._milliseconds=+d+1e3*u+6e4*c+1e3*l*60*60,this._days=+s+7*a,this._months=+r+3*i+12*n,this._data={},this._locale=mt(),this._bubble()}function Lt(e){return e instanceof Rt}function zt(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function Ht(e,t){I(e,0,0,(function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+$(~~(e/60),2)+t+$(~~e%60,2)}))}Ht("Z",":"),Ht("ZZ",""),he("Z",ue),he("ZZ",ue),ge(["Z","ZZ"],(function(e,t,n){n._useUTC=!0,n._tzm=qt(ue,e)}));var Bt=/([\+\-]|\d\d)/gi;function qt(e,t){var n,i,r=(t||"").match(e);return null===r?null:0===(i=60*(n=((r[r.length-1]||[])+"").match(Bt)||["-",0,0])[1]+W(n[2]))?0:"+"===n[0]?i:-i}function Ut(e,t){var i,r;return t._isUTC?(i=t.clone(),r=(w(e)||c(e)?e.valueOf():Ot(e).valueOf())-i.valueOf(),i._d.setTime(i._d.valueOf()+r),n.updateOffset(i,!1),i):Ot(e).local()}function Wt(e){return-Math.round(e._d.getTimezoneOffset())}function Vt(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}n.updateOffset=function(){};var Yt=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Gt=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Zt(e,t){var n,i,r,a=e,s=null;return Lt(e)?a={ms:e._milliseconds,d:e._days,M:e._months}:l(e)||!isNaN(+e)?(a={},t?a[t]=+e:a.milliseconds=+e):(s=Yt.exec(e))?(n="-"===s[1]?-1:1,a={y:0,d:W(s[Ce])*n,h:W(s[_e])*n,m:W(s[ke])*n,s:W(s[Ee])*n,ms:W(zt(1e3*s[Se]))*n}):(s=Gt.exec(e))?(n="-"===s[1]?-1:1,a={y:Qt(s[2],n),M:Qt(s[3],n),w:Qt(s[4],n),d:Qt(s[5],n),h:Qt(s[6],n),m:Qt(s[7],n),s:Qt(s[8],n)}):null==a?a={}:"object"==typeof a&&("from"in a||"to"in a)&&(r=function(e,t){var n;if(!e.isValid()||!t.isValid())return{milliseconds:0,months:0};t=Ut(t,e),e.isBefore(t)?n=Kt(e,t):((n=Kt(t,e)).milliseconds=-n.milliseconds,n.months=-n.months);return n}(Ot(a.from),Ot(a.to)),(a={}).ms=r.milliseconds,a.M=r.months),i=new Rt(a),Lt(e)&&o(e,"_locale")&&(i._locale=e._locale),Lt(e)&&o(e,"_isValid")&&(i._isValid=e._isValid),i}function Qt(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Kt(e,t){var n={};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function Jt(e,t){return function(n,i){var r;return null===i||isNaN(+i)||(E(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),r=n,n=i,i=r),Xt(this,Zt(n,i),e),this}}function Xt(e,t,i,r){var o=t._milliseconds,a=zt(t._days),s=zt(t._months);e.isValid()&&(r=null==r||r,s&&Ne(e,Y(e,"Month")+s*i),a&&G(e,"Date",Y(e,"Date")+a*i),o&&e._d.setTime(e._d.valueOf()+o*i),r&&n.updateOffset(e,a||s))}Zt.fn=Rt.prototype,Zt.invalid=function(){return Zt(NaN)};var en=Jt(1,"add"),tn=Jt(-1,"subtract");function nn(e){return"string"==typeof e||e instanceof String}function rn(e){return w(e)||c(e)||nn(e)||l(e)||function(e){var t=i(e),n=!1;t&&(n=0===e.filter((function(t){return!l(t)&&nn(e)})).length);return t&&n}(e)||function(e){var t,n,i=r(e)&&!a(e),s=!1,l=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],c=l.length;for(t=0;t<c;t+=1)n=l[t],s=s||o(e,n);return i&&s}(e)||null==e}function on(e,t){if(e.date()<t.date())return-on(t,e);var n=12*(t.year()-e.year())+(t.month()-e.month()),i=e.clone().add(n,"months");return-(n+(t-i<0?(t-i)/(i-e.clone().add(n-1,"months")):(t-i)/(e.clone().add(n+1,"months")-i)))||0}function an(e){var t;return void 0===e?this._locale._abbr:(null!=(t=mt(e))&&(this._locale=t),this)}n.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",n.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var sn=C("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(e){return void 0===e?this.localeData():this.locale(e)}));function ln(){return this._locale}var cn=1e3,un=6e4,dn=36e5,hn=126227808e5;function fn(e,t){return(e%t+t)%t}function pn(e,t,n){return e<100&&e>=0?new Date(e+400,t,n)-hn:new Date(e,t,n).valueOf()}function mn(e,t,n){return e<100&&e>=0?Date.UTC(e+400,t,n)-hn:Date.UTC(e,t,n)}function gn(e,t){return t.erasAbbrRegex(e)}function vn(){var e,t,n=[],i=[],r=[],o=[],a=this.eras();for(e=0,t=a.length;e<t;++e)i.push(pe(a[e].name)),n.push(pe(a[e].abbr)),r.push(pe(a[e].narrow)),o.push(pe(a[e].name)),o.push(pe(a[e].abbr)),o.push(pe(a[e].narrow));this._erasRegex=new RegExp("^("+o.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+i.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+r.join("|")+")","i")}function bn(e,t){I(0,[e,e.length],0,t)}function yn(e,t,n,i,r){var o;return null==e?We(this,i,r).year:(t>(o=Ve(e,i,r))&&(t=o),wn.call(this,e,t,n,i,r))}function wn(e,t,n,i,r){var o=Ue(e,t,n,i,r),a=Be(o.year,0,o.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}I("N",0,0,"eraAbbr"),I("NN",0,0,"eraAbbr"),I("NNN",0,0,"eraAbbr"),I("NNNN",0,0,"eraName"),I("NNNNN",0,0,"eraNarrow"),I("y",["y",1],"yo","eraYear"),I("y",["yy",2],0,"eraYear"),I("y",["yyy",3],0,"eraYear"),I("y",["yyyy",4],0,"eraYear"),he("N",gn),he("NN",gn),he("NNN",gn),he("NNNN",(function(e,t){return t.erasNameRegex(e)})),he("NNNNN",(function(e,t){return t.erasNarrowRegex(e)})),ge(["N","NN","NNN","NNNN","NNNNN"],(function(e,t,n,i){var r=n._locale.erasParse(e,i,n._strict);r?f(n).era=r:f(n).invalidEra=e})),he("y",se),he("yy",se),he("yyy",se),he("yyyy",se),he("yo",(function(e,t){return t._eraYearOrdinalRegex||se})),ge(["y","yy","yyy","yyyy"],we),ge(["yo"],(function(e,t,n,i){var r;n._locale._eraYearOrdinalRegex&&(r=e.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?t[we]=n._locale.eraYearOrdinalParse(e,r):t[we]=parseInt(e,10)})),I(0,["gg",2],0,(function(){return this.weekYear()%100})),I(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),bn("gggg","weekYear"),bn("ggggg","weekYear"),bn("GGGG","isoWeekYear"),bn("GGGGG","isoWeekYear"),R("weekYear","gg"),R("isoWeekYear","GG"),B("weekYear",1),B("isoWeekYear",1),he("G",le),he("g",le),he("GG",te,K),he("gg",te,K),he("GGGG",oe,X),he("gggg",oe,X),he("GGGGG",ae,ee),he("ggggg",ae,ee),ve(["gggg","ggggg","GGGG","GGGGG"],(function(e,t,n,i){t[i.substr(0,2)]=W(e)})),ve(["gg","GG"],(function(e,t,i,r){t[r]=n.parseTwoDigitYear(e)})),I("Q",0,"Qo","quarter"),R("quarter","Q"),B("quarter",7),he("Q",Q),ge("Q",(function(e,t){t[xe]=3*(W(e)-1)})),I("D",["DD",2],"Do","date"),R("date","D"),B("date",9),he("D",te),he("DD",te,K),he("Do",(function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient})),ge(["D","DD"],Ce),ge("Do",(function(e,t){t[Ce]=W(e.match(te)[0])}));var xn=V("Date",!0);I("DDD",["DDDD",3],"DDDo","dayOfYear"),R("dayOfYear","DDD"),B("dayOfYear",4),he("DDD",re),he("DDDD",J),ge(["DDD","DDDD"],(function(e,t,n){n._dayOfYear=W(e)})),I("m",["mm",2],0,"minute"),R("minute","m"),B("minute",14),he("m",te),he("mm",te,K),ge(["m","mm"],ke);var Cn=V("Minutes",!1);I("s",["ss",2],0,"second"),R("second","s"),B("second",15),he("s",te),he("ss",te,K),ge(["s","ss"],Ee);var _n,kn,En=V("Seconds",!1);for(I("S",0,0,(function(){return~~(this.millisecond()/100)})),I(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),I(0,["SSS",3],0,"millisecond"),I(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),I(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),I(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),I(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),I(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),I(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),R("millisecond","ms"),B("millisecond",16),he("S",re,Q),he("SS",re,K),he("SSS",re,J),_n="SSSS";_n.length<=9;_n+="S")he(_n,se);function Sn(e,t){t[Se]=W(1e3*("0."+e))}for(_n="S";_n.length<=9;_n+="S")ge(_n,Sn);kn=V("Milliseconds",!1),I("z",0,0,"zoneAbbr"),I("zz",0,0,"zoneName");var Tn=y.prototype;function Dn(e){return e}Tn.add=en,Tn.calendar=function(e,t){1===arguments.length&&(arguments[0]?rn(arguments[0])?(e=arguments[0],t=void 0):function(e){var t,n=r(e)&&!a(e),i=!1,s=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(t=0;t<s.length;t+=1)i=i||o(e,s[t]);return n&&i}(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var i=e||Ot(),s=Ut(i,this).startOf("day"),l=n.calendarFormat(this,s)||"sameElse",c=t&&(S(t[l])?t[l].call(this,i):t[l]);return this.format(c||this.localeData().calendar(l,this,Ot(i)))},Tn.clone=function(){return new y(this)},Tn.diff=function(e,t,n){var i,r,o;if(!this.isValid())return NaN;if(!(i=Ut(e,this)).isValid())return NaN;switch(r=6e4*(i.utcOffset()-this.utcOffset()),t=L(t)){case"year":o=on(this,i)/12;break;case"month":o=on(this,i);break;case"quarter":o=on(this,i)/3;break;case"second":o=(this-i)/1e3;break;case"minute":o=(this-i)/6e4;break;case"hour":o=(this-i)/36e5;break;case"day":o=(this-i-r)/864e5;break;case"week":o=(this-i-r)/6048e5;break;default:o=this-i}return n?o:U(o)},Tn.endOf=function(e){var t,i;if(void 0===(e=L(e))||"millisecond"===e||!this.isValid())return this;switch(i=this._isUTC?mn:pn,e){case"year":t=i(this.year()+1,0,1)-1;break;case"quarter":t=i(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=i(this.year(),this.month()+1,1)-1;break;case"week":t=i(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=i(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=i(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=dn-fn(t+(this._isUTC?0:this.utcOffset()*un),dn)-1;break;case"minute":t=this._d.valueOf(),t+=un-fn(t,un)-1;break;case"second":t=this._d.valueOf(),t+=cn-fn(t,cn)-1}return this._d.setTime(t),n.updateOffset(this,!0),this},Tn.format=function(e){e||(e=this.isUtc()?n.defaultFormatUtc:n.defaultFormat);var t=M(this,e);return this.localeData().postformat(t)},Tn.from=function(e,t){return this.isValid()&&(w(e)&&e.isValid()||Ot(e).isValid())?Zt({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},Tn.fromNow=function(e){return this.from(Ot(),e)},Tn.to=function(e,t){return this.isValid()&&(w(e)&&e.isValid()||Ot(e).isValid())?Zt({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},Tn.toNow=function(e){return this.to(Ot(),e)},Tn.get=function(e){return S(this[e=L(e)])?this[e]():this},Tn.invalidAt=function(){return f(this).overflow},Tn.isAfter=function(e,t){var n=w(e)?e:Ot(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=L(t)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())},Tn.isBefore=function(e,t){var n=w(e)?e:Ot(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=L(t)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())},Tn.isBetween=function(e,t,n,i){var r=w(e)?e:Ot(e),o=w(t)?t:Ot(t);return!!(this.isValid()&&r.isValid()&&o.isValid())&&(("("===(i=i||"()")[0]?this.isAfter(r,n):!this.isBefore(r,n))&&(")"===i[1]?this.isBefore(o,n):!this.isAfter(o,n)))},Tn.isSame=function(e,t){var n,i=w(e)?e:Ot(e);return!(!this.isValid()||!i.isValid())&&("millisecond"===(t=L(t)||"millisecond")?this.valueOf()===i.valueOf():(n=i.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))},Tn.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},Tn.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)},Tn.isValid=function(){return p(this)},Tn.lang=sn,Tn.locale=an,Tn.localeData=ln,Tn.max=Mt,Tn.min=It,Tn.parsingFlags=function(){return d({},f(this))},Tn.set=function(e,t){if("object"==typeof e){var n,i=function(e){var t,n=[];for(t in e)o(e,t)&&n.push({unit:t,priority:H[t]});return n.sort((function(e,t){return e.priority-t.priority})),n}(e=z(e)),r=i.length;for(n=0;n<r;n++)this[i[n].unit](e[i[n].unit])}else if(S(this[e=L(e)]))return this[e](t);return this},Tn.startOf=function(e){var t,i;if(void 0===(e=L(e))||"millisecond"===e||!this.isValid())return this;switch(i=this._isUTC?mn:pn,e){case"year":t=i(this.year(),0,1);break;case"quarter":t=i(this.year(),this.month()-this.month()%3,1);break;case"month":t=i(this.year(),this.month(),1);break;case"week":t=i(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=i(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=i(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=fn(t+(this._isUTC?0:this.utcOffset()*un),dn);break;case"minute":t=this._d.valueOf(),t-=fn(t,un);break;case"second":t=this._d.valueOf(),t-=fn(t,cn)}return this._d.setTime(t),n.updateOffset(this,!0),this},Tn.subtract=tn,Tn.toArray=function(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]},Tn.toObject=function(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}},Tn.toDate=function(){return new Date(this.valueOf())},Tn.toISOString=function(e){if(!this.isValid())return null;var t=!0!==e,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?M(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):S(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",M(n,"Z")):M(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},Tn.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e,t,n,i="moment",r="";return this.isLocal()||(i=0===this.utcOffset()?"moment.utc":"moment.parseZone",r="Z"),e="["+i+'("]',t=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY","-MM-DD[T]HH:mm:ss.SSS",n=r+'[")]',this.format(e+t+"-MM-DD[T]HH:mm:ss.SSS"+n)},"undefined"!=typeof Symbol&&null!=Symbol.for&&(Tn[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),Tn.toJSON=function(){return this.isValid()?this.toISOString():null},Tn.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},Tn.unix=function(){return Math.floor(this.valueOf()/1e3)},Tn.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},Tn.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},Tn.eraName=function(){var e,t,n,i=this.localeData().eras();for(e=0,t=i.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),i[e].since<=n&&n<=i[e].until)return i[e].name;if(i[e].until<=n&&n<=i[e].since)return i[e].name}return""},Tn.eraNarrow=function(){var e,t,n,i=this.localeData().eras();for(e=0,t=i.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),i[e].since<=n&&n<=i[e].until)return i[e].narrow;if(i[e].until<=n&&n<=i[e].since)return i[e].narrow}return""},Tn.eraAbbr=function(){var e,t,n,i=this.localeData().eras();for(e=0,t=i.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),i[e].since<=n&&n<=i[e].until)return i[e].abbr;if(i[e].until<=n&&n<=i[e].since)return i[e].abbr}return""},Tn.eraYear=function(){var e,t,i,r,o=this.localeData().eras();for(e=0,t=o.length;e<t;++e)if(i=o[e].since<=o[e].until?1:-1,r=this.clone().startOf("day").valueOf(),o[e].since<=r&&r<=o[e].until||o[e].until<=r&&r<=o[e].since)return(this.year()-n(o[e].since).year())*i+o[e].offset;return this.year()},Tn.year=ze,Tn.isLeapYear=function(){return q(this.year())},Tn.weekYear=function(e){return yn.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},Tn.isoWeekYear=function(e){return yn.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},Tn.quarter=Tn.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},Tn.month=Fe,Tn.daysInMonth=function(){return $e(this.year(),this.month())},Tn.week=Tn.weeks=function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},Tn.isoWeek=Tn.isoWeeks=function(e){var t=We(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},Tn.weeksInYear=function(){var e=this.localeData()._week;return Ve(this.year(),e.dow,e.doy)},Tn.weeksInWeekYear=function(){var e=this.localeData()._week;return Ve(this.weekYear(),e.dow,e.doy)},Tn.isoWeeksInYear=function(){return Ve(this.year(),1,4)},Tn.isoWeeksInISOWeekYear=function(){return Ve(this.isoWeekYear(),1,4)},Tn.date=xn,Tn.day=Tn.days=function(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=function(e,t){return"string"!=typeof e?e:isNaN(e)?"number"==typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}(e,this.localeData()),this.add(e-t,"d")):t},Tn.weekday=function(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},Tn.isoWeekday=function(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=function(e,t){return"string"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7},Tn.dayOfYear=function(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},Tn.hour=Tn.hours=ot,Tn.minute=Tn.minutes=Cn,Tn.second=Tn.seconds=En,Tn.millisecond=Tn.milliseconds=kn,Tn.utcOffset=function(e,t,i){var r,o=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"==typeof e){if(null===(e=qt(ue,e)))return this}else Math.abs(e)<16&&!i&&(e*=60);return!this._isUTC&&t&&(r=Wt(this)),this._offset=e,this._isUTC=!0,null!=r&&this.add(r,"m"),o!==e&&(!t||this._changeInProgress?Xt(this,Zt(e-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,n.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?o:Wt(this)},Tn.utc=function(e){return this.utcOffset(0,e)},Tn.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Wt(this),"m")),this},Tn.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=qt(ce,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this},Tn.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?Ot(e).utcOffset():0,(this.utcOffset()-e)%60==0)},Tn.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},Tn.isLocal=function(){return!!this.isValid()&&!this._isUTC},Tn.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},Tn.isUtc=Vt,Tn.isUTC=Vt,Tn.zoneAbbr=function(){return this._isUTC?"UTC":""},Tn.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},Tn.dates=C("dates accessor is deprecated. Use date instead.",xn),Tn.months=C("months accessor is deprecated. Use month instead",Fe),Tn.years=C("years accessor is deprecated. Use year instead",ze),Tn.zone=C("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",(function(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()})),Tn.isDSTShifted=C("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",(function(){if(!s(this._isDSTShifted))return this._isDSTShifted;var e,t={};return b(t,this),(t=Pt(t))._a?(e=t._isUTC?h(t._a):Ot(t._a),this._isDSTShifted=this.isValid()&&function(e,t,n){var i,r=Math.min(e.length,t.length),o=Math.abs(e.length-t.length),a=0;for(i=0;i<r;i++)(n&&e[i]!==t[i]||!n&&W(e[i])!==W(t[i]))&&a++;return a+o}(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}));var $n=D.prototype;function An(e,t,n,i){var r=mt(),o=h().set(i,t);return r[n](o,e)}function Pn(e,t,n){if(l(e)&&(t=e,e=void 0),e=e||"",null!=t)return An(e,t,n,"month");var i,r=[];for(i=0;i<12;i++)r[i]=An(e,i,n,"month");return r}function jn(e,t,n,i){"boolean"==typeof e?(l(t)&&(n=t,t=void 0),t=t||""):(n=t=e,e=!1,l(t)&&(n=t,t=void 0),t=t||"");var r,o=mt(),a=e?o._week.dow:0,s=[];if(null!=n)return An(t,(n+a)%7,i,"day");for(r=0;r<7;r++)s[r]=An(t,(r+a)%7,i,"day");return s}$n.calendar=function(e,t,n){var i=this._calendar[e]||this._calendar.sameElse;return S(i)?i.call(t,n):i},$n.longDateFormat=function(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.match(A).map((function(e){return"MMMM"===e||"MM"===e||"DD"===e||"dddd"===e?e.slice(1):e})).join(""),this._longDateFormat[e])},$n.invalidDate=function(){return this._invalidDate},$n.ordinal=function(e){return this._ordinal.replace("%d",e)},$n.preparse=Dn,$n.postformat=Dn,$n.relativeTime=function(e,t,n,i){var r=this._relativeTime[n];return S(r)?r(e,t,n,i):r.replace(/%d/i,e)},$n.pastFuture=function(e,t){var n=this._relativeTime[e>0?"future":"past"];return S(n)?n(t):n.replace(/%s/i,t)},$n.set=function(e){var t,n;for(n in e)o(e,n)&&(S(t=e[n])?this[n]=t:this["_"+n]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},$n.eras=function(e,t){var i,r,o,a=this._eras||mt("en")._eras;for(i=0,r=a.length;i<r;++i){if("string"==typeof a[i].since)o=n(a[i].since).startOf("day"),a[i].since=o.valueOf();switch(typeof a[i].until){case"undefined":a[i].until=1/0;break;case"string":o=n(a[i].until).startOf("day").valueOf(),a[i].until=o.valueOf()}}return a},$n.erasParse=function(e,t,n){var i,r,o,a,s,l=this.eras();for(e=e.toUpperCase(),i=0,r=l.length;i<r;++i)if(o=l[i].name.toUpperCase(),a=l[i].abbr.toUpperCase(),s=l[i].narrow.toUpperCase(),n)switch(t){case"N":case"NN":case"NNN":if(a===e)return l[i];break;case"NNNN":if(o===e)return l[i];break;case"NNNNN":if(s===e)return l[i]}else if([o,a,s].indexOf(e)>=0)return l[i]},$n.erasConvertYear=function(e,t){var i=e.since<=e.until?1:-1;return void 0===t?n(e.since).year():n(e.since).year()+(t-e.offset)*i},$n.erasAbbrRegex=function(e){return o(this,"_erasAbbrRegex")||vn.call(this),e?this._erasAbbrRegex:this._erasRegex},$n.erasNameRegex=function(e){return o(this,"_erasNameRegex")||vn.call(this),e?this._erasNameRegex:this._erasRegex},$n.erasNarrowRegex=function(e){return o(this,"_erasNarrowRegex")||vn.call(this),e?this._erasNarrowRegex:this._erasRegex},$n.months=function(e,t){return e?i(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||je).test(t)?"format":"standalone"][e.month()]:i(this._months)?this._months:this._months.standalone},$n.monthsShort=function(e,t){return e?i(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[je.test(t)?"format":"standalone"][e.month()]:i(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},$n.monthsParse=function(e,t,n){var i,r,o;if(this._monthsParseExact)return Me.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(r=h([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(o="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[i]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[i].test(e))return i;if(n&&"MMM"===t&&this._shortMonthsParse[i].test(e))return i;if(!n&&this._monthsParse[i].test(e))return i}},$n.monthsRegex=function(e){return this._monthsParseExact?(o(this,"_monthsRegex")||Re.call(this),e?this._monthsStrictRegex:this._monthsRegex):(o(this,"_monthsRegex")||(this._monthsRegex=Ie),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},$n.monthsShortRegex=function(e){return this._monthsParseExact?(o(this,"_monthsRegex")||Re.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(o(this,"_monthsShortRegex")||(this._monthsShortRegex=Oe),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},$n.week=function(e){return We(e,this._week.dow,this._week.doy).week},$n.firstDayOfYear=function(){return this._week.doy},$n.firstDayOfWeek=function(){return this._week.dow},$n.weekdays=function(e,t){var n=i(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"];return!0===e?Ye(n,this._week.dow):e?n[e.day()]:n},$n.weekdaysMin=function(e){return!0===e?Ye(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin},$n.weekdaysShort=function(e){return!0===e?Ye(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort},$n.weekdaysParse=function(e,t,n){var i,r,o;if(this._weekdaysParseExact)return et.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(r=h([2e3,1]).day(i),n&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(r,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(r,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(r,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[i]||(o="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[i]=new RegExp(o.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[i].test(e))return i;if(n&&"ddd"===t&&this._shortWeekdaysParse[i].test(e))return i;if(n&&"dd"===t&&this._minWeekdaysParse[i].test(e))return i;if(!n&&this._weekdaysParse[i].test(e))return i}},$n.weekdaysRegex=function(e){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||tt.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(o(this,"_weekdaysRegex")||(this._weekdaysRegex=Ke),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},$n.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||tt.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(o(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Je),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},$n.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||tt.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(o(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Xe),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},$n.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},$n.meridiem=function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},ft("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===W(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),n.lang=C("moment.lang is deprecated. Use moment.locale instead.",ft),n.langData=C("moment.langData is deprecated. Use moment.localeData instead.",mt);var On=Math.abs;function In(e,t,n,i){var r=Zt(t,n);return e._milliseconds+=i*r._milliseconds,e._days+=i*r._days,e._months+=i*r._months,e._bubble()}function Mn(e){return e<0?Math.floor(e):Math.ceil(e)}function Nn(e){return 4800*e/146097}function Fn(e){return 146097*e/4800}function Rn(e){return function(){return this.as(e)}}var Ln=Rn("ms"),zn=Rn("s"),Hn=Rn("m"),Bn=Rn("h"),qn=Rn("d"),Un=Rn("w"),Wn=Rn("M"),Vn=Rn("Q"),Yn=Rn("y");function Gn(e){return function(){return this.isValid()?this._data[e]:NaN}}var Zn=Gn("milliseconds"),Qn=Gn("seconds"),Kn=Gn("minutes"),Jn=Gn("hours"),Xn=Gn("days"),ei=Gn("months"),ti=Gn("years");var ni=Math.round,ii={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function ri(e,t,n,i,r){return r.relativeTime(t||1,!!n,e,i)}var oi=Math.abs;function ai(e){return(e>0)-(e<0)||+e}function si(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n,i,r,o,a,s,l=oi(this._milliseconds)/1e3,c=oi(this._days),u=oi(this._months),d=this.asSeconds();return d?(e=U(l/60),t=U(e/60),l%=60,e%=60,n=U(u/12),u%=12,i=l?l.toFixed(3).replace(/\.?0+$/,""):"",r=d<0?"-":"",o=ai(this._months)!==ai(d)?"-":"",a=ai(this._days)!==ai(d)?"-":"",s=ai(this._milliseconds)!==ai(d)?"-":"",r+"P"+(n?o+n+"Y":"")+(u?o+u+"M":"")+(c?a+c+"D":"")+(t||e||l?"T":"")+(t?s+t+"H":"")+(e?s+e+"M":"")+(l?s+i+"S":"")):"P0D"}var li=Rt.prototype;return li.isValid=function(){return this._isValid},li.abs=function(){var e=this._data;return this._milliseconds=On(this._milliseconds),this._days=On(this._days),this._months=On(this._months),e.milliseconds=On(e.milliseconds),e.seconds=On(e.seconds),e.minutes=On(e.minutes),e.hours=On(e.hours),e.months=On(e.months),e.years=On(e.years),this},li.add=function(e,t){return In(this,e,t,1)},li.subtract=function(e,t){return In(this,e,t,-1)},li.as=function(e){if(!this.isValid())return NaN;var t,n,i=this._milliseconds;if("month"===(e=L(e))||"quarter"===e||"year"===e)switch(t=this._days+i/864e5,n=this._months+Nn(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(Fn(this._months)),e){case"week":return t/7+i/6048e5;case"day":return t+i/864e5;case"hour":return 24*t+i/36e5;case"minute":return 1440*t+i/6e4;case"second":return 86400*t+i/1e3;case"millisecond":return Math.floor(864e5*t)+i;default:throw new Error("Unknown unit "+e)}},li.asMilliseconds=Ln,li.asSeconds=zn,li.asMinutes=Hn,li.asHours=Bn,li.asDays=qn,li.asWeeks=Un,li.asMonths=Wn,li.asQuarters=Vn,li.asYears=Yn,li.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*W(this._months/12):NaN},li._bubble=function(){var e,t,n,i,r,o=this._milliseconds,a=this._days,s=this._months,l=this._data;return o>=0&&a>=0&&s>=0||o<=0&&a<=0&&s<=0||(o+=864e5*Mn(Fn(s)+a),a=0,s=0),l.milliseconds=o%1e3,e=U(o/1e3),l.seconds=e%60,t=U(e/60),l.minutes=t%60,n=U(t/60),l.hours=n%24,a+=U(n/24),s+=r=U(Nn(a)),a-=Mn(Fn(r)),i=U(s/12),s%=12,l.days=a,l.months=s,l.years=i,this},li.clone=function(){return Zt(this)},li.get=function(e){return e=L(e),this.isValid()?this[e+"s"]():NaN},li.milliseconds=Zn,li.seconds=Qn,li.minutes=Kn,li.hours=Jn,li.days=Xn,li.weeks=function(){return U(this.days()/7)},li.months=ei,li.years=ti,li.humanize=function(e,t){if(!this.isValid())return this.localeData().invalidDate();var n,i,r=!1,o=ii;return"object"==typeof e&&(t=e,e=!1),"boolean"==typeof e&&(r=e),"object"==typeof t&&(o=Object.assign({},ii,t),null!=t.s&&null==t.ss&&(o.ss=t.s-1)),i=function(e,t,n,i){var r=Zt(e).abs(),o=ni(r.as("s")),a=ni(r.as("m")),s=ni(r.as("h")),l=ni(r.as("d")),c=ni(r.as("M")),u=ni(r.as("w")),d=ni(r.as("y")),h=o<=n.ss&&["s",o]||o<n.s&&["ss",o]||a<=1&&["m"]||a<n.m&&["mm",a]||s<=1&&["h"]||s<n.h&&["hh",s]||l<=1&&["d"]||l<n.d&&["dd",l];return null!=n.w&&(h=h||u<=1&&["w"]||u<n.w&&["ww",u]),(h=h||c<=1&&["M"]||c<n.M&&["MM",c]||d<=1&&["y"]||["yy",d])[2]=t,h[3]=+e>0,h[4]=i,ri.apply(null,h)}(this,!r,o,n=this.localeData()),r&&(i=n.pastFuture(+this,i)),n.postformat(i)},li.toISOString=si,li.toString=si,li.toJSON=si,li.locale=an,li.localeData=ln,li.toIsoString=C("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",si),li.lang=sn,I("X",0,0,"unix"),I("x",0,0,"valueOf"),he("x",le),he("X",/[+-]?\d+(\.\d{1,3})?/),ge("X",(function(e,t,n){n._d=new Date(1e3*parseFloat(e))})),ge("x",(function(e,t,n){n._d=new Date(W(e))})),
//! moment.js
n.version="2.29.4",e=Ot,n.fn=Tn,n.min=function(){return Nt("isBefore",[].slice.call(arguments,0))},n.max=function(){return Nt("isAfter",[].slice.call(arguments,0))},n.now=function(){return Date.now?Date.now():+new Date},n.utc=h,n.unix=function(e){return Ot(1e3*e)},n.months=function(e,t){return Pn(e,t,"months")},n.isDate=c,n.locale=ft,n.invalid=m,n.duration=Zt,n.isMoment=w,n.weekdays=function(e,t,n){return jn(e,t,n,"weekdays")},n.parseZone=function(){return Ot.apply(null,arguments).parseZone()},n.localeData=mt,n.isDuration=Lt,n.monthsShort=function(e,t){return Pn(e,t,"monthsShort")},n.weekdaysMin=function(e,t,n){return jn(e,t,n,"weekdaysMin")},n.defineLocale=pt,n.updateLocale=function(e,t){if(null!=t){var n,i,r=st;null!=lt[e]&&null!=lt[e].parentLocale?lt[e].set(T(lt[e]._config,t)):(null!=(i=ht(e))&&(r=i._config),t=T(r,t),null==i&&(t.abbr=e),(n=new D(t)).parentLocale=lt[e],lt[e]=n),ft(e)}else null!=lt[e]&&(null!=lt[e].parentLocale?(lt[e]=lt[e].parentLocale,e===ft()&&ft(e)):null!=lt[e]&&delete lt[e]);return lt[e]},n.locales=function(){return _(lt)},n.weekdaysShort=function(e,t,n){return jn(e,t,n,"weekdaysShort")},n.normalizeUnits=L,n.relativeTimeRounding=function(e){return void 0===e?ni:"function"==typeof e&&(ni=e,!0)},n.relativeTimeThreshold=function(e,t){return void 0!==ii[e]&&(void 0===t?ii[e]:(ii[e]=t,"s"===e&&(ii.ss=t-1),!0))},n.calendarFormat=function(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"},n.prototype=Tn,n.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},n})),function(e){"use strict";if("function"==typeof define&&define.amd)define("datepicker",["jquery","moment"],e);else if("object"==typeof exports)module.exports=e(require("jquery"),require("moment"));else{if("undefined"==typeof jQuery)throw"bootstrap-datetimepicker requires jQuery to be loaded first";if("undefined"==typeof moment)throw"bootstrap-datetimepicker requires Moment.js to be loaded first";e(jQuery,moment)}}((function(e,t){"use strict";if(!t)throw new Error("bootstrap-datetimepicker requires Moment.js to be loaded first");function n(n,i){function r(){return void 0!==t.tz&&void 0!==i.timeZone&&null!==i.timeZone&&""!==i.timeZone}function o(e){var n;return n=null==e?t():t.isDate(e)||t.isMoment(e)?t(e):r()?t.tz(e,M,i.useStrict,i.timeZone):t(e,M,i.useStrict),r()&&n.tz(i.timeZone),n}function a(e){if("string"!=typeof e||1<e.length)throw new TypeError("isEnabled expects a single character string parameter");switch(e){case"y":return-1!==I.indexOf("Y");case"M":return-1!==I.indexOf("M");case"d":return-1!==I.toLowerCase().indexOf("d");case"h":case"H":return-1!==I.toLowerCase().indexOf("h");case"m":return-1!==I.indexOf("m");case"s":return-1!==I.indexOf("s");default:return!1}}function s(){return a("h")||a("m")||a("s")}function l(){return a("y")||a("M")||a("d")}function c(){var t,n,r,o=e("<div>").addClass("bootstrap-datetimepicker-widget dropdown-menu"),c=e("<div>").addClass("datepicker").append((n=e("<thead>").append(e("<tr>").append(e("<th>").addClass("prev").attr("data-action","previous").append(e("<span>").addClass(i.icons.previous))).append(e("<th>").addClass("picker-switch").attr("data-action","pickerSwitch").attr("colspan",i.calendarWeeks?"6":"5")).append(e("<th>").addClass("next").attr("data-action","next").append(e("<span>").addClass(i.icons.next)))),r=e("<tbody>").append(e("<tr>").append(e("<td>").attr("colspan",i.calendarWeeks?"8":"7"))),[e("<div>").addClass("datepicker-days").append(e("<table>").addClass("table-condensed").append(n).append(e("<tbody>"))),e("<div>").addClass("datepicker-months").append(e("<table>").addClass("table-condensed").append(n.clone()).append(r.clone())),e("<div>").addClass("datepicker-years").append(e("<table>").addClass("table-condensed").append(n.clone()).append(r.clone())),e("<div>").addClass("datepicker-decades").append(e("<table>").addClass("table-condensed").append(n.clone()).append(r.clone()))])),u=e("<div>").addClass("timepicker").append(function(){var t,n,r,o=e("<div>").addClass("timepicker-hours").append(e("<table>").addClass("table-condensed")),s=e("<div>").addClass("timepicker-minutes").append(e("<table>").addClass("table-condensed")),l=e("<div>").addClass("timepicker-seconds").append(e("<table>").addClass("table-condensed")),c=[(t=e("<tr>"),n=e("<tr>"),r=e("<tr>"),a("h")&&(t.append(e("<td>").append(e("<a>").attr({href:"#",tabindex:"-1",title:i.tooltips.incrementHour}).addClass("btn").attr("data-action","incrementHours").append(e("<span>").addClass(i.icons.up)))),n.append(e("<td>").append(e("<span>").addClass("timepicker-hour").attr({"data-time-component":"hours",title:i.tooltips.pickHour}).attr("data-action","showHours"))),r.append(e("<td>").append(e("<a>").attr({href:"#",tabindex:"-1",title:i.tooltips.decrementHour}).addClass("btn").attr("data-action","decrementHours").append(e("<span>").addClass(i.icons.down))))),a("m")&&(a("h")&&(t.append(e("<td>").addClass("separator")),n.append(e("<td>").addClass("separator").html(":")),r.append(e("<td>").addClass("separator"))),t.append(e("<td>").append(e("<a>").attr({href:"#",tabindex:"-1",title:i.tooltips.incrementMinute}).addClass("btn").attr("data-action","incrementMinutes").append(e("<span>").addClass(i.icons.up)))),n.append(e("<td>").append(e("<span>").addClass("timepicker-minute").attr({"data-time-component":"minutes",title:i.tooltips.pickMinute}).attr("data-action","showMinutes"))),r.append(e("<td>").append(e("<a>").attr({href:"#",tabindex:"-1",title:i.tooltips.decrementMinute}).addClass("btn").attr("data-action","decrementMinutes").append(e("<span>").addClass(i.icons.down))))),a("s")&&(a("m")&&(t.append(e("<td>").addClass("separator")),n.append(e("<td>").addClass("separator").html(":")),r.append(e("<td>").addClass("separator"))),t.append(e("<td>").append(e("<a>").attr({href:"#",tabindex:"-1",title:i.tooltips.incrementSecond}).addClass("btn").attr("data-action","incrementSeconds").append(e("<span>").addClass(i.icons.up)))),n.append(e("<td>").append(e("<span>").addClass("timepicker-second").attr({"data-time-component":"seconds",title:i.tooltips.pickSecond}).attr("data-action","showSeconds"))),r.append(e("<td>").append(e("<a>").attr({href:"#",tabindex:"-1",title:i.tooltips.decrementSecond}).addClass("btn").attr("data-action","decrementSeconds").append(e("<span>").addClass(i.icons.down))))),O||(t.append(e("<td>").addClass("separator")),n.append(e("<td>").append(e("<button>").addClass("btn btn-primary").attr({"data-action":"togglePeriod",tabindex:"-1",title:i.tooltips.togglePeriod}))),r.append(e("<td>").addClass("separator"))),e("<div>").addClass("timepicker-picker").append(e("<table>").addClass("table-condensed").append([t,n,r])))];return a("h")&&c.push(o),a("m")&&c.push(s),a("s")&&c.push(l),c}()),d=e("<ul>").addClass("list-unstyled"),h=e("<li>").addClass("picker-switch"+(i.collapse?" accordion-toggle":"")).append((t=[],i.showTodayButton&&t.push(e("<td>").append(e("<a>").attr({"data-action":"today",title:i.tooltips.today}).append(e("<span>").addClass(i.icons.today)))),!i.sideBySide&&l()&&s()&&t.push(e("<td>").append(e("<a>").attr({"data-action":"togglePicker",title:i.tooltips.selectTime}).append(e("<span>").addClass(i.icons.time)))),i.showClear&&t.push(e("<td>").append(e("<a>").attr({"data-action":"clear",title:i.tooltips.clear}).append(e("<span>").addClass(i.icons.clear)))),i.showClose&&t.push(e("<td>").append(e("<a>").attr({"data-action":"close",title:i.tooltips.close}).append(e("<span>").addClass(i.icons.close)))),e("<table>").addClass("table-condensed").append(e("<tbody>").append(e("<tr>").append(t)))));return i.inline&&o.removeClass("dropdown-menu"),O&&o.addClass("usetwentyfour"),a("s")&&!O&&o.addClass("wider"),i.sideBySide&&l()&&s()?(o.addClass("timepicker-sbs"),"top"===i.toolbarPlacement&&o.append(h),o.append(e("<div>").addClass("row").append(c.addClass("col-md-6")).append(u.addClass("col-md-6"))),"bottom"===i.toolbarPlacement&&o.append(h),o):("top"===i.toolbarPlacement&&d.append(h),l()&&d.append(e("<li>").addClass(i.collapse&&s()?"collapse in":"").append(c)),"default"===i.toolbarPlacement&&d.append(h),s()&&d.append(e("<li>").addClass(i.collapse&&l()?"collapse":"").append(u)),"bottom"===i.toolbarPlacement&&d.append(h),o.append(d))}function u(){var t,r=(H||n).position(),o=(H||n).offset(),a=i.widgetPositioning.vertical,s=i.widgetPositioning.horizontal;if(i.widgetParent)t=i.widgetParent.append(B);else if(n.is("input"))t=n.after(B).parent();else{if(i.inline)return void(t=n.append(B));(t=n).children().first().after(B)}if("auto"===a&&(a=o.top+1.5*B.height()>=e(window).height()+e(window).scrollTop()&&B.height()+n.outerHeight()<o.top?"top":"bottom"),"auto"===s&&(s=t.width()<o.left+B.outerWidth()/2&&o.left+B.outerWidth()>e(window).width()?"right":"left"),"top"===a?B.addClass("top").removeClass("bottom"):B.addClass("bottom").removeClass("top"),"right"===s?B.addClass("pull-right"):B.removeClass("pull-right"),"static"===t.css("position")&&(t=t.parents().filter((function(){return"static"!==e(this).css("position")})).first()),0===t.length)throw new Error("datetimepicker component should be placed within a non-static positioned container");B.css({top:"top"===a?"auto":r.top+n.outerHeight(),bottom:"top"===a?t.outerHeight()-(t===n?0:r.top):"auto",left:"left"===s?t===n?0:r.left:"auto",right:"left"===s?"auto":t.outerWidth()-n.outerWidth()-(t===n?0:r.left)})}function d(e){"dp.change"===e.type&&(e.date&&e.date.isSame(e.oldDate)||!e.date&&!e.oldDate)||n.trigger(e)}function h(e){"y"===e&&(e="YYYY"),d({type:"dp.update",change:e,viewDate:P.clone()})}function f(e){B&&(e&&(N=Math.max(q,Math.min(3,N+e))),B.find(".datepicker > div").hide().filter(".datepicker-"+U[N].clsName).show())}function p(t,n){var r,o,a,s;if(t.isValid()&&!(i.disabledDates&&"d"===n&&(r=t,!0===i.disabledDates[r.format("YYYY-MM-DD")])||i.enabledDates&&"d"===n&&(o=t,!0!==i.enabledDates[o.format("YYYY-MM-DD")])||i.minDate&&t.isBefore(i.minDate,n)||i.maxDate&&t.isAfter(i.maxDate,n)||i.daysOfWeekDisabled&&"d"===n&&-1!==i.daysOfWeekDisabled.indexOf(t.day())||i.disabledHours&&("h"===n||"m"===n||"s"===n)&&(a=t,!0===i.disabledHours[a.format("H")])||i.enabledHours&&("h"===n||"m"===n||"s"===n)&&(s=t,!0!==i.enabledHours[s.format("H")]))){if(i.disabledTimeIntervals&&("h"===n||"m"===n||"s"===n)){var l=!1;if(e.each(i.disabledTimeIntervals,(function(){if(t.isBetween(this[0],this[1]))return!(l=!0)})),l)return}return 1}}function m(){var n,r,a,s=B.find(".datepicker-days"),c=s.find("th"),u=[],h=[];if(l()){for(c.eq(0).find("span").attr("title",i.tooltips.prevMonth),c.eq(1).attr("title",i.tooltips.selectMonth),c.eq(2).find("span").attr("title",i.tooltips.nextMonth),s.find(".disabled").removeClass("disabled"),c.eq(1).text(P.format(i.dayViewHeaderFormat)),p(P.clone().subtract(1,"M"),"M")||c.eq(0).addClass("disabled"),p(P.clone().add(1,"M"),"M")||c.eq(2).addClass("disabled"),n=P.clone().startOf("M").startOf("w").startOf("d"),a=0;a<42;a++)0===n.weekday()&&(r=e("<tr>"),i.calendarWeeks&&r.append('<td class="cw">'+n.week()+"</td>"),u.push(r)),h=["day"],n.isBefore(P,"M")&&h.push("old"),n.isAfter(P,"M")&&h.push("new"),n.isSame(A,"d")&&!z&&h.push("active"),p(n,"d")||h.push("disabled"),n.isSame(o(),"d")&&h.push("today"),0!==n.day()&&6!==n.day()||h.push("weekend"),d({type:"dp.classify",date:n,classNames:h}),r.append('<td data-action="selectDay" data-day="'+n.format("L")+'" class="'+h.join(" ")+'">'+n.date()+"</td>"),n.add(1,"d");var f,m,g;s.find("tbody").empty().append(u),m=(f=B.find(".datepicker-months")).find("th"),g=f.find("tbody").find("span"),m.eq(0).find("span").attr("title",i.tooltips.prevYear),m.eq(1).attr("title",i.tooltips.selectYear),m.eq(2).find("span").attr("title",i.tooltips.nextYear),f.find(".disabled").removeClass("disabled"),p(P.clone().subtract(1,"y"),"y")||m.eq(0).addClass("disabled"),m.eq(1).text(P.year()),p(P.clone().add(1,"y"),"y")||m.eq(2).addClass("disabled"),g.removeClass("active"),A.isSame(P,"y")&&!z&&g.eq(A.month()).addClass("active"),g.each((function(t){p(P.clone().month(t),"M")||e(this).addClass("disabled")})),function(){var e=B.find(".datepicker-years"),t=e.find("th"),n=P.clone().subtract(5,"y"),r=P.clone().add(6,"y"),o="";for(t.eq(0).find("span").attr("title",i.tooltips.prevDecade),t.eq(1).attr("title",i.tooltips.selectDecade),t.eq(2).find("span").attr("title",i.tooltips.nextDecade),e.find(".disabled").removeClass("disabled"),i.minDate&&i.minDate.isAfter(n,"y")&&t.eq(0).addClass("disabled"),t.eq(1).text(n.year()+"-"+r.year()),i.maxDate&&i.maxDate.isBefore(r,"y")&&t.eq(2).addClass("disabled");!n.isAfter(r,"y");)o+='<span data-action="selectYear" class="year'+(n.isSame(A,"y")&&!z?" active":"")+(p(n,"y")?"":" disabled")+'">'+n.year()+"</span>",n.add(1,"y");e.find("td").html(o)}(),function(){var e,n=B.find(".datepicker-decades"),r=n.find("th"),o=t({y:P.year()-P.year()%100-1}),a=o.clone().add(100,"y"),s=o.clone(),l=!1,c=!1,u="";for(r.eq(0).find("span").attr("title",i.tooltips.prevCentury),r.eq(2).find("span").attr("title",i.tooltips.nextCentury),n.find(".disabled").removeClass("disabled"),(o.isSame(t({y:1900}))||i.minDate&&i.minDate.isAfter(o,"y"))&&r.eq(0).addClass("disabled"),r.eq(1).text(o.year()+"-"+a.year()),(o.isSame(t({y:2e3}))||i.maxDate&&i.maxDate.isBefore(a,"y"))&&r.eq(2).addClass("disabled");!o.isAfter(a,"y");)e=o.year()+12,l=i.minDate&&i.minDate.isAfter(o,"y")&&i.minDate.year()<=e,c=i.maxDate&&i.maxDate.isAfter(o,"y")&&i.maxDate.year()<=e,u+='<span data-action="selectDecade" class="decade'+(A.isAfter(o)&&A.year()<=e?" active":"")+(p(o,"y")||l||c?"":" disabled")+'" data-selection="'+(o.year()+6)+'">'+(o.year()+1)+" - "+(o.year()+12)+"</span>",o.add(12,"y");u+="<span></span><span></span><span></span>",n.find("td").html(u),r.eq(1).text(s.year()+1+"-"+o.year())}()}}function g(){B&&(m(),function(){var t,n,r=B.find(".timepicker span[data-time-component]");O||(t=B.find(".timepicker [data-action=togglePeriod]"),n=A.clone().add(12<=A.hours()?-12:12,"h"),t.text(A.format("A")),p(n,"h")?t.removeClass("disabled"):t.addClass("disabled")),r.filter("[data-time-component=hours]").text(A.format(O?"HH":"hh")),r.filter("[data-time-component=minutes]").text(A.format("mm")),r.filter("[data-time-component=seconds]").text(A.format("ss")),function(){var t=B.find(".timepicker-hours table"),n=P.clone().startOf("d"),i=[],r=e("<tr>");for(11<P.hour()&&!O&&n.hour(12);n.isSame(P,"d")&&(O||P.hour()<12&&n.hour()<12||11<P.hour());)n.hour()%4==0&&(r=e("<tr>"),i.push(r)),r.append('<td data-action="selectHour" class="hour'+(p(n,"h")?"":" disabled")+'">'+n.format(O?"HH":"hh")+"</td>"),n.add(1,"h");t.empty().append(i)}(),function(){for(var t=B.find(".timepicker-minutes table"),n=P.clone().startOf("h"),r=[],o=e("<tr>"),a=1===i.stepping?5:i.stepping;P.isSame(n,"h");)n.minute()%(4*a)==0&&(o=e("<tr>"),r.push(o)),o.append('<td data-action="selectMinute" class="minute'+(p(n,"m")?"":" disabled")+'">'+n.format("mm")+"</td>"),n.add(a,"m");t.empty().append(r)}(),function(){for(var t=B.find(".timepicker-seconds table"),n=P.clone().startOf("m"),i=[],r=e("<tr>");P.isSame(n,"m");)n.second()%20==0&&(r=e("<tr>"),i.push(r)),r.append('<td data-action="selectSecond" class="second'+(p(n,"s")?"":" disabled")+'">'+n.format("ss")+"</td>"),n.add(5,"s");t.empty().append(i)}()}())}function v(e){var t=z?null:A;if(!e)return z=!0,j.val(""),n.data("date",""),d({type:"dp.change",date:!1,oldDate:t}),void g();if(e=e.clone().locale(i.locale),r()&&e.tz(i.timeZone),1!==i.stepping)for(e.minutes(Math.round(e.minutes()/i.stepping)*i.stepping).seconds(0);i.minDate&&e.isBefore(i.minDate);)e.add(i.stepping,"minutes");p(e)?(P=(A=e).clone(),j.val(A.format(I)),n.data("date",A.format(I)),z=!1,g(),d({type:"dp.change",date:A.clone(),oldDate:t})):(i.keepInvalid?d({type:"dp.change",date:e,oldDate:t}):j.val(z?"":A.format(I)),d({type:"dp.error",date:e,oldDate:t}))}function b(){var t=!1;return B?(B.find(".collapse").each((function(){var n=e(this).data("collapse");return!n||!n.transitioning||!(t=!0)})),t||(H&&H.hasClass("btn")&&H.toggleClass("active"),B.hide(),e(window).off("resize",u),B.off("click","[data-action]"),B.off("mousedown",!1),B.remove(),B=!1,d({type:"dp.hide",date:A.clone()}),j.blur(),P=A.clone()),L):L}function y(){v(null)}function w(e){return void 0===i.parseInputDate?(!t.isMoment(e)||e instanceof Date)&&(e=o(e)):e=i.parseInputDate(e),e}function x(t){return e(t.currentTarget).is(".disabled")||K[e(t.currentTarget).data("action")].apply(L,arguments),!1}function C(){var t;return j.prop("disabled")||!i.ignoreReadonly&&j.prop("readonly")||B||(void 0!==j.val()&&0!==j.val().trim().length?v(w(j.val().trim())):z&&i.useCurrent&&(i.inline||j.is("input")&&0===j.val().trim().length)&&(t=o(),"string"==typeof i.useCurrent&&(t={year:function(e){return e.month(0).date(1).hours(0).seconds(0).minutes(0)},month:function(e){return e.date(1).hours(0).seconds(0).minutes(0)},day:function(e){return e.hours(0).seconds(0).minutes(0)},hour:function(e){return e.seconds(0).minutes(0)},minute:function(e){return e.seconds(0)}}[i.useCurrent](t)),v(t)),B=c(),function(){var t=e("<tr>"),n=P.clone().startOf("w").startOf("d");for(!0===i.calendarWeeks&&t.append(e("<th>").addClass("cw").text("#"));n.isBefore(P.clone().endOf("w"));)t.append(e("<th>").addClass("dow").text(n.format("dd"))),n.add(1,"d");B.find(".datepicker-days thead").append(t)}(),function(){for(var t=[],n=P.clone().startOf("y").startOf("d");n.isSame(P,"y");)t.push(e("<span>").attr("data-action","selectMonth").addClass("month").text(n.format("MMM"))),n.add(1,"M");B.find(".datepicker-months td").empty().append(t)}(),B.find(".timepicker-hours").hide(),B.find(".timepicker-minutes").hide(),B.find(".timepicker-seconds").hide(),g(),f(),e(window).on("resize",u),B.on("click","[data-action]",x),B.on("mousedown",!1),H&&H.hasClass("btn")&&H.toggleClass("active"),u(),B.show(),i.focusOnShow&&!j.is(":focus")&&j.focus(),d({type:"dp.show"})),L}function _(){return(B?b:C)()}function k(e){var t,n,r,o,a=null,s=[],l={},c=e.which;for(t in Q[c]="p",Q)Q.hasOwnProperty(t)&&"p"===Q[t]&&(s.push(t),parseInt(t,10)!==c&&(l[t]=!0));for(t in i.keyBinds)if(i.keyBinds.hasOwnProperty(t)&&"function"==typeof i.keyBinds[t]&&(r=t.split(" ")).length===s.length&&Z[c]===r[r.length-1]){for(o=!0,n=r.length-2;0<=n;n--)if(!(Z[r[n]]in l)){o=!1;break}if(o){a=i.keyBinds[t];break}}a&&(a.call(L,B),e.stopPropagation(),e.preventDefault())}function E(e){Q[e.which]="r",e.stopPropagation(),e.preventDefault()}function S(t){var n=e(t.target).val().trim();return v(n?w(n):null),t.stopImmediatePropagation(),!1}function T(t){var n={};return e.each(t,(function(){var e=w(this);e.isValid()&&(n[e.format("YYYY-MM-DD")]=!0)})),!!Object.keys(n).length&&n}function D(t){var n={};return e.each(t,(function(){n[this]=!0})),!!Object.keys(n).length&&n}function $(){var e=i.format||"L LT";I=e.replace(/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,(function(e){return(A.localeData().longDateFormat(e)||e).replace(/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,(function(e){return A.localeData().longDateFormat(e)||e}))})),(M=i.extraFormats?i.extraFormats.slice():[]).indexOf(e)<0&&M.indexOf(I)<0&&M.push(I),O=I.toLowerCase().indexOf("a")<1&&I.replace(/\[.*?\]/g,"").indexOf("h")<1,a("y")&&(q=2),a("M")&&(q=1),a("d")&&(q=0),N=Math.max(q,N),z||v(A)}var A,P,j,O,I,M,N,F,R,L={},z=!0,H=!1,B=!1,q=0,U=[{clsName:"days",navFnc:"M",navStep:1},{clsName:"months",navFnc:"y",navStep:1},{clsName:"years",navFnc:"y",navStep:10},{clsName:"decades",navFnc:"y",navStep:100}],W=["days","months","years","decades"],V=["top","bottom","auto"],Y=["left","right","auto"],G=["default","top","bottom"],Z={up:38,38:"up",down:40,40:"down",left:37,37:"left",right:39,39:"right",tab:9,9:"tab",escape:27,27:"escape",enter:13,13:"enter",pageUp:33,33:"pageUp",pageDown:34,34:"pageDown",shift:16,16:"shift",control:17,17:"control",space:32,32:"space",t:84,84:"t",delete:46,46:"delete"},Q={},K={next:function(){var e=U[N].navFnc;P.add(U[N].navStep,e),m(),h(e)},previous:function(){var e=U[N].navFnc;P.subtract(U[N].navStep,e),m(),h(e)},pickerSwitch:function(){f(1)},selectMonth:function(t){var n=e(t.target).closest("tbody").find("span").index(e(t.target));P.month(n),N===q?(v(A.clone().year(P.year()).month(P.month())),i.inline||b()):(f(-1),m()),h("M")},selectYear:function(t){var n=parseInt(e(t.target).text(),10)||0;P.year(n),N===q?(v(A.clone().year(P.year())),i.inline||b()):(f(-1),m()),h("YYYY")},selectDecade:function(t){var n=parseInt(e(t.target).data("selection"),10)||0;P.year(n),N===q?(v(A.clone().year(P.year())),i.inline||b()):(f(-1),m()),h("YYYY")},selectDay:function(t){var n=P.clone();e(t.target).is(".old")&&n.subtract(1,"M"),e(t.target).is(".new")&&n.add(1,"M"),v(n.date(parseInt(e(t.target).text(),10))),s()||i.keepOpen||i.inline||b()},incrementHours:function(){var e=A.clone().add(1,"h");p(e,"h")&&v(e)},incrementMinutes:function(){var e=A.clone().add(i.stepping,"m");p(e,"m")&&v(e)},incrementSeconds:function(){var e=A.clone().add(1,"s");p(e,"s")&&v(e)},decrementHours:function(){var e=A.clone().subtract(1,"h");p(e,"h")&&v(e)},decrementMinutes:function(){var e=A.clone().subtract(i.stepping,"m");p(e,"m")&&v(e)},decrementSeconds:function(){var e=A.clone().subtract(1,"s");p(e,"s")&&v(e)},togglePeriod:function(){v(A.clone().add(12<=A.hours()?-12:12,"h"))},togglePicker:function(t){var n,r=e(t.target),o=r.closest("ul"),a=o.find(".in"),s=o.find(".collapse:not(.in)");if(a&&a.length){if((n=a.data("collapse"))&&n.transitioning)return;a.collapse?(a.collapse("hide"),s.collapse("show")):(a.removeClass("in"),s.addClass("in")),r.is("span")?r.toggleClass(i.icons.time+" "+i.icons.date):r.find("span").toggleClass(i.icons.time+" "+i.icons.date)}},showPicker:function(){B.find(".timepicker > div:not(.timepicker-picker)").hide(),B.find(".timepicker .timepicker-picker").show()},showHours:function(){B.find(".timepicker .timepicker-picker").hide(),B.find(".timepicker .timepicker-hours").show()},showMinutes:function(){B.find(".timepicker .timepicker-picker").hide(),B.find(".timepicker .timepicker-minutes").show()},showSeconds:function(){B.find(".timepicker .timepicker-picker").hide(),B.find(".timepicker .timepicker-seconds").show()},selectHour:function(t){var n=parseInt(e(t.target).text(),10);O||(12<=A.hours()?12!==n&&(n+=12):12===n&&(n=0)),v(A.clone().hours(n)),K.showPicker.call(L)},selectMinute:function(t){v(A.clone().minutes(parseInt(e(t.target).text(),10))),K.showPicker.call(L)},selectSecond:function(t){v(A.clone().seconds(parseInt(e(t.target).text(),10))),K.showPicker.call(L)},clear:y,today:function(){var e=o();p(e,"d")&&v(e)},close:b};if(L.destroy=function(){b(),j.off({change:S,blur:blur,keydown:k,keyup:E,focus:i.allowInputToggle?b:""}),n.is("input")?j.off({focus:C}):H&&(H.off("click",_),H.off("mousedown",!1)),n.removeData("DateTimePicker"),n.removeData("date")},L.toggle=_,L.show=C,L.hide=b,L.disable=function(){return b(),H&&H.hasClass("btn")&&H.addClass("disabled"),j.prop("disabled",!0),L},L.enable=function(){return H&&H.hasClass("btn")&&H.removeClass("disabled"),j.prop("disabled",!1),L},L.ignoreReadonly=function(e){if(0===arguments.length)return i.ignoreReadonly;if("boolean"!=typeof e)throw new TypeError("ignoreReadonly () expects a boolean parameter");return i.ignoreReadonly=e,L},L.options=function(t){if(0===arguments.length)return e.extend(!0,{},i);if(!(t instanceof Object))throw new TypeError("options() options parameter should be an object");return e.extend(!0,i,t),e.each(i,(function(e,t){if(void 0===L[e])throw new TypeError("option "+e+" is not recognized!");L[e](t)})),L},L.date=function(e){if(0===arguments.length)return z?null:A.clone();if(!(null===e||"string"==typeof e||t.isMoment(e)||e instanceof Date))throw new TypeError("date() parameter must be one of [null, string, moment or Date]");return v(null===e?null:w(e)),L},L.format=function(e){if(0===arguments.length)return i.format;if("string"!=typeof e&&("boolean"!=typeof e||!1!==e))throw new TypeError("format() expects a string or boolean:false parameter "+e);return i.format=e,I&&$(),L},L.timeZone=function(e){if(0===arguments.length)return i.timeZone;if("string"!=typeof e)throw new TypeError("newZone() expects a string parameter");return i.timeZone=e,L},L.dayViewHeaderFormat=function(e){if(0===arguments.length)return i.dayViewHeaderFormat;if("string"!=typeof e)throw new TypeError("dayViewHeaderFormat() expects a string parameter");return i.dayViewHeaderFormat=e,L},L.extraFormats=function(e){if(0===arguments.length)return i.extraFormats;if(!1!==e&&!(e instanceof Array))throw new TypeError("extraFormats() expects an array or false parameter");return i.extraFormats=e,M&&$(),L},L.disabledDates=function(t){if(0===arguments.length)return i.disabledDates?e.extend({},i.disabledDates):i.disabledDates;if(!t)return i.disabledDates=!1,g(),L;if(!(t instanceof Array))throw new TypeError("disabledDates() expects an array parameter");return i.disabledDates=T(t),i.enabledDates=!1,g(),L},L.enabledDates=function(t){if(0===arguments.length)return i.enabledDates?e.extend({},i.enabledDates):i.enabledDates;if(!t)return i.enabledDates=!1,g(),L;if(!(t instanceof Array))throw new TypeError("enabledDates() expects an array parameter");return i.enabledDates=T(t),i.disabledDates=!1,g(),L},L.daysOfWeekDisabled=function(e){if(0===arguments.length)return i.daysOfWeekDisabled.splice(0);if("boolean"==typeof e&&!e)return i.daysOfWeekDisabled=!1,g(),L;if(!(e instanceof Array))throw new TypeError("daysOfWeekDisabled() expects an array parameter");if(i.daysOfWeekDisabled=e.reduce((function(e,t){return 6<(t=parseInt(t,10))||t<0||isNaN(t)||-1===e.indexOf(t)&&e.push(t),e}),[]).sort(),i.useCurrent&&!i.keepInvalid){for(var t=0;!p(A,"d");){if(A.add(1,"d"),31===t)throw"Tried 31 times to find a valid date";t++}v(A)}return g(),L},L.maxDate=function(e){if(0===arguments.length)return i.maxDate?i.maxDate.clone():i.maxDate;if("boolean"==typeof e&&!1===e)return i.maxDate=!1,g(),L;"string"==typeof e&&("now"!==e&&"moment"!==e||(e=o()));var t=w(e);if(!t.isValid())throw new TypeError("maxDate() Could not parse date parameter: "+e);if(i.minDate&&t.isBefore(i.minDate))throw new TypeError("maxDate() date parameter is before options.minDate: "+t.format(I));return i.maxDate=t,i.useCurrent&&!i.keepInvalid&&A.isAfter(e)&&v(i.maxDate),P.isAfter(t)&&(P=t.clone().subtract(i.stepping,"m")),g(),L},L.minDate=function(e){if(0===arguments.length)return i.minDate?i.minDate.clone():i.minDate;if("boolean"==typeof e&&!1===e)return i.minDate=!1,g(),L;"string"==typeof e&&("now"!==e&&"moment"!==e||(e=o()));var t=w(e);if(!t.isValid())throw new TypeError("minDate() Could not parse date parameter: "+e);if(i.maxDate&&t.isAfter(i.maxDate))throw new TypeError("minDate() date parameter is after options.maxDate: "+t.format(I));return i.minDate=t,i.useCurrent&&!i.keepInvalid&&A.isBefore(e)&&v(i.minDate),P.isBefore(t)&&(P=t.clone().add(i.stepping,"m")),g(),L},L.defaultDate=function(e){if(0===arguments.length)return i.defaultDate?i.defaultDate.clone():i.defaultDate;if(!e)return i.defaultDate=!1,L;"string"==typeof e&&(e="now"===e||"moment"===e?o():o(e));var t=w(e);if(!t.isValid())throw new TypeError("defaultDate() Could not parse date parameter: "+e);if(!p(t))throw new TypeError("defaultDate() date passed is invalid according to component setup validations");return i.defaultDate=t,(i.defaultDate&&i.inline||""===j.val().trim())&&v(i.defaultDate),L},L.locale=function(e){if(0===arguments.length)return i.locale;if(!t.localeData(e))throw new TypeError("locale() locale "+e+" is not loaded from moment locales!");return i.locale=e,A.locale(i.locale),P.locale(i.locale),I&&$(),B&&(b(),C()),L},L.stepping=function(e){return 0===arguments.length?i.stepping:(e=parseInt(e,10),(isNaN(e)||e<1)&&(e=1),i.stepping=e,L)},L.useCurrent=function(e){var t=["year","month","day","hour","minute"];if(0===arguments.length)return i.useCurrent;if("boolean"!=typeof e&&"string"!=typeof e)throw new TypeError("useCurrent() expects a boolean or string parameter");if("string"==typeof e&&-1===t.indexOf(e.toLowerCase()))throw new TypeError("useCurrent() expects a string parameter of "+t.join(", "));return i.useCurrent=e,L},L.collapse=function(e){if(0===arguments.length)return i.collapse;if("boolean"!=typeof e)throw new TypeError("collapse() expects a boolean parameter");return i.collapse===e||(i.collapse=e,B&&(b(),C())),L},L.icons=function(t){if(0===arguments.length)return e.extend({},i.icons);if(!(t instanceof Object))throw new TypeError("icons() expects parameter to be an Object");return e.extend(i.icons,t),B&&(b(),C()),L},L.tooltips=function(t){if(0===arguments.length)return e.extend({},i.tooltips);if(!(t instanceof Object))throw new TypeError("tooltips() expects parameter to be an Object");return e.extend(i.tooltips,t),B&&(b(),C()),L},L.useStrict=function(e){if(0===arguments.length)return i.useStrict;if("boolean"!=typeof e)throw new TypeError("useStrict() expects a boolean parameter");return i.useStrict=e,L},L.sideBySide=function(e){if(0===arguments.length)return i.sideBySide;if("boolean"!=typeof e)throw new TypeError("sideBySide() expects a boolean parameter");return i.sideBySide=e,B&&(b(),C()),L},L.viewMode=function(e){if(0===arguments.length)return i.viewMode;if("string"!=typeof e)throw new TypeError("viewMode() expects a string parameter");if(-1===W.indexOf(e))throw new TypeError("viewMode() parameter must be one of ("+W.join(", ")+") value");return i.viewMode=e,N=Math.max(W.indexOf(e),q),f(),L},L.toolbarPlacement=function(e){if(0===arguments.length)return i.toolbarPlacement;if("string"!=typeof e)throw new TypeError("toolbarPlacement() expects a string parameter");if(-1===G.indexOf(e))throw new TypeError("toolbarPlacement() parameter must be one of ("+G.join(", ")+") value");return i.toolbarPlacement=e,B&&(b(),C()),L},L.widgetPositioning=function(t){if(0===arguments.length)return e.extend({},i.widgetPositioning);if("[object Object]"!=={}.toString.call(t))throw new TypeError("widgetPositioning() expects an object variable");if(t.horizontal){if("string"!=typeof t.horizontal)throw new TypeError("widgetPositioning() horizontal variable must be a string");if(t.horizontal=t.horizontal.toLowerCase(),-1===Y.indexOf(t.horizontal))throw new TypeError("widgetPositioning() expects horizontal parameter to be one of ("+Y.join(", ")+")");i.widgetPositioning.horizontal=t.horizontal}if(t.vertical){if("string"!=typeof t.vertical)throw new TypeError("widgetPositioning() vertical variable must be a string");if(t.vertical=t.vertical.toLowerCase(),-1===V.indexOf(t.vertical))throw new TypeError("widgetPositioning() expects vertical parameter to be one of ("+V.join(", ")+")");i.widgetPositioning.vertical=t.vertical}return g(),L},L.calendarWeeks=function(e){if(0===arguments.length)return i.calendarWeeks;if("boolean"!=typeof e)throw new TypeError("calendarWeeks() expects parameter to be a boolean value");return i.calendarWeeks=e,g(),L},L.showTodayButton=function(e){if(0===arguments.length)return i.showTodayButton;if("boolean"!=typeof e)throw new TypeError("showTodayButton() expects a boolean parameter");return i.showTodayButton=e,B&&(b(),C()),L},L.showClear=function(e){if(0===arguments.length)return i.showClear;if("boolean"!=typeof e)throw new TypeError("showClear() expects a boolean parameter");return i.showClear=e,B&&(b(),C()),L},L.widgetParent=function(t){if(0===arguments.length)return i.widgetParent;if("string"==typeof t&&(t=e(t)),null!==t&&"string"!=typeof t&&!(t instanceof e))throw new TypeError("widgetParent() expects a string or a jQuery object parameter");return i.widgetParent=t,B&&(b(),C()),L},L.keepOpen=function(e){if(0===arguments.length)return i.keepOpen;if("boolean"!=typeof e)throw new TypeError("keepOpen() expects a boolean parameter");return i.keepOpen=e,L},L.focusOnShow=function(e){if(0===arguments.length)return i.focusOnShow;if("boolean"!=typeof e)throw new TypeError("focusOnShow() expects a boolean parameter");return i.focusOnShow=e,L},L.inline=function(e){if(0===arguments.length)return i.inline;if("boolean"!=typeof e)throw new TypeError("inline() expects a boolean parameter");return i.inline=e,L},L.clear=function(){return y(),L},L.keyBinds=function(e){return 0===arguments.length?i.keyBinds:(i.keyBinds=e,L)},L.getMoment=function(e){return o(e)},L.debug=function(e){if("boolean"!=typeof e)throw new TypeError("debug() expects a boolean parameter");return i.debug=e,L},L.allowInputToggle=function(e){if(0===arguments.length)return i.allowInputToggle;if("boolean"!=typeof e)throw new TypeError("allowInputToggle() expects a boolean parameter");return i.allowInputToggle=e,L},L.showClose=function(e){if(0===arguments.length)return i.showClose;if("boolean"!=typeof e)throw new TypeError("showClose() expects a boolean parameter");return i.showClose=e,L},L.keepInvalid=function(e){if(0===arguments.length)return i.keepInvalid;if("boolean"!=typeof e)throw new TypeError("keepInvalid() expects a boolean parameter");return i.keepInvalid=e,L},L.datepickerInput=function(e){if(0===arguments.length)return i.datepickerInput;if("string"!=typeof e)throw new TypeError("datepickerInput() expects a string parameter");return i.datepickerInput=e,L},L.parseInputDate=function(e){if(0===arguments.length)return i.parseInputDate;if("function"!=typeof e)throw new TypeError("parseInputDate() sholud be as function");return i.parseInputDate=e,L},L.disabledTimeIntervals=function(t){if(0===arguments.length)return i.disabledTimeIntervals?e.extend({},i.disabledTimeIntervals):i.disabledTimeIntervals;if(!t)return i.disabledTimeIntervals=!1,g(),L;if(!(t instanceof Array))throw new TypeError("disabledTimeIntervals() expects an array parameter");return i.disabledTimeIntervals=t,g(),L},L.disabledHours=function(t){if(0===arguments.length)return i.disabledHours?e.extend({},i.disabledHours):i.disabledHours;if(!t)return i.disabledHours=!1,g(),L;if(!(t instanceof Array))throw new TypeError("disabledHours() expects an array parameter");if(i.disabledHours=D(t),i.enabledHours=!1,i.useCurrent&&!i.keepInvalid){for(var n=0;!p(A,"h");){if(A.add(1,"h"),24===n)throw"Tried 24 times to find a valid date";n++}v(A)}return g(),L},L.enabledHours=function(t){if(0===arguments.length)return i.enabledHours?e.extend({},i.enabledHours):i.enabledHours;if(!t)return i.enabledHours=!1,g(),L;if(!(t instanceof Array))throw new TypeError("enabledHours() expects an array parameter");if(i.enabledHours=D(t),i.disabledHours=!1,i.useCurrent&&!i.keepInvalid){for(var n=0;!p(A,"h");){if(A.add(1,"h"),24===n)throw"Tried 24 times to find a valid date";n++}v(A)}return g(),L},L.viewDate=function(e){if(0===arguments.length)return P.clone();if(!e)return P=A.clone(),L;if(!("string"==typeof e||t.isMoment(e)||e instanceof Date))throw new TypeError("viewDate() parameter must be one of [string, moment or Date]");return P=w(e),h(),L},n.is("input"))j=n;else if(0===(j=n.find(i.datepickerInput)).length)j=n.find("input");else if(!j.is("input"))throw new Error('CSS class "'+i.datepickerInput+'" cannot be applied to non input element');if(n.hasClass("input-group")&&(H=0===n.find(".datepickerbutton").length?n.find(".input-group-addon"):n.find(".datepickerbutton")),!i.inline&&!j.is("input"))throw new Error("Could not initialize DateTimePicker without an input element");return A=o(),P=A.clone(),e.extend(!0,i,(R={},(F=n.is("input")||i.inline?n.data():n.find("input").data()).dateOptions&&F.dateOptions instanceof Object&&(R=e.extend(!0,R,F.dateOptions)),e.each(i,(function(e){var t="date"+e.charAt(0).toUpperCase()+e.slice(1);void 0!==F[t]&&(R[e]=F[t])})),R)),L.options(i),$(),j.on({change:S,blur:i.debug?"":b,keydown:k,keyup:E,focus:i.allowInputToggle?C:""}),n.is("input")?j.on({focus:C}):H&&(H.on("click",_),H.on("mousedown",!1)),j.prop("disabled")&&L.disable(),j.is("input")&&0!==j.val().trim().length?v(w(j.val().trim())):i.defaultDate&&void 0===j.attr("placeholder")&&v(i.defaultDate),i.inline&&C(),L}return e.fn.datetimepicker=function(t){t=t||{};var i,r=Array.prototype.slice.call(arguments,1),o=!0;if("object"==typeof t)return this.each((function(){var i,r=e(this);r.data("DateTimePicker")||(i=e.extend(!0,{},e.fn.datetimepicker.defaults,t),r.data("DateTimePicker",n(r,i)))}));if("string"==typeof t)return this.each((function(){var n=e(this).data("DateTimePicker");if(!n)throw new Error('bootstrap-datetimepicker("'+t+'") method was called on an element that is not using DateTimePicker');i=n[t].apply(n,r),o=i===n})),o||-1<e.inArray(t,["destroy","hide","show","toggle"])?this:i;throw new TypeError("Invalid arguments for DateTimePicker: "+t)},e.fn.datetimepicker.defaults={timeZone:"",format:!1,dayViewHeaderFormat:"MMMM YYYY",extraFormats:!1,stepping:1,minDate:!1,maxDate:!1,useCurrent:!0,collapse:!0,locale:t.locale(),defaultDate:!1,disabledDates:!1,enabledDates:!1,icons:{time:"glyphicon glyphicon-time",date:"glyphicon glyphicon-calendar",up:"glyphicon glyphicon-chevron-up",down:"glyphicon glyphicon-chevron-down",previous:"glyphicon glyphicon-chevron-left",next:"glyphicon glyphicon-chevron-right",today:"glyphicon glyphicon-screenshot",clear:"glyphicon glyphicon-trash",close:"glyphicon glyphicon-remove"},tooltips:{today:"Go to today",clear:"Clear selection",close:"Close the picker",selectMonth:"Select Month",prevMonth:"Previous Month",nextMonth:"Next Month",selectYear:"Select Year",prevYear:"Previous Year",nextYear:"Next Year",selectDecade:"Select Decade",prevDecade:"Previous Decade",nextDecade:"Next Decade",prevCentury:"Previous Century",nextCentury:"Next Century",pickHour:"Pick Hour",incrementHour:"Increment Hour",decrementHour:"Decrement Hour",pickMinute:"Pick Minute",incrementMinute:"Increment Minute",decrementMinute:"Decrement Minute",pickSecond:"Pick Second",incrementSecond:"Increment Second",decrementSecond:"Decrement Second",togglePeriod:"Toggle Period",selectTime:"Select Time"},useStrict:!1,sideBySide:!1,daysOfWeekDisabled:!1,calendarWeeks:!1,viewMode:"days",toolbarPlacement:"default",showTodayButton:!1,showClear:!1,showClose:!1,widgetPositioning:{horizontal:"auto",vertical:"auto"},widgetParent:null,ignoreReadonly:!1,keepOpen:!1,focusOnShow:!0,inline:!1,keepInvalid:!1,datepickerInput:".datepickerinput",keyBinds:{up:function(e){if(e){var t=this.date()||this.getMoment();e.find(".datepicker").is(":visible")?this.date(t.clone().subtract(7,"d")):this.date(t.clone().add(this.stepping(),"m"))}},down:function(e){if(e){var t=this.date()||this.getMoment();e.find(".datepicker").is(":visible")?this.date(t.clone().add(7,"d")):this.date(t.clone().subtract(this.stepping(),"m"))}else this.show()},"control up":function(e){if(e){var t=this.date()||this.getMoment();e.find(".datepicker").is(":visible")?this.date(t.clone().subtract(1,"y")):this.date(t.clone().add(1,"h"))}},"control down":function(e){if(e){var t=this.date()||this.getMoment();e.find(".datepicker").is(":visible")?this.date(t.clone().add(1,"y")):this.date(t.clone().subtract(1,"h"))}},left:function(e){if(e){var t=this.date()||this.getMoment();e.find(".datepicker").is(":visible")&&this.date(t.clone().subtract(1,"d"))}},right:function(e){if(e){var t=this.date()||this.getMoment();e.find(".datepicker").is(":visible")&&this.date(t.clone().add(1,"d"))}},pageUp:function(e){if(e){var t=this.date()||this.getMoment();e.find(".datepicker").is(":visible")&&this.date(t.clone().subtract(1,"M"))}},pageDown:function(e){if(e){var t=this.date()||this.getMoment();e.find(".datepicker").is(":visible")&&this.date(t.clone().add(1,"M"))}},enter:function(){this.hide()},escape:function(){this.hide()},"control space":function(e){e&&e.find(".timepicker").is(":visible")&&e.find('.btn[data-action="togglePeriod"]').click()},t:function(){this.date(this.getMoment())},delete:function(){this.clear()}},debug:!1,allowInputToggle:!1,disabledTimeIntervals:!1,disabledHours:!1,enabledHours:!1,viewDate:!1},e.fn.datetimepicker})),define("locales/datetimepicker_locale",["pgui.localizer","moment"],(function(e,t){e.load().done((function(){var n={months:e.getString("CalendarMonths").split("_"),monthsShort:e.getString("CalendarMonthsShort").split("_"),weekdays:e.getString("CalendarWeekdays").split("_"),weekdaysShort:e.getString("CalendarWeekdaysShort").split("_"),weekdaysMin:e.getString("CalendarWeekdaysMin").split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:e.getFirstDayOfWeek(),doy:4}};t.locale("php_gen",n)}))})),define("pgui.editors/datetime",["pgui.editors/plain","datepicker","locales/datetimepicker_locale","moment"],(function(e,t,n,i){return e.extend({init:function(e,t){var n,i,r,o;this._super(e,t),(n=e,i=n.data("picker-format"),r=n.data("vertical")||"auto",o=n.closest(".js-datetime-editor-wrap"),0==o.length&&(o=n),o.datetimepicker({format:i,useCurrent:!1,showClear:!0,showClose:!0,showTodayButton:!0,widgetPositioning:{vertical:r},allowInputToggle:!1,locale:"php_gen",icons:{time:"icon-time",date:"icon-calendar",up:"icon-chevron-up",down:"icon-chevron-down",previous:"icon-chevron-left",next:"icon-chevron-right",today:"icon-today",clear:"icon-remove",close:"icon-ok"}}),o).on("dp.change",_.bind(this.doChanged,this)).on("dp.hide",(function(){e.trigger("keyup")}))},_enableCalendarButton:function(e){var t=this._getCalendarButton();0!==t.length&&(e?t.removeAttr("disabled"):t.attr("disabled",!0))},_getCalendarButton:function(){return this.rootElement.find(".js-datetime-editor-button")},setEnabled:function(e){return this._super(e),this._enableCalendarButton(e),this},setReadonly:function(e){return this._super(e),this._enableCalendarButton(!e),this},getValueEx:function(){var e=this.rootElement.data("picker-format");return i(this._super(),e).format("YYYY-MM-DD HH:mm:ss")},setValueEx:function(e){var t=this.rootElement.data("picker-format");this._super(i(e,"YYYY-MM-DD HH:mm:ss").format(t))}})})),
/**
 * Trumbowyg v2.18.0 - A lightweight WYSIWYG editor
 * Trumbowyg core file
 * ------------------------
 * @link http://alex-d.github.io/Trumbowyg
 * @license MIT
 * @author Alexandre Demode (Alex-D)
 *         Twitter : @AlexandreDemode
 *         Website : alex-d.fr
 */
jQuery.trumbowyg={langs:{en:{viewHTML:"View HTML",undo:"Undo",redo:"Redo",formatting:"Formatting",p:"Paragraph",blockquote:"Quote",code:"Code",header:"Header",bold:"Bold",italic:"Italic",strikethrough:"Strikethrough",underline:"Underline",strong:"Strong",em:"Emphasis",del:"Deleted",superscript:"Superscript",subscript:"Subscript",unorderedList:"Unordered list",orderedList:"Ordered list",insertImage:"Insert Image",link:"Link",createLink:"Insert link",unlink:"Remove link",justifyLeft:"Align Left",justifyCenter:"Align Center",justifyRight:"Align Right",justifyFull:"Align Justify",horizontalRule:"Insert horizontal rule",removeformat:"Remove format",fullscreen:"Fullscreen",close:"Close",submit:"Confirm",reset:"Cancel",required:"Required",description:"Description",title:"Title",text:"Text",target:"Target",width:"Width"}},plugins:{},svgPath:null,hideButtonTexts:null},Object.defineProperty(jQuery.trumbowyg,"defaultOptions",{value:{lang:"en",fixedBtnPane:!1,fixedFullWidth:!1,autogrow:!1,autogrowOnEnter:!1,imageWidthModalEdit:!1,prefix:"trumbowyg-",semantic:!0,semanticKeepAttributes:!1,resetCss:!1,removeformatPasted:!1,tabToIndent:!1,tagsToRemove:[],tagsToKeep:["hr","img","embed","iframe","input"],btns:[["viewHTML"],["undo","redo"],["formatting"],["strong","em","del"],["superscript","subscript"],["link"],["insertImage"],["justifyLeft","justifyCenter","justifyRight","justifyFull"],["unorderedList","orderedList"],["horizontalRule"],["removeformat"],["fullscreen"]],btnsDef:{},changeActiveDropdownIcon:!1,inlineElementsSelector:"a,abbr,acronym,b,caption,cite,code,col,dfn,dir,dt,dd,em,font,hr,i,kbd,li,q,span,strikeout,strong,sub,sup,u",pasteHandlers:[],plugins:{},urlProtocol:!1,minimalLinks:!1},writable:!1,enumerable:!0,configurable:!1}),function(e,t,n,i){"use strict";var r="tbwconfirm",o="tbwcancel";i.fn.trumbowyg=function(e,t){var n="trumbowyg";if(e===Object(e)||!e)return this.each((function(){i(this).data(n)||i(this).data(n,new a(this,e))}));if(1===this.length)try{var r=i(this).data(n);switch(e){case"execCmd":return r.execCmd(t.cmd,t.param,t.forceCss);case"openModal":return r.openModal(t.title,t.content);case"closeModal":return r.closeModal();case"openModalInsert":return r.openModalInsert(t.title,t.fields,t.callback);case"saveRange":return r.saveRange();case"getRange":return r.range;case"getRangeText":return r.getRangeText();case"restoreRange":return r.restoreRange();case"enable":return r.setDisabled(!1);case"disable":return r.setDisabled(!0);case"toggle":return r.toggle();case"destroy":return r.destroy();case"empty":return r.empty();case"html":return r.html(t)}}catch(e){}return!1};var a=function(r,o){var a=this,s="trumbowyg-icons",l=i.trumbowyg;a.doc=r.ownerDocument||n,a.$ta=i(r),a.$c=i(r),null!=(o=o||{}).lang||null!=l.langs[o.lang]?a.lang=i.extend(!0,{},l.langs.en,l.langs[o.lang]):a.lang=l.langs.en,a.hideButtonTexts=null!=l.hideButtonTexts?l.hideButtonTexts:o.hideButtonTexts;var c=null!=l.svgPath?l.svgPath:o.svgPath;if(a.hasSvg=!1!==c,a.svgPath=a.doc.querySelector("base")?t.location.href.split("#")[0]:"",0===i("#"+s,a.doc).length&&!1!==c){if(null==c){for(var u=n.getElementsByTagName("script"),d=0;d<u.length;d+=1){var h=u[d].src,f=h.match("trumbowyg(.min)?.js");null!=f&&(c=h.substring(0,h.indexOf(f[0]))+"ui/icons.svg")}null==c&&console.warn("You must define svgPath: https://goo.gl/CfTY9U")}var p=a.doc.createElement("div");p.id=s,a.doc.body.insertBefore(p,a.doc.body.childNodes[0]),i.ajax({async:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",dataType:"xml",crossDomain:!0,url:c,data:null,beforeSend:null,complete:null,success:function(e){p.innerHTML=(new XMLSerializer).serializeToString(e.documentElement)}})}var m=a.lang.header,g=function(){return(t.chrome||t.Intl&&Intl.v8BreakIterator)&&"CSS"in t};a.btnsDef={viewHTML:{fn:"toggle",class:"trumbowyg-not-disable"},undo:{isSupported:g,key:"Z"},redo:{isSupported:g,key:"Y"},p:{fn:"formatBlock"},blockquote:{fn:"formatBlock"},h1:{fn:"formatBlock",title:m+" 1"},h2:{fn:"formatBlock",title:m+" 2"},h3:{fn:"formatBlock",title:m+" 3"},h4:{fn:"formatBlock",title:m+" 4"},h5:{fn:"formatBlock",title:m+" 5"},h6:{fn:"formatBlock",title:m+" 6"},subscript:{tag:"sub"},superscript:{tag:"sup"},bold:{key:"B",tag:"b"},italic:{key:"I",tag:"i"},underline:{tag:"u"},strikethrough:{tag:"strike"},strong:{fn:"bold",key:"B"},em:{fn:"italic",key:"I"},del:{fn:"strikethrough"},createLink:{key:"K",tag:"a"},unlink:{},insertImage:{},justifyLeft:{tag:"left",forceCss:!0},justifyCenter:{tag:"center",forceCss:!0},justifyRight:{tag:"right",forceCss:!0},justifyFull:{tag:"justify",forceCss:!0},unorderedList:{fn:"insertUnorderedList",tag:"ul"},orderedList:{fn:"insertOrderedList",tag:"ol"},horizontalRule:{fn:"insertHorizontalRule"},removeformat:{},fullscreen:{class:"trumbowyg-not-disable"},close:{fn:"destroy",class:"trumbowyg-not-disable"},formatting:{dropdown:["p","blockquote","h1","h2","h3","h4"],ico:"p"},link:{dropdown:["createLink","unlink"]}},a.o=i.extend(!0,{},l.defaultOptions,o),a.o.hasOwnProperty("imgDblClickHandler")||(a.o.imgDblClickHandler=a.getDefaultImgDblClickHandler()),a.urlPrefix=a.setupUrlPrefix(),a.disabled=a.o.disabled||"TEXTAREA"===r.nodeName&&(r.disabled||r.readOnly),o.btns?a.o.btns=o.btns:a.o.semantic||(a.o.btns[3]=["bold","italic","underline","strikethrough"]),i.each(a.o.btnsDef,(function(e,t){a.addBtnDef(e,t)})),a.eventNamespace="trumbowyg-event",a.keys=[],a.tagToButton={},a.tagHandlers=[],a.pasteHandlers=[].concat(a.o.pasteHandlers),a.isIE=-1!==e.userAgent.indexOf("MSIE")||-1!==e.appVersion.indexOf("Trident/"),a.isMac=-1!==e.platform.toUpperCase().indexOf("MAC"),a.init()};a.prototype={DEFAULT_SEMANTIC_MAP:{b:"strong",i:"em",s:"del",strike:"del",div:"p"},init:function(){var e=this;e.height=e.$ta.height(),e.initPlugins();try{e.doc.execCommand("enableObjectResizing",!1,!1),e.doc.execCommand("defaultParagraphSeparator",!1,"p")}catch(e){}e.buildEditor(),e.buildBtnPane(),e.fixedBtnPaneEvents(),e.buildOverlay(),setTimeout((function(){e.disabled&&e.setDisabled(!0),e.$c.trigger("tbwinit")}))},addBtnDef:function(e,t){this.btnsDef[e]=i.extend(t,this.btnsDef[e]||{})},setupUrlPrefix:function(){var e=this.o.urlProtocol;if(e)return"string"!=typeof e?"https://":e.replace("://","")+"://"},buildEditor:function(){var e=this,n=e.o.prefix,r="";e.$box=i("<div/>",{class:n+"box "+n+"editor-visible "+n+e.o.lang+" trumbowyg"}),e.isTextarea=e.$ta.is("textarea"),e.isTextarea?(r=e.$ta.val(),e.$ed=i("<div/>"),e.$box.insertAfter(e.$ta).append(e.$ed,e.$ta)):(e.$ed=e.$ta,r=e.$ed.html(),e.$ta=i("<textarea/>",{name:e.$ta.attr("id"),height:e.height}).val(r),e.$box.insertAfter(e.$ed).append(e.$ta,e.$ed),e.syncCode()),e.$ta.addClass(n+"textarea").attr("tabindex",-1),e.$ed.addClass(n+"editor").attr({contenteditable:!0,dir:e.lang._dir||"ltr"}).html(r),e.o.tabindex&&e.$ed.attr("tabindex",e.o.tabindex),e.$c.is("[placeholder]")&&e.$ed.attr("placeholder",e.$c.attr("placeholder")),e.$c.is("[spellcheck]")&&e.$ed.attr("spellcheck",e.$c.attr("spellcheck")),e.o.resetCss&&e.$ed.addClass(n+"reset-css"),e.o.autogrow||e.$ta.add(e.$ed).css({height:e.height}),e.semanticCode(),e.o.autogrowOnEnter&&e.$ed.addClass(n+"autogrow-on-enter");var o,a=!1,s=!1;e.$ed.on("dblclick","img",e.o.imgDblClickHandler).on("keydown",(function(t){if(!t.ctrlKey&&!t.metaKey||t.altKey){if(e.o.tabToIndent&&"Tab"===t.key)try{return t.shiftKey?e.execCmd("outdent",!0,null):e.execCmd("indent",!0,null),!1}catch(e){}}else{a=!0;var n=e.keys[String.fromCharCode(t.which).toUpperCase()];try{return e.execCmd(n.fn,n.param),!1}catch(e){}}})).on("compositionstart compositionupdate",(function(){s=!0})).on("keyup compositionend",(function(t){if("compositionend"===t.type)s=!1;else if(s)return;var n=t.which;if(!(n>=37&&n<=40)){if(!t.ctrlKey&&!t.metaKey||89!==n&&90!==n)if(a||17===n)void 0===t.which&&e.semanticCode(!1,!1,!0);else{var i=!e.isIE||"compositionend"===t.type;e.semanticCode(!1,i&&13===n),e.$c.trigger("tbwchange")}else e.semanticCode(!1,!0),e.$c.trigger("tbwchange");setTimeout((function(){a=!1}),50)}})).on("mouseup keydown keyup",(function(t){(!t.ctrlKey&&!t.metaKey||t.altKey)&&setTimeout((function(){a=!1}),50),clearTimeout(o),o=setTimeout((function(){e.updateButtonPaneStatus()}),50)})).on("focus blur",(function(t){if(e.$c.trigger("tbw"+t.type),"blur"===t.type&&e.clearButtonPaneStatus(),e.o.autogrowOnEnter){if(e.autogrowOnEnterDontClose)return;"focus"===t.type?(e.autogrowOnEnterWasFocused=!0,e.autogrowEditorOnEnter()):e.o.autogrow||(e.$ed.css({height:e.$ed.css("min-height")}),e.$c.trigger("tbwresize"))}})).on("cut drop",(function(){setTimeout((function(){e.semanticCode(!1,!0),e.$c.trigger("tbwchange")}),0)})).on("paste",(function(n){if(e.o.removeformatPasted){n.preventDefault(),t.getSelection&&t.getSelection().deleteFromDocument&&t.getSelection().deleteFromDocument();try{var r=t.clipboardData.getData("Text");try{e.doc.selection.createRange().pasteHTML(r)}catch(t){e.doc.getSelection().getRangeAt(0).insertNode(e.doc.createTextNode(r))}e.$c.trigger("tbwchange",n)}catch(t){e.execCmd("insertText",(n.originalEvent||n).clipboardData.getData("text/plain"))}}i.each(e.pasteHandlers,(function(e,t){t(n)})),setTimeout((function(){e.semanticCode(!1,!0),e.$c.trigger("tbwpaste",n),e.$c.trigger("tbwchange")}),0)})),e.$ta.on("keyup",(function(){e.$c.trigger("tbwchange")})).on("paste",(function(){setTimeout((function(){e.$c.trigger("tbwchange")}),0)})),e.$box.on("keydown",(function(t){if(27===t.which&&1===i("."+n+"modal-box",e.$box).length)return e.closeModal(),!1}))},autogrowEditorOnEnter:function(){var e=this;e.$ed.removeClass("autogrow-on-enter");var t=e.$ed[0].clientHeight;e.$ed.height("auto");var n=e.$ed[0].scrollHeight;e.$ed.addClass("autogrow-on-enter"),t!==n&&(e.$ed.height(t),setTimeout((function(){e.$ed.css({height:n}),e.$c.trigger("tbwresize")}),0))},buildBtnPane:function(){var e=this,t=e.o.prefix,n=e.$btnPane=i("<div/>",{class:t+"button-pane"});i.each(e.o.btns,(function(r,o){i.isArray(o)||(o=[o]);var a=i("<div/>",{class:t+"button-group "+(o.indexOf("fullscreen")>=0?t+"right":"")});i.each(o,(function(t,n){try{e.isSupportedBtn(n)&&a.append(e.buildBtn(n))}catch(e){}})),a.html().trim().length>0&&n.append(a)})),e.$box.prepend(n)},buildBtn:function(e){var t=this,n=t.o.prefix,r=t.btnsDef[e],o=r.dropdown,a=null==r.hasIcon||r.hasIcon,s=t.lang[e]||e,l=i("<button/>",{type:"button",class:n+e+"-button "+(r.class||"")+(a?"":" "+n+"textual-button"),html:t.hasSvg&&a?'<svg><use xlink:href="'+t.svgPath+"#"+n+(r.ico||e).replace(/([A-Z]+)/g,"-$1").toLowerCase()+'"/></svg>':t.hideButtonTexts?"":r.text||r.title||t.lang[e]||e,title:(r.title||r.text||s)+(r.key?" ("+(t.isMac?"Cmd":"Ctrl")+" + "+r.key+")":""),tabindex:-1,mousedown:function(){return o&&!i("."+e+"-"+n+"dropdown",t.$box).is(":hidden")||i("body",t.doc).trigger("mousedown"),!((t.$btnPane.hasClass(n+"disable")||t.$box.hasClass(n+"disabled"))&&!i(this).hasClass(n+"active")&&!i(this).hasClass(n+"not-disable"))&&(t.execCmd((!o?r.fn:"dropdown")||e,r.param||e,r.forceCss),!1)}});if(o){l.addClass(n+"open-dropdown");var c=n+"dropdown",u={class:c+"-"+e+" "+c+" "+n+"fixed-top "+(r.dropdownClass||"")};u["data-"+c]=e;var d=i("<div/>",u);i.each(o,(function(e,n){t.btnsDef[n]&&t.isSupportedBtn(n)&&d.append(t.buildSubBtn(n))})),t.$box.append(d.hide())}else r.key&&(t.keys[r.key]={fn:r.fn||e,param:r.param||e});return o||(t.tagToButton[(r.tag||e).toLowerCase()]=e),l},buildSubBtn:function(e){var t=this,n=t.o.prefix,r=t.btnsDef[e],o=null==r.hasIcon||r.hasIcon;return r.key&&(t.keys[r.key]={fn:r.fn||e,param:r.param||e}),t.tagToButton[(r.tag||e).toLowerCase()]=e,i("<button/>",{type:"button",class:n+e+"-dropdown-button "+(r.class||"")+(r.ico?" "+n+r.ico+"-button":""),html:t.hasSvg&&o?'<svg><use xlink:href="'+t.svgPath+"#"+n+(r.ico||e).replace(/([A-Z]+)/g,"-$1").toLowerCase()+'"/></svg>'+(r.text||r.title||t.lang[e]||e):r.text||r.title||t.lang[e]||e,title:r.key?"("+(t.isMac?"Cmd":"Ctrl")+" + "+r.key+")":null,style:r.style||null,mousedown:function(){return i("body",t.doc).trigger("mousedown"),t.execCmd(r.fn||e,r.param||e,r.forceCss),!1}})},isSupportedBtn:function(e){try{return this.btnsDef[e].isSupported()}catch(e){}return!0},buildOverlay:function(){var e=this;return e.$overlay=i("<div/>",{class:e.o.prefix+"overlay"}).appendTo(e.$box),e.$overlay},showOverlay:function(){var e=this;i(t).trigger("scroll"),e.$overlay.fadeIn(200),e.$box.addClass(e.o.prefix+"box-blur")},hideOverlay:function(){var e=this;e.$overlay.fadeOut(50),e.$box.removeClass(e.o.prefix+"box-blur")},fixedBtnPaneEvents:function(){var e=this,n=e.o.fixedFullWidth,r=e.$box;e.o.fixedBtnPane&&(e.isFixed=!1,i(t).on("scroll."+e.eventNamespace+" resize."+e.eventNamespace,(function(){if(r){e.syncCode();var o=i(t).scrollTop(),a=r.offset().top+1,s=e.$btnPane,l=s.outerHeight()-2;o-a>0&&o-a-e.height<0?(e.isFixed||(e.isFixed=!0,s.css({position:"fixed",top:0,left:n?0:"auto",zIndex:7}),e.$box.css({paddingTop:s.height()})),s.css({width:n?"100%":r.width()-1}),i("."+e.o.prefix+"fixed-top",r).css({position:n?"fixed":"absolute",top:n?l:l+(o-a),zIndex:15})):e.isFixed&&(e.isFixed=!1,s.removeAttr("style"),e.$box.css({paddingTop:0}),i("."+e.o.prefix+"fixed-top",r).css({position:"absolute",top:l}))}})))},setDisabled:function(e){var t=this,n=t.o.prefix;t.disabled=e,e?t.$ta.attr("disabled",!0):t.$ta.removeAttr("disabled"),t.$box.toggleClass(n+"disabled",e),t.$ed.attr("contenteditable",!e)},destroy:function(){var e=this,n=e.o.prefix;e.isTextarea?e.$box.after(e.$ta.css({height:""}).val(e.html()).removeClass(n+"textarea").show()):e.$box.after(e.$ed.css({height:""}).removeClass(n+"editor").removeAttr("contenteditable").removeAttr("dir").html(e.html()).show()),e.$ed.off("dblclick","img"),e.destroyPlugins(),e.$box.remove(),e.$c.removeData("trumbowyg"),i("body").removeClass(n+"body-fullscreen"),e.$c.trigger("tbwclose"),i(t).off("scroll."+e.eventNamespace+" resize."+e.eventNamespace)},empty:function(){this.$ta.val(""),this.syncCode(!0)},toggle:function(){var e=this,t=e.o.prefix;e.o.autogrowOnEnter&&(e.autogrowOnEnterDontClose=!e.$box.hasClass(t+"editor-hidden")),e.semanticCode(!1,!0),setTimeout((function(){e.doc.activeElement.blur(),e.$box.toggleClass(t+"editor-hidden "+t+"editor-visible"),e.$btnPane.toggleClass(t+"disable"),i("."+t+"viewHTML-button",e.$btnPane).toggleClass(t+"active"),e.$box.hasClass(t+"editor-visible")?e.$ta.attr("tabindex",-1):e.$ta.removeAttr("tabindex"),e.o.autogrowOnEnter&&!e.autogrowOnEnterDontClose&&e.autogrowEditorOnEnter()}),0)},dropdown:function(e){var n=this,r=i("body",n.doc),o=n.o.prefix,a=i("[data-"+o+"dropdown="+e+"]",n.$box),s=i("."+o+e+"-button",n.$btnPane),l=a.is(":hidden");if(r.trigger("mousedown"),l){var c=s.offset().left;s.addClass(o+"active"),a.css({position:"absolute",top:s.offset().top-n.$btnPane.offset().top+s.outerHeight(),left:n.o.fixedFullWidth&&n.isFixed?c:c-n.$btnPane.offset().left}).show(),i(t).trigger("scroll"),r.on("mousedown."+n.eventNamespace,(function(e){a.is(e.target)||(i("."+o+"dropdown",n.$box).hide(),i("."+o+"active",n.$btnPane).removeClass(o+"active"),r.off("mousedown."+n.eventNamespace))}))}},html:function(e){var t=this;return null!=e?(t.$ta.val(e),t.syncCode(!0),t.$c.trigger("tbwchange"),t):t.$ta.val()},syncTextarea:function(){var e=this;e.$ta.val(e.$ed.text().trim().length>0||e.$ed.find(e.o.tagsToKeep.join(",")).length>0?e.$ed.html():"")},syncCode:function(e){var t=this;if(!e&&t.$ed.is(":visible"))t.syncTextarea();else{var n=i("<div>").html(t.$ta.val()),r=i("<div>").append(n);i(t.o.tagsToRemove.join(","),r).remove(),t.$ed.html(r.contents().html())}if(t.o.autogrow&&(t.height=t.$ed.height(),t.height!==t.$ta.css("height")&&(t.$ta.css({height:t.height}),t.$c.trigger("tbwresize"))),t.o.autogrowOnEnter){t.$ed.height("auto");var o=t.autogrowOnEnterWasFocused?t.$ed[0].scrollHeight:t.$ed.css("min-height");o!==t.$ta.css("height")&&(t.$ed.css({height:o}),t.$c.trigger("tbwresize"))}},semanticCode:function(e,t,n){var r=this;if(r.saveRange(),r.syncCode(e),r.o.semantic){if(r.semanticTag("b",r.o.semanticKeepAttributes),r.semanticTag("i",r.o.semanticKeepAttributes),r.semanticTag("s",r.o.semanticKeepAttributes),r.semanticTag("strike",r.o.semanticKeepAttributes),t){var o=r.o.inlineElementsSelector,a=":not("+o+")";r.$ed.contents().filter((function(){return 3===this.nodeType&&this.nodeValue.trim().length>0})).wrap("<span data-tbw/>");var s=function(e){if(0!==e.length){var t=e.nextUntil(a).addBack().wrapAll("<p/>").parent(),n=t.nextAll(o).first();t.next("br").remove(),s(n)}};s(r.$ed.children(o).first()),r.semanticTag("div",!0),r.$ed.find("p").filter((function(){return(!r.range||this!==r.range.startContainer)&&(0===i(this).text().trim().length&&0===i(this).children().not("br,span").length)})).contents().unwrap(),i("[data-tbw]",r.$ed).contents().unwrap(),r.$ed.find("p:empty").remove()}n||r.restoreRange(),r.syncTextarea()}},semanticTag:function(e,t){var n;if(null!=this.o.semantic&&"object"==typeof this.o.semantic&&this.o.semantic.hasOwnProperty(e))n=this.o.semantic[e];else{if(!0!==this.o.semantic||!this.DEFAULT_SEMANTIC_MAP.hasOwnProperty(e))return;n=this.DEFAULT_SEMANTIC_MAP[e]}i(e,this.$ed).each((function(){var e=i(this);if(0===e.contents().length)return!1;e.wrap("<"+n+"/>"),t&&i.each(e.prop("attributes"),(function(){e.parent().attr(this.name,this.value)})),e.contents().unwrap()}))},createLink:function(){for(var e,t,n,r=this,o=r.doc.getSelection(),a=o.focusNode,s=(new XMLSerializer).serializeToString(o.getRangeAt(0).cloneContents());["A","DIV"].indexOf(a.nodeName)<0;)a=a.parentNode;if(a&&"A"===a.nodeName){var l=i(a);s=l.text(),e=l.attr("href"),r.o.minimalLinks||(t=l.attr("title"),n=l.attr("target"));var c=r.doc.createRange();c.selectNode(a),o.removeAllRanges(),o.addRange(c)}r.saveRange();var u={url:{label:"URL",required:!0,value:e},text:{label:r.lang.text,value:s}};r.o.minimalLinks||Object.assign(u,{title:{label:r.lang.title,value:t},target:{label:r.lang.target,value:n}}),r.openModalInsert(r.lang.createLink,u,(function(e){var t=r.prependUrlPrefix(e.url);if(!t.length)return!1;var n=i(['<a href="',t,'">',e.text||e.url,"</a>"].join(""));return r.o.minimalLinks||(e.title.length>0&&n.attr("title",e.title),e.target.length>0&&n.attr("target",e.target)),r.range.deleteContents(),r.range.insertNode(n[0]),r.syncCode(),r.$c.trigger("tbwchange"),!0}))},prependUrlPrefix:function(e){if(!this.urlPrefix)return e;if(/^([a-z][-+.a-z0-9]*:|\/|#)/i.test(e))return e;return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)?"mailto:"+e:this.urlPrefix+e},unlink:function(){var e=this,t=e.doc.getSelection(),n=t.focusNode;if(t.isCollapsed){for(;["A","DIV"].indexOf(n.nodeName)<0;)n=n.parentNode;if(n&&"A"===n.nodeName){var i=e.doc.createRange();i.selectNode(n),t.removeAllRanges(),t.addRange(i)}}e.execCmd("unlink",void 0,void 0,!0)},insertImage:function(){var e=this;e.saveRange();var t={url:{label:"URL",required:!0},alt:{label:e.lang.description,value:e.getRangeText()}};e.o.imageWidthModalEdit&&(t.width={}),e.openModalInsert(e.lang.insertImage,t,(function(t){e.execCmd("insertImage",t.url,!1,!0);var n=i('img[src="'+t.url+'"]:not([alt])',e.$box);return n.attr("alt",t.alt),e.o.imageWidthModalEdit&&n.attr({width:t.width}),e.syncCode(),e.$c.trigger("tbwchange"),!0}))},fullscreen:function(){var e,n=this,r=n.o.prefix,o=r+"fullscreen",a=o+"-placeholder",s=n.$box.outerHeight();n.$box.toggleClass(o),(e=n.$box.hasClass(o))?n.$box.before(i("<div/>",{class:a}).css({height:s})):i("."+a).remove(),i("body").toggleClass(r+"body-fullscreen",e),i(t).trigger("scroll"),n.$c.trigger("tbw"+(e?"open":"close")+"fullscreen")},execCmd:function(e,t,n,i){var r=this;i=!!i||"","dropdown"!==e&&r.$ed.focus();try{r.doc.execCommand("styleWithCSS",!1,n||!1)}catch(e){}try{r[e+i](t)}catch(n){try{e(t)}catch(n){"insertHorizontalRule"===e?t=void 0:"formatBlock"===e&&r.isIE&&(t="<"+t+">"),r.doc.execCommand(e,!1,t),r.syncCode(),r.semanticCode(!1,!0)}"dropdown"!==e&&(r.updateButtonPaneStatus(),r.$c.trigger("tbwchange"))}},openModal:function(e,n){var a=this,s=a.o.prefix;if(i("."+s+"modal-box",a.$box).length>0)return!1;a.o.autogrowOnEnter&&(a.autogrowOnEnterDontClose=!0),a.saveRange(),a.showOverlay(),a.$btnPane.addClass(s+"disable");var l=i(a.doc).find(".modal:visible").last(),c=l.length>0?l:i(a.doc.body),u=i("<div/>",{class:s+"modal "+s+"fixed-top"}).css({top:a.$box.offset().top+a.$btnPane.height(),zIndex:99999}).appendTo(c);a.$overlay.one("click",(function(){return u.trigger(o),!1}));var d=i("<form/>",{action:"",html:n}).on("submit",(function(){return u.trigger(r),!1})).on("reset",(function(){return u.trigger(o),!1})).on("submit reset",(function(){a.o.autogrowOnEnter&&(a.autogrowOnEnterDontClose=!1)})),h=i("<div/>",{class:s+"modal-box",html:d}).css({top:"-"+a.$btnPane.outerHeight(),opacity:0}).appendTo(u).animate({top:0,opacity:1},100);return i("<span/>",{text:e,class:s+"modal-title"}).prependTo(h),u.height(h.outerHeight()+10),i("input:first",h).focus(),a.buildModalBtn("submit",h),a.buildModalBtn("reset",h),i(t).trigger("scroll"),u},buildModalBtn:function(e,t){var n=this.o.prefix;return i("<button/>",{class:n+"modal-button "+n+"modal-"+e,type:e,text:this.lang[e]||e}).appendTo(i("form",t))},closeModal:function(){var e=this,t=e.o.prefix;e.$btnPane.removeClass(t+"disable"),e.$overlay.off();var n=i("."+t+"modal-box",i(e.doc.body));n.animate({top:"-"+n.height()},100,(function(){n.parent().remove(),e.hideOverlay()})),e.restoreRange()},openModalInsert:function(e,t,n){var a=this,s=a.o.prefix,l=a.lang,c="";return i.each(t,(function(e,t){var n=t.label||e,i=t.name||e,r=t.attributes||{},o=Object.keys(r).map((function(e){return e+'="'+r[e]+'"'})).join(" ");c+='<label><input type="'+(t.type||"text")+'" name="'+i+'"'+("checkbox"===t.type&&t.value?' checked="checked"':' value="'+(t.value||"").replace(/"/g,"&quot;"))+'"'+o+'><span class="'+s+'input-infos"><span>'+(l[n]?l[n]:n)+"</span></span></label>"})),a.openModal(e,c).on(r,(function(){var e=i("form",i(this)),o=!0,s={};i.each(t,(function(t,n){var r=n.name||t,l=i('input[name="'+r+'"]',e);switch(l.attr("type").toLowerCase()){case"checkbox":s[r]=l.is(":checked");break;case"radio":s[r]=l.filter(":checked").val();break;default:s[r]=i.trim(l.val())}n.required&&""===s[r]?(o=!1,a.addErrorOnModalField(l,a.lang.required)):n.pattern&&!n.pattern.test(s[r])&&(o=!1,a.addErrorOnModalField(l,n.patternError))})),o&&(a.restoreRange(),n(s,t)&&(a.syncCode(),a.$c.trigger("tbwchange"),a.closeModal(),i(this).off(r)))})).one(o,(function(){i(this).off(r),a.closeModal()}))},addErrorOnModalField:function(e,t){var n=this.o.prefix,r=n+"msg-error",o=e.parent();e.on("change keyup",(function(){o.removeClass(n+"input-error"),setTimeout((function(){o.find("."+r).remove()}),150)})),o.addClass(n+"input-error").find("input+span").append(i("<span/>",{class:r,text:t}))},getDefaultImgDblClickHandler:function(){var e=this;return function(){var t=i(this),n=t.attr("src"),r="(Base64)";0===n.indexOf("data:image")&&(n=r);var o={url:{label:"URL",value:n,required:!0},alt:{label:e.lang.description,value:t.attr("alt")}};return e.o.imageWidthModalEdit&&(o.width={value:t.attr("width")?t.attr("width"):""}),e.openModalInsert(e.lang.insertImage,o,(function(n){return n.url!==r&&t.attr({src:n.url}),t.attr({alt:n.alt}),e.o.imageWidthModalEdit&&(parseInt(n.width)>0?t.attr({width:n.width}):t.removeAttr("width")),!0})),!1}},saveRange:function(){var e=this,t=e.doc.getSelection();if(e.range=null,t&&t.rangeCount){var n,i=e.range=t.getRangeAt(0),r=e.doc.createRange();r.selectNodeContents(e.$ed[0]),r.setEnd(i.startContainer,i.startOffset),n=(r+"").length,e.metaRange={start:n,end:n+(i+"").length}}},restoreRange:function(){var e,t=this,n=t.metaRange,i=t.range,r=t.doc.getSelection();if(i){if(n&&n.start!==n.end){var o,a=0,s=[t.$ed[0]],l=!1,c=!1;for(e=t.doc.createRange();!c&&(o=s.pop());)if(3===o.nodeType){var u=a+o.length;!l&&n.start>=a&&n.start<=u&&(e.setStart(o,n.start-a),l=!0),l&&n.end>=a&&n.end<=u&&(e.setEnd(o,n.end-a),c=!0),a=u}else for(var d=o.childNodes,h=d.length;h>0;)h-=1,s.push(d[h])}try{r.removeAllRanges()}catch(e){}r.addRange(e||i)}},getRangeText:function(){return this.range+""},clearButtonPaneStatus:function(){var e=this,t=e.o.prefix,n=t+"active-button "+t+"active",r=t+"original-icon";i("."+t+"active-button",e.$btnPane).removeClass(n),i("."+r,e.$btnPane).each((function(){i(this).find("svg use").attr("xlink:href",i(this).data(r))}))},updateButtonPaneStatus:function(){var e=this,t=e.o.prefix,n=t+"active-button "+t+"active",r=t+"original-icon",o=e.getTagsRecursive(e.doc.getSelection().focusNode);e.clearButtonPaneStatus(),i.each(o,(function(o,a){var s=e.tagToButton[a.toLowerCase()],l=i("."+t+s+"-button",e.$btnPane);if(l.length>0)l.addClass(n);else try{var c=(l=i("."+t+"dropdown ."+t+s+"-dropdown-button",e.$box)).find("svg use"),u=l.parent().data(t+"dropdown"),d=i("."+t+u+"-button",e.$box),h=d.find("svg use");d.addClass(n),e.o.changeActiveDropdownIcon&&c.length>0&&(d.addClass(r).data(r,h.attr("xlink:href")),h.attr("xlink:href",c.attr("xlink:href")))}catch(e){}}))},getTagsRecursive:function(e,t){var n=this;if(t=t||(e&&e.tagName?[e.tagName]:[]),!e||!e.parentNode)return t;var r=(e=e.parentNode).tagName;return"DIV"===r?t:("P"===r&&""!==e.style.textAlign&&t.push(e.style.textAlign),i.each(n.tagHandlers,(function(i,r){t=t.concat(r(e,n))})),t.push(r),n.getTagsRecursive(e,t).filter((function(e){return null!=e})))},initPlugins:function(){var e=this;e.loadedPlugins=[],i.each(i.trumbowyg.plugins,(function(t,n){n.shouldInit&&!n.shouldInit(e)||(n.init(e),n.tagHandler&&e.tagHandlers.push(n.tagHandler),e.loadedPlugins.push(n))}))},destroyPlugins:function(){var e=this;i.each(this.loadedPlugins,(function(t,n){n.destroy&&n.destroy(e)}))}}}(navigator,window,document,jQuery),define("trumbowyg",(function(){})),function(e){"use strict";function t(e){return("0"+parseInt(e).toString(16)).slice(-2)}function n(e){return-1===e.search("rgb")?e.replace("#",""):"rgba(0, 0, 0, 0)"===e?"transparent":t((e=e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+))?\)$/))[1])+t(e[2])+t(e[3])}function i(t,n){var i=[],r=n.o.plugins.colors,o=r[t+"List"]||r.colorList;e.each(o,(function(e,o){var a=t+o,s={fn:t,forceCss:!0,hasIcon:!1,text:n.lang["#"+o]||"#"+o,param:"#"+o,style:"background-color: #"+o+";"};r.displayAsList&&"foreColor"===t&&(s.style="color: #"+o+" !important;"),n.addBtnDef(a,s),i.push(a)}));var a=t+"Remove",s={fn:"removeFormat",hasIcon:!1,param:t,style:"background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAYAAACp8Z5+AAAAG0lEQVQIW2NkQAAfEJMRmwBYhoGBYQtMBYoAADziAp0jtJTgAAAAAElFTkSuQmCC);"};if(r.displayAsList&&(s.style=""),n.addBtnDef(a,s),i.push(a),r["allowCustom"+t.charAt(0).toUpperCase()+t.substr(1)]){var l=t+"Free",c={fn:function(){n.openModalInsert(n.lang[t],{color:{label:t,forceCss:!0,type:"color",value:"#FFFFFF"}},(function(e){return n.execCmd(t,e.color),!0}))},hasIcon:!1,text:"#",style:"text-indent: 0; line-height: 20px; padding: 0 5px;"};n.addBtnDef(l,c),i.push(l)}return i}e.extend(!0,e.trumbowyg,{langs:{cs:{foreColor:"Barva textu",backColor:"Barva pozadÃ­"},en:{foreColor:"Text color",backColor:"Background color",foreColorRemove:"Remove text color",backColorRemove:"Remove background color"},da:{foreColor:"Tekstfarve",backColor:"Baggrundsfarve"},fr:{foreColor:"Couleur du texte",backColor:"Couleur de fond",foreColorRemove:"Supprimer la couleur du texte",backColorRemove:"Supprimer la couleur de fond"},de:{foreColor:"Textfarbe",backColor:"Hintergrundfarbe"},nl:{foreColor:"Tekstkleur",backColor:"Achtergrondkleur"},sk:{foreColor:"Farba textu",backColor:"Farba pozadia"},zh_cn:{foreColor:"æå­é¢è²",backColor:"èæ¯é¢è²"},zh_tw:{foreColor:"æå­é¡è²",backColor:"èæ¯é¡è²"},ru:{foreColor:"Ð¦Ð²ÐµÑ ÑÐµÐºÑÑÐ°",backColor:"Ð¦Ð²ÐµÑ Ð²ÑÐ´ÐµÐ»ÐµÐ½Ð¸Ñ ÑÐµÐºÑÑÐ°"},ja:{foreColor:"æå­è²",backColor:"èæ¯è²"},tr:{foreColor:"YazÄ± rengi",backColor:"Arkaplan rengi"},pt_br:{foreColor:"Cor de fonte",backColor:"Cor de fundo"},ko:{foreColor:"ê¸ìì",backColor:"ë°°ê²½ì",foreColorRemove:"ê¸ìì ì§ì°ê¸°",backColorRemove:"ë°°ê²½ì ì§ì°ê¸°"}}});var r={colorList:["ffffff","000000","eeece1","1f497d","4f81bd","c0504d","9bbb59","8064a2","4bacc6","f79646","ffff00","f2f2f2","7f7f7f","ddd9c3","c6d9f0","dbe5f1","f2dcdb","ebf1dd","e5e0ec","dbeef3","fdeada","fff2ca","d8d8d8","595959","c4bd97","8db3e2","b8cce4","e5b9b7","d7e3bc","ccc1d9","b7dde8","fbd5b5","ffe694","bfbfbf","3f3f3f","938953","548dd4","95b3d7","d99694","c3d69b","b2a2c7","b7dde8","fac08f","f2c314","a5a5a5","262626","494429","17365d","366092","953734","76923c","5f497a","92cddc","e36c09","c09100","7f7f7f","0c0c0c","1d1b10","0f243e","244061","632423","4f6128","3f3151","31859b","974806","7f6000"],foreColorList:null,backColorList:null,allowCustomForeColor:!0,allowCustomBackColor:!0,displayAsList:!1};e.extend(!0,e.trumbowyg,{plugins:{color:{init:function(e){e.o.plugins.colors=e.o.plugins.colors||r;var t=e.o.plugins.colors.displayAsList?e.o.prefix+"dropdown--color-list":"",n={dropdown:i("foreColor",e),dropdownClass:t},o={dropdown:i("backColor",e),dropdownClass:t};e.addBtnDef("foreColor",n),e.addBtnDef("backColor",o)},tagHandler:function(e,t){var i,r=[];if(!e.style)return r;if(""!==e.style.backgroundColor){var o=n(e.style.backgroundColor);t.o.plugins.colors.colorList.indexOf(o)>=0?r.push("backColor"+o):r.push("backColorFree")}return""!==e.style.color?i=n(e.style.color):e.hasAttribute("color")&&(i=n(e.getAttribute("color"))),i&&(t.o.plugins.colors.colorList.indexOf(i)>=0?r.push("foreColor"+i):r.push("foreColorFree")),r}}}})}(jQuery),define("trumbowyg.colors",["trumbowyg"],(function(){})),function(e){"use strict";function t(t){var n=[];return e.each(t.o.plugins.specialchars.symbolList,(function(e,i){var r="symbol-"+(i=null===i?"&nbsp":"&#x"+i).replace(/:/g,""),o={text:i,hasIcon:!1,fn:function(){var e=String.fromCodePoint(parseInt(i.replace("&#","0")));return t.execCmd("insertText",e),!0}};t.addBtnDef(r,o),n.push(r)})),n}var n={symbolList:["0024","20AC","00A3","00A2","00A5","00A4","2030",null,"00A9","00AE","2122",null,"00A7","00B6","00C6","00E6","0152","0153",null,"2022","25CF","2023","25B6","2B29","25C6",null,"00B1","00D7","00F7","21D2","21D4","220F","2211","2243","2264","2265"]};e.extend(!0,e.trumbowyg,{langs:{en:{specialChars:"Special characters"},fr:{specialChars:"CaractÃ¨res spÃ©ciaux"},ko:{specialChars:"í¹ìë¬¸ì"}},plugins:{specialchars:{init:function(e){e.o.plugins.specialchars=e.o.plugins.specialchars||n;var i={dropdown:t(e)};e.addBtnDef("specialChars",i)}}}})}(jQuery),define("trumbowyg.specialchars",["trumbowyg"],(function(){})),function(e){"use strict";var t=function(){return"undefined"!=typeof FileReader};e.extend(!0,e.trumbowyg,{langs:{en:{base64:"Image as base64",file:"File",errFileReaderNotSupported:"FileReader is not supported by your browser.",errInvalidImage:"Invalid image file."},da:{base64:"Billede som base64",file:"Fil",errFileReaderNotSupported:"FileReader er ikke understÃ¸ttet af din browser.",errInvalidImage:"Ugyldig billedfil."},fr:{base64:"Image en base64",file:"Fichier"},cs:{base64:"VloÅ¾it obrÃ¡zek",file:"Soubor"},zh_cn:{base64:"å¾çï¼Base64ç¼ç ï¼",file:"æä»¶"},nl:{base64:"Afbeelding inline",file:"Bestand",errFileReaderNotSupported:"Uw browser ondersteunt deze functionaliteit niet.",errInvalidImage:"De gekozen afbeelding is ongeldig."},ru:{base64:"ÐÐ·Ð¾Ð±ÑÐ°Ð¶ÐµÐ½Ð¸Ðµ ÐºÐ°Ðº ÐºÐ¾Ð´ Ð² base64",file:"Ð¤Ð°Ð¹Ð»",errFileReaderNotSupported:"FileReader Ð½Ðµ Ð¿Ð¾Ð´Ð´ÐµÑÐ¶Ð¸Ð²Ð°ÐµÑÑÑ Ð²Ð°ÑÐ¸Ð¼ Ð±ÑÐ°ÑÐ·ÐµÑÐ¾Ð¼.",errInvalidImage:"ÐÐµÐ´Ð¾Ð¿ÑÑÑÐ¸Ð¼ÑÐ¹ ÑÐ°Ð¹Ð» Ð¸Ð·Ð¾Ð±ÑÐ°Ð¶ÐµÐ½Ð¸Ñ."},ja:{base64:"ç»å (Base64å½¢å¼)",file:"ãã¡ã¤ã«",errFileReaderNotSupported:"ããªãã®ãã©ã¦ã¶ã¼ã¯FileReaderããµãã¼ããã¦ãã¾ãã",errInvalidImage:"ç»åå½¢å¼ãæ­£ããããã¾ãã"},tr:{base64:"Base64 olarak resim",file:"Dosya",errFileReaderNotSupported:"FileReader tarayÄ±cÄ±nÄ±z tarafÄ±ndan desteklenmiyor.",errInvalidImage:"GeÃ§ersiz resim dosyasÄ±."},zh_tw:{base64:"åç(base64ç·¨ç¢¼)",file:"æªæ¡",errFileReaderNotSupported:"ä½ ççè¦½å¨ä¸æ¯æ´FileReader",errInvalidImage:"ä¸æ­£ç¢ºçæªæ¡æ ¼å¼"},pt_br:{base64:"Imagem em base64",file:"Arquivo",errFileReaderNotSupported:"FileReader nÃ£o Ã© suportado pelo seu navegador.",errInvalidImage:"Arquivo de imagem invÃ¡lido."},ko:{base64:"ê·¸ë¦¼ ë£ê¸°(base64)",file:"íì¼",errFileReaderNotSupported:"FileReaderê° íì¬ ë¸ë¼ì°ì ë¥¼ ì§ìíì§ ììµëë¤.",errInvalidImage:"ì í¨íì§ ìì íì¼"}},plugins:{base64:{shouldInit:t,init:function(n){var i={isSupported:t,fn:function(){n.saveRange();var t,i=n.openModalInsert(n.lang.base64,{file:{type:"file",required:!0,attributes:{accept:"image/*"}},alt:{label:"description",value:n.getRangeText()}},(function(r){var o=new FileReader;o.onloadend=function(t){!function(e){return/^data:image\/[a-z]?/i.test(e)}(t.target.result)?n.addErrorOnModalField(e("input[type=file]",i),n.lang.errInvalidImage):(n.execCmd("insertImage",o.result,!1,!0),e(['img[src="',o.result,'"]:not([alt])'].join(""),n.$box).attr("alt",r.alt),n.closeModal())},o.readAsDataURL(t)}));e("input[type=file]").on("change",(function(e){t=e.target.files[0]}))}};n.addBtnDef("base64",i)}}}})}(jQuery),define("trumbowyg.base64",["trumbowyg"],(function(){})),function(e){"use strict";function t(t){var n=[];return e.each(t.o.plugins.fontfamily.fontList,(function(e,i){t.addBtnDef("fontfamily_"+e,{title:'<span style="font-family: '+i.family+';">'+i.name+"</span>",hasIcon:!1,fn:function(){t.execCmd("fontName",i.family,!0)}}),n.push("fontfamily_"+e)})),n}e.extend(!0,e.trumbowyg,{langs:{en:{fontFamily:"Font"},es:{fontFamily:"Fuente"},da:{fontFamily:"Skrifttype"},fr:{fontFamily:"Police"},de:{fontFamily:"Schriftart"},nl:{fontFamily:"Lettertype"},tr:{fontFamily:"YazÄ± Tipi"},zh_tw:{fontFamily:"å­é«"},pt_br:{fontFamily:"Fonte"},ko:{fontFamily:"ê¸ê¼´"}}});var n={fontList:[{name:"Arial",family:"Arial, Helvetica, sans-serif"},{name:"Arial Black",family:"'Arial Black', Gadget, sans-serif"},{name:"Comic Sans",family:"'Comic Sans MS', Textile, cursive, sans-serif"},{name:"Courier New",family:"'Courier New', Courier, monospace"},{name:"Georgia",family:"Georgia, serif"},{name:"Impact",family:"Impact, Charcoal, sans-serif"},{name:"Lucida Console",family:"'Lucida Console', Monaco, monospace"},{name:"Lucida Sans",family:"'Lucida Sans Uncide', 'Lucida Grande', sans-serif"},{name:"Palatino",family:"'Palatino Linotype', 'Book Antiqua', Palatino, serif"},{name:"Tahoma",family:"Tahoma, Geneva, sans-serif"},{name:"Times New Roman",family:"'Times New Roman', Times, serif"},{name:"Trebuchet",family:"'Trebuchet MS', Helvetica, sans-serif"},{name:"Verdana",family:"Verdana, Geneva, sans-serif"}]};e.extend(!0,e.trumbowyg,{plugins:{fontfamily:{init:function(i){i.o.plugins.fontfamily=e.extend({},n,i.o.plugins.fontfamily||{}),i.addBtnDef("fontfamily",{dropdown:t(i),hasIcon:!1,text:i.lang.fontFamily})}}}})}(jQuery),define("trumbowyg.fontfamily",["trumbowyg"],(function(){})),function(e){"use strict";function t(t){var n=[];if(e.each(t.o.plugins.fontsize.sizeList,(function(e,i){t.addBtnDef("fontsize_"+i,{text:'<span style="font-size: '+i+';">'+(t.lang.fontsizes[i]||i)+"</span>",hasIcon:!1,fn:function(){t.execCmd("fontSize",e+1,!0)}}),n.push("fontsize_"+i)})),t.o.plugins.fontsize.allowCustomSize){var i="fontsize_custom",r={fn:function(){t.openModalInsert(t.lang.fontCustomSize.title,{size:{label:t.lang.fontCustomSize.label,value:t.lang.fontCustomSize.value}},(function(n){var i=t.range.startContainer.parentElement,r=t.getRangeText();if(e(i).html()===r)e(i).css("font-size",n.size);else{t.range.deleteContents();var o='<span style="font-size: '+n.size+';">'+r+"</span>",a=e(o)[0];t.range.insertNode(a)}return t.saveRange(),!0}))},text:'<span style="font-size: medium;">'+t.lang.fontsizes.custom+"</span>",hasIcon:!1};t.addBtnDef(i,r),n.push(i)}return n}e.extend(!0,e.trumbowyg,{langs:{en:{fontsize:"Font size",fontsizes:{"x-small":"Extra small",small:"Small",medium:"Regular",large:"Large","x-large":"Extra large",custom:"Custom"},fontCustomSize:{title:"Custom Font Size",label:"Font Size",value:"48px"}},es:{fontsize:"TamaÃ±o de Fuente",fontsizes:{"x-small":"Extra pequeÃ±a",small:"PegueÃ±a",medium:"Regular",large:"Grande","x-large":"Extra Grande",custom:"Customizada"},fontCustomSize:{title:"TamaÃ±o de Fuente Customizada",label:"TamaÃ±o de Fuente",value:"48px"}},da:{fontsize:"SkriftstÃ¸rrelse",fontsizes:{"x-small":"Ekstra lille",small:"Lille",medium:"Normal",large:"Stor","x-large":"Ekstra stor",custom:"Brugerdefineret"}},fr:{fontsize:"Taille de la police",fontsizes:{"x-small":"TrÃ¨s petit",small:"Petit",medium:"Normal",large:"Grand","x-large":"TrÃ¨s grand",custom:"Taille personnalisÃ©e"},fontCustomSize:{title:"Taille de police personnalisÃ©e",label:"Taille de la police",value:"48px"}},de:{fontsize:"Font size",fontsizes:{"x-small":"Sehr klein",small:"Klein",medium:"Normal",large:"GroÃ","x-large":"Sehr groÃ",custom:"Benutzerdefiniert"},fontCustomSize:{title:"Benutzerdefinierte SchriftgrÃ¶Ãe",label:"SchriftgrÃ¶Ãe",value:"48px"}},nl:{fontsize:"Lettergrootte",fontsizes:{"x-small":"Extra klein",small:"Klein",medium:"Normaal",large:"Groot","x-large":"Extra groot",custom:"Tilpasset"}},tr:{fontsize:"YazÄ± Boyutu",fontsizes:{"x-small":"Ãok KÃ¼Ã§Ã¼k",small:"KÃ¼Ã§Ã¼k",medium:"Normal",large:"BÃ¼yÃ¼k","x-large":"Ãok BÃ¼yÃ¼k",custom:"GÃ¶renek"}},zh_tw:{fontsize:"å­é«å¤§å°",fontsizes:{"x-small":"æå°",small:"å°",medium:"ä¸­",large:"å¤§","x-large":"æå¤§",custom:"èªè¨å¤§å°"},fontCustomSize:{title:"èªè¨ç¾©å­é«å¤§å°",label:"å­é«å¤§å°",value:"48px"}},pt_br:{fontsize:"Tamanho da fonte",fontsizes:{"x-small":"Extra pequeno",small:"Pequeno",regular:"MÃ©dio",large:"Grande","x-large":"Extra grande",custom:"Personalizado"},fontCustomSize:{title:"Tamanho de Fonte Personalizado",label:"Tamanho de Fonte",value:"48px"}},it:{fontsize:"Dimensioni del testo",fontsizes:{"x-small":"Molto piccolo",small:"piccolo",regular:"normale",large:"grande","x-large":"Molto grande",custom:"Personalizzato"},fontCustomSize:{title:"Dimensioni del testo personalizzato",label:"Dimensioni del testo",value:"48px"}},ko:{fontsize:"ê¸ê¼´ í¬ê¸°",fontsizes:{"x-small":"ìì£¼ ìê²",small:"ìê²",medium:"ë³´íµ",large:"í¬ê²","x-large":"ìì£¼ í¬ê²",custom:"ì¬ì©ì ì§ì "},fontCustomSize:{title:"ì¬ì©ì ì§ì  ê¸ê¼´ í¬ê¸°",label:"ê¸ê¼´ í¬ê¸°",value:"48px"}}}});var n={sizeList:["x-small","small","medium","large","x-large"],allowCustomSize:!0};e.extend(!0,e.trumbowyg,{plugins:{fontsize:{init:function(i){i.o.plugins.fontsize=e.extend({},n,i.o.plugins.fontsize||{}),i.addBtnDef("fontsize",{dropdown:t(i)})}}}})}(jQuery),define("trumbowyg.fontsize",["trumbowyg"],(function(){})),function(e){"use strict";var t={rows:8,columns:8,styler:"table"};e.extend(!0,e.trumbowyg,{langs:{en:{table:"Insert table",tableAddRow:"Add row",tableAddColumn:"Add column",tableDeleteRow:"Delete row",tableDeleteColumn:"Delete column",tableDestroy:"Delete table",error:"Error"},da:{table:"IndsÃ¦t tabel",tableAddRow:"TilfÃ¸j rÃ¦kke",tableAddColumn:"TilfÃ¸j kolonne",tableDeleteRow:"Slet rÃ¦kke",tableDeleteColumn:"Slet kolonne",tableDestroy:"Slet tabel",error:"Fejl"},de:{table:"Tabelle einfÃ¼gen",tableAddRow:"Zeile hinzufÃ¼gen",tableAddColumn:"Spalte hinzufÃ¼gen",tableDeleteRow:"Zeile lÃ¶schen",tableDeleteColumn:"Spalte lÃ¶schen",tableDestroy:"Tabelle lÃ¶schen",error:"Error"},sk:{table:"VytvoriÅ¥ tabuÄ¾ky",tableAddRow:"PridaÅ¥ riadok",tableAddColumn:"PridaÅ¥ stÄºpec",error:"Chyba"},fr:{table:"InsÃ©rer un tableau",tableAddRow:"Ajouter des lignes",tableAddColumn:"Ajouter des colonnes",tableDeleteRow:"Effacer la ligne",tableDeleteColumn:"Effacer la colonne",tableDestroy:"Effacer le tableau",error:"Erreur"},cs:{table:"VytvoÅit pÅÃ­kaz Table",tableAddRow:"PÅidat ÅÃ¡dek",tableAddColumn:"PÅidat sloupec",error:"Chyba"},ru:{table:"ÐÑÑÐ°Ð²Ð¸ÑÑ ÑÐ°Ð±Ð»Ð¸ÑÑ",tableAddRow:"ÐÐ¾Ð±Ð°Ð²Ð¸ÑÑ ÑÑÑÐ¾ÐºÑ",tableAddColumn:"ÐÐ¾Ð±Ð°Ð²Ð¸ÑÑ ÑÑÐ¾Ð»Ð±ÐµÑ",tableDeleteRow:"Ð£Ð´Ð°Ð»Ð¸ÑÑ ÑÑÑÐ¾ÐºÑ",tableDeleteColumn:"Ð£Ð´Ð°Ð»Ð¸ÑÑ ÑÑÐ¾Ð»Ð±ÐµÑ",tableDestroy:"Ð£Ð´Ð°Ð»Ð¸ÑÑ ÑÐ°Ð±Ð»Ð¸ÑÑ",error:"ÐÑÐ¸Ð±ÐºÐ°"},ja:{table:"è¡¨ã®æ¿å¥",tableAddRow:"è¡ã®è¿½å ",tableAddColumn:"åã®è¿½å ",error:"ã¨ã©ã¼"},tr:{table:"Tablo ekle",tableAddRow:"SatÄ±r ekle",tableAddColumn:"Kolon ekle",error:"Hata"},zh_tw:{table:"æå¥è¡¨æ ¼",tableAddRow:"å å¥è¡",tableAddColumn:"å å¥å",tableDeleteRow:"åªé¤è¡",tableDeleteColumn:"åªé¤å",tableDestroy:"åªé¤è¡¨æ ¼",error:"é¯èª¤"},id:{table:"Sisipkan tabel",tableAddRow:"Sisipkan baris",tableAddColumn:"Sisipkan kolom",tableDeleteRow:"Hapus baris",tableDeleteColumn:"Hapus kolom",tableDestroy:"Hapus tabel",error:"Galat"},pt_br:{table:"Inserir tabela",tableAddRow:"Adicionar linha",tableAddColumn:"Adicionar coluna",tableDeleteRow:"Deletar linha",tableDeleteColumn:"Deletar coluna",tableDestroy:"Deletar tabela",error:"Erro"},ko:{table:"í ë£ê¸°",tableAddRow:"ì¤ ì¶ê°",tableAddColumn:"ì¹¸ ì¶ê°",tableDeleteRow:"ì¤ ì­ì ",tableDeleteColumn:"ì¹¸ ì­ì ",tableDestroy:"í ì§ì°ê¸°",error:"ìë¬"}},plugins:{table:{init:function(n){n.o.plugins.table=e.extend(!0,{},t,n.o.plugins.table||{});var i={fn:function(){n.saveRange();var t="table",i=n.o.prefix+"dropdown",a={class:i+"-"+t+" "+i+" "+n.o.prefix+"fixed-top"};a["data-"+i]=t;var s=e("<div/>",a);if(0===n.$box.find("."+i+"-"+t).length?n.$box.append(s.hide()):s=n.$box.find("."+i+"-"+t),s.html(""),n.$box.find("."+n.o.prefix+"table-button").hasClass(n.o.prefix+"active-button"))s.append(n.buildSubBtn("tableAddRow")),s.append(n.buildSubBtn("tableAddColumn")),s.append(n.buildSubBtn("tableDeleteRow")),s.append(n.buildSubBtn("tableDeleteColumn")),s.append(n.buildSubBtn("tableDestroy"));else{for(var l=e("<table/>"),c=0;c<n.o.plugins.table.rows;c+=1)for(var u=e("<tr/>").appendTo(l),d=0;d<n.o.plugins.table.columns;d+=1)e("<td/>").appendTo(u);l.find("td").on("mouseover",r),l.find("td").on("mousedown",o),s.append(l),s.append(e('<div class="trumbowyg-table-size">1x1</div>'))}n.dropdown(t)}},r=function(t){var n=e(t.target).closest("table"),i=this.cellIndex,r=this.parentNode.rowIndex;n.find("td").removeClass("active");for(var o=0;o<=r;o+=1)for(var a=0;a<=i;a+=1)n.find("tr:nth-of-type("+(o+1)+")").find("td:nth-of-type("+(a+1)+")").addClass("active");n.next(".trumbowyg-table-size").html(i+1+"x"+(r+1))},o=function(){n.saveRange();var t=e("<table/>");n.o.plugins.table.styler&&t.attr("class",n.o.plugins.table.styler);for(var i=this.cellIndex,r=this.parentNode.rowIndex,o=0;o<=r;o+=1)for(var a=e("<tr></tr>").appendTo(t),s=0;s<=i;s+=1)e("<td/>").appendTo(a);n.range.deleteContents(),n.range.insertNode(t[0]),n.$c.trigger("tbwchange")},a={title:n.lang.tableAddRow,text:n.lang.tableAddRow,ico:"row-below",fn:function(){n.saveRange();var t=n.doc.getSelection().focusNode,i=e(t).closest("table");if(i.length>0){for(var r=e("<tr/>"),o=0;o<i.find("tr")[0].childElementCount;o+=1)e("<td/>").appendTo(r);r.appendTo(i)}n.syncCode()}},s={title:n.lang.tableAddColumn,text:n.lang.tableAddColumn,ico:"col-right",fn:function(){n.saveRange();var t=n.doc.getSelection().focusNode,i=e(t).closest("table");i.length>0&&e(i).find("tr").each((function(){e(this).find("td:last").after("<td></td>")})),n.syncCode()}},l={title:n.lang.tableDestroy,text:n.lang.tableDestroy,ico:"table-delete",fn:function(){n.saveRange();var t=n.doc.getSelection().focusNode;e(t).closest("table").remove(),n.syncCode()}},c={title:n.lang.tableDeleteRow,text:n.lang.tableDeleteRow,ico:"row-delete",fn:function(){n.saveRange();var t=n.doc.getSelection().focusNode;e(t).closest("tr").remove(),n.syncCode()}},u={title:n.lang.tableDeleteColumn,text:n.lang.tableDeleteColumn,ico:"col-delete",fn:function(){n.saveRange();var t=n.doc.getSelection().focusNode,i=e(t).closest("table"),r=e(t).closest("td").index();e(i).find("tr").each((function(){e(this).find("td:eq("+r+")").remove()})),n.syncCode()}};n.addBtnDef("table",i),n.addBtnDef("tableAddRow",a),n.addBtnDef("tableAddColumn",s),n.addBtnDef("tableDeleteRow",c),n.addBtnDef("tableDeleteColumn",u),n.addBtnDef("tableDestroy",l)}}}})}(jQuery),define("trumbowyg.table",["trumbowyg"],(function(){})),function(e){"use strict";function t(){var t=null;if(document.selection)t=document.selection.createRange().parentElement();else{var n=window.getSelection();n.rangeCount>0&&(t=n.getRangeAt(0).startContainer.parentNode)}var i=e(t).contents().closest("pre").length,r=e(t).contents().closest("code").length;i&&r?e(t).contents().unwrap("code").unwrap("pre"):i?e(t).contents().unwrap("pre"):r&&e(t).contents().unwrap("code")}e.extend(!0,e.trumbowyg,{langs:{en:{preformatted:"Code sample <pre>"},da:{preformatted:"PrÃ¦formateret <pre>"},fr:{preformatted:"Exemple de code <pre>"},it:{preformatted:"Codice <pre>"},zh_cn:{preformatted:"ä»£ç ç¤ºä¾ <pre>"},ru:{preformatted:"ÐÑÐ¸Ð¼ÐµÑ ÐºÐ¾Ð´Ð° <pre>"},ja:{preformatted:"ã³ã¼ããµã³ãã« <pre>"},tr:{preformatted:"Kod Ã¶rneÄi <pre>"},zh_tw:{preformatted:"ä»£ç¢¼ç¯ä¾ <pre>"},pt_br:{preformatted:"Exemple de cÃ³digo <pre>"},ko:{preformatted:"ì½ë ìì  <pre>"}},plugins:{preformatted:{init:function(e){var n={fn:function(){e.saveRange();var n=e.getRangeText();if(""!==n.replace(/\s/g,""))try{var i=function(){var e,t=null;return window.getSelection?(e=window.getSelection()).rangeCount&&1!==(t=e.getRangeAt(0).commonAncestorContainer).nodeType&&(t=t.parentNode):(e=document.selection)&&"Control"!==e.type&&(t=e.createRange().parentElement()),t}().tagName.toLowerCase();if("code"===i||"pre"===i)return t();e.execCmd("insertHTML","<pre><code>"+function(e){var t=document.createElement("DIV");return t.innerHTML=e,t.textContent||t.innerText||""}(n)+"</code></pre>")}catch(e){}},tag:"pre"};e.addBtnDef("preformatted",n)}}}})}(jQuery),define("trumbowyg.preformatted",["trumbowyg"],(function(){})),function(e){"use strict";e.extend(!0,e.trumbowyg,{langs:{de:{history:{redo:"Wiederholen",undo:"RÃ¼ckgÃ¤ngig"}},en:{history:{redo:"Redo",undo:"Undo"}},da:{history:{redo:"Annuller fortryd",undo:"Fortryd"}},fr:{history:{redo:"Annuler",undo:"RÃ©tablir"}},zh_tw:{history:{redo:"éå",undo:"å¾©å"}},pt_br:{history:{redo:"Refazer",undo:"Desfazer"}},ko:{history:{redo:"ë¤ì ì¤í",undo:"ëëë¦¬ê¸°"}}},plugins:{history:{init:function(t){t.o.plugins.history=e.extend(!0,{_stack:[],_index:-1,_focusEl:void 0},t.o.plugins.history||{});var n={title:t.lang.history.redo,ico:"redo",key:"Y",fn:function(){if(t.o.plugins.history._index<t.o.plugins.history._stack.length-1){t.o.plugins.history._index+=1;var e=t.o.plugins.history._index,n=t.o.plugins.history._stack[e];t.execCmd("html",n),t.o.plugins.history._stack[e]=t.$ed.html(),s(),r()}}},i={title:t.lang.history.undo,ico:"undo",key:"Z",fn:function(){if(t.o.plugins.history._index>0){t.o.plugins.history._index-=1;var e=t.o.plugins.history._index,n=t.o.plugins.history._stack[e];t.execCmd("html",n),t.o.plugins.history._stack[e]=t.$ed.html(),s(),r()}}},r=function(){var e=t.o.plugins.history._index,n=t.o.plugins.history._stack.length,i=0!==n&&e!==n-1;o("historyUndo",e>0),o("historyRedo",i)},o=function(e,n){var i=t.$box.find(".trumbowyg-"+e+"-button");n?i.removeClass("trumbowyg-disable"):i.hasClass("trumbowyg-disable")||i.addClass("trumbowyg-disable")},a=function(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n+=1)if(e[n]!==t[n])return!1;return!0},s=function(){var e=t.doc.getSelection().focusNode,n=t.doc.createRange();e.childNodes.length>0&&(n.setStartAfter(e.childNodes[e.childNodes.length-1]),n.setEndAfter(e.childNodes[e.childNodes.length-1]),t.doc.getSelection().removeAllRanges(),t.doc.getSelection().addRange(n))};t.$c.on("tbwinit tbwchange",(function(){var n,i,o=t.o.plugins.history._index,s=t.o.plugins.history._stack,l=s.slice(-1)[0]||"<p></p>",c=s[o],u=t.$ed.html(),d=t.doc.getSelection().focusNode,h="",f=t.o.plugins.history._focusEl;n=e("<div>"+l+"</div>").find("*").map((function(){return this.localName})),i=e("<div>"+u+"</div>").find("*").map((function(){return this.localName})),d&&(t.o.plugins.history._focusEl=d,h=d.outerHTML||d.textContent),u!==c&&(h.slice(-1).match(/\s/)||!a(n,i)||t.o.plugins.history._index<=0||d!==f?(t.o.plugins.history._index+=1,t.o.plugins.history._stack=s.slice(0,t.o.plugins.history._index),t.o.plugins.history._stack.push(u)):t.o.plugins.history._stack[o]=u,r())})),t.addBtnDef("historyRedo",n),t.addBtnDef("historyUndo",i)}}}})}(jQuery),define("trumbowyg.history",["trumbowyg"],(function(){})),function(e){"use strict";function t(t){var n=t.o.plugins.templates,i=[];return e.each(n,(function(e,n){t.addBtnDef("template_"+e,{fn:function(){t.execCmd("insertHTML",n.html)},hasIcon:!1,title:n.name}),i.push("template_"+e)})),i}e.extend(!0,e.trumbowyg,{langs:{en:{template:"Template"},da:{template:"Skabelon"},fr:{template:"Patron"},nl:{template:"Sjabloon"},ru:{template:"Ð¨Ð°Ð±Ð»Ð¾Ð½"},ja:{template:"ãã³ãã¬ã¼ã"},tr:{template:"Åablon"},zh_tw:{template:"æ¨¡æ¿"},pt_br:{template:"Modelo"},ko:{template:"ìì"}}}),e.extend(!0,e.trumbowyg,{plugins:{template:{shouldInit:function(e){return e.o.plugins.hasOwnProperty("templates")},init:function(e){e.addBtnDef("template",{dropdown:t(e),hasIcon:!1,text:e.lang.template})}}}})}(jQuery),define("trumbowyg.template",["trumbowyg"],(function(){})),define("pgui.editors/html",["pgui.editors/plain","underscore","trumbowyg","trumbowyg.colors","trumbowyg.specialchars","trumbowyg.base64","trumbowyg.fontfamily","trumbowyg.fontsize","trumbowyg.table","trumbowyg.preformatted","trumbowyg.history","trumbowyg.template"],(function(e){return $.trumbowyg.svgPath="components/assets/img/vendor/trumbowyg/trumbowyg-icons.svg",e.extend({init:function(e,t){this._super(e,t);var n=this,i=[];e.closest(".form-group").find(".html-templates").children().each((function(e,t){var n=$(t);i.push({name:n.data("template-name"),html:n.html()})})),e.trumbowyg({resetCss:!0,btnsDef:{image:{dropdown:["insertImage","base64"],ico:"insertImage"}},btns:[["viewHTML"],["historyUndo","historyRedo"],["formatting"],["strong","em","underline","del"],["superscript","subscript"],["fontfamily","fontsize"],["justifyLeft","justifyCenter","justifyRight","justifyFull"],["unorderedList","orderedList"],["link"],["table","image","specialChars"],["template"],["foreColor","backColor"],"btnGrp-justify","btnGrp-lists",["preformatted"],["horizontalRule"],["removeformat"],["fullscreen"]],plugins:{templates:i}}),this.rootElement.on("tbwchange",(function(){n.doChanged()}))},getValue:function(e){return this.rootElement.trumbowyg("html")},setValue:function(e){return this.rootElement.trumbowyg("html",e),this},setEnabled:function(e){return this._super(e),this.rootElement.trumbowyg(e?"enable":"disable"),this},setReadonly:function(e){return this._super(e),this.setEnabled(!e),this},destroy:function(){this.rootElement.trumbowyg("destroy")}})})),define("pgui.editors/image_uploader",["pgui.editors/plain"],(function(e){return e.extend({init:function(e,t){this._super(e,t);var n=e.closest(".form-group"),i=n.find(".btn-group[data-toggle-name]"),r=n.find("[name="+i.data("toggle-name")+"]");this.$replaceButton=i.find(".js-replace").first(),this.$image=n.find("img").first(),this.isImageBased=1==this.$image.length,this.oldImageSource=this.$image.attr("src"),this.newImageSource=this.oldImageSource;var o=this;i.on("click","button",(function(){i.find("button").removeClass("active");var e=$(this).addClass("active");r.val(e.val()),o.isImageBased&&o._setImageProperties(e.val())})),i.find("button[value="+r.val()+"]").addClass("active")},doChanged:function(){this.isImageBased?this._processNewImage():(this.$replaceButton.prop("disabled",!1),this.$replaceButton.click()),this._super()},_setImageProperties:function(e){this.$image.toggle("Remove"!=e),"Keep"==e?this.$image.attr("src",this.oldImageSource):"Replace"==e&&this.$image.attr("src",this.newImageSource)},_processNewImage:function(){var e=this,t=new FileReader;t.addEventListener("load",(function(){e.newImageSource=t.result,e.$replaceButton.prop("disabled",!1),e.$replaceButton.click()}),!1);var n=this.rootElement.get(0).files[0];n&&t.readAsDataURL(n)}})})),define("pgui.editors/multivalue_select",["underscore","pgui.editors/custom","libs/select2","locales/select2_locale"],(function(e,t){return t.extend({init:function(t,n){this._super(t,n);var i=this,r=$(t),o=r.attr("data-max-selection-size"),a=r.attr("data-placeholder");r.select2({width:"100%",maximumSelectionSize:o,placeholder:a}),r.attr("readonly")&&this.setReadonly(!0),$("label[for="+r.attr("id")+"]").on("click",(function(){r.select2("focus")})),r.on("change",(function(){if("function"==typeof r.valid){var t=$(this.form);t.length&&e.keys(t.data("validator").submitted).length&&r.valid()}i.doChanged()}))},getValue:function(){return this.rootElement.select2("val")},getDisplayValue:function(){return e.map(this.rootElement.select2("data"),(function(e){return e.text}))},setValue:function(t){return t.split?this.rootElement.select2("val",t.split(",")):e.isArray(t)?this.rootElement.select2("val",t):console.error("'value' must be string or array, '"+typeof t+"' given"),this},getEnabled:function(){return!this.rootElement.prop("disabled")},setEnabled:function(e){return this.rootElement.prop("disabled",!e),this.rootElement.select2("enable",!!e),this},getReadonly:function(){return!!this.rootElement.data("readonly")},setReadonly:function(e){return this.rootElement.select2("readonly",!!e),this.rootElement.data("readonly",!!e),this},addItem:function(e,t){return this.rootElement.append($("<option value='"+e+"'>"+t+"</option>")),this},removeItem:function(e){return this.rootElement.find("option[value="+e+"]").remove(),this},getItems:function(){return this.rootElement.find("option").map((function(e,t){var n=$(t);return{value:n.val(),caption:n.text()}}))},getItemCount:function(){return this.rootElement.find("option").length},clear:function(){return this.rootElement.find("option").remove(),this},isMultivalue:function(){return!0}})})),define("pgui.editors/remote_multivalue_select",["underscore","pgui.editors/custom","libs/select2","locales/select2_locale"],(function(e,t){return t.extend({init:function(t,n){this.queryFunction=function(e){return{term:e}},this._super(t,n);var i=$(t),r=i.attr("data-max-selection-size"),o=this;this.bind("submit.pgui.nested-insert",function(e,t,n){var i=this.getValue(),r=n[e.data("stored-field-name")];i.push(r.toString()),this.setValue(i)}.bind(this)),i.on("change",this.doChanged.bind(this)),i.select2({multiple:!0,maximumSelectionSize:r,ajax:{url:i.attr("data-url"),dataType:"json",results:function(e){return{results:$.map(e,(function(e){return{id:e.id,text:e.value,fields:e.fields}}))}},data:function(e){return o.queryFunction(e)}},initSelection:function(t,n){if(0!==t.val().length){var r=t.val().split(","),a=[];e.each(r,(function(e,t){a.push({id:e})}));var s=0;e.each(r,(function(e,t){$.ajax({url:i.data("url"),data:{id:e},dataType:"json"}).done((function(i){$.each(i,(function(i,l){if(l.id==e)return s++,a[t].text=l.value,a[t].fields=l.fields,s===r.length&&(n(a),o.rootElement.trigger("select2-init")),!1}))}))}))}else n([])},width:"100%"})},getValue:function(){return this.rootElement.select2("val")},getDisplayValue:function(){return e.map(this.rootElement.select2("data"),(function(e){return e.text}))},setValue:function(t){return t.split?this.rootElement.select2("val",t.split(",")):e.isArray(t)?this.rootElement.select2("val",t):console.error("'value' must be string or array, '"+typeof t+"' given"),this},getEnabled:function(){return!this.rootElement.prop("disabled")},setEnabled:function(e){return this.rootElement.prop("disabled",!e),this.rootElement.select2("enable",!!e),this},getReadonly:function(){return!!this.rootElement.data("readonly")},setReadonly:function(e){return this.rootElement.select2("readonly",!!e),this.rootElement.data("readonly",!!e),this},isMultivalue:function(){return!0},setQueryFunction:function(e){return this.queryFunction=e,this}})})),define("pgui.editors/radio",["pgui.editors/custom","underscore"],(function(e,t){var n='<input type="radio" name="<%=editorName%>" value="<%=value%>"><%=caption%>',i=t.template('<div class="radio js-value"><label>'+n+"</label></div>"),r=t.template('<label class="radio-inline js-value">'+n+"</label>");return e.extend({init:function(e,n){this._super(e,n),this.rootElement.find("input").change(t.bind((function(){this.doChanged()}),this)),this.bind("submit.pgui.nested-insert",function(e,t,n){this.addItem(t,n[e.data("display-field-name")]),this.setValue(t)}.bind(this))},getValue:function(){return this.rootElement.find("input:checked").val()},setValue:function(e){return this.rootElement.find("input").each((function(t,n){$(n).attr("value")==e&&$(n).prop("checked",!0)})),this},getEnabled:function(){return this.rootElement.find("input:enabled").length>0},setEnabled:function(e){return this.rootElement.find("input").each((function(t,n){e?$(n).removeAttr("disabled"):$(n).attr("disabled",!0)})),this},getReadonly:function(){return 1===this.rootElement.find("input:enabled").length},setReadonly:function(e){return this.rootElement.find("input").each((function(t,n){e?$(n).attr("checked")||$(n).attr("disabled",!0):$(n).removeAttr("disabled")})),this},clear:function(){return this.rootElement.find(".radio, .radio-inline").remove(),this},addItem:function(e,t){var n=this.rootElement,o=n.data("inline"),a={editorName:n.attr("data-editor-name"),value:e,caption:t},s=$(o?r(a):i(a));return this.getItemCount()>0?n.find(".js-value").last().after(s):n.prepend(s),this},removeItem:function(e){return this.rootElement.find("input[value='"+e+"']").parent().remove(),this},getItems:function(){return this.rootElement.find("input").map((function(e,t){return{value:$(t).attr("value"),caption:$(t).closest("label").text()}}))},getItemCount:function(){return this.rootElement.find("input").length},getCaption:function(){return this.rootElement.find("input:checked").parent().text()},_getSetRequiredTarget:function(){return this.rootElement.find("input[type=radio]")}})})),define("pgui.editors/text",["pgui.editors/plain"],(function(e){return e.extend({getPlaceholder:function(){return this._getAttribute("placeholder")},setPlaceholder:function(e){return this._setAttribute("placeholder",e),this}})})),function(e){"function"==typeof define&&define.amd?define("jquery.maskedinput",["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}((function(e){var t,n=navigator.userAgent,i=/iphone/i.test(n),r=/chrome/i.test(n),o=/android/i.test(n);e.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},autoclear:!0,dataName:"rawMaskFn",placeholder:"_"},e.fn.extend({caret:function(e,t){var n;if(0!==this.length&&!this.is(":hidden"))return"number"==typeof e?(t="number"==typeof t?t:e,this.each((function(){this.setSelectionRange?this.setSelectionRange(e,t):this.createTextRange&&((n=this.createTextRange()).collapse(!0),n.moveEnd("character",t),n.moveStart("character",e),n.select())}))):(this[0].setSelectionRange?(e=this[0].selectionStart,t=this[0].selectionEnd):document.selection&&document.selection.createRange&&(n=document.selection.createRange(),e=0-n.duplicate().moveStart("character",-1e5),t=e+n.text.length),{begin:e,end:t})},unmask:function(){return this.trigger("unmask")},mask:function(n,a){var s,l,c,u,d,h,f;if(!n&&this.length>0){var p=e(this[0]).data(e.mask.dataName);return p?p():void 0}return a=e.extend({autoclear:e.mask.autoclear,placeholder:e.mask.placeholder,completed:null},a),s=e.mask.definitions,l=[],c=h=n.length,u=null,e.each(n.split(""),(function(e,t){"?"==t?(h--,c=e):s[t]?(l.push(new RegExp(s[t])),null===u&&(u=l.length-1),c>e&&(d=l.length-1)):l.push(null)})),this.trigger("unmask").each((function(){function p(){if(a.completed){for(var e=u;d>=e;e++)if(l[e]&&_[e]===m(e))return;a.completed.call(C)}}function m(e){return a.placeholder.charAt(e<a.placeholder.length?e:0)}function g(e){for(;++e<h&&!l[e];);return e}function v(e,t){var n,i;if(!(0>e)){for(n=e,i=g(t);h>n;n++)if(l[n]){if(!(h>i&&l[n].test(_[i])))break;_[n]=_[i],_[i]=m(i),i=g(i)}w(),C.caret(Math.max(u,e))}}function b(){x(),C.val()!=E&&C.change()}function y(e,t){var n;for(n=e;t>n&&h>n;n++)l[n]&&(_[n]=m(n))}function w(){C.val(_.join(""))}function x(e){var t,n,i,r=C.val(),o=-1;for(t=0,i=0;h>t;t++)if(l[t]){for(_[t]=m(t);i++<r.length;)if(n=r.charAt(i-1),l[t].test(n)){_[t]=n,o=t;break}if(i>r.length){y(t+1,h);break}}else _[t]===r.charAt(i)&&i++,c>t&&(o=t);return e?w():c>o+1?a.autoclear||_.join("")===k?(C.val()&&C.val(""),y(0,h)):w():(w(),C.val(C.val().substring(0,o+1))),c?t:u}var C=e(this),_=e.map(n.split(""),(function(e,t){return"?"!=e?s[e]?m(t):e:void 0})),k=_.join(""),E=C.val();C.data(e.mask.dataName,(function(){return e.map(_,(function(e,t){return l[t]&&e!=m(t)?e:null})).join("")})),C.one("unmask",(function(){C.off(".mask").removeData(e.mask.dataName)})).on("focus.mask",(function(){var e;C.prop("readonly")||(clearTimeout(t),E=C.val(),e=x(),t=setTimeout((function(){C.get(0)===document.activeElement&&(w(),e==n.replace("?","").length?C.caret(0,e):C.caret(e))}),10))})).on("blur.mask",b).on("keydown.mask",(function(e){if(!C.prop("readonly")){var t,n,r,o=e.which||e.keyCode;f=C.val(),8===o||46===o||i&&127===o?(n=(t=C.caret()).begin,(r=t.end)-n==0&&(n=46!==o?function(e){for(;--e>=0&&!l[e];);return e}(n):r=g(n-1),r=46===o?g(r):r),y(n,r),v(n,r-1),e.preventDefault()):13===o?b.call(this,e):27===o&&(C.val(E),C.caret(0,x()),e.preventDefault())}})).on("keypress.mask",(function(t){if(!C.prop("readonly")){var n,i,r,a=t.which||t.keyCode,s=C.caret();if(!(t.ctrlKey||t.altKey||t.metaKey||32>a)&&a&&13!==a){if(s.end-s.begin!=0&&(y(s.begin,s.end),v(s.begin,s.end-1)),n=g(s.begin-1),h>n&&(i=String.fromCharCode(a),l[n].test(i))){if(function(e){var t,n,i,r;for(t=e,n=m(e);h>t;t++)if(l[t]){if(i=g(t),r=_[t],_[t]=n,!(h>i&&l[i].test(r)))break;n=r}}(n),_[n]=i,w(),r=g(n),o){setTimeout((function(){e.proxy(e.fn.caret,C,r)()}),0)}else C.caret(r);s.begin<=d&&p()}t.preventDefault()}}})).on("input.mask paste.mask",(function(){C.prop("readonly")||setTimeout((function(){var e=x(!0);C.caret(e),p()}),0)})),r&&o&&C.off("input.mask").on("input.mask",(function(){var e=C.val(),t=C.caret();if(f&&f.length&&f.length>e.length){for(x(!0);t.begin>0&&!l[t.begin-1];)t.begin--;if(0===t.begin)for(;t.begin<u&&!l[t.begin];)t.begin++;C.caret(t.begin,t.begin)}else{for(x(!0);t.begin<h&&!l[t.begin];)t.begin++;C.caret(t.begin,t.begin)}p()})),x()}))}})})),define("pgui.editors/mask",["pgui.editors/plain","jquery.maskedinput"],(function(e){return e.extend({init:function(e,t){this._super(e,t),""!=e.attr("mask")&&e.mask(e.attr("mask"))}})})),define("pgui.editors/cascading_combobox",["pgui.editors/custom","pgui.editors/combobox","jquery.query"],(function(e,t){return e.extend({init:function(e,t){this.levels=[],this._processElement(e),this._super(e,t),this.setReadonly(this.getReadonly()),this.bind("submit.pgui.nested-insert",function(e,t,n){for(var i=e.closest(".input-group").find("select"),r=0;r<this.levels.length;r++)this.levels[r].rootElement.attr("data-id")==i.attr("data-id")&&(this._addLevelValue(this.levels[r],e,t,n[e.data("display-field-name")]),r==this.levels.length-1&&this.doChanged())}.bind(this))},_processElement:function(e){var n=$(e),i=this,r=n.find("select");r.each((function(e,n){var r=$(n);i.levels.push(new t(r))}));for(var o=0;o<i.levels.length;o++)!function(){var e=i.levels[o],t=o-1<0?null:i.levels[o-1];if(t){var n=e.rootElement.closest("td").find(".js-nested-insert");i.updateNestedInsertLink(t,e,n),e.setEnabled(t.getValue()&&t.getEnabled()),n.prop("disabled",!e.getEnabled()),t.onChange((function(){var r=this.getValue()&&this.getEnabled();e.setEnabled(!1),n.prop("disabled",!0),e.clear(),e.doChanged(),r&&$.ajax({url:e.rootElement.data("url"),data:{term2:t.getValue()},dataType:"json"}).done((function(r){$.each(r,(function(t,n){e.addItem(n.id,n.value)})),e.setEnabled(!0),n.prop("disabled",!1),i.updateNestedInsertLink(t,e,n)}))}))}}();r.eq(r.length-1).on("change",(function(){i.doChanged()}))},_addLevelValue:function(e,t,n,i){e.addItem(n,i),e.setValue(n),e.doChanged()},updateNestedInsertLink:function(e,t,n){if(e.getValue()&&n.length>0){var i=jQuery.query.load(n.data("content-link")).set("parent-field-name",t.rootElement.data("parent-link-field-name")).set("parent-field-value",e.getValue()).toString();n.data("content-link",i)}},_getMainControl:function(){return this.rootElement.find("[data-editor-main]")},getValue:function(){return this._getMainControl().val()},setReadonly:function(e){e?(this.rootElement.attr("readonly","readonly"),this.rootElement.find(".js-nested-insert").attr("disabled","disabled")):(this.rootElement.removeAttr("readonly"),this.rootElement.find(".js-nested-insert").removeAttr("disabled"));for(var t=0;t<this.levels.length;t++){this.levels[t].setReadonly(e)}return this},getReadonly:function(){return Boolean(this.rootElement.attr("readonly"))}})})),define("pgui.editors/dynamic_cascading_combobox",["underscore","pgui.editors/custom","pgui.editors/select2_format","locales/select2_locale","libs/select2"],(function(e,t,n){return t.extend({init:function(e,t){this._super(e,t),this.formatFunctions=new n,this._processElement(e),this.bind("submit.pgui.nested-insert",function(e,t,n){var i=e.closest(".input-group").find("input[name]");i.length>0&&this.setLevelValue(i,t,n[e.data("display-field-name")])}.bind(this))},_processElement:function(e){var t=$(e),n=this,i=t.find("input");i.each((function(e,i){var r=$(i),o=r.data("parent-level"),a=t.find("[data-id="+o+"]"),s=r.closest(".input-group").find(".js-nested-insert"),l=function(){var e=!a.val()||a.prop("readonly");r.prop("readonly",e),r.select2("readonly",e),s.prop("disabled",e),a.length>0&&n.updateNestedInsertLink(a,r,s)};o&&a&&(a.on("change select2-data-change",(function(){l(),r.trigger("change",!r.val()),r.select2("val",null)})),l()),n.formatFunctions.setFormatCallbacksFromElement(r,e),r.select2({ajax:{url:r.attr("data-url"),data:function(e){var t={term:e};return o&&(t.term2=a.val()),t},dataType:"json",method:"GET",results:function(e){return{results:$.map(e,(function(e){return{id:e.id,text:e.value}}))}}},initSelection:function(e,t){t({id:e.val(),text:e.data("init-text")})},width:"resolve",allowClear:r.data("allowclear"),minimumInputLength:r.data("minimal-input-length"),formatSelection:n.formatFunctions.getFormatClojure("selection",e),formatResult:n.formatFunctions.getFormatClojure("result",e)})})),i.eq(i.length-1).on("change",(function(e,t){n.setState("normal"),t||n.doChanged()}))},_getMainControl:function(){return this.rootElement.find("[data-multileveledit-main]")},getValue:function(){return this._getMainControl().val()},getData:function(){return this.rootElement.find("input[type=hidden]").map((function(e,t){return $(t).select2("data")}))},setData:function(e){return this.rootElement.find("input[type=hidden]").each(function(t,n){e[t]&&$(n).select2("data",e[t]).trigger("select2-data-change")}.bind(this)),this},getEnabled:function(){return!this.rootElement.find("input[name]").first().prop("disabled")},setEnabled:function(e){var t=this.rootElement.find("input[name]");return t.prop("disabled",!e),t.select2("enable",!!e),this},getReadonly:function(){return!!this.rootElement.find("input[name]").first().prop("readonly")},setReadonly:function(e){var t=this.rootElement.find("input[name]");return t.prop("readonly",!!e),t.select2("readonly",!!e),this},setFormatSelection:function(e,t){return this.formatFunctions.setCallback("selection",t,e),this._triggerChangeLevel(e),this},setFormatResult:function(e,t){return this.formatFunctions.setCallback("result",t,e),this._triggerChangeLevel(e),this},_getSetRequiredTarget:function(){return this.rootElement.find("input[data-id]").last()},_triggerChangeLevel:function(e){var t=$(this.rootElement).find("input[type=hidden]").eq(e);t?t.select2&&t.select2("data",t.select2("data")):console.error("invalid level "+e)},setLevelValue:function(e,t,n){e.val(t),e.data("init-text",n),e.select2&&(e.select2("val",e.val()),e.trigger("change"))},updateNestedInsertLink:function(e,t,n){if(e.val()&&n.length>0){var i=jQuery.query.load(n.data("content-link")).set("parent-field-name",t.data("parent-link-field-name")).set("parent-field-value",e.val()).toString();n.data("content-link",i)}}})})),define("pgui.editors/static_editor",["pgui.editors/custom"],(function(e){return e.extend({getValue:function(){return this.rootElement.html()},setValue:function(e){return this.rootElement.html(e),this}})})),
/*!
 * bootstrap-fileinput v4.4.7
 * http://plugins.krajee.com/file-input
 *
 * Author: Kartik Visweswaran
 * Copyright: 2014 - 2017, Kartik Visweswaran, Krajee.com
 *
 * Licensed under the BSD 3-Clause
 * https://github.com/kartik-v/bootstrap-fileinput/blob/master/LICENSE.md
 */
function(e){"use strict";"function"==typeof define&&define.amd?define("bootstrap-file-input",["jquery"],e):"object"==typeof module&&module.exports?module.exports=e(require("jquery")):e(window.jQuery)}((function(e){"use strict";var t,n;e.fn.fileinputLocales={},e.fn.fileinputThemes={},String.prototype.setTokens=function(e){var t,n,i=this.toString();for(t in e)e.hasOwnProperty(t)&&(n=new RegExp("{"+t+"}","g"),i=i.replace(n,e[t]));return i},t={FRAMES:".kv-preview-thumb",SORT_CSS:"file-sortable",OBJECT_PARAMS:'<param name="controller" value="true" />\n<param name="allowFullScreen" value="true" />\n<param name="allowScriptAccess" value="always" />\n<param name="autoPlay" value="false" />\n<param name="autoStart" value="false" />\n<param name="quality" value="high" />\n',DEFAULT_PREVIEW:'<div class="file-preview-other">\n<span class="{previewFileIconClass}">{previewFileIcon}</span>\n</div>',MODAL_ID:"kvFileinputModal",MODAL_EVENTS:["show","shown","hide","hidden","loaded"],objUrl:window.URL||window.webkitURL,compare:function(e,t,n){return void 0!==e&&(n?e===t:e.match(t))},isIE:function(e){if("Microsoft Internet Explorer"!==navigator.appName)return!1;if(10===e)return new RegExp("msie\\s"+e,"i").test(navigator.userAgent);var t,n=document.createElement("div");return n.innerHTML="\x3c!--[if IE "+e+"]> <i></i> <![endif]--\x3e",t=n.getElementsByTagName("i").length,document.body.appendChild(n),n.parentNode.removeChild(n),t},initModal:function(t){var n=e("body");n.length&&t.appendTo(n)},isEmpty:function(t,n){return null==t||0===t.length||n&&""===e.trim(t)},isArray:function(e){return Array.isArray(e)||"[object Array]"===Object.prototype.toString.call(e)},ifSet:function(e,t,n){return n=n||"",t&&"object"==typeof t&&e in t?t[e]:n},cleanArray:function(e){return e instanceof Array||(e=[]),e.filter((function(e){return null!=e}))},spliceArray:function(e,t){var n,i=0,r=[];if(!(e instanceof Array))return[];for(n=0;n<e.length;n++)n!==t&&(r[i]=e[n],i++);return r},getNum:function(e,t){return t=t||0,"number"==typeof e?e:("string"==typeof e&&(e=parseFloat(e)),isNaN(e)?t:e)},hasFileAPISupport:function(){return!(!window.File||!window.FileReader)},hasDragDropSupport:function(){var e=document.createElement("div");return!t.isIE(9)&&(void 0!==e.draggable||void 0!==e.ondragstart&&void 0!==e.ondrop)},hasFileUploadSupport:function(){return t.hasFileAPISupport()&&window.FormData},hasBlobSupport:function(){try{return!!window.Blob&&Boolean(new Blob)}catch(e){return!1}},hasArrayBufferViewSupport:function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(e){return!1}},dataURI2Blob:function(e){var n,i,r,o,a,s,l=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,c=t.hasBlobSupport();if(!((c||l)&&window.atob&&window.ArrayBuffer&&window.Uint8Array))return null;for(n=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):decodeURIComponent(e.split(",")[1]),i=new ArrayBuffer(n.length),r=new Uint8Array(i),o=0;o<n.length;o+=1)r[o]=n.charCodeAt(o);return a=e.split(",")[0].split(":")[1].split(";")[0],c?new Blob([t.hasArrayBufferViewSupport()?r:i],{type:a}):((s=new l).append(i),s.getBlob(a))},arrayBuffer2String:function(e){if(window.TextDecoder)return new TextDecoder("utf-8").decode(e);var t,n,i,r,o=Array.prototype.slice.apply(new Uint8Array(e)),a="",s=0;for(t=o.length;s<t;)switch((n=o[s++])>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:a+=String.fromCharCode(n);break;case 12:case 13:i=o[s++],a+=String.fromCharCode((31&n)<<6|63&i);break;case 14:i=o[s++],r=o[s++],a+=String.fromCharCode((15&n)<<12|(63&i)<<6|63&r)}return a},isHtml:function(e){var t=document.createElement("div");t.innerHTML=e;for(var n=t.childNodes,i=n.length;i--;)if(1===n[i].nodeType)return!0;return!1},isSvg:function(e){return e.match(/^\s*<\?xml/i)&&(e.match(/<!DOCTYPE svg/i)||e.match(/<svg/i))},getMimeType:function(e,t,n){switch(e){case"ffd8ffe0":case"ffd8ffe1":case"ffd8ffe2":return"image/jpeg";case"89504E47":return"image/png";case"47494638":return"image/gif";case"49492a00":return"image/tiff";case"52494646":return"image/webp";case"66747970":return"video/3gp";case"4f676753":return"video/ogg";case"1a45dfa3":return"video/mkv";case"000001ba":case"000001b3":return"video/mpeg";case"3026b275":return"video/wmv";case"25504446":return"application/pdf";case"25215053":return"application/ps";case"504b0304":case"504b0506":case"504b0508":return"application/zip";case"377abcaf":return"application/7z";case"75737461":return"application/tar";case"7801730d":return"application/dmg";default:switch(e.substring(0,6)){case"435753":return"application/x-shockwave-flash";case"494433":return"audio/mp3";case"425a68":return"application/bzip";default:switch(e.substring(0,4)){case"424d":return"image/bmp";case"fffb":return"audio/mp3";case"4d5a":return"application/exe";case"1f9d":case"1fa0":return"application/zip";case"1f8b":return"application/gzip";default:return t&&!t.match(/[^\u0000-\u007f]/)?"application/text-plain":n}}}},addCss:function(e,t){e.removeClass(t).addClass(t)},getElement:function(n,i,r){return t.isEmpty(n)||t.isEmpty(n[i])?r:e(n[i])},uniqId:function(){return Math.round((new Date).getTime())+"_"+Math.round(100*Math.random())},htmlEncode:function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")},replaceTags:function(t,n){var i=t;return n?(e.each(n,(function(e,t){"function"==typeof t&&(t=t()),i=i.split(e).join(t)})),i):i},cleanMemory:function(e){var n=e.is("img")?e.attr("src"):e.find("source").attr("src");t.objUrl.revokeObjectURL(n)},findFileName:function(e){var t=e.lastIndexOf("/");return-1===t&&(t=e.lastIndexOf("\\")),e.split(e.substring(t,t+1)).pop()},checkFullScreen:function(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement},toggleFullScreen:function(e){var n=document,i=n.documentElement;i&&e&&!t.checkFullScreen()?i.requestFullscreen?i.requestFullscreen():i.msRequestFullscreen?i.msRequestFullscreen():i.mozRequestFullScreen?i.mozRequestFullScreen():i.webkitRequestFullscreen&&i.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):n.exitFullscreen?n.exitFullscreen():n.msExitFullscreen?n.msExitFullscreen():n.mozCancelFullScreen?n.mozCancelFullScreen():n.webkitExitFullscreen&&n.webkitExitFullscreen()},moveArray:function(e,t,n){if(n>=e.length)for(var i=n-e.length;1+i--;)e.push(void 0);return e.splice(n,0,e.splice(t,1)[0]),e},cleanZoomCache:function(e){var t=e.closest(".kv-zoom-cache-theme");t.length||(t=e.closest(".kv-zoom-cache")),t.remove()},setOrientation:function(e,t){var n,i,r=new DataView(e),o=0,a=1;if(65496!==r.getUint16(o)||e.length<2)t&&t();else{for(o+=2,n=r.byteLength;o<n-2;)switch(i=r.getUint16(o),o+=2,i){case 65505:n=r.getUint16(o)-o,o+=2;break;case 274:a=r.getUint16(o+6,!1),n=0}t&&t(a)}},validateOrientation:function(e,n){if(window.FileReader&&window.DataView){var i,r=new FileReader;r.onloadend=function(){i=r.result,t.setOrientation(i,n)},r.readAsArrayBuffer(e)}},adjustOrientedImage:function(e,t){var n;e.hasClass("is-portrait-gt4")&&(t?e.css({width:e.parent().height()}):(e.css({height:"auto",width:e.height()}),n=e.parent().offset().top-e.offset().top,e.css("margin-top",n)))},closeButton:function(e){return'<button type="button" class="'+(e=e?"close "+e:"close")+'" aria-label="Close">\n  <span aria-hidden="true">&times;</span>\n</button>'}},(n=function(n,i){var r=this;r.$element=e(n),r.$parent=r.$element.parent(),r._validate()&&(r.isPreviewable=t.hasFileAPISupport(),r.isIE9=t.isIE(9),r.isIE10=t.isIE(10),(r.isPreviewable||r.isIE9)&&(r._init(i),r._listen()),r.$element.removeClass("file-loading"))}).prototype={constructor:n,_cleanup:function(){var e=this;e.reader=null,e.formdata={},e.uploadCount=0,e.uploadStatus={},e.uploadLog=[],e.uploadAsyncCount=0,e.loadedImages=[],e.totalImagesCount=0,e.ajaxRequests=[],e.clearStack(),e.fileInputCleared=!1,e.fileBatchCompleted=!0,e.isPreviewable||(e.showPreview=!1),e.isError=!1,e.ajaxAborted=!1,e.cancelling=!1},_init:function(n,i){var r,o,a,s,l=this,c=l.$element;l.options=n,e.each(n,(function(e,n){switch(e){case"minFileCount":case"maxFileCount":case"minFileSize":case"maxFileSize":case"maxFilePreviewSize":case"resizeImageQuality":case"resizeIfSizeMoreThan":case"progressUploadThreshold":case"initialPreviewCount":case"zoomModalHeight":case"minImageHeight":case"maxImageHeight":case"minImageWidth":case"maxImageWidth":l[e]=t.getNum(n);break;default:l[e]=n}})),l.rtl&&(s=l.previewZoomButtonIcons.prev,l.previewZoomButtonIcons.prev=l.previewZoomButtonIcons.next,l.previewZoomButtonIcons.next=s),i||l._cleanup(),l.$form=c.closest("form"),l._initTemplateDefaults(),l.uploadFileAttr=t.isEmpty(c.attr("name"))?"file_data":c.attr("name"),a=l._getLayoutTemplate("progress"),l.progressTemplate=a.replace("{class}",l.progressClass),l.progressCompleteTemplate=a.replace("{class}",l.progressCompleteClass),l.progressErrorTemplate=a.replace("{class}",l.progressErrorClass),l.dropZoneEnabled=t.hasDragDropSupport()&&l.dropZoneEnabled,l.isDisabled=c.attr("disabled")||c.attr("readonly"),l.isDisabled&&c.attr("disabled",!0),l.isAjaxUpload=t.hasFileUploadSupport()&&!t.isEmpty(l.uploadUrl),l.isClickable=l.browseOnZoneClick&&l.showPreview&&(l.isAjaxUpload&&l.dropZoneEnabled||!t.isEmpty(l.defaultPreviewContent)),l.slug="function"==typeof n.slugCallback?n.slugCallback:l._slugDefault,l.mainTemplate=l.showCaption?l._getLayoutTemplate("main1"):l._getLayoutTemplate("main2"),l.captionTemplate=l._getLayoutTemplate("caption"),l.previewGenericTemplate=l._getPreviewTemplate("generic"),!l.imageCanvas&&l.resizeImage&&(l.maxImageWidth||l.maxImageHeight)&&(l.imageCanvas=document.createElement("canvas"),l.imageCanvasContext=l.imageCanvas.getContext("2d")),t.isEmpty(c.attr("id"))&&c.attr("id",t.uniqId()),l.namespace=".fileinput_"+c.attr("id").replace(/-/g,"_"),void 0===l.$container?l.$container=l._createContainer():l._refreshContainer(),o=l.$container,l.$dropZone=o.find(".file-drop-zone"),l.$progress=o.find(".kv-upload-progress"),l.$btnUpload=e(".fileinput-upload"),l.$captionContainer=t.getElement(n,"elCaptionContainer",o.find(".file-caption")),l.$caption=t.getElement(n,"elCaptionText",o.find(".file-caption-name")),t.isEmpty(l.msgPlaceholder)||(r=c.attr("multiple")?l.filePlural:l.fileSingle,l.$caption.attr("placeholder",l.msgPlaceholder.replace("{files}",r))),l.$captionIcon=l.$captionContainer.find(".file-caption-icon"),l.mainClass.indexOf("input-group-lg")>-1?t.addCss(l.$captionIcon,"icon-lg"):l.$captionIcon.removeClass("icon-lg"),l.$previewContainer=t.getElement(n,"elPreviewContainer",o.find(".file-preview")),l.$preview=t.getElement(n,"elPreviewImage",o.find(".file-preview-thumbnails")),l.$previewStatus=t.getElement(n,"elPreviewStatus",o.find(".file-preview-status")),l.$errorContainer=t.getElement(n,"elErrorContainer",l.$previewContainer.find(".kv-fileinput-error")),l._validateDisabled(),t.isEmpty(l.msgErrorClass)||t.addCss(l.$errorContainer,l.msgErrorClass),i||(l.$errorContainer.hide(),l.previewInitId="preview-"+t.uniqId(),l._initPreviewCache(),l._initPreview(!0),l._initPreviewActions(),l._setFileDropZoneTitle(),l.$parent.hasClass("file-loading")&&(l.$container.insertBefore(l.$parent),l.$parent.remove())),c.attr("disabled")&&l.disable(),l._initZoom(),l.hideThumbnailContent&&t.addCss(l.$preview,"hide-content")},_initTemplateDefaults:function(){var n,i,r,o,a,s,l,c,u,d,h=this;n=t.closeButton("fileinput-remove"),i='<div id="'+t.MODAL_ID+'" class="file-zoom-dialog modal fade" tabindex="-1" aria-labelledby="'+t.MODAL_ID+'Label"></div>',o=(r='<div class="file-preview-frame {frameClass}" id="{previewId}" data-fileindex="{fileindex}" data-template="{template}"')+'><div class="kv-file-content">\n',a=r+' title="{caption}"><div class="kv-file-content">\n',s='<video class="kv-preview-data file-preview-video" controls {style}>\n<source src="{data}" type="{type}">\n'+t.DEFAULT_PREVIEW+"\n</video>\n",l='<audio class="kv-preview-data file-preview-audio" controls {style}>\n<source src="{data}" type="{type}">\n'+t.DEFAULT_PREVIEW+"\n</audio>\n",c='<object class="kv-preview-data file-preview-object file-object {typeCss}" data="{data}" type="{type}" {style}>\n<param name="movie" value="{caption}" />\n'+t.OBJECT_PARAMS+" "+t.DEFAULT_PREVIEW+"\n</object>\n",u='<div class="kv-preview-data file-preview-other-frame" {style}>\n'+t.DEFAULT_PREVIEW+"\n</div>\n",d={width:"100%",height:"100%","min-height":"480px"},h.defaults={layoutTemplates:{main1:'{preview}\n<div class="kv-upload-progress kv-hidden"></div><div class="clearfix"></div>\n<div class="input-group {class}">\n  {caption}\n<div class="input-group-btn">\n      {remove}\n      {cancel}\n      {upload}\n      {browse}\n    </div>\n</div>',main2:'{preview}\n<div class="kv-upload-progress kv-hidden"></div>\n<div class="clearfix"></div>\n{remove}\n{cancel}\n{upload}\n{browse}\n',preview:'<div class="file-preview {class}">\n    {close}    <div class="{dropClass}">\n    <div class="file-preview-thumbnails">\n    </div>\n    <div class="clearfix"></div>    <div class="file-preview-status text-center text-success"></div>\n    <div class="kv-fileinput-error"></div>\n    </div>\n</div>',close:n,fileIcon:'<i class="icon-file"></i>',caption:'<div class="file-caption form-control {class}" tabindex="500">\n  <span class="file-caption-icon"></span>\n  <input class="file-caption-name" onkeydown="return false;" onpaste="return false;">\n</div>',modalMain:i,modal:'<div class="modal-dialog modal-lg{rtl}" role="document">\n  <div class="modal-content">\n    <div class="modal-header">\n      <h5 class="modal-title">{heading}</h5>\n      <span class="kv-zoom-title"></span>\n      <div class="kv-zoom-actions">{toggleheader}{fullscreen}{borderless}{close}</div>\n    </div>\n    <div class="modal-body">\n      <div class="floating-buttons"></div>\n      <div class="kv-zoom-body file-zoom-content {zoomFrameClass}"></div>\n{prev} {next}\n    </div>\n  </div>\n</div>\n',progress:'<div class="progress">\n    <div class="{class}" role="progressbar" aria-valuenow="{percent}" aria-valuemin="0" aria-valuemax="100" style="width:{percent}%;">\n        {status}\n     </div>\n</div>',size:" <samp>({sizeText})</samp>",footer:'<div class="file-thumbnail-footer">\n    <div class="file-footer-caption" title="{caption}">\n        <div class="file-caption-info">{caption}</div>\n        <div class="file-size-info">{size}</div>\n    </div>\n    {progress}\n{indicator}\n{actions}\n</div>',indicator:"",actions:'<div class="file-actions">\n    <div class="file-footer-buttons">\n        {download} {upload} {delete} {zoom} {other}    </div>\n</div>\n{drag}\n<div class="clearfix"></div>',actionDelete:'<button type="button" class="kv-file-remove {removeClass}" title="{removeTitle}" {dataUrl}{dataKey}>{removeIcon}</button>\n',actionUpload:'<button type="button" class="kv-file-upload {uploadClass}" title="{uploadTitle}">{uploadIcon}</button>',actionDownload:'<a class="kv-file-download {downloadClass}" title="{downloadTitle}" href="{downloadUrl}" download="{caption}" target="_blank">{downloadIcon}</a>',actionZoom:'<button type="button" class="kv-file-zoom {zoomClass}" title="{zoomTitle}">{zoomIcon}</button>',actionDrag:'<span class="file-drag-handle {dragClass}" title="{dragTitle}">{dragIcon}</span>',btnDefault:'<button type="{type}" tabindex="500" title="{title}" class="{css}" {status}>{icon} {label}</button>',btnLink:'<a href="{href}" tabindex="500" title="{title}" class="{css}" {status}>{icon} {label}</a>',btnBrowse:'<div tabindex="500" class="{css}" {status}>{icon} {label}</div>',zoomCache:'<div class="kv-zoom-cache" style="display:none">{zoomContent}</div>'},previewMarkupTags:{tagBefore1:o,tagBefore2:a,tagAfter:"</div>{footer}\n</div>\n"},previewContentTemplates:{generic:"{content}\n",html:'<div class="kv-preview-data file-preview-html" title="{caption}" {style}>{data}</div>\n',image:'<img src="{data}" class="file-preview-image kv-preview-data" title="{caption}" alt="{caption}" {style}>\n',text:'<textarea class="kv-preview-data file-preview-text" title="{caption}" readonly {style}>{data}</textarea>\n',office:'<iframe class="kv-preview-data file-preview-office" src="https://docs.google.com/gview?url={data}&embedded=true" {style}></iframe>',video:s,audio:l,flash:'<embed class="kv-preview-data file-preview-flash" src="{data}" type="application/x-shockwave-flash" {style}>\n',object:c,pdf:'<embed class="kv-preview-data file-preview-pdf" src="{data}" type="application/pdf" {style}>\n',other:u},allowedPreviewTypes:["image","html","text","video","audio","flash","pdf","object"],previewTemplates:{},previewSettings:{image:{width:"auto",height:"auto","max-width":"100%","max-height":"100%"},html:{width:"213px",height:"160px"},text:{width:"213px",height:"160px"},office:{width:"213px",height:"160px"},video:{width:"213px",height:"160px"},audio:{width:"100%",height:"30px"},flash:{width:"213px",height:"160px"},object:{width:"213px",height:"160px"},pdf:{width:"213px",height:"160px"},other:{width:"213px",height:"160px"}},previewSettingsSmall:{image:{width:"auto",height:"auto","max-width":"100%","max-height":"100%"},html:{width:"100%",height:"160px"},text:{width:"100%",height:"160px"},office:{width:"100%",height:"160px"},video:{width:"100%",height:"auto"},audio:{width:"100%",height:"30px"},flash:{width:"100%",height:"auto"},object:{width:"100%",height:"auto"},pdf:{width:"100%",height:"160px"},other:{width:"100%",height:"160px"}},previewZoomSettings:{image:{width:"auto",height:"auto","max-width":"100%","max-height":"100%"},html:d,text:d,office:{width:"100%",height:"100%","max-width":"100%","min-height":"480px"},video:{width:"auto",height:"100%","max-width":"100%"},audio:{width:"100%",height:"30px"},flash:{width:"auto",height:"480px"},object:{width:"auto",height:"100%","max-width":"100%","min-height":"480px"},pdf:d,other:{width:"auto",height:"100%","min-height":"480px"}},fileTypeSettings:{image:function(e,n){return t.compare(e,"image.*")&&!t.compare(e,/(tiff?|wmf)$/i)||t.compare(n,/\.(gif|png|jpe?g)$/i)},html:function(e,n){return t.compare(e,"text/html")||t.compare(n,/\.(htm|html)$/i)},office:function(e,n){return t.compare(e,/(word|excel|powerpoint|office|iwork-pages|tiff?)$/i)||t.compare(n,/\.(rtf|docx?|xlsx?|pptx?|pps|potx?|ods|odt|pages|ai|dxf|ttf|tiff?|wmf|e?ps)$/i)},text:function(e,n){return t.compare(e,"text.*")||t.compare(n,/\.(xml|javascript)$/i)||t.compare(n,/\.(txt|md|csv|nfo|ini|json|php|js|css)$/i)},video:function(e,n){return t.compare(e,"video.*")&&(t.compare(e,/(ogg|mp4|mp?g|mov|webm|3gp)$/i)||t.compare(n,/\.(og?|mp4|webm|mp?g|mov|3gp)$/i))},audio:function(e,n){return t.compare(e,"audio.*")&&(t.compare(n,/(ogg|mp3|mp?g|wav)$/i)||t.compare(n,/\.(og?|mp3|mp?g|wav)$/i))},flash:function(e,n){return t.compare(e,"application/x-shockwave-flash",!0)||t.compare(n,/\.(swf)$/i)},pdf:function(e,n){return t.compare(e,"application/pdf",!0)||t.compare(n,/\.(pdf)$/i)},object:function(){return!0},other:function(){return!0}},fileActionSettings:{showRemove:!0,showUpload:!0,showDownload:!0,showZoom:!0,showDrag:!0,removeIcon:'<i class="glyphicon glyphicon-trash"></i>',removeClass:"btn btn-kv btn-default btn-outline-secondary",removeErrorClass:"btn btn-kv btn-danger",removeTitle:"Remove file",uploadIcon:'<i class="glyphicon glyphicon-upload"></i>',uploadClass:"btn btn-kv btn-default btn-outline-secondary",uploadTitle:"Upload file",uploadRetryIcon:'<i class="glyphicon glyphicon-repeat"></i>',uploadRetryTitle:"Retry upload",downloadIcon:'<i class="glyphicon glyphicon-download"></i>',downloadClass:"btn btn-kv btn-default btn-outline-secondary",downloadTitle:"Download file",zoomIcon:'<i class="glyphicon glyphicon-zoom-in"></i>',zoomClass:"btn btn-kv btn-default btn-outline-secondary",zoomTitle:"View Details",dragIcon:'<i class="glyphicon glyphicon-move"></i>',dragClass:"text-info",dragTitle:"Move / Rearrange",dragSettings:{},indicatorNew:'<i class="glyphicon glyphicon-plus-sign text-warning"></i>',indicatorSuccess:'<i class="glyphicon glyphicon-ok-sign text-success"></i>',indicatorError:'<i class="glyphicon glyphicon-exclamation-sign text-danger"></i>',indicatorLoading:'<i class="glyphicon glyphicon-hourglass text-muted"></i>',indicatorNewTitle:"Not uploaded yet",indicatorSuccessTitle:"Uploaded",indicatorErrorTitle:"Upload Error",indicatorLoadingTitle:"Uploading ..."}},e.each(h.defaults,(function(t,n){"allowedPreviewTypes"!==t?h[t]=e.extend(!0,{},n,h[t]):void 0===h.allowedPreviewTypes&&(h.allowedPreviewTypes=n)})),h._initPreviewTemplates()},_initPreviewTemplates:function(){var n,i=this,r=i.defaults,o=i.previewMarkupTags,a=o.tagAfter;e.each(r.previewContentTemplates,(function(e,r){t.isEmpty(i.previewTemplates[e])&&(n=o.tagBefore2,"generic"!==e&&"image"!==e&&"html"!==e&&"text"!==e||(n=o.tagBefore1),i.previewTemplates[e]=n+r+a)}))},_initPreviewCache:function(){var n=this;n.previewCache={data:{},init:function(){var e=n.initialPreview;e.length>0&&!t.isArray(e)&&(e=e.split(n.initialPreviewDelimiter)),n.previewCache.data={content:e,config:n.initialPreviewConfig,tags:n.initialPreviewThumbTags}},count:function(){return n.previewCache.data&&n.previewCache.data.content?n.previewCache.data.content.length:0},get:function(i,r){var o,a,s,l,c,u,d,h="init_"+i,f=n.previewCache.data,p=f.config[i],m=f.content[i],g=n.previewInitId+"-"+h,v=t.ifSet("previewAsData",p,n.initialPreviewAsData),b=function(e,i,r,o,a,s,l,c,u){return c=" file-preview-initial "+t.SORT_CSS+(c?" "+c:""),n._generatePreviewTemplate(e,i,r,o,a,!1,null,c,s,l,u)};return m?(r=void 0===r||r,s=t.ifSet("type",p,n.initialPreviewFileType||"generic"),c=t.ifSet("filename",p,t.ifSet("caption",p)),u=t.ifSet("filetype",p,s),l=n.previewCache.footer(i,r,p&&p.size||null),d=t.ifSet("frameClass",p),o=v?b(s,m,c,u,g,l,h,d):b("generic",m,c,u,g,l,h,d,s).setTokens({content:f.content[i]}),f.tags.length&&f.tags[i]&&(o=t.replaceTags(o,f.tags[i])),t.isEmpty(p)||t.isEmpty(p.frameAttr)||((a=e(document.createElement("div")).html(o)).find(".file-preview-initial").attr(p.frameAttr),o=a.html(),a.remove()),o):""},add:function(e,i,r,o){var a,s=n.previewCache.data;return t.isArray(e)||(e=e.split(n.initialPreviewDelimiter)),o?(a=s.content.push(e)-1,s.config[a]=i,s.tags[a]=r):(a=e.length-1,s.content=e,s.config=i,s.tags=r),n.previewCache.data=s,a},set:function(e,i,r,o){var a,s=n.previewCache.data;if(e&&e.length&&(t.isArray(e)||(e=e.split(n.initialPreviewDelimiter)),e.filter((function(e){return null!==e})).length)){if(void 0===s.content&&(s.content=[]),void 0===s.config&&(s.config=[]),void 0===s.tags&&(s.tags=[]),o){for(a=0;a<e.length;a++)e[a]&&s.content.push(e[a]);for(a=0;a<i.length;a++)i[a]&&s.config.push(i[a]);for(a=0;a<r.length;a++)r[a]&&s.tags.push(r[a])}else s.content=e,s.config=i,s.tags=r;n.previewCache.data=s}},unset:function(e){var t=n.previewCache.count();if(t){if(1===t)return n.previewCache.data.content=[],n.previewCache.data.config=[],n.previewCache.data.tags=[],n.initialPreview=[],n.initialPreviewConfig=[],void(n.initialPreviewThumbTags=[]);n.previewCache.data.content.splice(e,1),n.previewCache.data.config.splice(e,1),n.previewCache.data.tags.splice(e,1)}},out:function(){var e,t="",i=n.previewCache.count();if(0===i)return{content:"",caption:""};for(e=0;e<i;e++)t+=n.previewCache.get(e);return{content:t,caption:n._getMsgSelected(i)}},footer:function(e,i,r){var o=n.previewCache.data||{};if(t.isEmpty(o.content))return"";(t.isEmpty(o.config)||t.isEmpty(o.config[e]))&&(o.config[e]={}),i=void 0===i||i;var a,s=o.config[e],l=t.ifSet("caption",s),c=t.ifSet("width",s,"auto"),u=t.ifSet("url",s,!1),d=t.ifSet("key",s,null),h=n.fileActionSettings,f=n.initialPreviewShowDelete||!1,p=s.downloadUrl||n.initialPreviewDownloadUrl||"",m=s.filename||s.caption||"",g=!!p,v=t.ifSet("showDelete",s,t.ifSet("showDelete",h,f)),b=t.ifSet("showDownload",s,t.ifSet("showDownload",h,g)),y=t.ifSet("showZoom",s,t.ifSet("showZoom",h,!0)),w=t.ifSet("showDrag",s,t.ifSet("showDrag",h,!0)),x=!1===u&&i;return b=b&&!1!==s.downloadUrl&&!!p,a=n._renderFileActions(!1,b,v,y,w,x,u,d,!0,p,m),n._getLayoutTemplate("footer").setTokens({progress:n._renderThumbProgress(),actions:a,caption:l,size:n._getSize(r),width:c,indicator:""})}},n.previewCache.init()},_handler:function(e,t,n){var i=this.namespace,r=t.split(" ").join(i+" ")+i;e&&e.length&&e.off(r).on(r,n)},_log:function(e){var t=this.$element.attr("id");t&&(e='"'+t+'": '+e),void 0!==window.console.log?window.console.log(e):window.alert(e)},_validate:function(){var e="file"===this.$element.attr("type");return e||this._log('The input "type" must be set to "file" for initializing the "bootstrap-fileinput" plugin.'),e},_errorsExist:function(){var t;return!!this.$errorContainer.find("li").length||((t=e(document.createElement("div")).html(this.$errorContainer.html())).find(".kv-error-close").remove(),t.find("ul").remove(),!!e.trim(t.text()).length)},_errorHandler:function(e,t){var n=this,i=e.target.error,r=function(e){n._showError(e.replace("{name}",t))};i.code===i.NOT_FOUND_ERR?r(n.msgFileNotFound):i.code===i.SECURITY_ERR?r(n.msgFileSecured):i.code===i.NOT_READABLE_ERR?r(n.msgFileNotReadable):i.code===i.ABORT_ERR?r(n.msgFilePreviewAborted):r(n.msgFilePreviewError)},_addError:function(e){var t=this,n=t.$errorContainer;e&&n.length&&(n.html(t.errorCloseButton+e),t._handler(n.find(".kv-error-close"),"click",(function(){setTimeout((function(){t.showPreview&&!t.getFrames().length&&t.clear(),n.fadeOut("slow")}),10)})))},_setValidationError:function(e){e=(e?e+" ":"")+"has-error",this.$container.removeClass(e).addClass("has-error"),t.addCss(this.$captionContainer,"is-invalid")},_resetErrors:function(e){var t=this,n=t.$errorContainer;t.isError=!1,t.$container.removeClass("has-error"),t.$captionContainer.removeClass("is-invalid"),n.html(""),e?n.fadeOut("slow"):n.hide()},_showFolderError:function(e){var t,n=this,i=n.$errorContainer;e&&(t=n.msgFoldersNotAllowed.replace("{n}",e),n._addError(t),n._setValidationError(),i.fadeIn(800),n._raise("filefoldererror",[e,t]))},_showUploadError:function(e,t,n){var i=this,r=i.$errorContainer,o=n||"fileuploaderror",a=t&&t.id?'<li data-file-id="'+t.id+'">'+e+"</li>":"<li>"+e+"</li>";return 0===r.find("ul").length?i._addError("<ul>"+a+"</ul>"):r.find("ul").append(a),r.fadeIn(800),i._raise(o,[t,e]),i._setValidationError("file-input-new"),!0},_showError:function(e,t,n){var i=this,r=i.$errorContainer,o=n||"fileerror";return(t=t||{}).reader=i.reader,i._addError(e),r.fadeIn(800),i._raise(o,[t,e]),i.isAjaxUpload||i._clearFileInput(),i._setValidationError("file-input-new"),i.$btnUpload.attr("disabled",!0),!0},_noFilesError:function(e){var t=this,n=t.minFileCount>1?t.filePlural:t.fileSingle,i=t.msgFilesTooLess.replace("{n}",t.minFileCount).replace("{files}",n),r=t.$errorContainer;t._addError(i),t.isError=!0,t._updateFileDetails(0),r.fadeIn(800),t._raise("fileerror",[e,i]),t._clearFileInput(),t._setValidationError()},_parseError:function(t,n,i,r){var o,a=this,s=e.trim(i+""),l=void 0!==n.responseJSON&&void 0!==n.responseJSON.error?n.responseJSON.error:n.responseText;return a.cancelling&&a.msgUploadAborted&&(s=a.msgUploadAborted),a.showAjaxErrorDetails&&l&&(o=(l=e.trim(l.replace(/\n\s*\n/g,"\n"))).length?"<pre>"+l+"</pre>":"",s+=s?o:l),s||(s=a.msgAjaxError.replace("{operation}",t)),a.cancelling=!1,r?"<b>"+r+": </b>"+s:s},_parseFileType:function(e,n){var i,r,o,a=this.allowedPreviewTypes||[];if("application/text-plain"===e)return"text";for(o=0;o<a.length;o++)if(r=a[o],i=(0,this.fileTypeSettings[r])(e,n)?r:"",!t.isEmpty(i))return i;return"other"},_getPreviewIcon:function(t){var n,i=this,r=null;return t&&t.indexOf(".")>-1&&(n=t.split(".").pop(),i.previewFileIconSettings&&(r=i.previewFileIconSettings[n]||i.previewFileIconSettings[n.toLowerCase()]||null),i.previewFileExtSettings&&e.each(i.previewFileExtSettings,(function(e,t){i.previewFileIconSettings[e]&&t(n)&&(r=i.previewFileIconSettings[e])}))),r},_parseFilePreviewIcon:function(e,t){var n=this,i=n._getPreviewIcon(t)||n.previewFileIcon,r=e;return r.indexOf("{previewFileIcon}")>-1&&(r=r.setTokens({previewFileIconClass:n.previewFileIconClass,previewFileIcon:i})),r},_raise:function(t,n){var i=this,r=e.Event(t);if(void 0!==n?i.$element.trigger(r,n):i.$element.trigger(r),r.isDefaultPrevented()||!1===r.result)return!1;switch(t){case"filebatchuploadcomplete":case"filebatchuploadsuccess":case"fileuploaded":case"fileclear":case"filecleared":case"filereset":case"fileerror":case"filefoldererror":case"fileuploaderror":case"filebatchuploaderror":case"filedeleteerror":case"filecustomerror":case"filesuccessremove":break;default:i.ajaxAborted||(i.ajaxAborted=r.result)}return!0},_listenFullScreen:function(e){var t,n,i=this,r=i.$modal;r&&r.length&&(t=r&&r.find(".btn-fullscreen"),n=r&&r.find(".btn-borderless"),t.length&&n.length&&(t.removeClass("active").attr("aria-pressed","false"),n.removeClass("active").attr("aria-pressed","false"),e?t.addClass("active").attr("aria-pressed","true"):n.addClass("active").attr("aria-pressed","true"),r.hasClass("file-zoom-fullscreen")||e?i._maximizeZoomDialog():n.removeClass("active").attr("aria-pressed","false")))},_listen:function(){var n=this,i=n.$element,r=n.$form,o=n.$container;n._handler(i,"change",e.proxy(n._change,n)),n.showBrowse&&n._handler(n.$btnFile,"click",e.proxy(n._browse,n)),n._handler(o.find(".fileinput-remove:not([disabled])"),"click",e.proxy(n.clear,n)),n._handler(o.find(".fileinput-cancel"),"click",e.proxy(n.cancel,n)),n._initDragDrop(),n._handler(r,"reset",e.proxy(n.clear,n)),n.isAjaxUpload||n._handler(r,"submit",e.proxy(n._submitForm,n)),n._handler(e(".fileinput-upload"),"click",e.proxy(n._uploadClick,n)),n._handler(e(window),"resize",(function(){n._listenFullScreen(screen.width===window.innerWidth&&screen.height===window.innerHeight)})),n._handler(e(document),"webkitfullscreenchange mozfullscreenchange fullscreenchange MSFullscreenChange",(function(){n._listenFullScreen(t.checkFullScreen())})),n._autoFitContent(),n._initClickable()},_autoFitContent:function(){var t,n=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,i=this,r=n<400?i.previewSettingsSmall||i.defaults.previewSettingsSmall:i.previewSettings||i.defaults.previewSettings;e.each(r,(function(e,n){t=".file-preview-frame .file-preview-"+e,i.$preview.find(t+".kv-preview-data,"+t+" .kv-preview-data").css(n)}))},_initClickable:function(){var n,i=this;i.isClickable&&(n=i.isAjaxUpload?i.$dropZone:i.$preview.find(".file-default-preview"),t.addCss(n,"clickable"),n.attr("tabindex",-1),i._handler(n,"click",(function(t){var r=e(t.target);n.find(".kv-fileinput-error:visible").length||r.parents(".file-preview-thumbnails").length&&!r.parents(".file-default-preview").length||(i.$element.trigger("click"),n.blur())})))},_initDragDrop:function(){var t=this,n=t.$dropZone;t.isAjaxUpload&&t.dropZoneEnabled&&t.showPreview&&(t._handler(n,"dragenter dragover",e.proxy(t._zoneDragEnter,t)),t._handler(n,"dragleave",e.proxy(t._zoneDragLeave,t)),t._handler(n,"drop",e.proxy(t._zoneDrop,t)),t._handler(e(document),"dragenter dragover drop",t._zoneDragDropInit))},_zoneDragDropInit:function(e){e.stopPropagation(),e.preventDefault()},_zoneDragEnter:function(n){var i=this,r=e.inArray("Files",n.originalEvent.dataTransfer.types)>-1;if(i._zoneDragDropInit(n),i.isDisabled||!r)return n.originalEvent.dataTransfer.effectAllowed="none",void(n.originalEvent.dataTransfer.dropEffect="none");t.addCss(i.$dropZone,"file-highlighted")},_zoneDragLeave:function(e){var t=this;t._zoneDragDropInit(e),t.isDisabled||t.$dropZone.removeClass("file-highlighted")},_zoneDrop:function(e){var n=this;e.preventDefault(),n.isDisabled||t.isEmpty(e.originalEvent.dataTransfer.files)||(n._change(e,"dragdrop"),n.$dropZone.removeClass("file-highlighted"))},_uploadClick:function(e){var n,i=this,r=i.$container.find(".fileinput-upload"),o=!r.hasClass("disabled")&&t.isEmpty(r.attr("disabled"));e&&e.isDefaultPrevented()||(i.isAjaxUpload?(e.preventDefault(),o&&i.upload()):o&&"submit"!==r.attr("type")&&((n=r.closest("form")).length&&n.trigger("submit"),e.preventDefault()))},_submitForm:function(){return this._isFileSelectionValid()&&!this._abort({})},_clearPreview:function(){var n=this,i=n.$preview;(n.showUploadedThumbs?n.getFrames(":not(.file-preview-success)"):n.getFrames()).each((function(){var n=e(this);n.remove(),t.cleanZoomCache(i.find("#zoom-"+n.attr("id")))})),n.getFrames().length&&n.showPreview||n._resetUpload(),n._validateDefaultPreview()},_initSortable:function(){var n,i=this,r=i.$preview,o="."+t.SORT_CSS;window.KvSortable&&0!==r.find(o).length&&(n={handle:".drag-handle-init",dataIdAttr:"data-preview-id",scroll:!1,draggable:o,onSort:function(n){var r=n.oldIndex,o=n.newIndex;i.initialPreview=t.moveArray(i.initialPreview,r,o),i.initialPreviewConfig=t.moveArray(i.initialPreviewConfig,r,o),i.previewCache.init();for(var a=0;a<i.initialPreviewConfig.length;a++)null!==i.initialPreviewConfig[a]&&e(n.item).closest(t.FRAMES).attr("data-fileindex","init_"+a).attr("data-fileindex","init_"+a);i._raise("filesorted",{previewId:e(n.item).attr("id"),oldIndex:r,newIndex:o,stack:i.initialPreviewConfig})}},r.data("kvsortable")&&r.kvsortable("destroy"),e.extend(!0,n,i.fileActionSettings.dragSettings),r.kvsortable(n))},_setPreviewContent:function(e){this.$preview.html(e),this._autoFitContent()},_initPreview:function(e){var n,i=this,r=i.initialCaption||"";if(!i.previewCache.count())return i._clearPreview(),void(e?i._setCaption(r):i._initCaption());n=i.previewCache.out(),r=e&&i.initialCaption?i.initialCaption:n.caption,i._setPreviewContent(n.content),i._setInitThumbAttr(),i._setCaption(r),i._initSortable(),t.isEmpty(n.content)||i.$container.removeClass("file-input-new")},_getZoomButton:function(e){var t=this,n=t.previewZoomButtonIcons[e],i=t.previewZoomButtonClasses[e],r=' title="'+(t.previewZoomButtonTitles[e]||"")+'" '+("close"===e?' data-dismiss="modal" aria-hidden="true"':"");return"fullscreen"!==e&&"borderless"!==e&&"toggleheader"!==e||(r+=' data-toggle="button" aria-pressed="false" autocomplete="off"'),'<button type="button" class="'+i+" btn-"+e+'"'+r+">"+n+"</button>"},_getModalContent:function(){var e=this;return e._getLayoutTemplate("modal").setTokens({rtl:e.rtl?" kv-rtl":"",zoomFrameClass:e.frameClass,heading:e.msgZoomModalHeading,prev:e._getZoomButton("prev"),next:e._getZoomButton("next"),toggleheader:e._getZoomButton("toggleheader"),fullscreen:e._getZoomButton("fullscreen"),borderless:e._getZoomButton("borderless"),close:e._getZoomButton("close")})},_listenModalEvent:function(e){var n=this,i=n.$modal;i.on(e+".bs.modal",(function(r){var o=i.find(".btn-fullscreen"),a=i.find(".btn-borderless");n._raise("filezoom"+e,function(e){return{sourceEvent:e,previewId:i.data("previewId"),modal:i}}(r)),"shown"===e&&(a.removeClass("active").attr("aria-pressed","false"),o.removeClass("active").attr("aria-pressed","false"),i.hasClass("file-zoom-fullscreen")&&(n._maximizeZoomDialog(),t.checkFullScreen()?o.addClass("active").attr("aria-pressed","true"):a.addClass("active").attr("aria-pressed","true")))}))},_initZoom:function(){var n,i=this,r=i._getLayoutTemplate("modalMain"),o="#"+t.MODAL_ID;i.showPreview&&(i.$modal=e(o),i.$modal&&i.$modal.length||(n=e(document.createElement("div")).html(r).insertAfter(i.$container),i.$modal=e(o).insertBefore(n),n.remove()),t.initModal(i.$modal),i.$modal.html(i._getModalContent()),e.each(t.MODAL_EVENTS,(function(e,t){i._listenModalEvent(t)})))},_initZoomButtons:function(){var t,n,i=this,r=i.$modal.data("previewId")||"",o=i.getFrames().toArray(),a=o.length,s=i.$modal.find(".btn-prev"),l=i.$modal.find(".btn-next");if(o.length<2)return s.hide(),void l.hide();s.show(),l.show(),a&&(t=e(o[0]),n=e(o[a-1]),s.removeAttr("disabled"),l.removeAttr("disabled"),t.length&&t.attr("id")===r&&s.attr("disabled",!0),n.length&&n.attr("id")===r&&l.attr("disabled",!0))},_maximizeZoomDialog:function(){var t=this.$modal,n=t.find(".modal-header:visible"),i=t.find(".modal-footer:visible"),r=t.find(".modal-body"),o=e(window).height();t.addClass("file-zoom-fullscreen"),n&&n.length&&(o-=n.outerHeight(!0)),i&&i.length&&(o-=i.outerHeight(!0)),r&&r.length&&(o-=r.outerHeight(!0)-r.height()),t.find(".kv-zoom-body").height(o)},_resizeZoomDialog:function(e){var n=this,i=n.$modal,r=i.find(".btn-fullscreen"),o=i.find(".btn-borderless");if(i.hasClass("file-zoom-fullscreen"))t.toggleFullScreen(!1),e?r.hasClass("active")||(i.removeClass("file-zoom-fullscreen"),n._resizeZoomDialog(!0),o.hasClass("active")&&o.removeClass("active").attr("aria-pressed","false")):r.hasClass("active")?r.removeClass("active").attr("aria-pressed","false"):(i.removeClass("file-zoom-fullscreen"),n.$modal.find(".kv-zoom-body").css("height",n.zoomModalHeight));else{if(!e)return void n._maximizeZoomDialog();t.toggleFullScreen(!0)}i.focus()},_setZoomContent:function(n,i){var r,o,a,s,l,c,u,d,h=this,f=n.attr("id"),p=h.$modal,m=p.find(".btn-prev"),g=p.find(".btn-next"),v=p.find(".btn-fullscreen"),b=p.find(".btn-borderless"),y=p.find(".btn-toggleheader"),w=h.$preview.find("#zoom-"+f);o=w.attr("data-template")||"generic",a=(r=w.find(".kv-file-content")).length?r.html():"",s=(n.data("caption")||"")+" "+(n.data("size")||""),p.find(".kv-zoom-title").attr("title",e("<div/>").html(s).text()).html(s),l=p.find(".kv-zoom-body"),p.removeClass("kv-single-content"),i?(d=l.addClass("file-thumb-loading").clone().insertAfter(l),l.html(a).hide(),d.fadeOut("fast",(function(){l.fadeIn("fast",(function(){l.removeClass("file-thumb-loading")})),d.remove()}))):l.html(a),(u=h.previewZoomSettings[o])&&(c=l.find(".kv-preview-data"),t.addCss(c,"file-zoom-detail"),e.each(u,(function(e,t){c.css(e,t),(c.attr("width")&&"width"===e||c.attr("height")&&"height"===e)&&c.removeAttr(e)}))),p.data("previewId",f);var x=l.find("img");x.length&&t.adjustOrientedImage(x,!0),h._handler(m,"click",(function(){h._zoomSlideShow("prev",f)})),h._handler(g,"click",(function(){h._zoomSlideShow("next",f)})),h._handler(v,"click",(function(){h._resizeZoomDialog(!0)})),h._handler(b,"click",(function(){h._resizeZoomDialog(!1)})),h._handler(y,"click",(function(){var e,t=p.find(".modal-header"),n=p.find(".modal-body .floating-buttons"),i=t.find(".kv-zoom-actions"),r=function(e){var n=h.$modal.find(".kv-zoom-body"),i=h.zoomModalHeight;p.hasClass("file-zoom-fullscreen")&&(i=n.outerHeight(!0),e||(i-=t.outerHeight(!0))),n.css("height",e?i+e:i)};t.is(":visible")?(e=t.outerHeight(!0),t.slideUp("slow",(function(){i.find(".btn").appendTo(n),r(e)}))):(n.find(".btn").appendTo(i),t.slideDown("slow",(function(){r()}))),p.focus()})),h._handler(p,"keydown",(function(e){var t=e.which||e.keyCode;37!==t||m.attr("disabled")||h._zoomSlideShow("prev",f),39!==t||g.attr("disabled")||h._zoomSlideShow("next",f)}))},_zoomPreview:function(e){var n,i=this,r=i.$modal;if(!e.length)throw"Cannot zoom to detailed preview!";t.initModal(r),r.html(i._getModalContent()),n=e.closest(t.FRAMES),i._setZoomContent(n),r.modal("show"),i._initZoomButtons()},_zoomSlideShow:function(t,n){var i,r,o,a=this,s=a.$modal.find(".kv-zoom-actions .btn-"+t),l=a.getFrames().toArray(),c=l.length;if(!s.attr("disabled")){for(r=0;r<c;r++)if(e(l[r]).attr("id")===n){o="prev"===t?r-1:r+1;break}o<0||o>=c||!l[o]||((i=e(l[o])).length&&a._setZoomContent(i,!0),a._initZoomButtons(),a._raise("filezoom"+t,{previewId:n,modal:a.$modal}))}},_initZoomButton:function(){var t=this;t.$preview.find(".kv-file-zoom").each((function(){var n=e(this);t._handler(n,"click",(function(){t._zoomPreview(n)}))}))},_clearObjects:function(t){t.find("video audio").each((function(){this.pause(),e(this).remove()})),t.find("img object div").each((function(){e(this).remove()}))},_clearFileInput:function(){var n,i,r,o=this,a=o.$element;o.fileInputCleared=!0,t.isEmpty(a.val())||(o.isIE9||o.isIE10?(n=a.closest("form"),i=e(document.createElement("form")),r=e(document.createElement("div")),a.before(r),n.length?n.after(i):r.after(i),i.append(a).trigger("reset"),r.before(a).remove(),i.remove()):a.val(""))},_resetUpload:function(){var e=this;e.uploadCache={content:[],config:[],tags:[],append:!0},e.uploadCount=0,e.uploadStatus={},e.uploadLog=[],e.uploadAsyncCount=0,e.loadedImages=[],e.totalImagesCount=0,e.$btnUpload.removeAttr("disabled"),e._setProgress(0),e.$progress.hide(),e._resetErrors(!1),e.ajaxAborted=!1,e.ajaxRequests=[],e._resetCanvas(),e.cacheInitialPreview={},e.overwriteInitial&&(e.initialPreview=[],e.initialPreviewConfig=[],e.initialPreviewThumbTags=[],e.previewCache.data={content:[],config:[],tags:[]})},_resetCanvas:function(){var e=this;e.canvas&&e.imageCanvasContext&&e.imageCanvasContext.clearRect(0,0,e.canvas.width,e.canvas.height)},_hasInitialPreview:function(){return!this.overwriteInitial&&this.previewCache.count()},_resetPreview:function(){var e,t,n=this;n.previewCache.count()?(e=n.previewCache.out(),n._setPreviewContent(e.content),n._setInitThumbAttr(),t=n.initialCaption?n.initialCaption:e.caption,n._setCaption(t)):(n._clearPreview(),n._initCaption()),n.showPreview&&(n._initZoom(),n._initSortable())},_clearDefaultPreview:function(){this.$preview.find(".file-default-preview").remove()},_validateDefaultPreview:function(){var e=this;e.showPreview&&!t.isEmpty(e.defaultPreviewContent)&&(e._setPreviewContent('<div class="file-default-preview">'+e.defaultPreviewContent+"</div>"),e.$container.removeClass("file-input-new"),e._initClickable())},_resetPreviewThumbs:function(e){var t,n=this;if(e)return n._clearPreview(),void n.clearStack();n._hasInitialPreview()?(t=n.previewCache.out(),n._setPreviewContent(t.content),n._setInitThumbAttr(),n._setCaption(t.caption),n._initPreviewActions()):n._clearPreview()},_getLayoutTemplate:function(e){var n=this,i=n.layoutTemplates[e];return t.isEmpty(n.customLayoutTags)?i:t.replaceTags(i,n.customLayoutTags)},_getPreviewTemplate:function(e){var n=this,i=n.previewTemplates[e];return t.isEmpty(n.customPreviewTags)?i:t.replaceTags(i,n.customPreviewTags)},_getOutData:function(e,t,n){var i=this;return e=e||{},t=t||{},n=n||i.filestack.slice(0)||{},{form:i.formdata,files:n,filenames:i.filenames,filescount:i.getFilesCount(),extra:i._getExtraData(),response:t,reader:i.reader,jqXHR:e}},_getMsgSelected:function(e){var t=this,n=1===e?t.fileSingle:t.filePlural;return e>0?t.msgSelected.replace("{n}",e).replace("{files}",n):t.msgNoFilesSelected},_getFrame:function(t){var n=e("#"+t);return n.length?n:(this._log('Invalid thumb frame with id: "'+t+'".'),null)},_getThumbs:function(e){return e=e||"",this.getFrames(":not(.file-preview-initial)"+e)},_getExtraData:function(e,t){var n=this,i=n.uploadExtraData;return"function"==typeof n.uploadExtraData&&(i=n.uploadExtraData(e,t)),i},_initXhr:function(e,t,n){var i=this;return e.upload&&e.upload.addEventListener("progress",(function(e){var r=0,o=e.total,a=e.loaded||e.position;e.lengthComputable&&(r=Math.floor(a/o*100)),t?i._setAsyncUploadStatus(t,r,n):i._setProgress(r)}),!1),e},_mergeAjaxCallback:function(e,t,n){var i,r=this,o=r.ajaxSettings,a=r.mergeAjaxCallbacks;"delete"===n&&(o=r.ajaxDeleteSettings,a=r.mergeAjaxDeleteCallbacks),i=o[e],o[e]=a&&"function"==typeof i?"before"===a?function(){i.apply(this,arguments),t.apply(this,arguments)}:function(){t.apply(this,arguments),i.apply(this,arguments)}:t,"delete"===n?r.ajaxDeleteSettings=o:r.ajaxSettings=o},_ajaxSubmit:function(t,n,i,r,o,a){var s,l=this;l._raise("filepreajax",[o,a])&&(l._uploadExtra(o,a),l._mergeAjaxCallback("beforeSend",t),l._mergeAjaxCallback("success",n),l._mergeAjaxCallback("complete",i),l._mergeAjaxCallback("error",r),s=e.extend(!0,{},{xhr:function(){var t=e.ajaxSettings.xhr();return l._initXhr(t,o,l.getFileStack().length)},url:a&&l.uploadUrlThumb?l.uploadUrlThumb:l.uploadUrl,type:"POST",dataType:"json",data:l.formdata,cache:!1,processData:!1,contentType:!1},l.ajaxSettings),l.ajaxRequests.push(e.ajax(s)))},_mergeArray:function(e,n){var i=t.cleanArray(this[e]),r=t.cleanArray(n);this[e]=i.concat(r)},_initUploadSuccess:function(n,i,r){var o,a,s,l,c,u,d,h,f,p=this;p.showPreview&&"object"==typeof n&&!e.isEmptyObject(n)&&void 0!==n.initialPreview&&n.initialPreview.length>0&&(p.hasInitData=!0,u=n.initialPreview||[],d=n.initialPreviewConfig||[],h=n.initialPreviewThumbTags||[],o=void 0===n.append||n.append,u.length>0&&!t.isArray(u)&&(u=u.split(p.initialPreviewDelimiter)),p._mergeArray("initialPreview",u),p._mergeArray("initialPreviewConfig",d),p._mergeArray("initialPreviewThumbTags",h),void 0!==i?r?(f=i.attr("data-fileindex"),p.uploadCache.content[f]=u[0],p.uploadCache.config[f]=d[0]||[],p.uploadCache.tags[f]=h[0]||[],p.uploadCache.append=o):(s=p.previewCache.add(u,d[0],h[0],o),a=p.previewCache.get(s,!1),(c=(l=e(document.createElement("div")).html(a).hide().insertAfter(i)).find(".kv-zoom-cache"))&&c.length&&c.insertAfter(i),i.fadeOut("slow",(function(){var e=l.find(".file-preview-frame");e&&e.length&&e.insertBefore(i).fadeIn("slow").css("display:inline-block"),p._initPreviewActions(),p._clearFileInput(),t.cleanZoomCache(p.$preview.find("#zoom-"+i.attr("id"))),i.remove(),l.remove(),p._initSortable()}))):(p.previewCache.set(u,d,h,o),p._initPreview(),p._initPreviewActions()))},_initSuccessThumbs:function(){var n=this;n.showPreview&&n._getThumbs(t.FRAMES+".file-preview-success").each((function(){var i=e(this),r=n.$preview,o=i.find(".kv-file-remove");o.removeAttr("disabled"),n._handler(o,"click",(function(){var e=i.attr("id"),o=n._raise("filesuccessremove",[e,i.attr("data-fileindex")]);t.cleanMemory(i),!1!==o&&i.fadeOut("slow",(function(){t.cleanZoomCache(r.find("#zoom-"+e)),i.remove(),n.getFrames().length||n.reset()}))}))}))},_checkAsyncComplete:function(){var t,n,i=this;for(n=0;n<i.filestack.length;n++)if(i.filestack[n]&&(t=i.previewInitId+"-"+n,-1===e.inArray(t,i.uploadLog)))return!1;return i.uploadAsyncCount===i.uploadLog.length},_uploadExtra:function(t,n){var i=this,r=i._getExtraData(t,n);0!==r.length&&e.each(r,(function(e,t){i.formdata.append(e,t)}))},_uploadSingle:function(n,i){var r,o,a,s,l,c,u,d,h,f,p,m=this,g=m.getFileStack().length,v=new FormData,b=m.previewInitId+"-"+n,y=m.filestack.length>0||!e.isEmptyObject(m.uploadExtraData),w=e("#"+b).find(".file-thumb-progress"),x={id:b,index:n};m.formdata=v,m.showPreview&&(o=e("#"+b+":not(.file-preview-initial)"),s=o.find(".kv-file-upload"),l=o.find(".kv-file-remove"),w.show()),0===g||!y||s&&s.hasClass("disabled")||m._abort(x)||(p=function(e,t){c||m.updateStack(e,void 0),m.uploadLog.push(t),m._checkAsyncComplete()&&(m.fileBatchCompleted=!0)},a=function(){var e,n,i,r=m.uploadCache,o=0,a=m.cacheInitialPreview;m.fileBatchCompleted&&(a&&a.content&&(o=a.content.length),setTimeout((function(){var s=0===m.getFileStack(!0).length;if(m.showPreview){if(m.previewCache.set(r.content,r.config,r.tags,r.append),o){for(n=0;n<r.content.length;n++)i=n+o,a.content[i]=r.content[n],a.config.length&&(a.config[i]=r.config[n]),a.tags.length&&(a.tags[i]=r.tags[n]);m.initialPreview=t.cleanArray(a.content),m.initialPreviewConfig=t.cleanArray(a.config),m.initialPreviewThumbTags=t.cleanArray(a.tags)}else m.initialPreview=r.content,m.initialPreviewConfig=r.config,m.initialPreviewThumbTags=r.tags;m.cacheInitialPreview={},m.hasInitData&&(m._initPreview(),m._initPreviewActions())}m.unlock(s),s&&m._clearFileInput(),e=m.$preview.find(".file-preview-initial"),m.uploadAsync&&e.length&&(t.addCss(e,t.SORT_CSS),m._initSortable()),m._raise("filebatchuploadcomplete",[m.filestack,m._getExtraData()]),m.uploadCount=0,m.uploadStatus={},m.uploadLog=[],m._setProgress(101),m.ajaxAborted=!1}),100))},u=function(a){r=m._getOutData(a),m.fileBatchCompleted=!1,i||(m.ajaxAborted=!1),m.showPreview&&(o.hasClass("file-preview-success")||(m._setThumbStatus(o,"Loading"),t.addCss(o,"file-uploading")),s.attr("disabled",!0),l.attr("disabled",!0)),i||m.lock(),m._raise("filepreupload",[r,b,n]),e.extend(!0,x,r),m._abort(x)&&(a.abort(),i||(m._setThumbStatus(o,"New"),o.removeClass("file-uploading"),s.removeAttr("disabled"),l.removeAttr("disabled"),m.unlock()),m._setProgressCancelled())},d=function(a,l,u){var d=m.showPreview&&o.attr("id")?o.attr("id"):b;r=m._getOutData(u,a),e.extend(!0,x,r),setTimeout((function(){t.isEmpty(a)||t.isEmpty(a.error)?(m.showPreview&&(m._setThumbStatus(o,"Success"),s.hide(),m._initUploadSuccess(a,o,i),m._setProgress(101,w)),m._raise("fileuploaded",[r,d,n]),i?p(n,d):m.updateStack(n,void 0)):(c=!0,m._showUploadError(a.error,x),m._setPreviewError(o,n,m.filestack[n],m.retryErrorUploads),m.retryErrorUploads||s.hide(),i&&p(n,d),m._setProgress(101,e("#"+d).find(".file-thumb-progress"),m.msgUploadError))}),100)},h=function(){setTimeout((function(){m.showPreview&&(s.removeAttr("disabled"),l.removeAttr("disabled"),o.removeClass("file-uploading")),i?a():(m.unlock(!1),m._clearFileInput()),m._initSuccessThumbs()}),100)},f=function(t,r,a){var l=m.ajaxOperations.uploadThumb,u=m._parseError(l,t,a,i&&m.filestack[n].name?m.filestack[n].name:null);c=!0,setTimeout((function(){i&&p(n,b),m.uploadStatus[b]=100,m._setPreviewError(o,n,m.filestack[n],m.retryErrorUploads),m.retryErrorUploads||s.hide(),e.extend(!0,x,m._getOutData(t)),m._setProgress(101,w,m.msgAjaxProgressError.replace("{operation}",l)),m._setProgress(101,e("#"+b).find(".file-thumb-progress"),m.msgUploadError),m._showUploadError(u,x)}),100)},v.append(m.uploadFileAttr,m.filestack[n],m.filenames[n]),v.append("file_id",n),m._ajaxSubmit(u,d,h,f,b,n))},_uploadBatch:function(){var n,i,r,o,a,s=this,l=s.filestack,c=l.length,u=s.filestack.length>0||!e.isEmptyObject(s.uploadExtraData);s.formdata=new FormData,0!==c&&u&&!s._abort({})&&(a=function(){e.each(l,(function(e){s.updateStack(e,void 0)})),s._clearFileInput()},n=function(n){s.lock();var i=s._getOutData(n);s.ajaxAborted=!1,s.showPreview&&s._getThumbs().each((function(){var n=e(this),i=n.find(".kv-file-upload"),r=n.find(".kv-file-remove");n.hasClass("file-preview-success")||(s._setThumbStatus(n,"Loading"),t.addCss(n,"file-uploading")),i.attr("disabled",!0),r.attr("disabled",!0)})),s._raise("filebatchpreupload",[i]),s._abort(i)&&(n.abort(),s._getThumbs().each((function(){var t=e(this),n=t.find(".kv-file-upload"),i=t.find(".kv-file-remove");t.hasClass("file-preview-loading")&&(s._setThumbStatus(t,"New"),t.removeClass("file-uploading")),n.removeAttr("disabled"),i.removeAttr("disabled")})),s._setProgressCancelled())},i=function(n,i,r){var o=s._getOutData(r,n),l=0,c=s._getThumbs(":not(.file-preview-success)"),u=t.isEmpty(n)||t.isEmpty(n.errorkeys)?[]:n.errorkeys;t.isEmpty(n)||t.isEmpty(n.error)?(s._raise("filebatchuploadsuccess",[o]),a(),s.showPreview?(c.each((function(){var t=e(this);s._setThumbStatus(t,"Success"),t.removeClass("file-uploading"),t.find(".kv-file-upload").hide().removeAttr("disabled")})),s._initUploadSuccess(n)):s.reset(),s._setProgress(101)):(s.showPreview&&(c.each((function(){var t=e(this),n=t.attr("data-fileindex");t.removeClass("file-uploading"),t.find(".kv-file-upload").removeAttr("disabled"),t.find(".kv-file-remove").removeAttr("disabled"),0===u.length||-1!==e.inArray(l,u)?(s._setPreviewError(t,n,s.filestack[n],s.retryErrorUploads),s.retryErrorUploads||(t.find(".kv-file-upload").hide(),s.updateStack(n,void 0))):(t.find(".kv-file-upload").hide(),s._setThumbStatus(t,"Success"),s.updateStack(n,void 0)),t.hasClass("file-preview-error")&&!s.retryErrorUploads||l++})),s._initUploadSuccess(n)),s._showUploadError(n.error,o,"filebatchuploaderror"),s._setProgress(101,s.$progress,s.msgUploadError))},o=function(){s.unlock(),s._initSuccessThumbs(),s._clearFileInput(),s._raise("filebatchuploadcomplete",[s.filestack,s._getExtraData()])},r=function(t,n,i){var r=s._getOutData(t),o=s.ajaxOperations.uploadBatch,a=s._parseError(o,t,i);s._showUploadError(a,r,"filebatchuploaderror"),s.uploadFileCount=c-1,s.showPreview&&(s._getThumbs().each((function(){var t=e(this),n=t.attr("data-fileindex");t.removeClass("file-uploading"),void 0!==s.filestack[n]&&s._setPreviewError(t)})),s._getThumbs().removeClass("file-uploading"),s._getThumbs(" .kv-file-upload").removeAttr("disabled"),s._getThumbs(" .kv-file-delete").removeAttr("disabled"),s._setProgress(101,s.$progress,s.msgAjaxProgressError.replace("{operation}",o)))},e.each(l,(function(e,n){t.isEmpty(l[e])||s.formdata.append(s.uploadFileAttr,n,s.filenames[e])})),s._ajaxSubmit(n,i,o,r))},_uploadExtraOnly:function(){var e,n,i,r,o=this,a={};o.formdata=new FormData,o._abort(a)||(e=function(e){o.lock();var t=o._getOutData(e);o._raise("filebatchpreupload",[t]),o._setProgress(50),a.data=t,a.xhr=e,o._abort(a)&&(e.abort(),o._setProgressCancelled())},n=function(e,n,i){var r=o._getOutData(i,e);t.isEmpty(e)||t.isEmpty(e.error)?(o._raise("filebatchuploadsuccess",[r]),o._clearFileInput(),o._initUploadSuccess(e),o._setProgress(101)):o._showUploadError(e.error,r,"filebatchuploaderror")},i=function(){o.unlock(),o._clearFileInput(),o._raise("filebatchuploadcomplete",[o.filestack,o._getExtraData()])},r=function(e,t,n){var i=o._getOutData(e),r=o.ajaxOperations.uploadExtra,s=o._parseError(r,e,n);a.data=i,o._showUploadError(s,i,"filebatchuploaderror"),o._setProgress(101,o.$progress,o.msgAjaxProgressError.replace("{operation}",r))},o._ajaxSubmit(e,n,i,r))},_deleteFileIndex:function(n){var i=this,r=n.attr("data-fileindex");"init_"===r.substring(0,5)&&(r=parseInt(r.replace("init_","")),i.initialPreview=t.spliceArray(i.initialPreview,r),i.initialPreviewConfig=t.spliceArray(i.initialPreviewConfig,r),i.initialPreviewThumbTags=t.spliceArray(i.initialPreviewThumbTags,r),i.getFrames().each((function(){var t=e(this),n=t.attr("data-fileindex");"init_"===n.substring(0,5)&&(n=parseInt(n.replace("init_","")))>r&&(n--,t.attr("data-fileindex","init_"+n))})),i.uploadAsync&&(i.cacheInitialPreview=i.getPreview()))},_initFileActions:function(){var n=this,i=n.$preview;n.showPreview&&(n._initZoomButton(),n.getFrames(" .kv-file-remove").each((function(){var r,o,a,s=e(this),l=s.closest(t.FRAMES),c=l.attr("id"),u=l.attr("data-fileindex");n._handler(s,"click",(function(){if(!1===n._raise("filepreremove",[c,u])||!n._validateMinCount())return!1;r=l.hasClass("file-preview-error"),t.cleanMemory(l),l.fadeOut("slow",(function(){t.cleanZoomCache(i.find("#zoom-"+c)),n.updateStack(u,void 0),n._clearObjects(l),l.remove(),c&&r&&n.$errorContainer.find('li[data-file-id="'+c+'"]').fadeOut("fast",(function(){e(this).remove(),n._errorsExist()||n._resetErrors()})),n._clearFileInput();var s=n.getFileStack(!0),d=n.previewCache.count(),h=s.length,f=n.showPreview&&n.getFrames().length;0!==h||0!==d||f?(a=(o=d+h)>1?n._getMsgSelected(o):s[0]?n._getFileNames()[0]:"",n._setCaption(a)):n.reset(),n._raise("fileremoved",[c,u])}))}))})),n.getFrames(" .kv-file-upload").each((function(){var i=e(this);n._handler(i,"click",(function(){var e=i.closest(t.FRAMES),r=e.attr("data-fileindex");n.$progress.hide(),e.hasClass("file-preview-error")&&!n.retryErrorUploads||n._uploadSingle(r,!1)}))})))},_initPreviewActions:function(){var n=this,i=n.$preview,r=n.deleteExtraData||{},o=t.FRAMES+" .kv-file-remove",a=n.fileActionSettings,s=a.removeClass,l=a.removeErrorClass,c=function(){var e=n.isAjaxUpload?n.previewCache.count():n.$element.get(0).files.length;i.find(t.FRAMES).length||e||(n._setCaption(""),n.reset(),n.initialCaption="")};n._initZoomButton(),i.find(o).each((function(){var o,a,u,d=e(this),h=d.data("url")||n.deleteUrl,f=d.data("key");if(!t.isEmpty(h)&&void 0!==f){var p,m,g,v,b=d.closest(t.FRAMES),y=n.previewCache.data,w=b.attr("data-fileindex");w=parseInt(w.replace("init_","")),g=t.isEmpty(y.config)&&t.isEmpty(y.config[w])?null:y.config[w],"function"==typeof(v=t.isEmpty(g)||t.isEmpty(g.extra)?r:g.extra)&&(v=v()),m={id:d.attr("id"),key:f,extra:v},o=function(e){n.ajaxAborted=!1,n._raise("filepredelete",[f,e,v]),n._abort()?e.abort():(d.removeClass(l),t.addCss(b,"file-uploading"),t.addCss(d,"disabled "+s))},a=function(e,r,o){var a,u;if(!t.isEmpty(e)&&!t.isEmpty(e.error))return m.jqXHR=o,m.response=e,n._showError(e.error,m,"filedeleteerror"),b.removeClass("file-uploading"),d.removeClass("disabled "+s).addClass(l),void c();b.removeClass("file-uploading").addClass("file-deleted"),b.fadeOut("slow",(function(){w=parseInt(b.attr("data-fileindex").replace("init_","")),n.previewCache.unset(w),a=n.previewCache.count(),u=a>0?n._getMsgSelected(a):"",n._deleteFileIndex(b),n._setCaption(u),n._raise("filedeleted",[f,o,v]),t.cleanZoomCache(i.find("#zoom-"+b.attr("id"))),n._clearObjects(b),b.remove(),c()}))},u=function(e,t,i){var r=n.ajaxOperations.deleteThumb,o=n._parseError(r,e,i);m.jqXHR=e,m.response={},n._showError(o,m,"filedeleteerror"),b.removeClass("file-uploading"),d.removeClass("disabled "+s).addClass(l),c()},n._mergeAjaxCallback("beforeSend",o,"delete"),n._mergeAjaxCallback("success",a,"delete"),n._mergeAjaxCallback("error",u,"delete"),p=e.extend(!0,{},{url:h,type:"POST",dataType:"json",data:e.extend(!0,{},{key:f},v)},n.ajaxDeleteSettings),n._handler(d,"click",(function(){if(!n._validateMinCount())return!1;n.ajaxAborted=!1,n._raise("filebeforedelete",[f,v]),n.ajaxAborted instanceof Promise?n.ajaxAborted.then((function(t){t||e.ajax(p)})):n.ajaxAborted||e.ajax(p)}))}}))},_hideFileIcon:function(){this.overwriteInitial&&this.$captionContainer.removeClass("icon-visible")},_showFileIcon:function(){t.addCss(this.$captionContainer,"icon-visible")},_getSize:function(t){var n,i,r,o=parseFloat(t),a=this.fileSizeGetter;return e.isNumeric(t)&&e.isNumeric(o)?("function"==typeof a?r=a(o):0===o?r="0.00 B":(n=Math.floor(Math.log(o)/Math.log(1024)),i=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],r=1*(o/Math.pow(1024,n)).toFixed(2)+" "+i[n]),this._getLayoutTemplate("size").replace("{sizeText}",r)):""},_generatePreviewTemplate:function(n,i,r,o,a,s,l,c,u,d,h){var f,p=this,m=p.slug(r),g="",v="",b=(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)<400?p.previewSettingsSmall[n]||p.defaults.previewSettingsSmall[n]:p.previewSettings[n]||p.defaults.previewSettings[n],y=u||p._renderFileFooter(m,l,"auto",s),w=p._getPreviewIcon(r),x="type-default",C=w&&p.preferIconicPreview,_=w&&p.preferIconicZoomPreview;return b&&e.each(b,(function(e,t){v+=e+":"+t+";"})),f=function(i,s,l,u){var f=l?"zoom-"+a:a,g=p._getPreviewTemplate(i),b=(c||"")+" "+u;return p.frameClass&&(b=p.frameClass+" "+b),l&&(b=b.replace(" "+t.SORT_CSS,"")),g=p._parseFilePreviewIcon(g,r),"text"===i&&(s=t.htmlEncode(s)),"object"!==n||o||e.each(p.defaults.fileTypeSettings,(function(e,t){"object"!==e&&"other"!==e&&t(r,o)&&(x="type-"+e)})),g.setTokens({previewId:f,caption:m,frameClass:b,type:o,fileindex:d,typeCss:x,footer:y,data:s,template:h||n,style:v?'style="'+v+'"':""})},d=d||a.slice(a.lastIndexOf("-")+1),p.fileActionSettings.showZoom&&(g=f(_?"other":n,i,!0,"kv-zoom-thumb")),g="\n"+p._getLayoutTemplate("zoomCache").replace("{zoomContent}",g),f(C?"other":n,i,!1,"kv-preview-thumb")+g},_previewDefault:function(n,i,r){var o=this,a=o.$preview;if(o.showPreview){var s,l=n?n.name:"",c=n?n.type:"",u=n.size||0,d=o.slug(l),h=!0===r&&!o.isAjaxUpload,f=t.objUrl.createObjectURL(n);o._clearDefaultPreview(),s=o._generatePreviewTemplate("other",f,l,c,i,h,u),a.append("\n"+s),o._setThumbAttr(i,d,u),!0===r&&o.isAjaxUpload&&o._setThumbStatus(e("#"+i),"Error")}},_previewFile:function(e,n,i,r,o,a){if(this.showPreview){var s,l=this,c=n?n.name:"",u=a.type,d=a.name,h=l._parseFileType(u,c),f=l.allowedPreviewTypes,p=l.allowedPreviewMimeTypes,m=l.$preview,g=n.size||0,v=f&&f.indexOf(h)>=0,b=p&&-1!==p.indexOf(u),y="text"===h||"html"===h||"image"===h?i.target.result:o;if("html"===h&&l.purifyHtml&&window.DOMPurify&&(y=window.DOMPurify.sanitize(y)),v||b){s=l._generatePreviewTemplate(h,y,c,u,r,!1,g),l._clearDefaultPreview(),m.append("\n"+s);var w=m.find("#"+r+" img");w.length&&l.autoOrientImage?t.validateOrientation(n,(function(e){if(e){var i=m.find("#zoom-"+r+" img"),o="rotate-"+e;e>4&&(o+=w.width()>w.height()?" is-portrait-gt4":" is-landscape-gt4"),t.addCss(w,o),t.addCss(i,o),l._raise("fileimageoriented",{$img:w,file:n}),l._validateImage(r,d,u,g,y),t.adjustOrientedImage(w)}else l._validateImage(r,d,u,g,y)})):l._validateImage(r,d,u,g,y)}else l._previewDefault(n,r);l._setThumbAttr(r,d,g),l._initSortable()}},_setThumbAttr:function(t,n,i){var r=e("#"+t);r.length&&(i=i&&i>0?this._getSize(i):"",r.data({caption:n,size:i}))},_setInitThumbAttr:function(){var e,n,i,r,o=this,a=o.previewCache.data,s=o.previewCache.count();if(0!==s)for(var l=0;l<s;l++)e=a.config[l],r=o.previewInitId+"-init_"+l,n=t.ifSet("caption",e,t.ifSet("filename",e)),i=t.ifSet("size",e),o._setThumbAttr(r,n,i)},_slugDefault:function(e){return t.isEmpty(e)?"":String(e).replace(/[\[\]\/\{}:;#%=\(\)\*\+\?\\\^\$\|<>&"']/g,"_")},_updateFileDetails:function(e){var n=this,i=n.$element,r=n.getFileStack(),o=t.isIE(9)&&t.findFileName(i.val())||i[0].files[0]&&i[0].files[0].name||r.length&&r[0].name||"",a=n.slug(o),s=n.isAjaxUpload?r.length:e,l=n.previewCache.count()+s,c=1===s?a:n._getMsgSelected(l);n.isError?(n.$previewContainer.removeClass("file-thumb-loading"),n.$previewStatus.html(""),n.$captionContainer.removeClass("icon-visible")):n._showFileIcon(),n._setCaption(c,n.isError),n.$container.removeClass("file-input-new file-input-ajax-new"),1===arguments.length&&n._raise("fileselect",[e,a]),n.previewCache.count()&&n._initPreviewActions()},_setThumbStatus:function(e,t){var n=this;if(n.showPreview){var i="indicator"+t,r=i+"Title",o="file-preview-"+t.toLowerCase(),a=e.find(".file-upload-indicator"),s=n.fileActionSettings;e.removeClass("file-preview-success file-preview-error file-preview-loading"),"Success"===t&&e.find(".file-drag-handle").remove(),a.html(s[i]),a.attr("title",s[r]),e.addClass(o),"Error"!==t||n.retryErrorUploads||e.find(".kv-file-upload").attr("disabled",!0)}},_setProgressCancelled:function(){var e=this;e._setProgress(101,e.$progress,e.msgCancelled)},_setProgress:function(e,n,i){var r,o=this,a=Math.min(e,100),s=o.progressUploadThreshold,l=e<=100?o.progressTemplate:o.progressCompleteTemplate,c=a<100?o.progressTemplate:i?o.progressErrorTemplate:l;n=n||o.$progress,t.isEmpty(c)||(r=s&&a>s&&e<=100?c.setTokens({percent:s,status:o.msgUploadThreshold}):c.setTokens({percent:a,status:e>100?o.msgUploadEnd:a+"%"}),n.html(r),i&&n.find('[role="progressbar"]').html(i))},_setFileDropZoneTitle:function(){var e,n=this,i=n.$container.find(".file-drop-zone"),r=n.dropZoneTitle;n.isClickable&&(e=t.isEmpty(n.$element.attr("multiple"))?n.fileSingle:n.filePlural,r+=n.dropZoneClickTitle.replace("{files}",e)),i.find("."+n.dropZoneTitleClass).remove(),n.isAjaxUpload&&n.showPreview&&0!==i.length&&!(n.getFileStack().length>0)&&n.dropZoneEnabled&&(0===i.find(t.FRAMES).length&&t.isEmpty(n.defaultPreviewContent)&&i.prepend('<div class="'+n.dropZoneTitleClass+'">'+r+"</div>"),n.$container.removeClass("file-input-new"),t.addCss(n.$container,"file-input-ajax-new"))},_setAsyncUploadStatus:function(t,n,i){var r=this,o=0;r._setProgress(n,e("#"+t).find(".file-thumb-progress")),r.uploadStatus[t]=n,e.each(r.uploadStatus,(function(e,t){o+=t})),r._setProgress(Math.floor(o/i))},_validateMinCount:function(){var e=this,t=e.isAjaxUpload?e.getFileStack().length:e.$element.get(0).files.length;return!(e.validateInitialCount&&e.minFileCount>0&&e._getFileCount(t-1)<e.minFileCount)||(e._noFilesError({}),!1)},_getFileCount:function(e){var t=this;return t.validateInitialCount&&!t.overwriteInitial&&(e+=t.previewCache.count()),e},_getFileId:function(e){var t,n=this.generateFileId;return"function"==typeof n?n(e,event):e&&(t=String(e.webkitRelativePath||e.fileName||e.name||null))?e.size+"-"+t.replace(/[^0-9a-zA-Z_-]/gim,""):null},_getFileName:function(e){return e&&e.name?this.slug(e.name):void 0},_getFileIds:function(e){return this.fileids.filter((function(t){return e?void 0!==t:null!=t}))},_getFileNames:function(e){return this.filenames.filter((function(t){return e?void 0!==t:null!=t}))},_setPreviewError:function(e,t,n,i){var r=this;void 0!==t&&r.updateStack(t,n),r.showPreview&&(!r.removeFromPreviewOnError||i?(r._setThumbStatus(e,"Error"),r._refreshUploadButton(e,i)):e.remove())},_refreshUploadButton:function(e,t){var n=e.find(".kv-file-upload"),i=this.fileActionSettings,r=i.uploadIcon,o=i.uploadTitle;n.length&&(t&&(r=i.uploadRetryIcon,o=i.uploadRetryTitle),n.attr("title",o).html(r))},_checkDimensions:function(e,n,i,r,o,a,s){var l,c,u,d=this,h=d[("Small"===n?"min":"max")+"Image"+a];!t.isEmpty(h)&&i.length&&(u=i[0],c="Width"===a?u.naturalWidth||u.width:u.naturalHeight||u.height,("Small"===n?c>=h:c<=h)||(l=d["msgImage"+a+n].setTokens({name:o,size:h}),d._showUploadError(l,s),d._setPreviewError(r,e,null)))},_validateImage:function(t,n,i,r,o){var a,s,l,c,u=this,d=u.$preview,h=d.find("#"+t),f=h.attr("data-fileindex"),p=h.find("img");n=n||"Untitled",p.one("load",(function(){s=h.width(),l=d.width(),s>l&&p.css("width","100%"),a={ind:f,id:t},u._checkDimensions(f,"Small",p,h,n,"Width",a),u._checkDimensions(f,"Small",p,h,n,"Height",a),u.resizeImage||(u._checkDimensions(f,"Large",p,h,n,"Width",a),u._checkDimensions(f,"Large",p,h,n,"Height",a)),u._raise("fileimageloaded",[t]);try{c=window.piexif?window.piexif.load(o):null}catch(e){c=null}u.loadedImages.push({ind:f,img:p,thumb:h,pid:t,typ:i,siz:r,validated:!1,imgData:o,exifObj:c}),h.data("exif",c),u._validateAllImages()})).one("error",(function(){u._raise("fileimageloaderror",[t])})).each((function(){this.complete?e(this).trigger("load"):this.error&&e(this).trigger("error")}))},_validateAllImages:function(){var e,t,n,i=this,r={val:0},o=i.loadedImages.length,a=i.resizeIfSizeMoreThan;if(o===i.totalImagesCount&&(i._raise("fileimagesloaded"),i.resizeImage))for(e=0;e<i.loadedImages.length;e++)(t=i.loadedImages[e]).validated||((n=t.siz)&&n>1e3*a&&i._getResizedImage(t,r,o),i.loadedImages[e].validated=!0)},_getResizedImage:function(n,i,r){var o,a,s,l,c,u,d=this,h=e(n.img)[0],f=h.naturalWidth,p=h.naturalHeight,m=1,g=d.maxImageWidth||f,v=d.maxImageHeight||p,b=!(!f||!p),y=d.imageCanvas,w=d.imageCanvasContext,x=n.typ,C=n.pid,_=n.ind,k=n.thumb,E=n.exifObj;if(c=function(e,t,n){d.isAjaxUpload?d._showUploadError(e,t,n):d._showError(e,t,n),d._setPreviewError(k,_)},d.filestack[_]&&b&&!(f<=g&&p<=v)||(b&&d.filestack[_]&&d._raise("fileimageresized",[C,_]),i.val++,i.val===r&&d._raise("fileimagesresized"),b)){x=x||d.resizeDefaultImageType,a=f>g,s=p>v,m="width"===d.resizePreference?a?g/f:s?v/p:1:s?v/p:a?g/f:1,d._resetCanvas(),f*=m,p*=m,y.width=f,y.height=p;try{w.drawImage(h,0,0,f,p),l=y.toDataURL(x,d.resizeQuality),E&&(u=window.piexif.dump(E),l=window.piexif.insert(u,l)),o=t.dataURI2Blob(l),d.filestack[_]=o,d._raise("fileimageresized",[C,_]),i.val++,i.val===r&&d._raise("fileimagesresized",[void 0,void 0]),o instanceof Blob||c(d.msgImageResizeError,{id:C,index:_},"fileimageresizeerror")}catch(e){i.val++,i.val===r&&d._raise("fileimagesresized",[void 0,void 0]),c(d.msgImageResizeException.replace("{errors}",e.message),{id:C,index:_},"fileimageresizeexception")}}else c(d.msgImageResizeError,{id:C,index:_},"fileimageresizeerror")},_initBrowse:function(e){var t=this;t.showBrowse?(t.$btnFile=e.find(".btn-file"),t.$btnFile.append(t.$element)):t.$element.hide()},_initCaption:function(){var e=this,n=e.initialCaption||"";return e.overwriteInitial||t.isEmpty(n)?(e.$caption.val(""),!1):(e._setCaption(n),!0)},_setCaption:function(n,i){var r,o,a,s,l,c=this,u=c.getFileStack();if(c.$caption.length){if(c.$captionContainer.removeClass("icon-visible"),i)r=e("<div>"+c.msgValidationError+"</div>").text(),l=(s=u.length)?1===s&&u[0]?c._getFileNames()[0]:c._getMsgSelected(s):c._getMsgSelected(c.msgNo),o=t.isEmpty(n)?l:n,a='<span class="'+c.msgValidationErrorClass+'">'+c.msgValidationErrorIcon+"</span>";else{if(t.isEmpty(n))return;o=r=e("<div>"+n+"</div>").text(),a=c._getLayoutTemplate("fileIcon")}c.$captionContainer.addClass("icon-visible"),c.$caption.attr("title",r).val(o),c.$captionIcon.html(a)}},_createContainer:function(){var t=this,n={class:"file-input file-input-new"+(t.rtl?" kv-rtl":"")},i=e(document.createElement("div")).attr(n).html(t._renderMain());return t.$element.before(i),t._initBrowse(i),t.theme&&i.addClass("theme-"+t.theme),i},_refreshContainer:function(){var e=this,t=e.$container;t.before(e.$element),t.html(e._renderMain()),e._initBrowse(t),e._validateDisabled()},_validateDisabled:function(){this.$caption.attr({readonly:this.isDisabled})},_renderMain:function(){var e=this,t=e.isAjaxUpload&&e.dropZoneEnabled?" file-drop-zone":"file-drop-disabled",n=e.showClose?e._getLayoutTemplate("close"):"",i=e.showPreview?e._getLayoutTemplate("preview").setTokens({class:e.previewClass,dropClass:t}):"",r=e.isDisabled?e.captionClass+" file-caption-disabled":e.captionClass,o=e.captionTemplate.setTokens({class:r+" kv-fileinput-caption"});return e.mainTemplate.setTokens({class:e.mainClass+(!e.showBrowse&&e.showCaption?" no-browse":""),preview:i,close:n,caption:o,upload:e._renderButton("upload"),remove:e._renderButton("remove"),cancel:e._renderButton("cancel"),browse:e._renderButton("browse")})},_renderButton:function(e){var n=this,i=n._getLayoutTemplate("btnDefault"),r=n[e+"Class"],o=n[e+"Title"],a=n[e+"Icon"],s=n[e+"Label"],l=n.isDisabled?" disabled":"",c="button";switch(e){case"remove":if(!n.showRemove)return"";break;case"cancel":if(!n.showCancel)return"";r+=" kv-hidden";break;case"upload":if(!n.showUpload)return"";n.isAjaxUpload&&!n.isDisabled?i=n._getLayoutTemplate("btnLink").replace("{href}",n.uploadUrl):c="submit";break;case"browse":if(!n.showBrowse)return"";i=n._getLayoutTemplate("btnBrowse");break;default:return""}return r+="browse"===e?" btn-file":" fileinput-"+e+" fileinput-"+e+"-button",t.isEmpty(s)||(s=' <span class="'+n.buttonLabelClass+'">'+s+"</span>"),i.setTokens({type:c,css:r,title:o,status:l,icon:a,label:s})},_renderThumbProgress:function(){return'<div class="file-thumb-progress kv-hidden">'+this.progressTemplate.setTokens({percent:"0",status:this.msgUploadBegin})+"</div>"},_renderFileFooter:function(e,n,i,r){var o,a=this,s=a.fileActionSettings,l=s.showRemove,c=s.showDrag,u=s.showUpload,d=s.showZoom,h=a._getLayoutTemplate("footer"),f=a._getLayoutTemplate("indicator"),p=r?s.indicatorError:s.indicatorNew,m=r?s.indicatorErrorTitle:s.indicatorNewTitle,g=f.setTokens({indicator:p,indicatorTitle:m});return n=a._getSize(n),o=a.isAjaxUpload?h.setTokens({actions:a._renderFileActions(u,!1,l,d,c,!1,!1,!1),caption:e,size:n,width:i,progress:a._renderThumbProgress(),indicator:g}):h.setTokens({actions:a._renderFileActions(!1,!1,!1,d,c,!1,!1,!1),caption:e,size:n,width:i,progress:"",indicator:g}),o=t.replaceTags(o,a.previewThumbTags)},_renderFileActions:function(e,t,n,i,r,o,a,s,l,c,u){if(!(e||t||n||i||r))return"";var d,h=this,f=!1===a?"":' data-url="'+a+'"',p=!1===s?"":' data-key="'+s+'"',m="",g="",v="",b="",y="",w=h._getLayoutTemplate("actions"),x=h.fileActionSettings,C=h.otherActionButtons.setTokens({dataKey:p,key:s}),_=o?x.removeClass+" disabled":x.removeClass;return n&&(m=h._getLayoutTemplate("actionDelete").setTokens({removeClass:_,removeIcon:x.removeIcon,removeTitle:x.removeTitle,dataUrl:f,dataKey:p,key:s})),e&&(g=h._getLayoutTemplate("actionUpload").setTokens({uploadClass:x.uploadClass,uploadIcon:x.uploadIcon,uploadTitle:x.uploadTitle})),t&&(v=(v=h._getLayoutTemplate("actionDownload").setTokens({downloadClass:x.downloadClass,downloadIcon:x.downloadIcon,downloadTitle:x.downloadTitle,downloadUrl:c||h.initialPreviewDownloadUrl})).setTokens({filename:u,key:s})),i&&(b=h._getLayoutTemplate("actionZoom").setTokens({zoomClass:x.zoomClass,zoomIcon:x.zoomIcon,zoomTitle:x.zoomTitle})),r&&l&&(d="drag-handle-init "+x.dragClass,y=h._getLayoutTemplate("actionDrag").setTokens({dragClass:d,dragTitle:x.dragTitle,dragIcon:x.dragIcon})),w.setTokens({delete:m,upload:g,download:v,zoom:b,drag:y,other:C})},_browse:function(e){var t=this;t._raise("filebrowse"),e&&e.isDefaultPrevented()||(t.isError&&!t.isAjaxUpload&&t.clear(),t.$captionContainer.focus())},_filterDuplicate:function(e,t,n){var i=this._getFileId(e);i&&n&&n.indexOf(i)>-1||(n||(n=[]),t.push(e),n.push(i))},_change:function(n){var i=this,r=i.$element;if(!i.isAjaxUpload&&t.isEmpty(r.val())&&i.fileInputCleared)i.fileInputCleared=!1;else{i.fileInputCleared=!1;var o,a,s,l,c,u,d,h,f,p,m=[],g=arguments.length>1,v=i.isAjaxUpload,b=g?n.originalEvent.dataTransfer.files:r.get(0).files,y=i.filestack.length,w=t.isEmpty(r.attr("multiple"))&&y>0,x=0,C=i._getFileIds();if(i.reader=null,i._resetUpload(),i._hideFileIcon(),i.isAjaxUpload&&i.$container.find(".file-drop-zone ."+i.dropZoneTitleClass).remove(),g?e.each(b,(function(e,t){t&&!t.type&&void 0!==t.size&&t.size%4096==0?x++:i._filterDuplicate(t,m,C)})):(b=n.target&&void 0===n.target.files?n.target.value?[{name:n.target.value.replace(/^.+\\/,"")}]:[]:n.target.files||{},v?e.each(b,(function(e,t){i._filterDuplicate(t,m,C)})):m=b),t.isEmpty(m)||0===m.length)return v||i.clear(),i._showFolderError(x),void i._raise("fileselectnone");if(i._resetErrors(),l=m.length,a=i._getFileCount(i.isAjaxUpload?i.getFileStack().length+l:l),i.maxFileCount>0&&a>i.maxFileCount){if(!i.autoReplace||l>i.maxFileCount)return s=i.autoReplace&&l>i.maxFileCount?l:a,o=i.msgFilesTooMany.replace("{m}",i.maxFileCount).replace("{n}",s),i.isError=(c=o,u=null,d=null,h=null,f=e.extend(!0,{},i._getOutData({},{},b),{id:d,index:h}),p={id:d,index:h,file:u,files:b},i.isAjaxUpload?i._showUploadError(c,f):i._showError(c,p)),i.$captionContainer.removeClass("icon-visible"),i._setCaption("",!0),void i.$container.removeClass("file-input-new file-input-ajax-new");a>i.maxFileCount&&i._resetPreviewThumbs(v)}else!v||w?(i._resetPreviewThumbs(!1),w&&i.clearStack()):!v||0!==y||i.previewCache.count()&&!i.overwriteInitial||i._resetPreviewThumbs(!0);i.isPreviewable?i.readFiles(m):i._updateFileDetails(1),i._showFolderError(x)}},_abort:function(t){var n,i=this;return i.ajaxAborted&&"object"==typeof i.ajaxAborted&&void 0!==i.ajaxAborted.message?((n=e.extend(!0,{},i._getOutData(),t)).abortData=i.ajaxAborted.data||{},n.abortMessage=i.ajaxAborted.message,i._setProgress(101,i.$progress,i.msgCancelled),i._showUploadError(i.ajaxAborted.message,n,"filecustomerror"),i.cancel(),!0):!!i.ajaxAborted},_resetFileStack:function(){var n=this,i=0,r=[],o=[],a=[];n._getThumbs().each((function(){var s,l=e(this),c=l.attr("data-fileindex"),u=n.filestack[c],d=l.attr("id");"-1"!==c&&-1!==c&&(void 0!==u?(r[i]=u,o[i]=n._getFileName(u),a[i]=n._getFileId(u),l.attr({id:n.previewInitId+"-"+i,"data-fileindex":i}),i++):(s="uploaded-"+t.uniqId(),l.attr({id:s,"data-fileindex":"-1"}),n.$preview.find("#zoom-"+d).attr("id","zoom-"+s)))})),n.filestack=r,n.filenames=o,n.fileids=a},_isFileSelectionValid:function(e){var t=this;return e=e||0,t.required&&!t.getFilesCount()?(t.$errorContainer.html(""),t._showUploadError(t.msgFileRequired),!1):!(t.minFileCount>0&&t._getFileCount(e)<t.minFileCount)||(t._noFilesError({}),!1)},clearStack:function(){var e=this;return e.filestack=[],e.filenames=[],e.fileids=[],e.$element},updateStack:function(e,t){var n=this;return n.filestack[e]=t,n.filenames[e]=n._getFileName(t),n.fileids[e]=t&&n._getFileId(t)||null,n.$element},addToStack:function(e){var t=this;return t.filestack.push(e),t.filenames.push(t._getFileName(e)),t.fileids.push(t._getFileId(e)),t.$element},getFileStack:function(e){return this.filestack.filter((function(t){return e?void 0!==t:null!=t}))},getFilesCount:function(){var e=this,t=e.isAjaxUpload?e.getFileStack().length:e.$element.get(0).files.length;return e._getFileCount(t)},readFiles:function(n){this.reader=new FileReader;var i,r=this,o=r.$element,a=r.$preview,s=r.reader,l=r.$previewContainer,c=r.$previewStatus,u=r.msgLoading,d=r.msgProgress,h=r.previewInitId,f=n.length,p=r.fileTypeSettings,m=r.filestack.length,g=r.allowedFileTypes,v=g?g.length:0,b=r.allowedFileExtensions,y=t.isEmpty(b)?"":b.join(", "),w=r.maxFilePreviewSize&&parseFloat(r.maxFilePreviewSize),x=a.length&&(!w||isNaN(w)),C=function(t,o,a,s){var l,c=e.extend(!0,{},r._getOutData({},{},n),{id:a,index:s}),u={id:a,index:s,file:o,files:n};r._previewDefault(o,a,!0),r.isAjaxUpload?(r.addToStack(void 0),setTimeout((function(){i(s+1)}),100)):f=0,r._initFileActions(),(l=e("#"+a)).find(".kv-file-upload").hide(),r.removeFromPreviewOnError&&l.remove(),r.isError=r.isAjaxUpload?r._showUploadError(t,c):r._showError(t,u),r._updateFileDetails(f)};r.loadedImages=[],r.totalImagesCount=0,e.each(n,(function(e,t){var n=r.fileTypeSettings.image;n&&n(t.type)&&r.totalImagesCount++})),(i=function(_){if(t.isEmpty(o.attr("multiple"))&&(f=1),_>=f)return r.isAjaxUpload&&r.filestack.length>0?r._raise("filebatchselected",[r.getFileStack()]):r._raise("filebatchselected",[n]),l.removeClass("file-thumb-loading"),void c.html("");var k,E,S,T,D,$,A,P,j,O,I,M,N=h+"-"+(m+_),F=n[_],R=p.text,L=p.image,z=p.html,H=F.name?r.slug(F.name):"",B=(F.size||0)/1024,q="",U=t.objUrl.createObjectURL(F),W=0,V="",Y=0,G=function(){var e=d.setTokens({index:_+1,files:f,percent:50,name:H});setTimeout((function(){c.html(e),r._updateFileDetails(f),i(_+1)}),100),r._raise("fileloaded",[F,N,_,s])};if(v>0)for(E=0;E<v;E++)$=g[E],A=r.msgFileTypes[$]||$,V+=0===E?A:", "+A;if(!1!==H){if(0===H.length)return S=r.msgInvalidFileName.replace("{name}",t.htmlEncode(F.name)),void C(S,F,N,_);if(t.isEmpty(b)||(q=new RegExp("\\.("+b.join("|")+")$","i")),k=B.toFixed(2),r.maxFileSize>0&&B>r.maxFileSize)return S=r.msgSizeTooLarge.setTokens({name:H,size:k,maxSize:r.maxFileSize}),void C(S,F,N,_);if(null!==r.minFileSize&&B<=t.getNum(r.minFileSize))return S=r.msgSizeTooSmall.setTokens({name:H,size:k,minSize:r.minFileSize}),void C(S,F,N,_);if(!t.isEmpty(g)&&t.isArray(g)){for(E=0;E<g.length;E+=1)T=g[E],W+=(P=p[T])&&"function"==typeof P&&P(F.type,F.name)?1:0;if(0===W)return S=r.msgInvalidFileType.setTokens({name:H,types:V}),void C(S,F,N,_)}if(0===W&&!t.isEmpty(b)&&t.isArray(b)&&!t.isEmpty(q)&&(D=t.compare(H,q),0===(W+=t.isEmpty(D)?0:D.length)))return S=r.msgInvalidFileExtension.setTokens({name:H,extensions:y}),void C(S,F,N,_);if(!r.showPreview)return r.isAjaxUpload&&r.addToStack(F),setTimeout((function(){i(_+1),r._updateFileDetails(f)}),100),void r._raise("fileloaded",[F,N,_,s]);if(!x&&B>w)return r.addToStack(F),l.addClass("file-thumb-loading"),r._previewDefault(F,N),r._initFileActions(),r._updateFileDetails(f),void i(_+1);a.length&&void 0!==FileReader?(j=R(F.type,H),O=z(F.type,H),I=L(F.type,H),c.html(u.replace("{index}",_+1).replace("{files}",f)),l.addClass("file-thumb-loading"),s.onerror=function(e){r._errorHandler(e,H)},s.onload=function(n){var i,o,a,l,c,u,d,h,f=[];if(o={name:H,type:F.type},e.each(p,(function(e,t){"object"!==e&&"other"!==e&&t(F.type,H)&&Y++})),0===Y){for(a=new Uint8Array(n.target.result),E=0;E<a.length;E++)l=a[E].toString(16),f.push(l);if(i=f.join("").toLowerCase().substring(0,8),u=t.getMimeType(i,"",""),t.isEmpty(u)&&(c=t.arrayBuffer2String(s.result),u=t.isSvg(c)?"image/svg+xml":t.getMimeType(i,c,F.type)),o={name:H,type:u},j=R(u,""),O=z(u,""),I=L(u,""),(M=j||O)||I)return d=M,(h=new FileReader).onerror=function(e){r._errorHandler(e,H)},h.onload=function(e){r._previewFile(_,F,e,N,U,o),r._initFileActions(),G()},void(d?h.readAsText(F,r.textEncoding):h.readAsDataURL(F))}r._previewFile(_,F,n,N,U,o),r._initFileActions(),G()},s.onprogress=function(e){if(e.lengthComputable){var t=e.loaded/e.total*100,n=Math.ceil(t);S=d.setTokens({index:_+1,files:f,percent:n,name:H}),setTimeout((function(){c.html(S)}),100)}},j||O?s.readAsText(F,r.textEncoding):I?s.readAsDataURL(F):s.readAsArrayBuffer(F)):(r._previewDefault(F,N),setTimeout((function(){i(_+1),r._updateFileDetails(f)}),100),r._raise("fileloaded",[F,N,_,s])),r.addToStack(F)}else i(_+1)})(0),r._updateFileDetails(f,!1)},lock:function(){var e=this;return e._resetErrors(),e.disable(),e.showRemove&&e.$container.find(".fileinput-remove").hide(),e.showCancel&&e.$container.find(".fileinput-cancel").show(),e._raise("filelock",[e.filestack,e._getExtraData()]),e.$element},unlock:function(e){var t=this;return void 0===e&&(e=!0),t.enable(),t.showCancel&&t.$container.find(".fileinput-cancel").hide(),t.showRemove&&t.$container.find(".fileinput-remove").show(),e&&t._resetFileStack(),t._raise("fileunlock",[t.filestack,t._getExtraData()]),t.$element},cancel:function(){var t,n=this,i=n.ajaxRequests,r=i.length;if(r>0)for(t=0;t<r;t+=1)n.cancelling=!0,i[t].abort();return n._setProgressCancelled(),n._getThumbs().each((function(){var t=e(this),i=t.attr("data-fileindex");t.removeClass("file-uploading"),void 0!==n.filestack[i]&&(t.find(".kv-file-upload").removeClass("disabled").removeAttr("disabled"),t.find(".kv-file-remove").removeClass("disabled").removeAttr("disabled")),n.unlock()})),n.$element},clear:function(){var n,i=this;if(i._raise("fileclear"))return i.$btnUpload.removeAttr("disabled"),i._getThumbs().find("video,audio,img").each((function(){t.cleanMemory(e(this))})),i._resetUpload(),i.clearStack(),i._clearFileInput(),i._resetErrors(!0),i._hasInitialPreview()?(i._showFileIcon(),i._resetPreview(),i._initPreviewActions(),i.$container.removeClass("file-input-new")):(i._getThumbs().each((function(){i._clearObjects(e(this))})),i.isAjaxUpload&&(i.previewCache.data={}),i.$preview.html(""),n=!i.overwriteInitial&&i.initialCaption.length>0?i.initialCaption:"",i.$caption.attr("title","").val(n),t.addCss(i.$container,"file-input-new"),i._validateDefaultPreview()),0===i.$container.find(t.FRAMES).length&&(i._initCaption()||i.$captionContainer.removeClass("icon-visible")),i._hideFileIcon(),i._raise("filecleared"),i.$captionContainer.focus(),i._setFileDropZoneTitle(),i.$element},reset:function(){var e=this;if(e._raise("filereset"))return e._resetPreview(),e.$container.find(".fileinput-filename").text(""),t.addCss(e.$container,"file-input-new"),(e.getFrames().length||e.isAjaxUpload&&e.dropZoneEnabled)&&e.$container.removeClass("file-input-new"),e.clearStack(),e.formdata={},e._setFileDropZoneTitle(),e.$element},disable:function(){var e=this;return e.isDisabled=!0,e._raise("filedisabled"),e.$element.attr("disabled","disabled"),e.$container.find(".kv-fileinput-caption").addClass("file-caption-disabled"),e.$container.find(".fileinput-remove, .fileinput-upload, .file-preview-frame button").attr("disabled",!0),t.addCss(e.$container.find(".btn-file"),"disabled"),e._initDragDrop(),e.$element},enable:function(){var e=this;return e.isDisabled=!1,e._raise("fileenabled"),e.$element.removeAttr("disabled"),e.$container.find(".kv-fileinput-caption").removeClass("file-caption-disabled"),e.$container.find(".fileinput-remove, .fileinput-upload, .file-preview-frame button").removeAttr("disabled"),e.$container.find(".btn-file").removeClass("disabled"),e._initDragDrop(),e.$element},upload:function(){var n,i,r,o=this,a=o.getFileStack().length,s=!e.isEmptyObject(o._getExtraData());if(o.isAjaxUpload&&!o.isDisabled&&o._isFileSelectionValid(a))if(o._resetUpload(),0!==a||s)if(o.$progress.show(),o.uploadCount=0,o.uploadStatus={},o.uploadLog=[],o.lock(),o._setProgress(2),0===a&&s)o._uploadExtraOnly();else{if(r=o.filestack.length,o.hasInitData=!1,!o.uploadAsync)return o._uploadBatch(),o.$element;for(i=o._getOutData(),o._raise("filebatchpreupload",[i]),o.fileBatchCompleted=!1,o.uploadCache={content:[],config:[],tags:[],append:!0},o.uploadAsyncCount=o.getFileStack().length,n=0;n<r;n++)o.uploadCache.content[n]=null,o.uploadCache.config[n]=null,o.uploadCache.tags[n]=null;for(o.$preview.find(".file-preview-initial").removeClass(t.SORT_CSS),o._initSortable(),o.cacheInitialPreview=o.getPreview(),n=0;n<r;n++)o.filestack[n]&&o._uploadSingle(n,!0)}else o._showUploadError(o.msgUploadEmpty)},destroy:function(){var t=this,n=t.$form,i=t.$container,r=t.$element,o=t.namespace;return e(document).off(o),e(window).off(o),n&&n.length&&n.off(o),t.isAjaxUpload&&t._clearFileInput(),t._cleanup(),t._initPreviewCache(),r.insertBefore(i).off(o).removeData(),i.off().remove(),r},refresh:function(n,i){var r=this,o=r.$element;return n="object"!=typeof n||t.isEmpty(n)?r.options:e.extend(!0,{},r.options,n),r._init(n,!0),r._listen(),i&&o.trigger("change"+r.namespace),o},zoom:function(e){var n=this,i=n._getFrame(e),r=n.$modal;i&&(t.initModal(r),r.html(n._getModalContent()),n._setZoomContent(i),r.modal("show"),n._initZoomButtons())},getExif:function(e){var t=this._getFrame(e);return t&&t.data("exif")||null},getFrames:function(e){return e=e||"",this.$preview.find(t.FRAMES+e)},getPreview:function(){var e=this;return{content:e.initialPreview,config:e.initialPreviewConfig,tags:e.initialPreviewThumbTags}}},e.fn.fileinput=function(i){if(t.hasFileAPISupport()||t.isIE(9)){var r=Array.apply(null,arguments),o=[];switch(r.shift(),this.each((function(){var a,s=e(this),l=s.data("fileinput"),c="object"==typeof i&&i,u=c.theme||s.data("theme"),d={},h={},f=c.language||s.data("language")||e.fn.fileinput.defaults.language||"en";l||(u&&(h=e.fn.fileinputThemes[u]||{}),"en"===f||t.isEmpty(e.fn.fileinputLocales[f])||(d=e.fn.fileinputLocales[f]||{}),a=e.extend(!0,{},e.fn.fileinput.defaults,h,e.fn.fileinputLocales.en,d,c,s.data()),l=new n(this,a),s.data("fileinput",l)),"string"==typeof i&&o.push(l[i].apply(l,r))})),o.length){case 0:return this;case 1:return o[0];default:return o}}},e.fn.fileinput.defaults={language:"en",showCaption:!0,showBrowse:!0,showPreview:!0,showRemove:!0,showUpload:!0,showCancel:!0,showClose:!0,showUploadedThumbs:!0,browseOnZoneClick:!1,autoReplace:!1,autoOrientImage:!0,required:!1,rtl:!1,hideThumbnailContent:!1,generateFileId:null,previewClass:"",captionClass:"",frameClass:"krajee-default",mainClass:"file-caption-main",mainTemplate:null,purifyHtml:!0,fileSizeGetter:null,initialCaption:"",initialPreview:[],initialPreviewDelimiter:"*$$*",initialPreviewAsData:!1,initialPreviewFileType:"image",initialPreviewConfig:[],initialPreviewThumbTags:[],previewThumbTags:{},initialPreviewShowDelete:!0,initialPreviewDownloadUrl:"",removeFromPreviewOnError:!1,deleteUrl:"",deleteExtraData:{},overwriteInitial:!0,previewZoomButtonIcons:{prev:'<i class="glyphicon glyphicon-triangle-left"></i>',next:'<i class="glyphicon glyphicon-triangle-right"></i>',toggleheader:'<i class="glyphicon glyphicon-resize-vertical"></i>',fullscreen:'<i class="glyphicon glyphicon-fullscreen"></i>',borderless:'<i class="glyphicon glyphicon-resize-full"></i>',close:'<i class="glyphicon glyphicon-remove"></i>'},previewZoomButtonClasses:{prev:"btn btn-navigate",next:"btn btn-navigate",toggleheader:"btn btn-kv btn-default btn-outline-secondary",fullscreen:"btn btn-kv btn-default btn-outline-secondary",borderless:"btn btn-kv btn-default btn-outline-secondary",close:"btn btn-kv btn-default btn-outline-secondary"},preferIconicPreview:!1,preferIconicZoomPreview:!1,allowedPreviewTypes:void 0,allowedPreviewMimeTypes:null,allowedFileTypes:null,allowedFileExtensions:null,defaultPreviewContent:null,customLayoutTags:{},customPreviewTags:{},previewFileIcon:'<i class="glyphicon glyphicon-file"></i>',previewFileIconClass:"file-other-icon",previewFileIconSettings:{},previewFileExtSettings:{},buttonLabelClass:"hidden-xs",browseIcon:'<i class="glyphicon glyphicon-folder-open"></i>&nbsp;',browseClass:"btn btn-primary",removeIcon:'<i class="glyphicon glyphicon-trash"></i>',removeClass:"btn btn-default btn-secondary",cancelIcon:'<i class="glyphicon glyphicon-ban-circle"></i>',cancelClass:"btn btn-default btn-secondary",uploadIcon:'<i class="glyphicon glyphicon-upload"></i>',uploadClass:"btn btn-default btn-secondary",uploadUrl:null,uploadUrlThumb:null,uploadAsync:!0,uploadExtraData:{},zoomModalHeight:480,minImageWidth:null,minImageHeight:null,maxImageWidth:null,maxImageHeight:null,resizeImage:!1,resizePreference:"width",resizeQuality:.92,resizeDefaultImageType:"image/jpeg",resizeIfSizeMoreThan:0,minFileSize:0,maxFileSize:0,maxFilePreviewSize:25600,minFileCount:0,maxFileCount:0,validateInitialCount:!1,msgValidationErrorClass:"text-danger",msgValidationErrorIcon:'<i class="glyphicon glyphicon-exclamation-sign"></i> ',msgErrorClass:"file-error-message",progressThumbClass:"progress-bar bg-success progress-bar-success progress-bar-striped active",progressClass:"progress-bar bg-success progress-bar-success progress-bar-striped active",progressCompleteClass:"progress-bar bg-success progress-bar-success",progressErrorClass:"progress-bar bg-danger progress-bar-danger",progressUploadThreshold:99,previewFileType:"image",elCaptionContainer:null,elCaptionText:null,elPreviewContainer:null,elPreviewImage:null,elPreviewStatus:null,elErrorContainer:null,errorCloseButton:t.closeButton("kv-error-close"),slugCallback:null,dropZoneEnabled:!0,dropZoneTitleClass:"file-drop-zone-title",fileActionSettings:{},otherActionButtons:"",textEncoding:"UTF-8",ajaxSettings:{},ajaxDeleteSettings:{},showAjaxErrorDetails:!0,mergeAjaxCallbacks:!1,mergeAjaxDeleteCallbacks:!1,retryErrorUploads:!0},e.fn.fileinputLocales.en={fileSingle:"file",filePlural:"files",browseLabel:"Browse &hellip;",removeLabel:"Remove",removeTitle:"Clear selected files",cancelLabel:"Cancel",cancelTitle:"Abort ongoing upload",uploadLabel:"Upload",uploadTitle:"Upload selected files",msgNo:"No",msgNoFilesSelected:"No files selected",msgCancelled:"Cancelled",msgPlaceholder:"Select {files}...",msgZoomModalHeading:"Detailed Preview",msgFileRequired:"You must select a file to upload.",msgSizeTooSmall:'File "{name}" (<b>{size} KB</b>) is too small and must be larger than <b>{minSize} KB</b>.',msgSizeTooLarge:'File "{name}" (<b>{size} KB</b>) exceeds maximum allowed upload size of <b>{maxSize} KB</b>.',msgFilesTooLess:"You must select at least <b>{n}</b> {files} to upload.",msgFilesTooMany:"Number of files selected for upload <b>({n})</b> exceeds maximum allowed limit of <b>{m}</b>.",msgFileNotFound:'File "{name}" not found!',msgFileSecured:'Security restrictions prevent reading the file "{name}".',msgFileNotReadable:'File "{name}" is not readable.',msgFilePreviewAborted:'File preview aborted for "{name}".',msgFilePreviewError:'An error occurred while reading the file "{name}".',msgInvalidFileName:'Invalid or unsupported characters in file name "{name}".',msgInvalidFileType:'Invalid type for file "{name}". Only "{types}" files are supported.',msgInvalidFileExtension:'Invalid extension for file "{name}". Only "{extensions}" files are supported.',msgFileTypes:{image:"image",html:"HTML",text:"text",video:"video",audio:"audio",flash:"flash",pdf:"PDF",object:"object"},msgUploadAborted:"The file upload was aborted",msgUploadThreshold:"Processing...",msgUploadBegin:"Initializing...",msgUploadEnd:"Done",msgUploadEmpty:"No valid data available for upload.",msgUploadError:"Error",msgValidationError:"Validation Error",msgLoading:"Loading file {index} of {files} &hellip;",msgProgress:"Loading file {index} of {files} - {name} - {percent}% completed.",msgSelected:"{n} {files} selected",msgFoldersNotAllowed:"Drag & drop files only! {n} folder(s) dropped were skipped.",msgImageWidthSmall:'Width of image file "{name}" must be at least {size} px.',msgImageHeightSmall:'Height of image file "{name}" must be at least {size} px.',msgImageWidthLarge:'Width of image file "{name}" cannot exceed {size} px.',msgImageHeightLarge:'Height of image file "{name}" cannot exceed {size} px.',msgImageResizeError:"Could not get the image dimensions to resize.",msgImageResizeException:"Error while resizing the image.<pre>{errors}</pre>",msgAjaxError:"Something went wrong with the {operation} operation. Please try again later!",msgAjaxProgressError:"{operation} failed",ajaxOperations:{deleteThumb:"file delete",uploadThumb:"file upload",uploadBatch:"batch file upload",uploadExtra:"form data upload"},dropZoneTitle:"Drag & drop files here &hellip;",dropZoneClickTitle:"<br>(or click to select {files})",previewZoomButtonTitles:{prev:"View previous file",next:"View next file",toggleheader:"Toggle header",fullscreen:"Toggle full screen",borderless:"Toggle borderless mode",close:"Close detailed preview"}},e.fn.fileinput.Constructor=n,e(document).ready((function(){var t=e("input.file[type=file]");t.length&&t.fileinput()}))})),define("pgui.editors/multi_uploader",["pgui.editors/plain","pgui.localizer","bootstrap-file-input"],(function(e,t){return e.extend({setLoading:function(e){var t=$(".fileinput-upload").prop("disabled",e);e?t.addClass("btn-loading"):t.removeClass("btn-loading")},init:function(e,n){this._super(e,n);var i=this,r=e.closest("form").attr("action");e.fileinput({theme:"explorer-fa",uploadUrl:r,initialPreviewAsData:!0,showUpload:!1,showCancel:!1,uploadAsync:!0,fileActionSettings:{showUpload:!1,showDownload:!1,showZoom:!1,removeIcon:'<i class="icon-remove"></i>'},browseIcon:'<i class="icon-folder-open"></i>&nbsp;',browseClass:"btn btn-default",removeIcon:'<i class="icon-remove"></i>',removeLabel:t.getString("RemoveAll"),msgValidationErrorIcon:'<i class="icon-exclamation"></i>'}),e.on("filebatchuploadcomplete",(function(e,t,n){window.location.href=$(".js-close-form").first().attr("href")})),e.on("filepreajax",(function(e,t,n){i.setLoading(!0)})),e.on("fileuploaderror",(function(e,t,n){i.setLoading(!1)}))}})})),function(e){"use strict";"function"==typeof define&&define.amd?define("jquery.autocomplete",["jquery"],e):"object"==typeof exports&&"function"==typeof require?e(require("jquery")):e(jQuery)}((function(e){"use strict";var t={escapeRegExChars:function(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")},createNode:function(e){var t=document.createElement("div");return t.className=e,t.style.position="absolute",t.style.display="none",t}},n=27,i=9,r=13,o=38,a=39,s=40,l=e.noop;function c(t,n){var i=this;i.element=t,i.el=e(t),i.suggestions=[],i.badQueries=[],i.selectedIndex=-1,i.currentValue=i.element.value,i.timeoutId=null,i.cachedResponse={},i.onChangeTimeout=null,i.onChange=null,i.isLocal=!1,i.suggestionsContainer=null,i.noSuggestionsContainer=null,i.options=e.extend({},c.defaults,n),i.classes={selected:"autocomplete-selected",suggestion:"autocomplete-suggestion"},i.hint=null,i.hintValue="",i.selection=null,i.initialize(),i.setOptions(n)}c.utils=t,e.Autocomplete=c,c.defaults={ajaxSettings:{},autoSelectFirst:!1,appendTo:"body",serviceUrl:null,lookup:null,onSelect:null,width:"auto",minChars:1,maxHeight:300,deferRequestBy:0,params:{},formatResult:function(e,n){if(!n)return e.value;var i="("+t.escapeRegExChars(n)+")";return e.value.replace(new RegExp(i,"gi"),"<strong>$1</strong>").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/&lt;(\/?strong)&gt;/g,"<$1>")},formatGroup:function(e,t){return'<div class="autocomplete-group">'+t+"</div>"},delimiter:null,zIndex:9999,type:"GET",noCache:!1,onSearchStart:l,onSearchComplete:l,onSearchError:l,preserveInput:!1,containerClass:"autocomplete-suggestions",tabDisabled:!1,dataType:"text",currentRequest:null,triggerSelectOnValidInput:!0,preventBadQueries:!0,lookupFilter:function(e,t,n){return-1!==e.value.toLowerCase().indexOf(n)},paramName:"query",transformResult:function(t){return"string"==typeof t?e.parseJSON(t):t},showNoSuggestionNotice:!1,noSuggestionNotice:"No results",orientation:"bottom",forceFixPosition:!1},c.prototype={initialize:function(){var t,n=this,i="."+n.classes.suggestion,r=n.classes.selected,o=n.options;n.element.setAttribute("autocomplete","off"),n.noSuggestionsContainer=e('<div class="autocomplete-no-suggestion"></div>').html(this.options.noSuggestionNotice).get(0),n.suggestionsContainer=c.utils.createNode(o.containerClass),(t=e(n.suggestionsContainer)).appendTo(o.appendTo||"body"),"auto"!==o.width&&t.css("width",o.width),t.on("mouseover.autocomplete",i,(function(){n.activate(e(this).data("index"))})),t.on("mouseout.autocomplete",(function(){n.selectedIndex=-1,t.children("."+r).removeClass(r)})),t.on("click.autocomplete",i,(function(){n.select(e(this).data("index"))})),t.on("click.autocomplete",(function(){clearTimeout(n.blurTimeoutId)})),n.fixPositionCapture=function(){n.visible&&n.fixPosition()},e(window).on("resize.autocomplete",n.fixPositionCapture),n.el.on("keydown.autocomplete",(function(e){n.onKeyPress(e)})),n.el.on("keyup.autocomplete",(function(e){n.onKeyUp(e)})),n.el.on("blur.autocomplete",(function(){n.onBlur()})),n.el.on("focus.autocomplete",(function(){n.onFocus()})),n.el.on("change.autocomplete",(function(e){n.onKeyUp(e)})),n.el.on("input.autocomplete",(function(e){n.onKeyUp(e)}))},onFocus:function(){var e=this;e.fixPosition(),e.el.val().length>=e.options.minChars&&e.onValueChange()},onBlur:function(){var e=this;e.blurTimeoutId=setTimeout((function(){e.hide()}),200)},abortAjax:function(){var e=this;e.currentRequest&&(e.currentRequest.abort(),e.currentRequest=null)},setOptions:function(t){var n=this,i=e.extend({},n.options,t);n.isLocal=Array.isArray(i.lookup),n.isLocal&&(i.lookup=n.verifySuggestionsFormat(i.lookup)),i.orientation=n.validateOrientation(i.orientation,"bottom"),e(n.suggestionsContainer).css({"max-height":i.maxHeight+"px",width:i.width+"px","z-index":i.zIndex}),this.options=i},clearCache:function(){this.cachedResponse={},this.badQueries=[]},clear:function(){this.clearCache(),this.currentValue="",this.suggestions=[]},disable:function(){var e=this;e.disabled=!0,clearTimeout(e.onChangeTimeout),e.abortAjax()},enable:function(){this.disabled=!1},fixPosition:function(){var t=this,n=e(t.suggestionsContainer),i=n.parent().get(0);if(i===document.body||t.options.forceFixPosition){var r=t.options.orientation,o=n.outerHeight(),a=t.el.outerHeight(),s=t.el.offset(),l={top:s.top,left:s.left};if("auto"===r){var c=e(window).height(),u=e(window).scrollTop(),d=-u+s.top-o,h=u+c-(s.top+a+o);r=Math.max(d,h)===d?"top":"bottom"}if(l.top+="top"===r?-o:a,i!==document.body){var f,p=n.css("opacity");t.visible||n.css("opacity",0).show(),f=n.offsetParent().offset(),l.top-=f.top,l.top+=i.scrollTop,l.left-=f.left,t.visible||n.css("opacity",p).hide()}"auto"===t.options.width&&(l.width=t.el.outerWidth()+"px"),n.css(l)}},isCursorAtEnd:function(){var e,t=this.el.val().length,n=this.element.selectionStart;return"number"==typeof n?n===t:!document.selection||((e=document.selection.createRange()).moveStart("character",-t),t===e.text.length)},onKeyPress:function(e){var t=this;if(t.disabled||t.visible||e.which!==s||!t.currentValue){if(!t.disabled&&t.visible){switch(e.which){case n:t.el.val(t.currentValue),t.hide();break;case a:if(t.hint&&t.options.onHint&&t.isCursorAtEnd()){t.selectHint();break}return;case i:if(t.hint&&t.options.onHint)return void t.selectHint();if(-1===t.selectedIndex)return void t.hide();if(t.select(t.selectedIndex),!1===t.options.tabDisabled)return;break;case r:if(-1===t.selectedIndex)return void t.hide();t.select(t.selectedIndex);break;case o:t.moveUp();break;case s:t.moveDown();break;default:return}e.stopImmediatePropagation(),e.preventDefault()}}else t.suggest()},onKeyUp:function(e){var t=this;if(!t.disabled){switch(e.which){case o:case s:return}clearTimeout(t.onChangeTimeout),t.currentValue!==t.el.val()&&(t.findBestHint(),t.options.deferRequestBy>0?t.onChangeTimeout=setTimeout((function(){t.onValueChange()}),t.options.deferRequestBy):t.onValueChange())}},onValueChange:function(){if(this.ignoreValueChange)this.ignoreValueChange=!1;else{var t=this,n=t.options,i=t.el.val(),r=t.getQuery(i);t.selection&&t.currentValue!==r&&(t.selection=null,(n.onInvalidateSelection||e.noop).call(t.element)),clearTimeout(t.onChangeTimeout),t.currentValue=i,t.selectedIndex=-1,n.triggerSelectOnValidInput&&t.isExactMatch(r)?t.select(0):r.length<n.minChars?t.hide():t.getSuggestions(r)}},isExactMatch:function(e){var t=this.suggestions;return 1===t.length&&t[0].value.toLowerCase()===e.toLowerCase()},getQuery:function(t){var n,i=this.options.delimiter;return i?(n=t.split(i),e.trim(n[n.length-1])):t},getSuggestionsLocal:function(t){var n,i=this.options,r=t.toLowerCase(),o=i.lookupFilter,a=parseInt(i.lookupLimit,10);return n={suggestions:e.grep(i.lookup,(function(e){return o(e,t,r)}))},a&&n.suggestions.length>a&&(n.suggestions=n.suggestions.slice(0,a)),n},getSuggestions:function(t){var n,i,r,o,a=this,s=a.options,l=s.serviceUrl;s.params[s.paramName]=t,!1!==s.onSearchStart.call(a.element,s.params)&&(i=s.ignoreParams?null:s.params,e.isFunction(s.lookup)?s.lookup(t,(function(e){a.suggestions=e.suggestions,a.suggest(),s.onSearchComplete.call(a.element,t,e.suggestions)})):(a.isLocal?n=a.getSuggestionsLocal(t):(e.isFunction(l)&&(l=l.call(a.element,t)),r=l+"?"+e.param(i||{}),n=a.cachedResponse[r]),n&&Array.isArray(n.suggestions)?(a.suggestions=n.suggestions,a.suggest(),s.onSearchComplete.call(a.element,t,n.suggestions)):a.isBadQuery(t)?s.onSearchComplete.call(a.element,t,[]):(a.abortAjax(),o={url:l,data:i,type:s.type,dataType:s.dataType},e.extend(o,s.ajaxSettings),a.currentRequest=e.ajax(o).done((function(e){var n;a.currentRequest=null,n=s.transformResult(e,t),a.processResponse(n,t,r),s.onSearchComplete.call(a.element,t,n.suggestions)})).fail((function(e,n,i){s.onSearchError.call(a.element,t,e,n,i)})))))},isBadQuery:function(e){if(!this.options.preventBadQueries)return!1;for(var t=this.badQueries,n=t.length;n--;)if(0===e.indexOf(t[n]))return!0;return!1},hide:function(){var t=this,n=e(t.suggestionsContainer);e.isFunction(t.options.onHide)&&t.visible&&t.options.onHide.call(t.element,n),t.visible=!1,t.selectedIndex=-1,clearTimeout(t.onChangeTimeout),e(t.suggestionsContainer).hide(),t.signalHint(null)},suggest:function(){if(this.suggestions.length){var t,n=this,i=n.options,r=i.groupBy,o=i.formatResult,a=n.getQuery(n.currentValue),s=n.classes.suggestion,l=n.classes.selected,c=e(n.suggestionsContainer),u=e(n.noSuggestionsContainer),d=i.beforeRender,h="";i.triggerSelectOnValidInput&&n.isExactMatch(a)?n.select(0):(e.each(n.suggestions,(function(e,n){r&&(h+=function(e,n){var o=e.data[r];return t===o?"":(t=o,i.formatGroup(e,t))}(n,0)),h+='<div class="'+s+'" data-index="'+e+'">'+o(n,a,e)+"</div>"})),this.adjustContainerWidth(),u.detach(),c.html(h),e.isFunction(d)&&d.call(n.element,c,n.suggestions),n.fixPosition(),c.show(),i.autoSelectFirst&&(n.selectedIndex=0,c.scrollTop(0),c.children("."+s).first().addClass(l)),n.visible=!0,n.findBestHint())}else this.options.showNoSuggestionNotice?this.noSuggestions():this.hide()},noSuggestions:function(){var t=this,n=t.options.beforeRender,i=e(t.suggestionsContainer),r=e(t.noSuggestionsContainer);this.adjustContainerWidth(),r.detach(),i.empty(),i.append(r),e.isFunction(n)&&n.call(t.element,i,t.suggestions),t.fixPosition(),i.show(),t.visible=!0},adjustContainerWidth:function(){var t,n=this,i=n.options,r=e(n.suggestionsContainer);"auto"===i.width?(t=n.el.outerWidth(),r.css("width",t>0?t:300)):"flex"===i.width&&r.css("width","")},findBestHint:function(){var t=this,n=t.el.val().toLowerCase(),i=null;n&&(e.each(t.suggestions,(function(e,t){var r=0===t.value.toLowerCase().indexOf(n);return r&&(i=t),!r})),t.signalHint(i))},signalHint:function(t){var n="",i=this;t&&(n=i.currentValue+t.value.substr(i.currentValue.length)),i.hintValue!==n&&(i.hintValue=n,i.hint=t,(this.options.onHint||e.noop)(n))},verifySuggestionsFormat:function(t){return t.length&&"string"==typeof t[0]?e.map(t,(function(e){return{value:e,data:null}})):t},validateOrientation:function(t,n){return t=e.trim(t||"").toLowerCase(),-1===e.inArray(t,["auto","bottom","top"])&&(t=n),t},processResponse:function(e,t,n){var i=this,r=i.options;e.suggestions=i.verifySuggestionsFormat(e.suggestions),r.noCache||(i.cachedResponse[n]=e,r.preventBadQueries&&!e.suggestions.length&&i.badQueries.push(t)),t===i.getQuery(i.currentValue)&&(i.suggestions=e.suggestions,i.suggest())},activate:function(t){var n,i=this,r=i.classes.selected,o=e(i.suggestionsContainer),a=o.find("."+i.classes.suggestion);return o.find("."+r).removeClass(r),i.selectedIndex=t,-1!==i.selectedIndex&&a.length>i.selectedIndex?(n=a.get(i.selectedIndex),e(n).addClass(r),n):null},selectHint:function(){var t=this,n=e.inArray(t.hint,t.suggestions);t.select(n)},select:function(e){this.hide(),this.onSelect(e)},moveUp:function(){var t=this;if(-1!==t.selectedIndex)return 0===t.selectedIndex?(e(t.suggestionsContainer).children("."+t.classes.suggestion).first().removeClass(t.classes.selected),t.selectedIndex=-1,t.ignoreValueChange=!1,t.el.val(t.currentValue),void t.findBestHint()):void t.adjustScroll(t.selectedIndex-1)},moveDown:function(){var e=this;e.selectedIndex!==e.suggestions.length-1&&e.adjustScroll(e.selectedIndex+1)},adjustScroll:function(t){var n=this,i=n.activate(t);if(i){var r,o,a,s=e(i).outerHeight();r=i.offsetTop,a=(o=e(n.suggestionsContainer).scrollTop())+n.options.maxHeight-s,r<o?e(n.suggestionsContainer).scrollTop(r):r>a&&e(n.suggestionsContainer).scrollTop(r-n.options.maxHeight+s),n.options.preserveInput||(n.ignoreValueChange=!0,n.el.val(n.getValue(n.suggestions[t].value))),n.signalHint(null)}},onSelect:function(t){var n=this,i=n.options.onSelect,r=n.suggestions[t];n.currentValue=n.getValue(r.value),n.currentValue===n.el.val()||n.options.preserveInput||n.el.val(n.currentValue),n.signalHint(null),n.suggestions=[],n.selection=r,e.isFunction(i)&&i.call(n.element,r)},getValue:function(e){var t,n,i=this.options.delimiter;return i?1===(n=(t=this.currentValue).split(i)).length?e:t.substr(0,t.length-n[n.length-1].length)+e:e},dispose:function(){var t=this;t.el.off(".autocomplete").removeData("autocomplete"),e(window).off("resize.autocomplete",t.fixPositionCapture),e(t.suggestionsContainer).remove()}},e.fn.devbridgeAutocomplete=function(t,n){var i="autocomplete";return arguments.length?this.each((function(){var r=e(this),o=r.data(i);"string"==typeof t?o&&"function"==typeof o[t]&&o[t](n):(o&&o.dispose&&o.dispose(),o=new c(this,t),r.data(i,o))})):this.first().data(i)},e.fn.autocomplete||(e.fn.autocomplete=e.fn.devbridgeAutocomplete)})),define("pgui.editors/autocomplete",["pgui.editors/plain","jquery.autocomplete"],(function(e){return e.extend({init:function(e,t){this._super(e,t);var n=this;e.autocomplete({serviceUrl:e.data("url"),minChars:e.data("minimum-input-length"),onSelect:function(e){n.doChanged()}})}})})),
/*!
 * Signature Pad v3.0.0-beta.3 | https://github.com/szimek/signature_pad
 * (c) 2018 Szymon Nowak | Released under the MIT license
 */
function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("signature_pad",t):e.SignaturePad=t()}(this,(function(){"use strict";var e=function(){function e(e,t,n){this.x=e,this.y=t,this.time=n||Date.now()}return e.prototype.distanceTo=function(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))},e.prototype.equals=function(e){return this.x===e.x&&this.y===e.y&&this.time===e.time},e.prototype.velocityFrom=function(e){return this.time!==e.time?this.distanceTo(e)/(this.time-e.time):0},e}(),t=function(){function t(e,t,n,i,r,o){this.startPoint=e,this.control2=t,this.control1=n,this.endPoint=i,this.startWidth=r,this.endWidth=o}return t.fromPoints=function(e,n){var i=this.calculateControlPoints(e[0],e[1],e[2]).c2,r=this.calculateControlPoints(e[1],e[2],e[3]).c1;return new t(e[1],i,r,e[2],n.start,n.end)},t.calculateControlPoints=function(t,n,i){var r=t.x-n.x,o=t.y-n.y,a=n.x-i.x,s=n.y-i.y,l=(t.x+n.x)/2,c=(t.y+n.y)/2,u=(n.x+i.x)/2,d=(n.y+i.y)/2,h=Math.sqrt(r*r+o*o),f=Math.sqrt(a*a+s*s),p=f/(h+f),m=u+(l-u)*p,g=d+(c-d)*p,v=n.x-m,b=n.y-g;return{c1:new e(l+v,c+b),c2:new e(u+v,d+b)}},t.prototype.length=function(){for(var e,t,n=0,i=0;i<=10;i+=1){var r=i/10,o=this.point(r,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),a=this.point(r,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(i>0){var s=o-e,l=a-t;n+=Math.sqrt(s*s+l*l)}e=o,t=a}return n},t.prototype.point=function(e,t,n,i,r){return t*(1-e)*(1-e)*(1-e)+3*n*(1-e)*(1-e)*e+3*i*(1-e)*e*e+r*e*e*e},t}();var n=function(){function n(e,t){void 0===t&&(t={});var i=this;this.canvas=e,this.options=t,this._handleMouseDown=function(e){1===e.which&&(i._mouseButtonDown=!0,i._strokeBegin(e))},this._handleMouseMove=function(e){i._mouseButtonDown&&i._strokeMoveUpdate(e)},this._handleMouseUp=function(e){1===e.which&&i._mouseButtonDown&&(i._mouseButtonDown=!1,i._strokeEnd(e))},this._handleTouchStart=function(e){if(e.preventDefault(),1===e.targetTouches.length){var t=e.changedTouches[0];i._strokeBegin(t)}},this._handleTouchMove=function(e){e.preventDefault();var t=e.targetTouches[0];i._strokeMoveUpdate(t)},this._handleTouchEnd=function(e){if(e.target===i.canvas){e.preventDefault();var t=e.changedTouches[0];i._strokeEnd(t)}},this.velocityFilterWeight=t.velocityFilterWeight||.7,this.minWidth=t.minWidth||.5,this.maxWidth=t.maxWidth||2.5,this.throttle="throttle"in t?t.throttle:16,this.minDistance="minDistance"in t?t.minDistance:5,this.throttle?this._strokeMoveUpdate=function(e,t){void 0===t&&(t=250);var n,i,r,o=0,a=null,s=function(){o=Date.now(),a=null,n=e.apply(i,r),a||(i=null,r=[])};return function(){for(var l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];var u=Date.now(),d=t-(u-o);return i=this,r=l,d<=0||d>t?(a&&(clearTimeout(a),a=null),o=u,n=e.apply(i,r),a||(i=null,r=[])):a||(a=window.setTimeout(s,d)),n}}(n.prototype._strokeUpdate,this.throttle):this._strokeMoveUpdate=n.prototype._strokeUpdate,this.dotSize=t.dotSize||function(){return(this.minWidth+this.maxWidth)/2},this.penColor=t.penColor||"black",this.backgroundColor=t.backgroundColor||"rgba(0,0,0,0)",this.onBegin=t.onBegin,this.onEnd=t.onEnd,this._ctx=e.getContext("2d"),this.clear(),this.on()}return n.prototype.clear=function(){var e=this._ctx,t=this.canvas;e.fillStyle=this.backgroundColor,e.clearRect(0,0,t.width,t.height),e.fillRect(0,0,t.width,t.height),this._data=[],this._reset(),this._isEmpty=!0},n.prototype.fromDataURL=function(e,t,n){var i=this;void 0===t&&(t={});var r=new Image,o=(t.ratio||window.devicePixelRatio,this.canvas.width),a=this.canvas.height;this._reset(),r.onload=function(){i._ctx.drawImage(r,0,0,o,a),n&&n()},r.onerror=function(e){n&&n(e)},r.src=e,this._isEmpty=!1},n.prototype.toDataURL=function(e,t){return void 0===e&&(e="image/png"),"image/svg+xml"===e?this._toSVG():this.canvas.toDataURL(e,t)},n.prototype.on=function(){this.canvas.style.touchAction="none",this.canvas.style.msTouchAction="none",window.PointerEvent?this._handlePointerEvents():(this._handleMouseEvents(),"ontouchstart"in window&&this._handleTouchEvents())},n.prototype.off=function(){this.canvas.style.touchAction="auto",this.canvas.style.msTouchAction="auto",this.canvas.removeEventListener("pointerdown",this._handleMouseDown),this.canvas.removeEventListener("pointermove",this._handleMouseMove),document.removeEventListener("pointerup",this._handleMouseUp),this.canvas.removeEventListener("mousedown",this._handleMouseDown),this.canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this.canvas.removeEventListener("touchstart",this._handleTouchStart),this.canvas.removeEventListener("touchmove",this._handleTouchMove),this.canvas.removeEventListener("touchend",this._handleTouchEnd)},n.prototype.isEmpty=function(){return this._isEmpty},n.prototype.fromData=function(e){var t=this;this.clear(),this._fromData(e,(function(e){var n=e.color,i=e.curve;return t._drawCurve({color:n,curve:i})}),(function(e){var n=e.color,i=e.point;return t._drawDot({color:n,point:i})})),this._data=e},n.prototype.toData=function(){return this._data},n.prototype._strokeBegin=function(e){var t={color:this.penColor,points:[]};"function"==typeof this.onBegin&&this.onBegin(e),this._data.push(t),this._reset(),this._strokeUpdate(e)},n.prototype._strokeUpdate=function(e){var t=e.clientX,n=e.clientY,i=this._createPoint(t,n),r=this._data[this._data.length-1],o=r.points,a=o.length>0&&o[o.length-1],s=!!a&&i.distanceTo(a)<=this.minDistance,l=r.color;if(!a||!a||!s){var c=this._addPoint(i);a?c&&this._drawCurve({color:l,curve:c}):this._drawDot({color:l,point:i}),o.push({time:i.time,x:i.x,y:i.y})}},n.prototype._strokeEnd=function(e){this._strokeUpdate(e),"function"==typeof this.onEnd&&this.onEnd(e)},n.prototype._handlePointerEvents=function(){this._mouseButtonDown=!1,this.canvas.addEventListener("pointerdown",this._handleMouseDown),this.canvas.addEventListener("pointermove",this._handleMouseMove),document.addEventListener("pointerup",this._handleMouseUp)},n.prototype._handleMouseEvents=function(){this._mouseButtonDown=!1,this.canvas.addEventListener("mousedown",this._handleMouseDown),this.canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)},n.prototype._handleTouchEvents=function(){this.canvas.addEventListener("touchstart",this._handleTouchStart),this.canvas.addEventListener("touchmove",this._handleTouchMove),this.canvas.addEventListener("touchend",this._handleTouchEnd)},n.prototype._reset=function(){this._lastPoints=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._ctx.fillStyle=this.penColor},n.prototype._createPoint=function(t,n){var i=this.canvas.getBoundingClientRect();return new e(t-i.left,n-i.top,(new Date).getTime())},n.prototype._addPoint=function(e){var n=this._lastPoints;if(n.push(e),n.length>2){3===n.length&&n.unshift(n[0]);var i=this._calculateCurveWidths(n[1],n[2]),r=t.fromPoints(n,i);return n.shift(),r}return null},n.prototype._calculateCurveWidths=function(e,t){var n=this.velocityFilterWeight*t.velocityFrom(e)+(1-this.velocityFilterWeight)*this._lastVelocity,i=this._strokeWidth(n),r={end:i,start:this._lastWidth};return this._lastVelocity=n,this._lastWidth=i,r},n.prototype._strokeWidth=function(e){return Math.max(this.maxWidth/(e+1),this.minWidth)},n.prototype._drawCurveSegment=function(e,t,n){var i=this._ctx;i.moveTo(e,t),i.arc(e,t,n,0,2*Math.PI,!1),this._isEmpty=!1},n.prototype._drawCurve=function(e){var t=e.color,n=e.curve,i=this._ctx,r=n.endWidth-n.startWidth,o=2*Math.floor(n.length());i.beginPath(),i.fillStyle=t;for(var a=0;a<o;a+=1){var s=a/o,l=s*s,c=l*s,u=1-s,d=u*u,h=d*u,f=h*n.startPoint.x;f+=3*d*s*n.control1.x,f+=3*u*l*n.control2.x,f+=c*n.endPoint.x;var p=h*n.startPoint.y;p+=3*d*s*n.control1.y,p+=3*u*l*n.control2.y,p+=c*n.endPoint.y;var m=n.startWidth+c*r;this._drawCurveSegment(f,p,m)}i.closePath(),i.fill()},n.prototype._drawDot=function(e){var t=e.color,n=e.point,i=this._ctx,r="function"==typeof this.dotSize?this.dotSize():this.dotSize;i.beginPath(),this._drawCurveSegment(n.x,n.y,r),i.closePath(),i.fillStyle=t,i.fill()},n.prototype._fromData=function(t,n,i){for(var r=0,o=t;r<o.length;r++){var a=o[r],s=a.color,l=a.points;if(l.length>1)for(var c=0;c<l.length;c+=1){var u=l[c],d=new e(u.x,u.y,u.time);this.penColor=s,0===c&&this._reset();var h=this._addPoint(d);h&&n({color:s,curve:h})}else this._reset(),i({color:s,point:l[0]})}},n.prototype._toSVG=function(){var e=this,t=this._data,n=Math.max(window.devicePixelRatio||1,1),i=this.canvas.width/n,r=this.canvas.height/n,o=document.createElementNS("http://www.w3.org/2000/svg","svg");if(o.setAttribute("width",this.canvas.width.toString()),o.setAttribute("height",this.canvas.height.toString()),"transparent"!=this.backgroundColor){var a=document.createElement("rect");a.setAttribute("width","100%"),a.setAttribute("height","100%"),a.setAttribute("fill",this.backgroundColor),o.appendChild(a)}this._fromData(t,(function(e){var t=e.color,n=e.curve,i=document.createElement("path");if(!(isNaN(n.control1.x)||isNaN(n.control1.y)||isNaN(n.control2.x)||isNaN(n.control2.y))){var r="M "+n.startPoint.x.toFixed(3)+","+n.startPoint.y.toFixed(3)+" C "+n.control1.x.toFixed(3)+","+n.control1.y.toFixed(3)+" "+n.control2.x.toFixed(3)+","+n.control2.y.toFixed(3)+" "+n.endPoint.x.toFixed(3)+","+n.endPoint.y.toFixed(3);i.setAttribute("d",r),i.setAttribute("stroke-width",(2.25*n.endWidth).toFixed(3)),i.setAttribute("stroke",t),i.setAttribute("fill","none"),i.setAttribute("stroke-linecap","round"),o.appendChild(i)}}),(function(t){var n=t.color,i=t.point,r=document.createElement("circle"),a="function"==typeof e.dotSize?e.dotSize():e.dotSize;r.setAttribute("r",a.toString()),r.setAttribute("cx",i.x.toString()),r.setAttribute("cy",i.y.toString()),r.setAttribute("fill",n),o.appendChild(r)}));var s='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 '+i+" "+r+'" width="'+i+'" height="'+r+'">',l=o.innerHTML;if(void 0===l){var c=document.createElement("dummy"),u=o.childNodes;c.innerHTML="";for(var d=0;d<u.length;d+=1)c.appendChild(u[d].cloneNode(!0));l=c.innerHTML}return"data:image/svg+xml;base64,"+btoa(s+l+"</svg>")},n}();return n})),define("pgui.editors/signature",["pgui.editors/plain","signature_pad"],(function(e,t){return e.extend({init:function(e,n){this._super(e,n);var i=this;this._history=[];var r="",o=e.closest("div"),a=o.find("canvas").first().get(0);this.formatForSaving=e.data("format-for-saving"),this.$clearBtn=o.find("[data-action=clear]"),this.$undoBtn=o.find("[data-action=undo]");var s=e.data("pen-color")?e.data("pen-color"):"black",l=e.data("background-color")?e.data("background-color"):"transparent";this.signaturePad=new t(a,{penColor:s,backgroundColor:l,onEnd:function(){i.rootElement.val(i.toDataURL()),i._history.push(i.getValue()),i.$undoBtn.prop("disabled",!1)}}),this.getValue()&&(this.signaturePad.fromDataURL(this.getValue()),r=this.getValue()),this._enableControls(this.getEnabled()&&!this.getReadonly()),this.$clearBtn.click((function(){return i.signaturePad.clear(),i.rootElement.val(""),i._history=[],r="",i.$undoBtn.prop("disabled",!0),!1})),this.$undoBtn.click((function(){return i._history.pop(),0==i._history.length?(i.setValue(r),$(this).prop("disabled",!0)):i.setValue(i._history[i._history.length-1]),!1}))},setValue:function(e){return this.rootElement.val(e),this.signaturePad.clear(),this.signaturePad.fromDataURL(e),this},toDataURL:function(){return"svg"==this.formatForSaving?this.signaturePad.toDataURL("image/svg+xml"):"jpg"==this.formatForSaving?this.signaturePad.toDataURL("image/jpeg"):this.signaturePad.toDataURL()},setEnabled:function(e){return this._super(e),this._enableControls(e&&!this.getReadonly()),this},setReadonly:function(e){return this._super(e),this._enableControls(!e&&this.getEnabled()),this},_enableControls:function(e){e?(this.signaturePad.on(),this.$clearBtn.prop("disabled",!1),this._history.length>0&&this.$undoBtn.prop("disabled",!1)):(this.signaturePad.off(),this.$clearBtn.prop("disabled",!0),this.$undoBtn.prop("disabled",!0))}})})),define("pgui.editors",["class","microevent","underscore","pgui.editors/dynamic_combobox","pgui.editors/checkbox","pgui.editors/checkboxgroup","pgui.editors/combobox","pgui.editors/custom","pgui.editors/datetime","pgui.editors/html","pgui.editors/image_uploader","pgui.editors/multivalue_select","pgui.editors/remote_multivalue_select","pgui.editors/plain","pgui.editors/radio","pgui.editors/text","pgui.editors/mask","pgui.editors/cascading_combobox","pgui.editors/dynamic_cascading_combobox","pgui.editors/static_editor","pgui.editors/multi_uploader","pgui.editors/autocomplete","pgui.editors/signature"],(function(e,t,n,i,r,o,a,s,l,c,u,d,h,f,p,m,g,v,b,y,w,x,C){var _={dynamic_combobox:i,checkbox:r,checkboxgroup:o,color:f,combobox:a,datetime:l,html_wysiwyg:c,imageuploader:u,masked:g,multivalue_select:d,remote_multivalue_select:h,radio:p,range:f,spin:f,text:m,textarea:m,time:l,cascading_combobox:v,dynamic_cascading_combobox:b,static_editor:y,multiuploader:w,autocomplete:x,signature:C,toggle:r},k=t.mixin(e.extend({init:function(e){this.context=e,this.editors={},this.calculateControlValuesIntervalId=-1},captureEditors:function(e){var t=this.context.find("[data-editor]"),i=t.length;t.each(n.bind((function(t,r){var o=$(r),a=o.data("editor");a=a.replace(/\.\.\/custom_templates\/editors\//,""),new _[a](o,n.bind((function(t){i--,this.editors[t.getFieldName()]=t,o.data("editor",t),i<=0&&(this.trigger("oninitdEvent",this.editors),this.trigger("onCalculateControlValuesEvent",this.editors),n.isFunction(e)&&e(this))}),this)).onChange(n.bind((function(e){this.trigger("onEditorValueChangeEvent",e,this.editors)}),this))}),this))},oninitd:function(e){this.bind("oninitdEvent",e)},onEditorValueChange:function(e){this.bind("onEditorValueChangeEvent",e)},onCalculateControlValues:function(e){this.bind("onCalculateControlValuesEvent",e)},destroy:function(){clearInterval(this.calculateControlValuesIntervalId),n.each(this.editors,(function(e){e.destroy()}))}}));return{init:function(e,t){var i=e.is("form")?e.attr("id"):e.find("form").first().attr("id"),r=window[i+"_EditorValuesChanged"],o=window[i+"_initd"],a=window[i+"_CalculateControlValues"],s=new k(e);return s.oninitd((function(e){if(n.isFunction(o))try{o(e)}catch(e){console.error(e)}})),s.onEditorValueChange((function(e,t){if(n.isFunction(r))try{r(e,t)}catch(e){console.error(e)}})),s.onCalculateControlValues((function(e){if(n.isFunction(a))try{a(e),s.calculateControlValuesIntervalId=setInterval((function(){a(e)}),1e3)}catch(e){console.error(e)}})),s.captureEditors(t),s},getEditorByName:function(e){var t=e.replace(/\.\.\/custom_templates\/editors\//,"");return _[t]}}})),define("pgui.filter_builder",["class","underscore","pgui.filter_common","pgui.events","pgui.editors","pgui.localizer","pgui.shortcuts"],(function(e,t,n,i,r,o,a){var s=e.extend({init:function(e){this.$modal=e,this.$container=e.find(".js-filter-builder-container"),this.$disableFilterCheckbox=e.find(".js-filter-builder-disable").first(),this.columns=[],this.filterComponent=new l;var t=this;this.$modal.on("shown.bs.modal",(function(){a.push(["filter_builder"])})).on("click",".js-filter-builder-commit",(function(e){e.preventDefault(),t.filterComponent=t.currentFilterComponent,t.submit()})).on("hidden.bs.modal",(function(e){t.hide(),a.pop()})),this.$modal.on("submit",(function(e){e.preventDefault()})).on("click",".js-group-add-component",(function(e){var n=$(e.currentTarget).data("type"),i=m(e.currentTarget),r=new c(t._getDefaultColumn()),o="condition"===n?r:new l(null,[r]);return i.data("component").addChild(o),t._addComponentToDOM(i.find(".js-group-content").first(),o,!0),!1})).on("click",".js-component-remove",(function(e){var n=m(e.currentTarget),i=n.data("component");if(t.currentFilterComponent===i){t.currentFilterComponent=new l,t.$disableFilterCheckbox.prop("checked",!1);var r=t.currentFilterComponent.getDOM();n.replaceWith(r,t.columns),r.find("td").first().removeAttr("colspan")}else t.currentFilterComponent.removeChild(i),n.remove();return!1})).on("click",".js-group-operator-select",(function(e){var t=$(e.currentTarget),n=m(e.currentTarget),i=t.data();return n.find(".js-group-operator-text").first().text(i.translate),n.data("component").setOperator(i.operator),t.blur().closest(".dropdown").find(".dropdown-toggle").dropdown("toggle"),!1})).on("change",".js-condition-field-select",(function(e){var n=$(e.currentTarget),i=m(e.currentTarget),r=i.data("component");r.setColumn(t._getColumnByName(n.val())),i.replaceWith(r.getDOM(t.columns))})).on("change",".js-condition-operator-select",(function(e){var t=$(e.currentTarget),n=m(e.currentTarget),i=n.data("component");i.setOperator(t.val()),i.createEditorsDOM(n.find(".js-value").first())})).on("click",".js-component-toggle",(function(e){var n=$(e.currentTarget),i=n.find("span"),r=m(n),a=r.data("component"),s=!a.isEnabled();a.setEnabled(s),s?(n.attr("title",o.getString("DisableFilter")),i.addClass("icon-disable").removeClass("icon-enable"),a.isCondition()?r.find("select,input").prop("disabled",!1):r.removeClass("filter-builder-group-disabled")):(n.attr("title",o.getString("EnableFilter")),i.addClass("icon-enable").removeClass("icon-disable"),a.isCondition()?r.find("select,input").prop("disabled",!0):r.addClass("filter-builder-group-disabled")),t.currentFilterComponent===a&&t.$disableFilterCheckbox.prop("checked",!a.isEnabled()),e.preventDefault()})).on("change",".js-filter-builder-disable",function(t){e.find(".js-component .js-component-toggle").first().click()}.bind(this))},show:function(){return this.$modal.modal("show"),this.currentFilterComponent=new l,this.currentFilterComponent.deserialize(this.columns,this.filterComponent.serialize()),this.currentFilterComponent.isEmpty()&&this.currentFilterComponent.addChild(new c(this._getDefaultColumn())),this.$container.html(""),this.$disableFilterCheckbox.prop("checked",!this.currentFilterComponent.isEnabled()),this._addComponentToDOM(this.$container,this.currentFilterComponent),this},hide:function(){return this.$modal.modal("hide"),this},addColumn:function(e){return this.columns.push(e),this},getColumns:function(){return this.columns},setFilterComponent:function(e){return this.filterComponent=e,this},setEnabled:function(e){return this.filterComponent.setEnabled(e),this},reset:function(){return this.filterComponent=new l,this},submit:function(){this.$modal.find("[data-editor]").trigger("change");var e=JSON.stringify(this.filterComponent.serialize());return $("<form>").attr("method","POST").append($('<input type="hidden" name="filter_builder">').val(e)).hide().appendTo($("body")).submit(),this},_addComponentToDOM:function(e,t,n){var i=t.getDOM(this.columns);return e.append(i),n&&i.find(".js-condition-field-select").first().focus(),t===this.currentFilterComponent&&i.find("td").first().removeAttr("colspan"),i},_getDefaultColumn:function(){return t.first(this.columns)},_getColumnByName:function(e){return t.find(this.columns,(function(t){return t.getName()===e}))}}),l=n.Group.extend({createCondition:function(){return new c},getDOM:function(e){var n=$(p("group")({isEnabled:this.enabled,operator:o.getString("Operator"+this.operator[0]+this.operator.toLowerCase().slice(1))})).data("component",this),i=n.find(".js-group-content").first();return t.each(this.children,(function(t){i.append(t.getDOM(e))})),n}}),c=n.Condition.extend({setOperator:function(e){var t=function(e,t){switch(t){case n.ConditionOperator.IN:case n.ConditionOperator.NOT_IN:return 1/0;default:return g(e,t)}}(this.column,e);return this.editors&&this.editors[0]&&!this.editors[0].isMultivalue()&&this.setValues(this.values.slice(0,t)).setDisplayValues(this.displayValues.slice(0,t)),this._super(e)},getDOM:function(e){var n=$(p("condition")({isEnabled:this.enabled,columnName:this.column.getName(),operator:this.operator,columns:e,operators:t.reduce(this.column.getOperators(),(function(e,t){return e[t]=o.getString("FilterOperator"+t),e}),{})})).data("component",this);return this.createEditorsDOM(n.find(".js-value").first()),n},createEditorsDOM:function(e){e.html("");var n,i,a=g(this.column,this.operator);a>1?e.addClass("filter-builder-condition-value-multiple"):e.removeClass("filter-builder-condition-value-multiple"),this.editors=[];for(var s=0;s<a;s++){var l=(n=this.operator,i=this.column,$($("#filter_builder_editor_"+n+"_"+i.getName().replace(/ /g,"_")).html()));if(0!==l.length){var c=$("<div>").append(l);e.append(c);var h=s,f=c.find("[data-editor]").first(),p=new(r.getEditorByName(f.data("editor")))(f);this.editors[s]=p,p.setEnabled(this.isEnabled()),u(p,this,h),p.onChange(t.partial(d,p,this,h)),a>1&&s!==a-1&&e.append($("<div>").addClass("filter-builder-condition-value-divider").text(o.getString("And")))}}return this}});function u(e,t,n){if(e.isMultivalue()){var i=t.getValues();i?e.setValueEx(i):d(e,t,n)}else{var r=t.getValueAt(n);null!==r?e.setValueEx(r):d(e,t,n)}}function d(e,t,n){e.isMultivalue()?t.setValues(e.getValueEx()).setDisplayValues(e.getDisplayValue()):t.setValueAt(n,e.getValueEx()).setDisplayValueAt(n,e.getDisplayValue())}var h={condition:"#filterBuilderConditionTemplate",group:"#filterBuilderGroupTemplate"},f={};function p(e){if(f[e])return f[e];var n=t.template($(h[e]).html());return f[e]=n,n}function m(e){return $(e).closest(".js-component")}function g(e,t){switch(t){case n.ConditionOperator.IS_BETWEEN:case n.ConditionOperator.IS_NOT_BETWEEN:return 2;case n.ConditionOperator.IS_BLANK:case n.ConditionOperator.IS_NOT_BLANK:case n.ConditionOperator.TODAY:return 0;default:return 1}}return{Group:l,Condition:c,create:function(e,t){return new s(e,t)}}})),jQuery.fn.highlight=function(e,t,n){n=$.extend({hint:""},n);function i(e,t,n,r){var o=0;if(3==e.nodeType){var a=-1;a="END"==n?e.data.toLowerCase().lastIndexOf(t):e.data.toLowerCase().indexOf(t);var s=e.data.toLowerCase().length;if(a>=0&&"ALL"==n||0==a&&"START"==n||a>=0&&a>=s-t.length&&"END"==n){var l=document.createElement("span");l.title=r.hint,l.className="highlight";var c=e.splitText(a),u=(c.splitText(t.length),c.cloneNode(!0));l.appendChild(u),c.parentNode.replaceChild(l,c),o=1}}else if(1==e.nodeType&&e.childNodes&&!/(script|style)/i.test(e.tagName))for(var d=0;d<e.childNodes.length;++d)d+=i(e.childNodes[d],t,n,r);return o}return this.each((function(){""!=e&&i(this,e.toLowerCase(),t,n)}))},jQuery.fn.removeHighlight=function(){return this.find("span.highlight").each((function(){with(this.parentNode.firstChild.nodeName,this.parentNode)replaceChild(this.firstChild,this),normalize()})).end()},define("jquery.highlight",(function(){})),function(e,t,n){"use strict";var i;i=function(e){var n="webuiPopover",i="webui-popover",r="webui.popover",o={placement:"auto",container:null,width:"auto",height:"auto",trigger:"click",style:"",delay:{show:null,hide:null},async:{type:"GET",before:null,success:null,error:null},cache:!0,multi:!1,arrow:!0,title:"",content:"",closeable:!1,padding:!0,url:"",type:"html",animation:null,template:'<div class="webui-popover"><div class="webui-arrow"></div><div class="webui-popover-inner"><a href="#" class="close"></a><h3 class="webui-popover-title"></h3><div class="webui-popover-content"><i class="icon-refresh"></i> <p>&nbsp;</p></div></div></div>',backdrop:!1,dismissible:!0,onShow:null,onHide:null,abortXHR:!0,autoHide:!1,offsetTop:0,offsetLeft:0,iframeOptions:{frameborder:"0",allowtransparency:"true",id:"",name:"",scrolling:"",onload:"",height:"",width:""}},a=[],s=e('<div class="webui-popover-backdrop"></div>'),l=0,c=!1,u=-2e3,d=e(t),h=function(e,t){return isNaN(e)?t||0:Number(e)},f=function(e){return e.data("plugin_"+n)},p=function(){for(var e=null,t=0;t<a.length;t++)(e=f(a[t]))&&e.hide(!0);d.trigger("hiddenAll."+r)},m=function(e){var t={x:0,y:0};if("touchstart"===e.type||"touchmove"===e.type||"touchend"===e.type||"touchcancel"===e.type){var n=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];t.x=n.pageX,t.y=n.pageY}else"mousedown"!==e.type&&"mouseup"!==e.type&&"click"!==e.type||(t.x=e.pageX,t.y=e.pageY);return t};function g(t,i){this.$element=e(t),i&&("string"!==e.type(i.delay)&&"number"!==e.type(i.delay)||(i.delay={show:i.delay,hide:i.delay})),this.options=e.extend({},o,i),this._defaults=o,this._name=n,this._targetclick=!1,this.init(),a.push(this.$element)}g.prototype={init:function(){"click"===this.getTrigger()?this.$element.off("click touchend").on("click touchend",e.proxy(this.toggle,this)):"hover"===this.getTrigger()&&this.$element.off("mouseenter mouseleave click").on("mouseenter",e.proxy(this.mouseenterHandler,this)).on("mouseleave",e.proxy(this.mouseleaveHandler,this)),this._poped=!1,this._inited=!0,this._opened=!1,this._idSeed=l,this.options.container=e(this.options.container||t.body).first(),this.options.backdrop&&s.appendTo(this.options.container).hide(),l++,"sticky"===this.getTrigger()&&this.show()},destroy:function(){for(var e=-1,t=0;t<a.length;t++)if(a[t]===this.$element){e=t;break}a.splice(e,1),this.hide(),this.$element.data("plugin_"+n,null),"click"===this.getTrigger()?this.$element.off("click"):"hover"===this.getTrigger()&&this.$element.off("mouseenter mouseleave"),this.$target&&this.$target.remove()},hide:function(t,n){if((t||"sticky"!==this.getTrigger())&&this._opened){n&&(n.preventDefault(),n.stopPropagation()),this.xhr&&!0===this.options.abortXHR&&(this.xhr.abort(),this.xhr=null);var i=e.Event("hide."+r);if(this.$element.trigger(i,[this.$target]),this.$target){this.$target.removeClass("in").addClass(this.getHideAnimation());var o=this;setTimeout((function(){o.$target.hide()}),300)}this.options.backdrop&&s.hide(),this._opened=!1,this.$element.trigger("hidden."+r,[this.$target]),this.options.onHide&&this.options.onHide(this.$target)}},resetAutoHide:function(){var e=this,t=e.getAutoHide();t&&(e.autoHideHandler&&clearTimeout(e.autoHideHandler),e.autoHideHandler=setTimeout((function(){e.hide()}),t))},toggle:function(e){e&&(e.preventDefault(),e.stopPropagation()),this[this.getTarget().hasClass("in")?"hide":"show"]()},hideAll:function(){p()},show:function(){var e=this.getTarget().removeClass().addClass(i).addClass(this._customTargetClass);this.options.multi||this.hideAll(),this._opened||(this.getCache()&&this._poped&&""!==this.content||(this.content="",this.setTitle(this.getTitle()),this.options.closeable||e.find(".close").off("click").remove(),this.isAsync()?this.setContentASync(this.options.content):this.setContent(this.getContent()),e.show()),this.displayContent(),this.options.onShow&&this.options.onShow(e),this.bindBodyEvents(),this.options.backdrop&&s.show(),this._opened=!0,this.resetAutoHide())},displayContent:function(){var t,n=this.getElementPosition(),o=this.getTarget().removeClass().addClass(i).addClass(this._customTargetClass),a=this.getContentElement(),s=o[0].offsetWidth,l=o[0].offsetHeight,c=e.Event("show."+r);this.$element.trigger(c,[o]);var d=this.$element.data("width")||this.options.width;""===d&&(d=this._defaults.width),"auto"!==d&&o.width(d);var h=this.$element.data("height")||this.options.height;""===h&&(h=this._defaults.height),"auto"!==h&&a.height(h),this.options.style&&this.$target.addClass(i+"-"+this.options.style),this.options.arrow||o.find(".webui-arrow").remove(),o.detach().css({top:u,left:u,display:"block"}),this.getAnimation()&&o.addClass(this.getAnimation()),o.appendTo(this.options.container),t=this.getPlacement(n),this.$element.trigger("added."+r),this.initTargetEvents(),this.options.padding||("auto"!==this.options.height&&a.css("height",a.outerHeight()),this.$target.addClass("webui-no-padding")),s=o[0].offsetWidth,l=o[0].offsetHeight;var f=this.getTargetPositin(n,t,s,l);if(this.$target.css(f.position).addClass(t).addClass("in"),"iframe"===this.options.type){var p=o.find("iframe"),m=o.width(),g=p.parent().height();""!==this.options.iframeOptions.width&&"auto"!==this.options.iframeOptions.width&&(m=this.options.iframeOptions.width),""!==this.options.iframeOptions.height&&"auto"!==this.options.iframeOptions.height&&(g=this.options.iframeOptions.height),p.width(m).height(g)}if(this.options.arrow||this.$target.css({margin:0}),this.options.arrow){var v=this.$target.find(".webui-arrow");v.removeAttr("style"),"left"===t||"right"===t?v.css({top:this.$target.height()/2}):"top"!==t&&"bottom"!==t||v.css({left:this.$target.width()/2}),f.arrowOffset&&(-1===f.arrowOffset.left||-1===f.arrowOffset.top?v.hide():v.css(f.arrowOffset))}this._poped=!0,this.$element.trigger("shown."+r,[this.$target])},isTargetLoaded:function(){return 0===this.getTarget().find("i.glyphicon-refresh").length},getTriggerElement:function(){return this.$element},getTarget:function(){if(!this.$target){var t=n+this._idSeed;this.$target=e(this.options.template).attr("id",t).data("trigger-element",this.getTriggerElement()),this._customTargetClass=this.$target.attr("class")!==i?this.$target.attr("class"):null,this.getTriggerElement().attr("data-target",t)}return this.$target},getTitleElement:function(){return this.getTarget().find("."+i+"-title")},getContentElement:function(){return this.$contentElement||(this.$contentElement=this.getTarget().find("."+i+"-content")),this.$contentElement},getTitle:function(){return this.$element.attr("data-title")||this.options.title},getUrl:function(){return this.$element.attr("data-url")||this.options.url},getAutoHide:function(){return this.$element.attr("data-auto-hide")||this.options.autoHide},getOffsetTop:function(){return h(this.$element.attr("data-offset-top"))||this.options.offsetTop},getOffsetLeft:function(){return h(this.$element.attr("data-offset-left"))||this.options.offsetLeft},getCache:function(){var e=this.$element.attr("data-cache");if(void 0!==e)switch(e.toLowerCase()){case"true":case"yes":case"1":return!0;case"false":case"no":case"0":return!1}return this.options.cache},getTrigger:function(){return this.$element.attr("data-trigger")||this.options.trigger},getDelayShow:function(){var e=this.$element.attr("data-delay-show");return void 0!==e?e:0===this.options.delay.show?0:this.options.delay.show||100},getHideDelay:function(){var e=this.$element.attr("data-delay-hide");return void 0!==e?e:0===this.options.delay.hide?0:this.options.delay.hide||100},getAnimation:function(){return this.$element.attr("data-animation")||this.options.animation},getHideAnimation:function(){var e=this.getAnimation();return e?e+"-out":"out"},setTitle:function(e){var t=this.getTitleElement();e?t.html(e):t.remove()},hasContent:function(){return this.getContent()},getIframe:function(){var t=e("<iframe></iframe>").attr("src",this.getUrl()),n=this;return e.each(this._defaults.iframeOptions,(function(e){void 0!==n.options.iframeOptions[e]&&t.attr(e,n.options.iframeOptions[e])})),t},getContent:function(){if(this.getUrl())switch(this.options.type){case"iframe":this.content=this.getIframe();break;case"html":try{this.content=e(this.getUrl()),this.content.is(":visible")||this.content.show()}catch(e){throw new Error("Unable to get popover content. Invalid selector specified.")}}else if(!this.content){var t="";if(t=e.isFunction(this.options.content)?this.options.content.apply(this.$element[0],[this]):this.options.content,this.content=this.$element.attr("data-content")||t,!this.content){var n=this.$element.next();n&&n.hasClass(i+"-content")&&(this.content=n)}}return this.content},setContent:function(e){var t=this.getTarget(),n=this.getContentElement();"string"==typeof e?n.html(e):e instanceof jQuery&&(n.html(""),this.options.cache?e.removeClass(i+"-content").appendTo(n):e.clone(!0,!0).removeClass(i+"-content").appendTo(n)),this.$target=t},isAsync:function(){return"async"===this.options.type},setContentASync:function(t){var n=this;this.xhr||(this.xhr=e.ajax({url:this.getUrl(),type:this.options.async.type,cache:this.getCache(),beforeSend:function(e){n.options.async.before&&n.options.async.before(n,e)},success:function(i){n.bindBodyEvents(),t&&e.isFunction(t)?n.content=t.apply(n.$element[0],[i]):n.content=i,n.setContent(n.content),n.getContentElement().removeAttr("style"),n.displayContent(),n.options.async.success&&n.options.async.success(n,i)},complete:function(){n.xhr=null},error:function(e,t){n.options.async.error&&n.options.async.error(n,e,t)}}))},bindBodyEvents:function(){c||(this.options.dismissible&&"click"===this.getTrigger()?(d.off("keyup.webui-popover").on("keyup.webui-popover",e.proxy(this.escapeHandler,this)),d.off("click.webui-popover touchend.webui-popover").on("click.webui-popover touchend.webui-popover",e.proxy(this.bodyClickHandler,this))):"hover"===this.getTrigger()&&d.off("touchend.webui-popover").on("touchend.webui-popover",e.proxy(this.bodyClickHandler,this)))},mouseenterHandler:function(){var e=this;e._timeout&&clearTimeout(e._timeout),e._enterTimeout=setTimeout((function(){e.getTarget().is(":visible")||e.show()}),this.getDelayShow())},mouseleaveHandler:function(){var e=this;clearTimeout(e._enterTimeout),e._timeout=setTimeout((function(){e.hide()}),this.getHideDelay())},escapeHandler:function(e){27===e.keyCode&&this.hideAll()},bodyClickHandler:function(e){c=!0;for(var t=!0,n=0;n<a.length;n++){var i=f(a[n]);if(i&&i._opened){var r=i.getTarget().offset().left,o=i.getTarget().offset().top,s=i.getTarget().offset().left+i.getTarget().width(),l=i.getTarget().offset().top+i.getTarget().height(),u=m(e);if(u.x>=r&&u.x<=s&&u.y>=o&&u.y<=l){t=!1;break}}}t&&p()},initTargetEvents:function(){"hover"===this.getTrigger()&&this.$target.off("mouseenter mouseleave").on("mouseenter",e.proxy(this.mouseenterHandler,this)).on("mouseleave",e.proxy(this.mouseleaveHandler,this)),this.$target.find(".close").off("click").on("click",e.proxy(this.hide,this,!0))},getPlacement:function(e){var t,n=this.options.container,i=n.innerWidth(),r=n.innerHeight(),o=n.scrollTop(),a=n.scrollLeft(),s=Math.max(0,e.left-a),l=Math.max(0,e.top-o),c="horizontal"===(t="function"==typeof this.options.placement?this.options.placement.call(this,this.getTarget()[0],this.$element[0]):this.$element.data("placement")||this.options.placement),u="vertical"===t;return"auto"===t||c||u?t=s<i/3?l<r/3?c?"right-bottom":"bottom-right":l<2*r/3?u?l<=r/2?"bottom-right":"top-right":"right":c?"right-top":"top-right":s<2*i/3?l<r/3?c?s<=i/2?"right-bottom":"left-bottom":"bottom":l<2*r/3?c?s<=i/2?"right":"left":l<=r/2?"bottom":"top":c?s<=i/2?"right-top":"left-top":"top":l<r/3?c?"left-bottom":"bottom-left":l<2*r/3?u?l<=r/2?"bottom-left":"top-left":"left":c?"left-top":"top-left":"auto-top"===t?t=s<i/3?"top-right":s<2*i/3?"top":"top-left":"auto-bottom"===t?t=s<i/3?"bottom-right":s<2*i/3?"bottom":"bottom-left":"auto-left"===t?t=l<r/3?"left-top":l<2*r/3?"left":"left-bottom":"auto-right"===t&&(t=l<r/3?"right-top":l<2*r/3?"right":"right-bottom"),t},getElementPosition:function(){return e.extend({},this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTargetPositin:function(e,t,n,i){var r=e,o=this.options.container,a=o.innerWidth(),s=o.innerHeight(),l=this.$element.outerWidth(),c=this.$element.outerHeight(),d=o.scrollTop(),h=o.scrollLeft(),f={},p=null,m=this.options.arrow?20:0,g=10,v=l<m+g?m:0,b=c<m+g?m:0,y=0,w=s+d,x=a+h,C=r.left+r.width/2-v>0,_=r.left+r.width/2+v<x,k=r.top+r.height/2-b>0,E=r.top+r.height/2+b<w;switch(t){case"bottom":f={top:r.top+r.height,left:r.left+r.width/2-n/2};break;case"top":f={top:r.top-i,left:r.left+r.width/2-n/2};break;case"left":f={top:r.top+r.height/2-i/2,left:r.left-n};break;case"right":f={top:r.top+r.height/2-i/2,left:r.left+r.width};break;case"top-right":f={top:r.top-i,left:C?r.left-v:g},p={left:C?Math.min(l,n)/2+v:u};break;case"top-left":y=_?v:-10,f={top:r.top-i,left:r.left-n+r.width+y},p={left:_?n-Math.min(l,n)/2-v:u};break;case"bottom-right":f={top:r.top+r.height,left:C?r.left-v:g},p={left:C?Math.min(l,n)/2+v:u};break;case"bottom-left":y=_?v:-10,f={top:r.top+r.height,left:r.left-n+r.width+y},p={left:_?n-Math.min(l,n)/2-v:u};break;case"right-top":y=E?b:-10,f={top:r.top-i+r.height+y,left:r.left+r.width},p={top:E?i-Math.min(c,i)/2-b:u};break;case"right-bottom":f={top:k?r.top-b:g,left:r.left+r.width},p={top:k?Math.min(c,i)/2+b:u};break;case"left-top":y=E?b:-10,f={top:r.top-i+r.height+y,left:r.left-n},p={top:E?i-Math.min(c,i)/2-b:u};break;case"left-bottom":f={top:k?r.top-b:g,left:r.left-n},p={top:k?Math.min(c,i)/2+b:u}}return f.top+=this.getOffsetTop(),f.left+=this.getOffsetLeft(),{position:f,arrowOffset:p}}},e.fn[n]=function(t,i){var r=[],o=this.each((function(){var o=e.data(this,"plugin_"+n);o?"destroy"===t?o.destroy():"string"==typeof t&&r.push(o[t]()):(t?"string"==typeof t?"destroy"!==t&&(i||(o=new g(this,null),r.push(o[t]()))):"object"==typeof t&&(o=new g(this,t)):o=new g(this,null),e.data(this,"plugin_"+n,o))}));return r.length?r:o}},"function"==typeof define&&define.amd?define("jquery.popover",["jquery"],i):"object"==typeof exports?module.exports=i(require("jquery")):i(e.jQuery)}(window,document),define("pgui.column_filter",["class","underscore","pgui.filter_common","jquery.highlight","jquery.popover"],(function(e,t,n){var i=e.extend({init:function(e){this.$container=e,this.columns=[],this.filterComponent=new r,this.excludedComponents=[],this.defaultsEnabled=[],this.selectedDateTimeValues=[]},addColumn:function(e){return this.columns.push(e),this},getColumns:function(){return this.columns},setFilterComponent:function(e){return this.filterComponent=e,this},attach:function(){t.each(this.filterComponent.getChildren(),t.bind((function(e,t){this._attachPopover(t,this.$container.find('[data-name="'+t+'"] .js-filter-trigger').first(),e,this.excludedComponents[t]||[])}),this))},_getChildByColumnName:function(e){return t.find(this.filterComponent.getChildren(),(function(t,n){return n==e}))},_attachPopover:function(e,n,i,o){var a=this,s=new r;i.setEnabled(!0);var l=$(c("content")()),u=n.webuiPopover({content:l,backdrop:!0,placement:"auto-bottom",trigger:"manual"}).data("plugin_webuiPopover");return l.on("click",".js-apply",t.bind((function(t){a._typeIsDateTime(e)&&a._isDefaultsEnabledFor(e)&&(i=s,a.filterComponent.addChild(i,e)),a._createConditions(e,i,u.$contentElement),this.submit()}),this)).on("change",".js-toggle-component",(function(e){d(l)})).on("change",".js-select-all",t.bind((function(e){var t=$(e.currentTarget).prop("checked");l.find("input:not(.js-select-all):not(.js-ignore-select-all)").filter(":visible").prop("checked",t).trigger("change")}),this)).on("click",".js-reset",t.bind((function(e){e.preventDefault(),i.setChildren({}),this.submit()}),this)).on("click",".close",(function(){u.hide()})),n.on("click",(function(e){e.preventDefault(),e.stopPropagation(),u.show(),$(".webui-popover-backdrop").one("click",(function(){u.hide()}))})).one("click",(function(e){setTimeout((function(){l.css("width",l.width())}),0)})).on("show.webui.popover",(function(){a._typeIsDateTime(e)&&a._isDefaultsEnabledFor(e)?(l.find(".js-search").hide(),l.find(".js-content").hide(),l.find(".js-search-empty").hide(),l.find(".js-searching .js-searching-title").hide(),l.find(".js-searching").show(),$.ajax({url:window.location.href,dataType:"json",data:{column_filter_hname:e},success:function(e){l.find(".js-searching").hide(),l.find(".js-content").show(),s.deserialize(a.getColumns(),e),s.setEnabled(!0),u.$contentElement.find(".js-content").first().html("").append(a._getColumnGroupDOM(s,o)),d(u.$contentElement)}})):(u.$contentElement.find(".js-content").first().html("").append(a._getColumnGroupDOM(i,o)),a._handleSearch(e,i,u.$contentElement))})).on("shown.webui.popover",(function(){d(u.$contentElement)})),l},_typeIsDateTime:function(e){return t.find(this.columns,(function(t){return t.name==e&&1==t.typeIsDateTime}))},_createConditions:function(e,n,i){var r=this.columns,o=t.find(r,(function(t){return t.getName()===e}));if(i.find(".js-content .js-dynamic input:checked").each((function(){var e=n.createCondition();e.setColumn(o),e.setEnabled(!0).setOperator("Equals").setValues([$(this).closest("div").data("condition-value")]).setDisplayValues([$(this).closest("div").data("condition-display-value")]),n.addChild(e," "+$(this).closest("div").data("condition-display-value"))})),this._typeIsDateTime(e)){var a=[],s=[],l=[];if(i.find(".js-content > .js-date-tree").each((function(){var e=$(this).find("input:checkbox").first(),t=e.closest("label").attr("title");e.prop("checked")?a.push(t):e.prop("indeterminate")&&$(this).find(".js-children > .js-group").each((function(){var e=$(this).find("input:checkbox").first(),n=e.closest("label").attr("title");e.prop("checked")?s.push({year:t,month:n}):$(this).find(".js-children > .js-component").each((function(){var e=$(this).find("input:checkbox").first(),i=e.closest("label").attr("title");e.prop("checked")&&l.push({year:t,month:n,day:i})}))}))})),a.length>0||s.length>0||l.length>0){var c=[];c.fullYears=a,c.fullMonths=s,c.days=l,this.selectedDateTimeValues[e]=c}}},setDefaultsEnabled:function(e){return this.defaultsEnabled=e,this},_isDefaultsEnabledFor:function(e){return-1!==this.defaultsEnabled.indexOf(e)},_handleSearch:function(e,n,i){i.find(".js-searching .js-data-loading-title").hide();var r=i.find(".js-search-empty").hide(),o=i.find(".js-search-clear").hide(),a=i.find(".js-searching").hide();if(!this._typeIsDateTime(e)&&this._isDefaultsEnabledFor(e)){var s=i.find(".js-search-input");n.getTitles();o.on("click",(function(){return s.val("").trigger("change"),!1})),i.find(".js-component:not(.js-dynamic)").length>0&&i.find(".js-content").first().append($('<hr class="column-filter-separator">')),s.off("keyup change").on("keyup change",t.debounce((function(){l(!1)}),500)),l(!0)}else i.find(".js-search").hide();function l(n){var o,l=s.val(),d=s.data("last-term");!0!==n&&l===d||(a.show(),r.hide(),i.find(".js-content .js-dynamic").remove(),$.ajax({url:window.location.href,dataType:"json",data:{column_filter_hname:e,term:l,excludedValues:(o=[],i.find(".js-content input:checked").each((function(){o.push($(this).closest("label").attr("title"))})),o)},success:function(e){a.hide(),t.isEmpty(e)?r.show():i.find(".js-content").first().append(function(e){return t.map(e,(function(e){return t=e.id,n=e.value,$(c("condition")({ignoreSelectAll:!1,hasDivider:!1,label:$("<div/>").html(n).text(),checked:!1})).addClass("js-dynamic").data("condition-value",t).data("condition-display-value",n);var t,n}))}(e)),s.data("last-term",l),i.find(".js-content .js-dynamic").highlight(l,"ALL"),u()}}))}function u(){o.toggle(s.val().length>0),d(i)}},_getColumnGroupDOM:function(e,n){return t.toArray(t.mapObject(e.getChildren(),(function(e,t){if(!u(n,t))return e.getDOM(t,n)})))},submit:function(){var e=JSON.stringify(this.filterComponent.serializeEnabledRootComponents(this.selectedDateTimeValues));return $("<form>").attr("method","POST").append($('<input type="hidden" name="column_filter">').val(e)).hide().appendTo($("body")).submit(),this},setEnabled:function(e){return this.filterComponent.setEnabled(e),this},reset:function(){return this.filterComponent=new r,this}}),r=n.Group.extend({init:function(e,t){this._super(e,t),this.isDateTreePart=!1},getDOM:function(e,n){var i=n[e]||[],r=$(c("group")({label:$("<div/>").html(e).text(),checked:this.isEnabled(),isDateTreePart:this.isDateTreePart})),o=r.find(".js-toggle-component").first(),a=r.find(".js-children").first(),s=t.filter(t.toArray(t.mapObject(this.getChildren(),(function(e,t){if(!u(i,t))return e.getDOM(t,i)}))),(function(e){return Boolean(e)}));if(0!==s.length)return a.append(s),this._updateEnabledOnDOM(o,a),r.data("component",this).on("click",".js-caret:first",(function(e){$(e.currentTarget).toggleClass("collapsed"),a.toggle(),e.preventDefault()})).on("change",".js-toggle-component",t.bind((function(e){var t;if((t=$(e.currentTarget),$(t).closest(".js-component")).data("component")===this){o.prop("indeterminate",!1);var n=$(e.currentTarget).prop("checked");this.setEnabled(n),a.find(".js-toggle-component").prop("checked",n),a.find(".js-component").each((function(e,t){$(t).data("component").setEnabled(n)}))}else this._updateEnabledOnDOM(o,a)}),this))},_updateEnabledOnDOM:function(e,t,n){var i=t.find(".js-toggle-component:checked").length,r=i===t.find(".js-toggle-component").length;e.prop("indeterminate",i>0&&!r),e.prop("checked",r),this.setEnabled(i>0)},createCondition:function(){return new o},serializeEnabledRootComponents:function(e){var n=this;return{type:"group",isEnabled:this.isEnabled(),operator:this.getOperator(),children:t.mapObject(this.children,(function(t,i){if(t.isEnabled()){var r=t.serializeEnabledComponents();return void 0!==e[i]&&(r.selectedDateTimeValues=n.serializeSelectedDateTimeValues(e[i])),r}}))}},serializeSelectedDateTimeValues:function(e){return{fullYears:e.fullYears,fullMonths:e.fullMonths,days:e.days}},serializeEnabledComponents:function(){return{type:"group",isEnabled:this.isEnabled(),operator:this.getOperator(),children:t.mapObject(this.children,(function(e){if(e.isEnabled()&&!e.isDateTreePart)return e.serializeEnabledComponents()}))}},setEnabledDeep:function(e){return this.setEnabled(e),t.each(this.children,(function(t){t.setEnabledDeep(e)})),this},getTitles:function(){return t.reduce(this.children,(function(e,n,i){return e.push({title:$("<div/>").html(i).text(),component:n}),e.push(n.getTitles()),t.flatten(e)}),[])},serialize:function(){var e=this._super();return e.isDateTreePart=this.isDateTreePart,e},deserialize:function(e,t){return this.isDateTreePart=t.isDateTreePart||!1,this._super(e,t)}}),o=n.Condition.extend({init:function(e,t,n){this._super(e,t,n),this.hasDivider=!1,this.ignoreSelectAll=null,this.isDateTreePart=!1},getDOM:function(e){return $(c("condition")({ignoreSelectAll:this.ignoreSelectAll,hasDivider:this.hasDivider,label:$("<div/>").html(e).text(),checked:this.isEnabled()})).data("component",this).on("change",".js-toggle-component",t.bind((function(e){this.setEnabled($(e.currentTarget).prop("checked"))}),this))},serializeEnabledComponents:function(){return{type:"condition",isEnabled:this.isEnabled(),column:this.column.getName(),operator:this.getOperator(),values:this.getValues(),displayValues:this.getDisplayValues()}},setEnabledDeep:function(e){return this.setEnabled(e),this},getTitles:function(){return[]},serialize:function(){var e=this._super();return e.hasDivider=this.hasDivider,e.ignoreSelectAll=this.ignoreSelectAll,e},deserialize:function(e,t){return this.hasDivider=t.hasDivider||!1,this.ignoreSelectAll=t.ignoreSelectAll||!1,this._super(e,t)}}),a=n.Column.extend({init:function(e,t,n,i){this._super(e,t,i),this.typeIsDateTime=n},setTypeIsDateTime:function(e){return this.typeIsDateTime=e,this},getTypeIsDateTime:function(){return this.typeIsDateTime}}),s={content:"#columnFilterContentTemplate",group:"#columnFilterGroupTemplate",condition:"#columnFilterConditionTemplate"},l={};function c(e){if(l[e])return l[e];var n=t.template($(s[e]).html());return l[e]=n,n}function u(e,n){return t.isObject(e[n])&&0===t.keys(e[n]).length}function d(e){var t=e.find(".js-toggle-component:visible:not(.js-ignore-select-all)").length===e.find(".js-toggle-component:visible:checked:not(.js-ignore-select-all)").length;e.find(".js-select-all").prop("checked",t)}return{Column:a,Group:r,Condition:o,create:function(e){return new i(e)}}})),define("pgui.text_highlight",["jquery.highlight"],(function(){return{HighlightTextInGrid:function(e,t,n,i,r){$(e+" [data-column-name='"+t+"']").highlight(n,i,{hint:r||""})},HighlightTextInAllGrid:function(e,t,n){e.highlight(""+t,n)}}})),define("pgui.quick_filter",["class","pgui.text_highlight","pgui.editors/multivalue_select"],(function(e,t,n){return e.extend({init:function(e){this.container=e,this._initializeEditors(),this._initializeEvents()},_initializeEditors:function(){this.$input=this.container.find(".js-input"),this.$filterConditionEditor=this.container.find("#quick-filter-operator");var e=this.container.find("#quick-filter-fields");this.$selectedColumnsEditor=new n(e),e.off("change")},_initializeEvents:function(){var e=this;this.container.on("click",".js-submit",(function(){e._submit()})).on("click",".js-reset",(function(){e._reset()._submit()})).on("keyup",".js-input",(function(t){13===t.keyCode&&e._submit()})).on("click",".js-cancel",(function(t){var n=e.container.find(".dropdown-toggle");n.length&&n.trigger("click")}))},setColumnNames:function(e){return this.columnNames=e,this},highlight:function(e){return t.HighlightTextInAllGrid(e.find($.map(this._getColumnsToHighlight(),(function(e){return'td[data-column-name="'+e+'"]'})).join(",")),this._getValue(),"ALL"),this},_getColumnsToHighlight:function(){var e=[],t=this.$selectedColumnsEditor.getValue();if(_.isArray(t))for(var n=0;n<this.columnNames.length;n++)t.indexOf(this.columnNames[n])>-1&&e.push(this.columnNames[n]);return e.length>0?e:this.columnNames},_getValue:function(){return this.$input.val()},_getFilterCondition:function(){return this.$filterConditionEditor.val()},_getSelectedColumns:function(){return this.$selectedColumnsEditor.getValue()},_reset:function(){return this.$input.val(""),this},_submit:function(){var e=jQuery.query;e=(e=(e=e.set("quick_filter",this._getValue())).set("quick_filter_operator",this._getFilterCondition())).set("quick_filter_fields",this._getSelectedColumns()),window.location=e}})})),function(e,t){"use strict";function n(n,i,r){var o=this,a=n.get(0);o.duration=i.duration,o.opacity=i.opacity,o.isShown=!1,o.jqTargetOrg=n,e.isWindow(a)||9===a.nodeType?o.jqTarget=e("body"):"iframe"===a.nodeName.toLowerCase()||"frame"===a.nodeName.toLowerCase()?(o.jqWin=e(a.contentWindow),o.elmDoc=a.contentWindow.document,o.jqTarget=e("body",o.elmDoc),o.isFrame=!0):o.jqTarget=n,o.jqWin=o.jqWin||e(window),o.elmDoc=o.elmDoc||document,o.isBody="body"===o.jqTarget.get(0).nodeName.toLowerCase(),r&&(r.jqProgress&&(r.timer&&clearTimeout(r.timer),r.jqProgress.remove(),delete r.jqProgress),r.reset(!0),r.jqOverlay.stop()),o.jqOverlay=(r&&r.jqOverlay||e('<div class="'+l+'" />').css({position:o.isBody?"fixed":"absolute",left:0,top:0,display:"none",cursor:"wait"}).appendTo(o.jqTarget).on("touchmove",(function(){return!1}))).css({backgroundColor:i.fillColor,zIndex:i.zIndex}),(o.jqProgress=!1===i.progress?t:"function"==typeof i.progress?i.progress.call(o.jqTarget,i):d(o))&&o.jqProgress.css({position:o.isBody?"fixed":"absolute",display:"none",zIndex:i.zIndex+1,cursor:"wait"}).appendTo(o.jqTarget).on("touchmove",(function(){return!1})),o.callAdjust=function(e){return e.adjustProgress?function(){e.adjustProgress(),e.adjust()}:function(){e.adjust()}}(o),o.avoidFocus=function(t){return function(n){return e(t.elmDoc.activeElement).blur(),n.preventDefault(),!1}}(o),o.avoidScroll=function(e){return function(t){return function(t){t.scrollLeft(e.scrLeft).scrollTop(e.scrTop)}(e.isBody?e.jqWin:e.jqTarget),t.preventDefault(),!1}}(o),r&&(r.timer&&clearTimeout(r.timer),r=t)}function i(t,i){var r=e.extend({duration:200,opacity:.6,zIndex:9e3},i);return r.fillColor=r.fillColor||r.color||"#888",t.each((function(){var t=e(this);t.data(s,new n(t,r,t.data(s))),"function"==typeof r.show&&t.off(c,r.show).on(c,r.show),"function"==typeof r.hide&&t.off(u,r.hide).on(u,r.hide)}))}function r(t,n){return t.each((function(){var t,r=e(this);(n||!(t=r.data(s)))&&(t=i(r,n).data(s)),t.show()}))}function o(t){return t.each((function(){var t=e(this).data(s);t&&t.hide()}))}function a(e,n,r){var o,a=e.length?e.eq(0):t;if(a&&(o=a.data(s)||i(a).data(s)).hasOwnProperty(n))return null!=r&&(o[n]=r),o[n]}var s="plainOverlay",l=s.toLowerCase(),c=l+"show",u=l+"hide",d=function(){function n(n,i,r,o){return o=o===t?";":o,e.map(n,(function(t){return e.map(i,(function(e){return(r||"")+e+t})).join(o)})).join(o)}var i,r="jQuery-"+s,o=["-webkit-","-moz-","-ms-","-o-",""],a=r+"-progress",l="."+a+"{"+n(["box-sizing:border-box"],["-webkit-","-moz-",""])+";width:100%;height:100%;border-top:3px solid #17f29b;"+n(["border-radius:50%"],o)+";-webkit-tap-highlight-color:rgba(0,0,0,0);transform:translateZ(0);box-shadow:0 0 1px rgba(0,0,0,0);"+n(["animation-name:"+r+"-spin","animation-duration:1s","animation-timing-function:linear","animation-iteration-count:infinite"],o)+"}"+n(["keyframes "+r+"-spin{from{"+n(["transform:rotate(0deg)"],o)+"}to{"+n(["transform:rotate(360deg)"],o)+"}}"],o,"@","")+"."+a+"-legacy{width:100%;height:50%;padding-top:25%;text-align:center;white-space:nowrap;*zoom:1}."+a+"-legacy:after,."+a+'-legacy:before{content:" ";display:table}.'+a+"-legacy:after{clear:both}."+a+"-legacy div{width:18%;height:100%;margin:0 1%;background-color:#17f29b;float:left;visibility:hidden}."+a+"-1 div."+a+"-1,."+a+"-2 div."+a+"-1,."+a+"-2 div."+a+"-2,."+a+"-3 div."+a+"-1,."+a+"-3 div."+a+"-2,."+a+"-3 div."+a+"-3{visibility:visible}",c=function(){var e=Math.min(300,.9*(this.isBody?Math.min(this.jqWin.width(),this.jqWin.height()):Math.min(this.jqTarget.innerWidth(),this.jqTarget.innerHeight())));this.jqProgress.width(e).height(e),this.showProgress||this.jqProgress.children("."+a).css("borderTopWidth",Math.max(3,e/30))},u=function(e){var t=this;t.timer&&clearTimeout(t.timer),t.progressCnt&&t.jqProgress.removeClass(a+"-"+t.progressCnt),t.isShown&&(t.progressCnt=!e&&t.progressCnt<3?t.progressCnt+1:0,t.progressCnt&&t.jqProgress.addClass(a+"-"+t.progressCnt),t.timer=setTimeout((function(){t.showProgress()}),500))};return function(n){var o,s;return"boolean"!=typeof i&&(i=function(){function e(e,t){return!!~(""+e).indexOf(t)}function n(n){var i;for(i in n)if(!e(n[i],"-")&&s[n[i]]!==t)return!0;return!1}function i(e){var t=e.charAt(0).toUpperCase()+e.slice(1);return n((e+" "+l.join(t+" ")+t).split(" "))}var r,o,a=document.createElement("modernizr"),s=a.style,l="Webkit Moz O ms".split(" "),c={},u={}.hasOwnProperty,d=u!==t&&u.call!==t?function(e,t){return u.call(e,t)}:function(e,n){return n in e&&e.constructor.prototype[n]===t};for(o in c.borderradius=function(){return i("borderRadius")},c.cssanimations=function(){return i("animationName")},c.csstransforms=function(){return!!i("transform")},r=!1,c)if(d(c,o)&&!c[o]()){r=!0;break}return s.cssText="",a=null,r}()),n.elmDoc.getElementById(r)||(n.elmDoc.createStyleSheet?((s=n.elmDoc.createStyleSheet()).owningElement.id=r,s.cssText=l):((s=(n.elmDoc.getElementsByTagName("head")[0]||n.elmDoc.documentElement).appendChild(n.elmDoc.createElement("style"))).type="text/css",s.id=r,s.textContent=l)),i?(o=e('<div><div class="'+a+'-legacy"><div class="'+a+'-3" /><div class="'+a+'-2" /><div class="'+a+'-1" /><div class="'+a+'-2" /><div class="'+a+'-3" /></div></div>'),n.showProgress=u):o=e('<div><div class="'+a+'" /></div>'),n.adjustProgress=c,o}}();n.prototype.show=function(){var n,i,r,o,a,s=this;s.reset(!0),n=s.jqTarget.get(0).style,s.orgPosition=n.position,"relative"!==(i=s.jqTarget.css("position"))&&"absolute"!==i&&"fixed"!==i&&s.jqTarget.css("position","relative"),s.orgOverflow=n.overflow,r=s.jqTarget.prop("clientWidth"),o=s.jqTarget.prop("clientHeight"),s.jqTarget.css("overflow","hidden"),r-=s.jqTarget.prop("clientWidth"),o-=s.jqTarget.prop("clientHeight"),s.addMarginR=s.addMarginB=0,0>r&&(s.addMarginR=-r),0>o&&(s.addMarginB=-o),s.isBody?(s.addMarginR&&(s.orgMarginR=n.marginRight,s.jqTarget.css("marginRight","+="+s.addMarginR)),s.addMarginB&&(s.orgMarginB=n.marginBottom,s.jqTarget.css("marginBottom","+="+s.addMarginB))):(s.addMarginR&&(s.orgMarginR=n.paddingRight,s.orgWidth=n.width),s.addMarginB&&(s.orgMarginB=n.paddingBottom,s.orgHeight=n.height)),s.jqActive=t,a=e(s.elmDoc.activeElement),s.isBody&&!s.isFrame?s.jqActive=a.blur():s.jqTarget.has(a.get(0)).length&&a.blur(),s.jqTarget.focusin(s.avoidFocus),function(e){s.scrLeft=e.scrollLeft(),s.scrTop=e.scrollTop(),e.scroll(s.avoidScroll)}(s.isBody?s.jqWin:s.jqTarget),s.jqWin.resize(s.callAdjust),s.callAdjust(),s.isShown=!0,s.jqOverlay.stop().fadeTo(s.duration,s.opacity,(function(){s.jqTargetOrg.trigger(c)})),s.jqProgress&&(s.showProgress&&s.showProgress(!0),s.jqProgress.fadeIn(s.duration))},n.prototype.hide=function(){var e=this;e.isShown&&(e.jqOverlay.stop().fadeOut(e.duration,(function(){e.reset(),e.jqTargetOrg.trigger(u)})),e.jqProgress&&e.jqProgress.fadeOut(e.duration))},n.prototype.adjust=function(){var e,t;this.isBody?(e=this.jqWin.width(),t=this.jqWin.height(),this.jqOverlay.width(e).height(t),this.jqProgress&&this.jqProgress.css({left:(e-this.jqProgress.outerWidth())/2,top:(t-this.jqProgress.outerHeight())/2})):(this.addMarginR&&(e=this.jqTarget.css({paddingRight:this.orgMarginR,width:this.orgWidth}).width(),this.jqTarget.css("paddingRight","+="+this.addMarginR).width(e-this.addMarginR)),this.addMarginB&&(t=this.jqTarget.css({paddingBottom:this.orgMarginB,height:this.orgHeight}).height(),this.jqTarget.css("paddingBottom","+="+this.addMarginB).height(t-this.addMarginB)),e=Math.max(this.jqTarget.prop("scrollWidth"),this.jqTarget.innerWidth()),t=Math.max(this.jqTarget.prop("scrollHeight"),this.jqTarget.innerHeight()),this.jqOverlay.width(e).height(t),this.jqProgress&&(e=this.jqTarget.innerWidth(),t=this.jqTarget.innerHeight(),this.jqProgress.css({left:(e-this.jqProgress.outerWidth())/2+this.scrLeft,top:(t-this.jqProgress.outerHeight())/2+this.scrTop})))},n.prototype.reset=function(e){var t=this;e&&(t.jqOverlay.css("display","none"),t.jqProgress&&t.jqProgress.css("display","none")),t.isShown&&(t.jqTarget.css({position:t.orgPosition,overflow:t.orgOverflow}),t.isBody?(t.addMarginR&&t.jqTarget.css("marginRight",t.orgMarginR),t.addMarginB&&t.jqTarget.css("marginBottom",t.orgMarginB)):(t.addMarginR&&t.jqTarget.css({paddingRight:t.orgMarginR,width:t.orgWidth}),t.addMarginB&&t.jqTarget.css({paddingBottom:t.orgMarginB,height:t.orgHeight})),t.jqTarget.off("focusin",t.avoidFocus),t.jqActive&&t.jqActive.length&&t.jqActive.focus(),function(e){e.off("scroll",t.avoidScroll).scrollLeft(t.scrLeft).scrollTop(t.scrTop)}(t.isBody?t.jqWin:t.jqTarget),t.jqWin.off("resize",t.callAdjust),t.isShown=!1)},e.fn[s]=function(e,t,n){return"show"===e?r(this,t):"hide"===e?o(this):"option"===e?a(this,t,n):i(this,e)}}(jQuery),define("jquery.plainoverlay",(function(){})),define("pgui.overlay",["jquery.plainoverlay"],(function(){return window.overlay={showOverlay:function(e,t){$("body").plainOverlay("show",{progress:function(){return $('<div class="pgui-overlay"><div class="comment">'+t+"</div></div>")}})},hideOverlay:function(){$("body").plainOverlay("hide")}},window.overlay})),define("multiple_sorting",["class","pgui.localizer"],(function(e,t){return e.extend({init:function(e,t){var n=this;this.sorter=e,this.$sortDialog=t,this.$table=t.find(".multiple-sorting-table"),this.$addLevelButton=t.find(".add-sorting-level"),this.$deleteLevelButton=t.find(".delete-sorting-level"),this.$initialLevels=this.$table.find("tr.sorting-level").clone(),this.$sortDialog.on("click",".sort-button",(function(e){e.preventDefault();var t=n.$table.find("tr.sorting-level");n.sorter.clear(),t.each((function(){var e=$(this).find(".multi-sort-name").val();n.sorter.deleteColumn(e),n.sorter.addColumn(e,$(this).find(".multi-sort-order").val())})),n.sorter.applySort()})),this.$sortDialog.on("hidden.bs.modal",(function(){n.$table.find("tr.sorting-level").remove(),n.$table.find("tbody").append(n.$initialLevels),n._updateButtons()})),this.$addLevelButton.on("click",(function(){n._addLevel()})),this.$deleteLevelButton.on("click",(function(){n._deleteLevel()})),this._updateButtons()},_addLevel:function(){var e=t.getString("SortBy");this.$table.find("tr.sorting-level").length>0&&(e=t.getString("ThenBy"));var n=$("<select>").addClass("multi-sort-name form-control");$.each(this.sorter.getSortableColumns(),(function(e,t){n.append($("<option>").val(t.name).text(t.caption))}));var i=$("<select>").addClass("multi-sort-order form-control").append($("<option>").val("a").text(t.getString("Ascending"))).append($("<option>").val("d").text(t.getString("Descending")));$("<tr>").addClass("sorting-level").append($("<td>").text(e)).append($("<td>").append(n)).append($("<td>").append(i)).appendTo(this.$table.find("tbody")),this._updateButtons()},_deleteLevel:function(){var e=this.$table.find("tr.sorting-level");e.length>0&&e.last().remove(),this._updateButtons()},_updateButtons:function(){var e=this.$table.find("tr.sorting-level").length,t=this.sorter.getSortableColumns().length;this.$addLevelButton.prop("disabled",t==e),this.$deleteLevelButton.prop("disabled",0==e)}})})),define("sorter",["class"],(function(e){return e.extend({init:function(e){var t=this;this.sortingColumns=[],this.sortableColumns=[],$.each(e,(function(e,n){var i=$('.sortable[data-field-name="'+n.name+'"]');t.sortableColumns.push(n),i.on("click",(function(e){e.preventDefault();var n=$(this).data("field-name");t._onClickSortableCellHandler(n,e)}));var r=i.data("sort-index")||n.index;null!=r&&(t.sortingColumns[r]=("desc"==i.data("sort-order")?"d":"a")+i.data("field-name"))}))},_onClickSortableCellHandler:function(e,t){t.shiftKey?this.addColumn(e):t.ctrlKey||t.metaKey?this.deleteColumn(e):this.sortByColumn(e),this.applySort()},getSortableColumns:function(){return this.sortableColumns},applySort:function(){var e=this;require(["jquery.query"],(function(){e.sortingColumns.length>0?window.location=jQuery.query.set("order",e.sortingColumns):window.location=jQuery.query.remove("order").set("operation","resetorder")}))},_getColumnIndexByName:function(e){for(var t=0;t<this.sortingColumns.length;t++)if(this.sortingColumns[t]&&this.sortingColumns[t].slice(1)==e)return t},addColumn:function(e,t){var n=this._getColumnIndexByName(e);null!=n?"a"==this.sortingColumns[n].charAt(0)?this.sortingColumns[n]="d"+e:this.sortingColumns[n]="a"+e:this.sortingColumns.push((t||"a")+e)},deleteColumn:function(e){var t=this._getColumnIndexByName(e);void 0!==t&&this.sortingColumns.splice(t,1)},sortByColumn:function(e){var t=this._getColumnIndexByName(e),n="d";null!=t&&"d"!=this.sortingColumns[t].charAt(0)||(n="a"),this.sortingColumns=[n+e]},clear:function(){this.sortingColumns=[]}})})),define("pgui.autohide-message",[],(function(){return function(e,t,n){n=n||1e3,(t=parseInt(t||e.data("display-time")||0))>0&&setTimeout((function(){e.slideUp(n)}),1e3*parseInt(t))}})),function(e,t){"use strict";e.bootbox=t(e.jQuery),"function"==typeof define&&define.amd?define("libs/bootbox.min",["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):e.bootbox=t(e.jQuery)}(this,(function e(t,n){"use strict";var i,r,o,a;Object.keys||(Object.keys=(i=Object.prototype.hasOwnProperty,r=!{toString:null}.propertyIsEnumerable("toString"),a=(o=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"]).length,function(e){if("function"!=typeof e&&("object"!=typeof e||null===e))throw new TypeError("Object.keys called on non-object");var t,n,s=[];for(t in e)i.call(e,t)&&s.push(t);if(r)for(n=0;n<a;n++)i.call(e,o[n])&&s.push(o[n]);return s}));var s={VERSION:"5.5.2"},l={en:{OK:"OK",CANCEL:"Cancel",CONFIRM:"OK"}},c={dialog:'<div class="bootbox modal" tabindex="-1" role="dialog" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-body"><div class="bootbox-body"></div></div></div></div></div>',header:'<div class="modal-header"><h5 class="modal-title"></h5></div>',footer:'<div class="modal-footer"></div>',closeButton:'<button type="button" class="bootbox-close-button close" aria-hidden="true">&times;</button>',form:'<form class="bootbox-form"></form>',button:'<button type="button" class="btn"></button>',option:"<option></option>",promptMessage:'<div class="bootbox-prompt-message"></div>',inputs:{text:'<input class="bootbox-input bootbox-input-text form-control" autocomplete="off" type="text" />',textarea:'<textarea class="bootbox-input bootbox-input-textarea form-control"></textarea>',email:'<input class="bootbox-input bootbox-input-email form-control" autocomplete="off" type="email" />',select:'<select class="bootbox-input bootbox-input-select form-control"></select>',checkbox:'<div class="form-check checkbox"><label class="form-check-label"><input class="form-check-input bootbox-input bootbox-input-checkbox" type="checkbox" /></label></div>',radio:'<div class="form-check radio"><label class="form-check-label"><input class="form-check-input bootbox-input bootbox-input-radio" type="radio" name="bootbox-radio" /></label></div>',date:'<input class="bootbox-input bootbox-input-date form-control" autocomplete="off" type="date" />',time:'<input class="bootbox-input bootbox-input-time form-control" autocomplete="off" type="time" />',number:'<input class="bootbox-input bootbox-input-number form-control" autocomplete="off" type="number" />',password:'<input class="bootbox-input bootbox-input-password form-control" autocomplete="off" type="password" />',range:'<input class="bootbox-input bootbox-input-range form-control-range" autocomplete="off" type="range" />'}},u={locale:"en",backdrop:"static",animate:!0,className:null,closeButton:!0,show:!0,container:"body",value:"",inputType:"text",swapButtonOrder:!1,centerVertical:!1,multiple:!1,scrollable:!1,reusable:!1};function d(e,i,r,o){var a;o&&o[0]&&(a=o[0].locale||u.locale,(o[0].swapButtonOrder||u.swapButtonOrder)&&(i=i.reverse()));var s,c,d,h={className:"bootbox-"+e,buttons:function(e,t){for(var n={},i=0,r=e.length;i<r;i++){var o=e[i],a=o.toLowerCase(),s=o.toUpperCase();n[a]={label:(c=s,u=t,d=l[u],d?d[c]:l.en[c])}}var c,u,d;return n}(i,a)};return s=function(e,n,i){return t.extend(!0,{},e,function(e,t){var n=e.length,i={};if(n<1||2<n)throw new Error("Invalid argument length");return 2===n||"string"==typeof e[0]?(i[t[0]]=e[0],i[t[1]]=e[1]):i=e[0],i}(n,i))}(h,o,r),d={},f(c=i,(function(e,t){d[t]=!0})),f(s.buttons,(function(e){if(d[e]===n)throw new Error('button key "'+e+'" is not allowed (options are '+c.join(" ")+")")})),s}function h(e){return Object.keys(e).length}function f(e,n){var i=0;t.each(e,(function(e,t){n(e,t,i++)}))}function p(e){e.data.dialog.find(".bootbox-accept").first().trigger("focus")}function m(e){e.target===e.data.dialog[0]&&e.data.dialog.remove()}function g(e){e.target===e.data.dialog[0]&&(e.data.dialog.off("escape.close.bb"),e.data.dialog.off("click"))}function v(e,n,i){e.stopPropagation(),e.preventDefault(),t.isFunction(i)&&!1===i.call(n,e)||n.modal("hide")}function b(e){return/([01][0-9]|2[0-3]):[0-5][0-9]?:[0-5][0-9]/.test(e)}function y(e){return/(\d{4})-(\d{2})-(\d{2})/.test(e)}return s.locales=function(e){return e?l[e]:l},s.addLocale=function(e,n){return t.each(["OK","CANCEL","CONFIRM"],(function(e,t){if(!n[t])throw new Error('Please supply a translation for "'+t+'"')})),l[e]={OK:n.OK,CANCEL:n.CANCEL,CONFIRM:n.CONFIRM},s},s.removeLocale=function(e){if("en"===e)throw new Error('"en" is used as the default and fallback locale and cannot be removed.');return delete l[e],s},s.setLocale=function(e){return s.setDefaults("locale",e)},s.setDefaults=function(){var e={};return 2===arguments.length?e[arguments[0]]=arguments[1]:e=arguments[0],t.extend(u,e),s},s.hideAll=function(){return t(".bootbox").modal("hide"),s},s.init=function(n){return e(n||t)},s.dialog=function(e){if(t.fn.modal===n)throw new Error('"$.fn.modal" is not defined; please double check you have included the Bootstrap JavaScript library. See https://getbootstrap.com/docs/4.4/getting-started/javascript/ for more details.');if(e=function(e){var n,i;if("object"!=typeof e)throw new Error("Please supply an object of options");if(!e.message)throw new Error('"message" option must not be null or an empty string.');return(e=t.extend({},u,e)).backdrop?e.backdrop="string"!=typeof e.backdrop||"static"!==e.backdrop.toLowerCase()||"static":e.backdrop=!1!==e.backdrop&&0!==e.backdrop&&"static",e.buttons||(e.buttons={}),n=e.buttons,i=h(n),f(n,(function(r,o,a){if(t.isFunction(o)&&(o=n[r]={callback:o}),"object"!==t.type(o))throw new Error('button with key "'+r+'" must be an object');if(o.label||(o.label=r),!o.className){var s;s=e.swapButtonOrder?0===a:a===i-1,o.className=i<=2&&s?"btn-primary":"btn-secondary btn-default"}})),e}(e),t.fn.modal.Constructor.VERSION){e.fullBootstrapVersion=t.fn.modal.Constructor.VERSION;var i=e.fullBootstrapVersion.indexOf(".");e.bootstrap=e.fullBootstrapVersion.substring(0,i)}else e.bootstrap="2",e.fullBootstrapVersion="2.3.2",console.warn("Bootbox will *mostly* work with Bootstrap 2, but we do not officially support it. Please upgrade, if possible.");var r=t(c.dialog),o=r.find(".modal-dialog"),a=r.find(".modal-body"),s=t(c.header),l=t(c.footer),d=e.buttons,b={onEscape:e.onEscape};if(a.find(".bootbox-body").html(e.message),0<h(e.buttons)&&(f(d,(function(e,n){var i=t(c.button);switch(i.data("bb-handler",e),i.addClass(n.className),e){case"ok":case"confirm":i.addClass("bootbox-accept");break;case"cancel":i.addClass("bootbox-cancel")}i.html(n.label),l.append(i),b[e]=n.callback})),a.after(l)),!0===e.animate&&r.addClass("fade"),e.className&&r.addClass(e.className),e.size)switch(e.fullBootstrapVersion.substring(0,3)<"3.1"&&console.warn('"size" requires Bootstrap 3.1.0 or higher. You appear to be using '+e.fullBootstrapVersion+". Please upgrade to use this option."),e.size){case"small":case"sm":o.addClass("modal-sm");break;case"large":case"lg":o.addClass("modal-lg");break;case"extra-large":case"xl":o.addClass("modal-xl"),e.fullBootstrapVersion.substring(0,3)<"4.2"&&console.warn('Using size "xl"/"extra-large" requires Bootstrap 4.2.0 or higher. You appear to be using '+e.fullBootstrapVersion+". Please upgrade to use this option.")}if(e.scrollable&&(o.addClass("modal-dialog-scrollable"),e.fullBootstrapVersion.substring(0,3)<"4.3"&&console.warn('Using "scrollable" requires Bootstrap 4.3.0 or higher. You appear to be using '+e.fullBootstrapVersion+". Please upgrade to use this option.")),e.title&&(a.before(s),r.find(".modal-title").html(e.title)),e.closeButton){var y=t(c.closeButton);e.title?3<e.bootstrap?r.find(".modal-header").append(y):r.find(".modal-header").prepend(y):y.prependTo(a)}if(e.centerVertical&&(o.addClass("modal-dialog-centered"),e.fullBootstrapVersion<"4.0.0"&&console.warn('"centerVertical" requires Bootstrap 4.0.0-beta.3 or higher. You appear to be using '+e.fullBootstrapVersion+". Please upgrade to use this option.")),e.reusable||r.one("hide.bs.modal",{dialog:r},g),e.onHide){if(!t.isFunction(e.onHide))throw new Error('Argument supplied to "onHide" must be a function');r.on("hide.bs.modal",e.onHide)}if(e.reusable||r.one("hidden.bs.modal",{dialog:r},m),e.onHidden){if(!t.isFunction(e.onHidden))throw new Error('Argument supplied to "onHidden" must be a function');r.on("hidden.bs.modal",e.onHidden)}if(e.onShow){if(!t.isFunction(e.onShow))throw new Error('Argument supplied to "onShow" must be a function');r.on("show.bs.modal",e.onShow)}if(r.one("shown.bs.modal",{dialog:r},p),e.onShown){if(!t.isFunction(e.onShown))throw new Error('Argument supplied to "onShown" must be a function');r.on("shown.bs.modal",e.onShown)}return!0===e.backdrop&&r.on("click.dismiss.bs.modal",(function(e){r.children(".modal-backdrop").length&&(e.currentTarget=r.children(".modal-backdrop").get(0)),e.target===e.currentTarget&&r.trigger("escape.close.bb")})),r.on("escape.close.bb",(function(e){b.onEscape&&v(e,r,b.onEscape)})),r.on("click",".modal-footer button:not(.disabled)",(function(e){var i=t(this).data("bb-handler");i!==n&&v(e,r,b[i])})),r.on("click",".bootbox-close-button",(function(e){v(e,r,b.onEscape)})),r.on("keyup",(function(e){27===e.which&&r.trigger("escape.close.bb")})),t(e.container).append(r),r.modal({backdrop:e.backdrop,keyboard:!1,show:!1}),e.show&&r.modal("show"),r},s.alert=function(){var e;if((e=d("alert",["ok"],["message","callback"],arguments)).callback&&!t.isFunction(e.callback))throw new Error('alert requires the "callback" property to be a function when provided');return e.buttons.ok.callback=e.onEscape=function(){return!t.isFunction(e.callback)||e.callback.call(this)},s.dialog(e)},s.confirm=function(){var e;if(e=d("confirm",["cancel","confirm"],["message","callback"],arguments),!t.isFunction(e.callback))throw new Error("confirm requires a callback");return e.buttons.cancel.callback=e.onEscape=function(){return e.callback.call(this,!1)},e.buttons.confirm.callback=function(){return e.callback.call(this,!0)},s.dialog(e)},s.prompt=function(){var e,i,r,o,a,l;if(r=t(c.form),(e=d("prompt",["cancel","confirm"],["title","callback"],arguments)).value||(e.value=u.value),e.inputType||(e.inputType=u.inputType),a=e.show===n?u.show:e.show,e.show=!1,e.buttons.cancel.callback=e.onEscape=function(){return e.callback.call(this,null)},e.buttons.confirm.callback=function(){var n;if("checkbox"===e.inputType)n=o.find("input:checked").map((function(){return t(this).val()})).get();else if("radio"===e.inputType)n=o.find("input:checked").val();else{if(o[0].checkValidity&&!o[0].checkValidity())return!1;n="select"===e.inputType&&!0===e.multiple?o.find("option:selected").map((function(){return t(this).val()})).get():o.val()}return e.callback.call(this,n)},!e.title)throw new Error("prompt requires a title");if(!t.isFunction(e.callback))throw new Error("prompt requires a callback");if(!c.inputs[e.inputType])throw new Error("Invalid prompt type");switch(o=t(c.inputs[e.inputType]),e.inputType){case"text":case"textarea":case"email":case"password":o.val(e.value),e.placeholder&&o.attr("placeholder",e.placeholder),e.pattern&&o.attr("pattern",e.pattern),e.maxlength&&o.attr("maxlength",e.maxlength),e.required&&o.prop({required:!0}),e.rows&&!isNaN(parseInt(e.rows))&&"textarea"===e.inputType&&o.attr({rows:e.rows});break;case"date":case"time":case"number":case"range":if(o.val(e.value),e.placeholder&&o.attr("placeholder",e.placeholder),e.pattern&&o.attr("pattern",e.pattern),e.required&&o.prop({required:!0}),"date"!==e.inputType&&e.step){if(!("any"===e.step||!isNaN(e.step)&&0<parseFloat(e.step)))throw new Error('"step" must be a valid positive number or the value "any". See https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#attr-step for more information.');o.attr("step",e.step)}!function(e,t,i){var r=!1,o=!0,a=!0;if("date"===e)t===n||(o=y(t))?i===n||(a=y(i))||console.warn('Browsers which natively support the "date" input type expect date values to be of the form "YYYY-MM-DD" (see ISO-8601 https://www.iso.org/iso-8601-date-and-time-format.html). Bootbox does not enforce this rule, but your max value may not be enforced by this browser.'):console.warn('Browsers which natively support the "date" input type expect date values to be of the form "YYYY-MM-DD" (see ISO-8601 https://www.iso.org/iso-8601-date-and-time-format.html). Bootbox does not enforce this rule, but your min value may not be enforced by this browser.');else if("time"===e){if(t!==n&&!(o=b(t)))throw new Error('"min" is not a valid time. See https://www.w3.org/TR/2012/WD-html-markup-20120315/datatypes.html#form.data.time for more information.');if(i!==n&&!(a=b(i)))throw new Error('"max" is not a valid time. See https://www.w3.org/TR/2012/WD-html-markup-20120315/datatypes.html#form.data.time for more information.')}else{if(t!==n&&isNaN(t))throw o=!1,new Error('"min" must be a valid number. See https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#attr-min for more information.');if(i!==n&&isNaN(i))throw a=!1,new Error('"max" must be a valid number. See https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#attr-max for more information.')}if(o&&a){if(i<=t)throw new Error('"max" must be greater than "min". See https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#attr-max for more information.');r=!0}return r}(e.inputType,e.min,e.max)||(e.min!==n&&o.attr("min",e.min),e.max!==n&&o.attr("max",e.max));break;case"select":var h={};if(l=e.inputOptions||[],!t.isArray(l))throw new Error("Please pass an array of input options");if(!l.length)throw new Error('prompt with "inputType" set to "select" requires at least one option');e.placeholder&&o.attr("placeholder",e.placeholder),e.required&&o.prop({required:!0}),e.multiple&&o.prop({multiple:!0}),f(l,(function(e,i){var r=o;if(i.value===n||i.text===n)throw new Error('each option needs a "value" property and a "text" property');i.group&&(h[i.group]||(h[i.group]=t("<optgroup />").attr("label",i.group)),r=h[i.group]);var a=t(c.option);a.attr("value",i.value).text(i.text),r.append(a)})),f(h,(function(e,t){o.append(t)})),o.val(e.value);break;case"checkbox":var m=t.isArray(e.value)?e.value:[e.value];if(!(l=e.inputOptions||[]).length)throw new Error('prompt with "inputType" set to "checkbox" requires at least one option');o=t('<div class="bootbox-checkbox-list"></div>'),f(l,(function(i,r){if(r.value===n||r.text===n)throw new Error('each option needs a "value" property and a "text" property');var a=t(c.inputs[e.inputType]);a.find("input").attr("value",r.value),a.find("label").append("\n"+r.text),f(m,(function(e,t){t===r.value&&a.find("input").prop("checked",!0)})),o.append(a)}));break;case"radio":if(e.value!==n&&t.isArray(e.value))throw new Error('prompt with "inputType" set to "radio" requires a single, non-array value for "value"');if(!(l=e.inputOptions||[]).length)throw new Error('prompt with "inputType" set to "radio" requires at least one option');o=t('<div class="bootbox-radiobutton-list"></div>');var g=!0;f(l,(function(i,r){if(r.value===n||r.text===n)throw new Error('each option needs a "value" property and a "text" property');var a=t(c.inputs[e.inputType]);a.find("input").attr("value",r.value),a.find("label").append("\n"+r.text),e.value!==n&&r.value===e.value&&(a.find("input").prop("checked",!0),g=!1),o.append(a)})),g&&o.find('input[type="radio"]').first().prop("checked",!0)}if(r.append(o),r.on("submit",(function(e){e.preventDefault(),e.stopPropagation(),i.find(".bootbox-accept").trigger("click")})),""!==t.trim(e.message)){var v=t(c.promptMessage).html(e.message);r.prepend(v),e.message=r}else e.message=r;return(i=s.dialog(e)).off("shown.bs.modal",p),i.on("shown.bs.modal",(function(){o.focus()})),!0===a&&i.modal("show"),i},s})),require(["pgui.localizer","libs/bootbox.min","jquery"],(function(e){e.load().done((function(){bootbox.addLocale("php_gen",{OK:e.getString("Ok"),CANCEL:e.getString("Cancel"),CONFIRM:e.getString("Ok")}),bootbox.setLocale("php_gen")}))})),define("bootbox",(function(){})),define("pgui.utils",["pgui.autohide-message","bootbox"],(function(e){function t(e,t){return $("<div>").addClass("alert").addClass("alert-"+t).css("margin-bottom",0).html("<p>"+e+"</p>")}function n(e){bootbox.alert({closeButton:!1,message:e})}return{showInfoMessage:function(e){n(t(e,"info"))},showSuccessMessage:function(e){n(t(e,"success"))},showWarningMessage:function(e){n(t(e,"warning"))},showErrorMessage:function(e){n(t(e,"danger"))},showMessage:function(e){n(e)},updatePopupHints:function(e){e.find(".js-more-hint").each((function(){var e=$(this),t=e.closest("td[data-column-name]").find(".js-more-box").html();e.off("click").on("click",(function(){return $(this).popover("hide"),n(t),!1}));var i=e.data("bs.popover");i?i.options.content=t:e.popover({title:"",placement:function(){return e.offset().top-$(window).scrollTop()<$(window).height()/2?"bottom":"top"},html:!0,trigger:"hover",content:t})}))},buildDismissableMessage:function(t,n,i){if(!n)return null;var r=$('<div class="alert alert-'+t+' alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-label="Close">&times;</button>'+n+"</div>");return e(r,i),r},createLoadingModalDialog:function(e){var t='<div class="modal-dialog modal-sm"><div class="modal-content"><div class="modal-body" style="text-align: center"><img src="components/assets/img/loading.gif" />'+(void 0!==e?"&nbsp&nbsp<span>"+e+"</span>":"")+"</div></div>";return $("<div/>",{class:"modal fade",tabIndex:"-1","data-backdrop":"static"}).append(t).appendTo($("body"))},replaceRow:function(e,t){var n=e.find(".details").first(),i=t.find(".details").first();n.length>0&&i.length>0&&i.replaceWith(n),e.replaceWith(t)}}})),define("pgui.field-embedded-video",["underscore","pgui.localizer","bootbox","jquery.query"],(function(e,t){var n=e.template('<img class="pgui-field-embedded-video-thumb pgui-field-embedded-video-fade" src="<%=thumbnail_url %>" /><span class="pgui-field-embedded-video-icon pgui-field-embedded-video-fade icon-play"></span>');function i(){return!0}function r(e,t){var n,i,r=$(e.html);return r.removeClass().addClass("pgui-field-embedded-video-iframe").removeAttr("width").removeAttr("height"),t&&r.attr("src",(n=r.attr("src"),(i=((n=n.split("?"))[1]||"").split("&")).push("autoplay=1"),n[0]+"?"+i.join("&"))),r}function o(e){if(e.data("api")){var n=e.data("api");bootbox.dialog({message:r(n,e.data("autoplay")),title:n.title||null,closeButton:!0,backdrop:!0,onEscape:i,buttons:{cancel:{label:t.getString("Close"),callback:i}}})}else e.append('<img class="pgui-field-embedded-video-preloader" src="components/assets/img/loading.gif">'),a(e,(function(){e.find(".pgui-field-embedded-video-preloader").remove(),o(e)}))}function a(e,t){var n=e.data("url");$.getJSON("https://noembed.com/embed",{url:n}).done((function(i){if(e.data("api",i),"video"!==i.type)return e.html(n),void e.find(".pgui-field-embedded-video-preloader").remove();t(i)})).fail((function(){e.html(n),e.find(".pgui-field-embedded-video-preloader").remove()}))}return function(e,t,i){t=t||!0,e.find(".pgui-field-embedded-video").each((function(e,s){var l=$(s);if(l.data("url")){l.data("autoplay",t);var c=l.closest(".pgui-embedded-video-wrapper");i||c.data("without-modal")?a(l,(function(e){l.html(r(e)),l.find(".pgui-field-embedded-video-preloader").remove()})):(l.on("click",(function(){return o(l),!1})),l.find(".pgui-field-embedded-video-thumb").length||a(l,(function(e){(void 0===l.data("thumb")||l.data("thumb"))&&l.prepend($(n(e))),setTimeout((function(){l.find(".pgui-field-embedded-video-fade").removeClass("pgui-field-embedded-video-fade"),l.find(".pgui-field-embedded-video-preloader").addClass("pgui-field-embedded-video-fade")}),10)})))}}))}})),function(e,t){"function"==typeof define&&define.amd?define("libs/store",[],t):"object"==typeof exports?module.exports=t():e.store=t()}(this,(function(){var e,t={},n="undefined"!=typeof window?window:global,i=n.document,r="localStorage",o="script";if(t.disabled=!1,t.version="1.3.20",t.set=function(e,t){},t.get=function(e,t){},t.has=function(e){return void 0!==t.get(e)},t.remove=function(e){},t.clear=function(){},t.transact=function(e,n,i){null==i&&(i=n,n=null),null==n&&(n={});var r=t.get(e,n);i(r),t.set(e,r)},t.getAll=function(){},t.forEach=function(){},t.serialize=function(e){return JSON.stringify(e)},t.deserialize=function(e){if("string"==typeof e)try{return JSON.parse(e)}catch(t){return e||void 0}},function(){try{return r in n&&n[r]}catch(e){return!1}}())e=n[r],t.set=function(n,i){return void 0===i?t.remove(n):(e.setItem(n,t.serialize(i)),i)},t.get=function(n,i){var r=t.deserialize(e.getItem(n));return void 0===r?i:r},t.remove=function(t){e.removeItem(t)},t.clear=function(){e.clear()},t.getAll=function(){var e={};return t.forEach((function(t,n){e[t]=n})),e},t.forEach=function(n){for(var i=0;i<e.length;i++){var r=e.key(i);n(r,t.get(r))}};else if(i&&i.documentElement.addBehavior){var a,s;try{(s=new ActiveXObject("htmlfile")).open(),s.write("<"+o+">document.w=window</"+o+'><iframe src="/favicon.ico"></iframe>'),s.close(),a=s.w.frames[0].document,e=a.createElement("div")}catch(t){e=i.createElement("div"),a=i.body}var l=function(n){return function(){var i=Array.prototype.slice.call(arguments,0);i.unshift(e),a.appendChild(e),e.addBehavior("#default#userData"),e.load(r);var o=n.apply(t,i);return a.removeChild(e),o}},c=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g"),u=function(e){return e.replace(/^d/,"___$&").replace(c,"___")};t.set=l((function(e,n,i){return n=u(n),void 0===i?t.remove(n):(e.setAttribute(n,t.serialize(i)),e.save(r),i)})),t.get=l((function(e,n,i){n=u(n);var r=t.deserialize(e.getAttribute(n));return void 0===r?i:r})),t.remove=l((function(e,t){t=u(t),e.removeAttribute(t),e.save(r)})),t.clear=l((function(e){var t=e.XMLDocument.documentElement.attributes;e.load(r);for(var n=t.length-1;n>=0;n--)e.removeAttribute(t[n].name);e.save(r)})),t.getAll=function(e){var n={};return t.forEach((function(e,t){n[e]=t})),n},t.forEach=l((function(e,n){for(var i,r=e.XMLDocument.documentElement.attributes,o=0;i=r[o];++o)n(i.name,t.deserialize(e.getAttribute(i.name)))}))}try{var d="__storejs__";t.set(d,d),t.get(d)!=d&&(t.disabled=!0),t.remove(d)}catch(e){t.disabled=!0}return t.enabled=!t.disabled,t})),define("pgui.selection",["class","libs/store","microevent"],(function(e,t,n){function i(e,t){return _.filter(e,(function(e){return e.join("_")!==t.join("_")}))}return n.mixin(e.extend({init:function(e){this.prefix=e+"_selection"},getData:function(){return t.get(this.prefix)||[]},add:function(e){var n=i(this.getData(),e);return n.push(e),t.set(this.prefix,n),this.trigger("change",n),this},remove:function(e){var n=i(this.getData(),e);return t.set(this.prefix,n),this.trigger("change",n),this},toggle:function(e,t){return t?this.add(e):this.remove(e),this},clear:function(){t.remove(this.prefix),this.trigger("change",[])}}))})),
/*!
 * jQuery Validation Plugin v1.19.5
 *
 * https://jqueryvalidation.org/
 *
 * Copyright (c) 2022 JÃ¶rn Zaefferer
 * Released under the MIT license
 */
function(e){"function"==typeof define&&define.amd?define("jquery.validate",["jquery"],e):"object"==typeof module&&module.exports?module.exports=e(require("jquery")):e(jQuery)}((function(e){e.extend(e.fn,{validate:function(t){if(this.length){var n=e.data(this[0],"validator");return n||(this.attr("novalidate","novalidate"),n=new e.validator(t,this[0]),e.data(this[0],"validator",n),n.settings.onsubmit&&(this.on("click.validate",":submit",(function(t){n.submitButton=t.currentTarget,e(this).hasClass("cancel")&&(n.cancelSubmit=!0),void 0!==e(this).attr("formnovalidate")&&(n.cancelSubmit=!0)})),this.on("submit.validate",(function(t){function i(){var i,r;return n.submitButton&&(n.settings.submitHandler||n.formSubmitted)&&(i=e("<input type='hidden'/>").attr("name",n.submitButton.name).val(e(n.submitButton).val()).appendTo(n.currentForm)),!(n.settings.submitHandler&&!n.settings.debug)||(r=n.settings.submitHandler.call(n,n.currentForm,t),i&&i.remove(),void 0!==r&&r)}return n.settings.debug&&t.preventDefault(),n.cancelSubmit?(n.cancelSubmit=!1,i()):n.form()?n.pendingRequest?(n.formSubmitted=!0,!1):i():(n.focusInvalid(),!1)}))),n)}t&&t.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing.")},valid:function(){var t,n,i;return e(this[0]).is("form")?t=this.validate().form():(i=[],t=!0,n=e(this[0].form).validate(),this.each((function(){(t=n.element(this)&&t)||(i=i.concat(n.errorList))})),n.errorList=i),t},rules:function(t,n){var i,r,o,a,s,l,c=this[0],u=void 0!==this.attr("contenteditable")&&"false"!==this.attr("contenteditable");if(null!=c&&(!c.form&&u&&(c.form=this.closest("form")[0],c.name=this.attr("name")),null!=c.form)){if(t)switch(r=(i=e.data(c.form,"validator").settings).rules,o=e.validator.staticRules(c),t){case"add":e.extend(o,e.validator.normalizeRule(n)),delete o.messages,r[c.name]=o,n.messages&&(i.messages[c.name]=e.extend(i.messages[c.name],n.messages));break;case"remove":return n?(l={},e.each(n.split(/\s/),(function(e,t){l[t]=o[t],delete o[t]})),l):(delete r[c.name],o)}return(a=e.validator.normalizeRules(e.extend({},e.validator.classRules(c),e.validator.attributeRules(c),e.validator.dataRules(c),e.validator.staticRules(c)),c)).required&&(s=a.required,delete a.required,a=e.extend({required:s},a)),a.remote&&(s=a.remote,delete a.remote,a=e.extend(a,{remote:s})),a}}});var t,n=function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")};e.extend(e.expr.pseudos||e.expr[":"],{blank:function(t){return!n(""+e(t).val())},filled:function(t){var i=e(t).val();return null!==i&&!!n(""+i)},unchecked:function(t){return!e(t).prop("checked")}}),e.validator=function(t,n){this.settings=e.extend(!0,{},e.validator.defaults,t),this.currentForm=n,this.init()},e.validator.format=function(t,n){return 1===arguments.length?function(){var n=e.makeArray(arguments);return n.unshift(t),e.validator.format.apply(this,n)}:(void 0===n||(arguments.length>2&&n.constructor!==Array&&(n=e.makeArray(arguments).slice(1)),n.constructor!==Array&&(n=[n]),e.each(n,(function(e,n){t=t.replace(new RegExp("\\{"+e+"\\}","g"),(function(){return n}))}))),t)},e.extend(e.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",pendingClass:"pending",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:e([]),errorLabelContainer:e([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(e){this.lastActive=e,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,e,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(e)))},onfocusout:function(e){this.checkable(e)||!(e.name in this.submitted)&&this.optional(e)||this.element(e)},onkeyup:function(t,n){9===n.which&&""===this.elementValue(t)||-1!==e.inArray(n.keyCode,[16,17,18,20,35,36,37,38,39,40,45,144,225])||(t.name in this.submitted||t.name in this.invalid)&&this.element(t)},onclick:function(e){e.name in this.submitted?this.element(e):e.parentNode.name in this.submitted&&this.element(e.parentNode)},highlight:function(t,n,i){"radio"===t.type?this.findByName(t.name).addClass(n).removeClass(i):e(t).addClass(n).removeClass(i)},unhighlight:function(t,n,i){"radio"===t.type?this.findByName(t.name).removeClass(n).addClass(i):e(t).removeClass(n).addClass(i)}},setDefaults:function(t){e.extend(e.validator.defaults,t)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:e.validator.format("Please enter no more than {0} characters."),minlength:e.validator.format("Please enter at least {0} characters."),rangelength:e.validator.format("Please enter a value between {0} and {1} characters long."),range:e.validator.format("Please enter a value between {0} and {1}."),max:e.validator.format("Please enter a value less than or equal to {0}."),min:e.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){this.labelContainer=e(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||e(this.currentForm),this.containers=e(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var t,n=this.currentForm,i=this.groups={};function r(t){var i=void 0!==e(this).attr("contenteditable")&&"false"!==e(this).attr("contenteditable");if(!this.form&&i&&(this.form=e(this).closest("form")[0],this.name=e(this).attr("name")),n===this.form){var r=e.data(this.form,"validator"),o="on"+t.type.replace(/^validate/,""),a=r.settings;a[o]&&!e(this).is(a.ignore)&&a[o].call(r,this,t)}}e.each(this.settings.groups,(function(t,n){"string"==typeof n&&(n=n.split(/\s/)),e.each(n,(function(e,n){i[n]=t}))})),t=this.settings.rules,e.each(t,(function(n,i){t[n]=e.validator.normalizeRule(i)})),e(this.currentForm).on("focusin.validate focusout.validate keyup.validate",":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], [type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox'], [contenteditable], [type='button']",r).on("click.validate","select, option, [type='radio'], [type='checkbox']",r),this.settings.invalidHandler&&e(this.currentForm).on("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),e.extend(this.submitted,this.errorMap),this.invalid=e.extend({},this.errorMap),this.valid()||e(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var e=0,t=this.currentElements=this.elements();t[e];e++)this.check(t[e]);return this.valid()},element:function(t){var n,i,r=this.clean(t),o=this.validationTargetFor(r),a=this,s=!0;return void 0===o?delete this.invalid[r.name]:(this.prepareElement(o),this.currentElements=e(o),(i=this.groups[o.name])&&e.each(this.groups,(function(e,t){t===i&&e!==o.name&&(r=a.validationTargetFor(a.clean(a.findByName(e))))&&r.name in a.invalid&&(a.currentElements.push(r),s=a.check(r)&&s)})),n=!1!==this.check(o),s=s&&n,this.invalid[o.name]=!n,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),e(t).attr("aria-invalid",!n)),s},showErrors:function(t){if(t){var n=this;e.extend(this.errorMap,t),this.errorList=e.map(this.errorMap,(function(e,t){return{message:e,element:n.findByName(t)[0]}})),this.successList=e.grep(this.successList,(function(e){return!(e.name in t)}))}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){e.fn.resetForm&&e(this.currentForm).resetForm(),this.invalid={},this.submitted={},this.prepareForm(),this.hideErrors();var t=this.elements().removeData("previousValue").removeAttr("aria-invalid");this.resetElements(t)},resetElements:function(e){var t;if(this.settings.unhighlight)for(t=0;e[t];t++)this.settings.unhighlight.call(this,e[t],this.settings.errorClass,""),this.findByName(e[t].name).removeClass(this.settings.validClass);else e.removeClass(this.settings.errorClass).removeClass(this.settings.validClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(e){var t,n=0;for(t in e)void 0!==e[t]&&null!==e[t]&&!1!==e[t]&&n++;return n},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(e){e.not(this.containers).text(""),this.addWrapper(e).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{e(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").trigger("focus").trigger("focusin")}catch(e){}},findLastActive:function(){var t=this.lastActive;return t&&1===e.grep(this.errorList,(function(e){return e.element.name===t.name})).length&&t},elements:function(){var t=this,n={};return e(this.currentForm).find("input, select, textarea, [contenteditable]").not(":submit, :reset, :image, :disabled").not(this.settings.ignore).filter((function(){var i=this.name||e(this).attr("name"),r=void 0!==e(this).attr("contenteditable")&&"false"!==e(this).attr("contenteditable");return!i&&t.settings.debug&&window.console&&console.error("%o has no name assigned",this),r&&(this.form=e(this).closest("form")[0],this.name=i),this.form===t.currentForm&&(!(i in n||!t.objectLength(e(this).rules()))&&(n[i]=!0,!0))}))},clean:function(t){return e(t)[0]},errors:function(){var t=this.settings.errorClass.split(" ").join(".");return e(this.settings.errorElement+"."+t,this.errorContext)},resetInternals:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=e([]),this.toHide=e([])},reset:function(){this.resetInternals(),this.currentElements=e([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(e){this.reset(),this.toHide=this.errorsFor(e)},elementValue:function(t){var n,i,r=e(t),o=t.type,a=void 0!==r.attr("contenteditable")&&"false"!==r.attr("contenteditable");return"radio"===o||"checkbox"===o?this.findByName(t.name).filter(":checked").val():"number"===o&&void 0!==t.validity?t.validity.badInput?"NaN":r.val():(n=a?r.text():r.val(),"file"===o?"C:\\fakepath\\"===n.substr(0,12)?n.substr(12):(i=n.lastIndexOf("/"))>=0||(i=n.lastIndexOf("\\"))>=0?n.substr(i+1):n:"string"==typeof n?n.replace(/\r/g,""):n)},check:function(t){t=this.validationTargetFor(this.clean(t));var n,i,r,o,a=e(t).rules(),s=e.map(a,(function(e,t){return t})).length,l=!1,c=this.elementValue(t);for(i in"function"==typeof a.normalizer?o=a.normalizer:"function"==typeof this.settings.normalizer&&(o=this.settings.normalizer),o&&(c=o.call(t,c),delete a.normalizer),a){r={method:i,parameters:a[i]};try{if("dependency-mismatch"===(n=e.validator.methods[i].call(this,c,t,r.parameters))&&1===s){l=!0;continue}if(l=!1,"pending"===n)return void(this.toHide=this.toHide.not(this.errorsFor(t)));if(!n)return this.formatAndAdd(t,r),!1}catch(e){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+t.id+", check the '"+r.method+"' method.",e),e instanceof TypeError&&(e.message+=".  Exception occurred when checking element "+t.id+", check the '"+r.method+"' method."),e}}if(!l)return this.objectLength(a)&&this.successList.push(t),!0},customDataMessage:function(t,n){return e(t).data("msg"+n.charAt(0).toUpperCase()+n.substring(1).toLowerCase())||e(t).data("msg")},customMessage:function(e,t){var n=this.settings.messages[e];return n&&(n.constructor===String?n:n[t])},findDefined:function(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e])return arguments[e]},defaultMessage:function(t,n){"string"==typeof n&&(n={method:n});var i=this.findDefined(this.customMessage(t.name,n.method),this.customDataMessage(t,n.method),!this.settings.ignoreTitle&&t.title||void 0,e.validator.messages[n.method],"<strong>Warning: No message defined for "+t.name+"</strong>"),r=/\$?\{(\d+)\}/g;return"function"==typeof i?i=i.call(this,n.parameters,t):r.test(i)&&(i=e.validator.format(i.replace(r,"{$1}"),n.parameters)),i},formatAndAdd:function(e,t){var n=this.defaultMessage(e,t);this.errorList.push({message:n,element:e,method:t.method}),this.errorMap[e.name]=n,this.submitted[e.name]=n},addWrapper:function(e){return this.settings.wrapper&&(e=e.add(e.parent(this.settings.wrapper))),e},defaultShowErrors:function(){var e,t,n;for(e=0;this.errorList[e];e++)n=this.errorList[e],this.settings.highlight&&this.settings.highlight.call(this,n.element,this.settings.errorClass,this.settings.validClass),this.showLabel(n.element,n.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(e=0;this.successList[e];e++)this.showLabel(this.successList[e]);if(this.settings.unhighlight)for(e=0,t=this.validElements();t[e];e++)this.settings.unhighlight.call(this,t[e],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return e(this.errorList).map((function(){return this.element}))},showLabel:function(t,n){var i,r,o,a,s=this.errorsFor(t),l=this.idOrName(t),c=e(t).attr("aria-describedby");s.length?(s.removeClass(this.settings.validClass).addClass(this.settings.errorClass),s.html(n)):(i=s=e("<"+this.settings.errorElement+">").attr("id",l+"-error").addClass(this.settings.errorClass).html(n||""),this.settings.wrapper&&(i=s.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(i):this.settings.errorPlacement?this.settings.errorPlacement.call(this,i,e(t)):i.insertAfter(t),s.is("label")?s.attr("for",l):0===s.parents("label[for='"+this.escapeCssMeta(l)+"']").length&&(o=s.attr("id"),c?c.match(new RegExp("\\b"+this.escapeCssMeta(o)+"\\b"))||(c+=" "+o):c=o,e(t).attr("aria-describedby",c),(r=this.groups[t.name])&&(a=this,e.each(a.groups,(function(t,n){n===r&&e("[name='"+a.escapeCssMeta(t)+"']",a.currentForm).attr("aria-describedby",s.attr("id"))}))))),!n&&this.settings.success&&(s.text(""),"string"==typeof this.settings.success?s.addClass(this.settings.success):this.settings.success(s,t)),this.toShow=this.toShow.add(s)},errorsFor:function(t){var n=this.escapeCssMeta(this.idOrName(t)),i=e(t).attr("aria-describedby"),r="label[for='"+n+"'], label[for='"+n+"'] *";return i&&(r=r+", #"+this.escapeCssMeta(i).replace(/\s+/g,", #")),this.errors().filter(r)},escapeCssMeta:function(e){return void 0===e?"":e.replace(/([\\!"#$%&'()*+,./:;<=>?@\[\]^`{|}~])/g,"\\$1")},idOrName:function(e){return this.groups[e.name]||(this.checkable(e)?e.name:e.id||e.name)},validationTargetFor:function(t){return this.checkable(t)&&(t=this.findByName(t.name)),e(t).not(this.settings.ignore)[0]},checkable:function(e){return/radio|checkbox/i.test(e.type)},findByName:function(t){return e(this.currentForm).find("[name='"+this.escapeCssMeta(t)+"']")},getLength:function(t,n){switch(n.nodeName.toLowerCase()){case"select":return e("option:selected",n).length;case"input":if(this.checkable(n))return this.findByName(n.name).filter(":checked").length}return t.length},depend:function(e,t){return!this.dependTypes[typeof e]||this.dependTypes[typeof e](e,t)},dependTypes:{boolean:function(e){return e},string:function(t,n){return!!e(t,n.form).length},function:function(e,t){return e(t)}},optional:function(t){var n=this.elementValue(t);return!e.validator.methods.required.call(this,n,t)&&"dependency-mismatch"},startRequest:function(t){this.pending[t.name]||(this.pendingRequest++,e(t).addClass(this.settings.pendingClass),this.pending[t.name]=!0)},stopRequest:function(t,n){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[t.name],e(t).removeClass(this.settings.pendingClass),n&&0===this.pendingRequest&&this.formSubmitted&&this.form()&&0===this.pendingRequest?(e(this.currentForm).trigger("submit"),this.submitButton&&e("input:hidden[name='"+this.submitButton.name+"']",this.currentForm).remove(),this.formSubmitted=!1):!n&&0===this.pendingRequest&&this.formSubmitted&&(e(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(t,n){return n="string"==typeof n&&n||"remote",e.data(t,"previousValue")||e.data(t,"previousValue",{old:null,valid:!0,message:this.defaultMessage(t,{method:n})})},destroy:function(){this.resetForm(),e(this.currentForm).off(".validate").removeData("validator").find(".validate-equalTo-blur").off(".validate-equalTo").removeClass("validate-equalTo-blur").find(".validate-lessThan-blur").off(".validate-lessThan").removeClass("validate-lessThan-blur").find(".validate-lessThanEqual-blur").off(".validate-lessThanEqual").removeClass("validate-lessThanEqual-blur").find(".validate-greaterThanEqual-blur").off(".validate-greaterThanEqual").removeClass("validate-greaterThanEqual-blur").find(".validate-greaterThan-blur").off(".validate-greaterThan").removeClass("validate-greaterThan-blur")}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(t,n){t.constructor===String?this.classRuleSettings[t]=n:e.extend(this.classRuleSettings,t)},classRules:function(t){var n={},i=e(t).attr("class");return i&&e.each(i.split(" "),(function(){this in e.validator.classRuleSettings&&e.extend(n,e.validator.classRuleSettings[this])})),n},normalizeAttributeRule:function(e,t,n,i){/min|max|step/.test(n)&&(null===t||/number|range|text/.test(t))&&(i=Number(i),isNaN(i)&&(i=void 0)),i||0===i?e[n]=i:t===n&&"range"!==t&&(e["date"===t?"dateISO":n]=!0)},attributeRules:function(t){var n,i,r={},o=e(t),a=t.getAttribute("type");for(n in e.validator.methods)"required"===n?(""===(i=t.getAttribute(n))&&(i=!0),i=!!i):i=o.attr(n),this.normalizeAttributeRule(r,a,n,i);return r.maxlength&&/-1|2147483647|524288/.test(r.maxlength)&&delete r.maxlength,r},dataRules:function(t){var n,i,r={},o=e(t),a=t.getAttribute("type");for(n in e.validator.methods)""===(i=o.data("rule"+n.charAt(0).toUpperCase()+n.substring(1).toLowerCase()))&&(i=!0),this.normalizeAttributeRule(r,a,n,i);return r},staticRules:function(t){var n={},i=e.data(t.form,"validator");return i.settings.rules&&(n=e.validator.normalizeRule(i.settings.rules[t.name])||{}),n},normalizeRules:function(t,n){return e.each(t,(function(i,r){if(!1!==r){if(r.param||r.depends){var o=!0;switch(typeof r.depends){case"string":o=!!e(r.depends,n.form).length;break;case"function":o=r.depends.call(n,n)}o?t[i]=void 0===r.param||r.param:(e.data(n.form,"validator").resetElements(e(n)),delete t[i])}}else delete t[i]})),e.each(t,(function(e,i){t[e]="function"==typeof i&&"normalizer"!==e?i(n):i})),e.each(["minlength","maxlength"],(function(){t[this]&&(t[this]=Number(t[this]))})),e.each(["rangelength","range"],(function(){var e;t[this]&&(Array.isArray(t[this])?t[this]=[Number(t[this][0]),Number(t[this][1])]:"string"==typeof t[this]&&(e=t[this].replace(/[\[\]]/g,"").split(/[\s,]+/),t[this]=[Number(e[0]),Number(e[1])]))})),e.validator.autoCreateRanges&&(null!=t.min&&null!=t.max&&(t.range=[t.min,t.max],delete t.min,delete t.max),null!=t.minlength&&null!=t.maxlength&&(t.rangelength=[t.minlength,t.maxlength],delete t.minlength,delete t.maxlength)),t},normalizeRule:function(t){if("string"==typeof t){var n={};e.each(t.split(/\s/),(function(){n[this]=!0})),t=n}return t},addMethod:function(t,n,i){e.validator.methods[t]=n,e.validator.messages[t]=void 0!==i?i:e.validator.messages[t],n.length<3&&e.validator.addClassRules(t,e.validator.normalizeRule(t))},methods:{required:function(t,n,i){if(!this.depend(i,n))return"dependency-mismatch";if("select"===n.nodeName.toLowerCase()){var r=e(n).val();return r&&r.length>0}return this.checkable(n)?this.getLength(t,n)>0:null!=t&&t.length>0},email:function(e,t){return this.optional(t)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(e)},url:function(e,t){return this.optional(t)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:(?:[^\]\[?\/<~#`!@$^&*()+=}|:";',>{ ]|%[0-9A-Fa-f]{2})+(?::(?:[^\]\[?\/<~#`!@$^&*()+=}|:";',>{ ]|%[0-9A-Fa-f]{2})*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u00a1-\uffff][a-z0-9\u00a1-\uffff_-]{0,62})?[a-z0-9\u00a1-\uffff]\.)+(?:[a-z\u00a1-\uffff]{2,}\.?))(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(e)},date:(t=!1,function(e,n){return t||(t=!0,this.settings.debug&&window.console&&console.warn("The `date` method is deprecated and will be removed in version '2.0.0'.\nPlease don't use it, since it relies on the Date constructor, which\nbehaves very differently across browsers and locales. Use `dateISO`\ninstead or one of the locale specific methods in `localizations/`\nand `additional-methods.js`.")),this.optional(n)||!/Invalid|NaN/.test(new Date(e).toString())}),dateISO:function(e,t){return this.optional(t)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(e)},number:function(e,t){return this.optional(t)||/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},digits:function(e,t){return this.optional(t)||/^\d+$/.test(e)},creditcard:function(e,t){if(this.optional(t))return"dependency-mismatch";if(/[^0-9 \-]+/.test(e))return!1;for(var n=0,i=0,r=!1,o=(e=e.replace(/\D/g,"")).length-1;o>=0;o--){var a=e.charAt(o);i=parseInt(a,10),r&&(i*=2)>9&&(i-=9),n+=i,r=!r}return n%10==0},minlength:function(e,t,n){var i=Array.isArray(e)?e.length:this.getLength(e,t);return this.optional(t)||i>=n},maxlength:function(e,t,n){var i=Array.isArray(e)?e.length:this.getLength(e,t);return this.optional(t)||i<=n},rangelength:function(e,t,n){var i=Array.isArray(e)?e.length:this.getLength(e,t);return this.optional(t)||i>=n[0]&&i<=n[1]},min:function(e,t,n){return this.optional(t)||e>=n},max:function(e,t,n){return this.optional(t)||e<=n},range:function(e,t,n){return this.optional(t)||e>=n[0]&&e<=n[1]},equalTo:function(t,n,i){var r=e(i);return this.settings.onfocusout&&r.not(".validate-equalTo-blur").length&&r.addClass("validate-equalTo-blur").on("blur.validate-equalTo",(function(){e(n).valid()})),t===r.val()},remote:function(t,n,i,r){if(this.optional(n))return"dependency-mismatch";r="string"==typeof r&&r||"remote";var o,a,s,l=this.previousValue(n,r);return this.settings.messages[n.name]||(this.settings.messages[n.name]={}),l.originalMessage=l.originalMessage||this.settings.messages[n.name][r],this.settings.messages[n.name][r]=l.message,i="string"==typeof i&&{url:i}||i,s=e.param(e.extend({data:t},i.data)),l.old===s?l.valid:(l.old=s,o=this,this.startRequest(n),(a={})[n.name]=t,e.ajax(e.extend(!0,{mode:"abort",port:"validate"+n.name,dataType:"json",data:a,context:o.currentForm,success:function(e){var i,a,s,c=!0===e||"true"===e;o.settings.messages[n.name][r]=l.originalMessage,c?(s=o.formSubmitted,o.resetInternals(),o.toHide=o.errorsFor(n),o.formSubmitted=s,o.successList.push(n),o.invalid[n.name]=!1,o.showErrors()):(i={},a=e||o.defaultMessage(n,{method:r,parameters:t}),i[n.name]=l.message=a,o.invalid[n.name]=!0,o.showErrors(i)),l.valid=c,o.stopRequest(n,c)}},i)),"pending")}}});var i,r={};return e.ajaxPrefilter?e.ajaxPrefilter((function(e,t,n){var i=e.port;"abort"===e.mode&&(r[i]&&r[i].abort(),r[i]=n)})):(i=e.ajax,e.ajax=function(t){var n=("mode"in t?t:e.ajaxSettings).mode,o=("port"in t?t:e.ajaxSettings).port;return"abort"===n?(r[o]&&r[o].abort(),r[o]=i.apply(this,arguments),r[o]):i.apply(this,arguments)}),e})),define("pgui.validation",["underscore","jquery.validate"],(function(e){function t(e){var t=$(e).closest("form").find(".form-tabs-container");if(t.length>0){t.find("a span.required").remove();var n=$(e).closest(".tab-content");n.length>0&&n.find(".tab-pane:has(.form-group.has-error)").each((function(){var e=$(this).attr("id");t.find('a[href^="#'+e+'"]').append(' <span class="required">***</span>')}))}}var n={init:function(e){var n={validate_errorClass:"help-block",validate_errorPlacement:function(e,t){var n=t.closest(".col-input,.form-group");0===n.length&&(n=t.parent()),e.appendTo(n)},validate_success:function(e){$(e).closest(".form-group").removeClass("has-error").prev(".form-group-label").removeClass("has-error"),t(e),$(e).remove()},highlight:function(e){$(e).closest(".form-group").addClass("has-error").prev(".form-group-label").addClass("has-error"),t(e)},unhighlight:void 0};e&&$.extend(n,e),this&&this.length>0&&($.validator.addMethod("regexp",(function(e,t,n){var i=new RegExp(n);return e.match(i)}),"Default regexp message"),$.validator.addMethod("required_custom",(function(e,t,n){return"file"===$(t).attr("type")&&$(t).data("has-file")||e}),"Default required message"),this.each((function(e,t){var i={},r={};$(t).find('input,select,textarea,div[data-editor="radio"]').each((function(e,t){if(null!=$(t).attr("data-validation")){var n=$(t).attr("data-validation").split(" "),o={},a={};function s(e,n){n=n||e;var i=$(t).data();i[n+"ErrorMessage"]&&(a[e]=i[n+"ErrorMessage"])}for(var l=0;l<n.length;l++)"email"==n[l]?(o.email=!0,s(n[l])):"url"==n[l]?(o.url=!0,s(n[l])):"required"==n[l]?(o.required_custom=!0,s("required_custom","required")):"range"==n[l]?(o.range=[$(t).attr("range-min-value"),$(t).attr("range-max-value")],s(n[l])):"max-value"==n[l]?(o.max=Number($(t).attr("max-value")),s("max","maxValue")):"min-value"==n[l]?(o.min=Number($(t).attr("min-value")),s("min","minValue")):"max-length"==n[l]?(o.maxlength=$(t).attr("max-length"),s("maxlength","maxLength")):"min-length"==n[l]?(o.minlength=$(t).attr("min-length"),s("minlength","minLength")):"rangelength"==n[l]?(o.rangelength=[$(t).attr("range-min-length"),$(t).attr("range-max-length")],s(n[l])):"number"==n[l]?(o.number=!0,s(n[l])):"digits"==n[l]?(o.digits=!0,s(n[l])):"creditcard"==n[l]?(o.creditcard=!0,s(n[l])):"regexp"==n[l]&&(o.regexp=$(t).attr("regexp"),s(n[l]));var c="radio"===$(t).data("editor")?$(t).data("editor-name"):$(t).attr("name");r[c]=a,i[c]=o}})),$(t).validate({errorClass:n.validate_errorClass,errorPlacement:n.validate_errorPlacement,errorElement:"span",ignore:"",success:n.validate_success,rules:i,messages:r,highlight:n.highlight,unhighlight:n.unhighlight})})))}};function i(e){var t=e;this.GetMessage=function(){return t},this.SetMessage=function(e){t=e}}return $.fn.pgui_validate_form=function(e){return n[e]?n[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void $.error("Method "+e+" does not exist on jQuery.pgui_effects"):n.init.apply(this,arguments)},{validateForm:function(t){if(!t.valid())return{success:!1,message:null};var n={},r=new i;t.find("*[data-pgui-legacy-validate]").each((function(e,t){var i=$(t);i.data("editor")&&i.data("editor").getValue&&(n[i.data("legacy-field-name")]=i.data("editor").getValue())}));var o=window[t.attr("id")+"Validation"];return{success:!e.isFunction(o)||o(n,r),message:r.GetMessage()}}}})),define("pgui.modal_operation_link",["pgui.shortcuts","pgui.utils"],(function(e,t){function n(n,i,r){var o=i.data("content-link"),a=t.createLoadingModalDialog().modal();$.get(o,{is_modal:!0},(function(t){a.html(t);var i=new n(a,a.find(".js-form-collection"),o,{done:function(e,t,n){return r(a,e,t,n)}});e.push("form"),a.one("hidden.bs.modal",(function(){i.destroy(),a.remove(),e.pop()}))}))}function i(e,t,i,r){t.click((function(i){i.preventDefault(),n(e,t,r)}))}function r(e,t,n,i,r,o,a){if("function"==typeof a&&a(t,n,i),$.each(n,(function(e,t){t.success&&o&&o.showMessage(t.message,t.messageDisplayTime)})),t)return!0;if(e.modal("hide"),1===n.length&&1===r.length)switch(i.action){case"edit":r[0].find("[data-column-name=edit]").find("a").get(0).click();break;case"details":location.href=n[0].details[i.index]}return"insert"===i.action&&o&&o.container.find(".pgui-add:first").get(0).click(),void 0===i.action&&o&&o.getReloadPageAfterAjaxOperation()&&location.reload(),!1}return{processQuery:function(e,t,i){return n(e,t,i)},createInsertLink:function(e,t,n,o){return i(e,t,0,(function(e,t,i,a){return $rows=$.map(i.filter((function(e){return e.success})),(function(e){return!n||n.insertRowAtBegin($(e.row))})),r(e,t,i,a,$rows,n,o)}))},createEditLink:function(e,n,o,a){return i(e,n,0,(function(e,i,s,l){var c=$();return i||(c=$(s[0].row),t.replaceRow(n.closest(".pg-row"),c),o&&(o.integrateRows(c),o.updateEmptyGridMessage())),r(e,i,s,l,[c],o,a)}))}}})),
/*!
 * jQuery Form Plugin
 * version: 3.51.0-2014.06.20
 * Requires jQuery v1.5 or later
 * Copyright (c) 2014 M. Alsup
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Project repository: https://github.com/malsup/form
 * Dual licensed under the MIT and GPL licenses.
 * https://github.com/malsup/form#copyright-and-license
 */
function(e){"use strict";"function"==typeof define&&define.amd?define("jquery.form",["jquery"],e):e("undefined"!=typeof jQuery?jQuery:window.Zepto)}((function(e){"use strict";var t={};t.fileapi=void 0!==e("<input type='file'/>").get(0).files,t.formdata=void 0!==window.FormData;var n=!!e.fn.prop;function i(t){var n=t.data;t.isDefaultPrevented()||(t.preventDefault(),e(t.target).ajaxSubmit(n))}function r(t){var n=t.target,i=e(n);if(!i.is("[type=submit],[type=image]")){var r=i.closest("[type=submit]");if(0===r.length)return;n=r[0]}var o=this;if(o.clk=n,"image"==n.type)if(void 0!==t.offsetX)o.clk_x=t.offsetX,o.clk_y=t.offsetY;else if("function"==typeof e.fn.offset){var a=i.offset();o.clk_x=t.pageX-a.left,o.clk_y=t.pageY-a.top}else o.clk_x=t.pageX-n.offsetLeft,o.clk_y=t.pageY-n.offsetTop;setTimeout((function(){o.clk=o.clk_x=o.clk_y=null}),100)}function o(){if(e.fn.ajaxSubmit.debug){var t="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t)}}e.fn.attr2=function(){if(!n)return this.attr.apply(this,arguments);var e=this.prop.apply(this,arguments);return e&&e.jquery||"string"==typeof e?e:this.attr.apply(this,arguments)},e.fn.ajaxSubmit=function(i){if(!this.length)return o("ajaxSubmit: skipping submit process - no element selected"),this;var r,a,s,l=this;"function"==typeof i?i={success:i}:void 0===i&&(i={}),r=i.type||this.attr2("method"),(s=(s="string"==typeof(a=i.url||this.attr2("action"))?e.trim(a):"")||window.location.href||"")&&(s=(s.match(/^([^#]+)/)||[])[1]),i=e.extend(!0,{url:s,success:e.ajaxSettings.success,type:r||e.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},i);var c={};if(this.trigger("form-pre-serialize",[this,i,c]),c.veto)return o("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(i.beforeSerialize&&!1===i.beforeSerialize(this,i))return o("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var u=i.traditional;void 0===u&&(u=e.ajaxSettings.traditional);var d,h=[],f=this.formToArray(i.semantic,h);if(i.data&&(i.extraData=i.data,d=e.param(i.data,u)),i.beforeSubmit&&!1===i.beforeSubmit(f,this,i))return o("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[f,this,i,c]),c.veto)return o("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var p=e.param(f,u);d&&(p=p?p+"&"+d:d),"GET"==i.type.toUpperCase()?(i.url+=(i.url.indexOf("?")>=0?"&":"?")+p,i.data=null):i.data=p;var m=[];if(i.resetForm&&m.push((function(){l.resetForm()})),i.clearForm&&m.push((function(){l.clearForm(i.includeHidden)})),!i.dataType&&i.target){var g=i.success||function(){};m.push((function(t){var n=i.replaceTarget?"replaceWith":"html";e(i.target)[n](t).each(g,arguments)}))}else i.success&&m.push(i.success);if(i.success=function(e,t,n){for(var r=i.context||this,o=0,a=m.length;o<a;o++)m[o].apply(r,[e,t,n||l,l])},i.error){var v=i.error;i.error=function(e,t,n){var r=i.context||this;v.apply(r,[e,t,n,l])}}if(i.complete){var b=i.complete;i.complete=function(e,t){var n=i.context||this;b.apply(n,[e,t,l])}}var y=e("input[type=file]:enabled",this).filter((function(){return""!==e(this).val()})).length>0,w="multipart/form-data",x=l.attr("enctype")==w||l.attr("encoding")==w,C=t.fileapi&&t.formdata;o("fileAPI :"+C);var _,k=(y||x)&&!C;!1!==i.iframe&&(i.iframe||k)?i.closeKeepAlive?e.get(i.closeKeepAlive,(function(){_=S(f)})):_=S(f):_=(y||x)&&C?function(t){for(var n=new FormData,o=0;o<t.length;o++)n.append(t[o].name,t[o].value);if(i.extraData){var a=function(t){var n,r,o=e.param(t,i.traditional).split("&"),a=o.length,s=[];for(n=0;n<a;n++)o[n]=o[n].replace(/\+/g," "),r=o[n].split("="),s.push([decodeURIComponent(r[0]),decodeURIComponent(r[1])]);return s}(i.extraData);for(o=0;o<a.length;o++)a[o]&&n.append(a[o][0],a[o][1])}i.data=null;var s=e.extend(!0,{},e.ajaxSettings,i,{contentType:!1,processData:!1,cache:!1,type:r||"POST"});i.uploadProgress&&(s.xhr=function(){var t=e.ajaxSettings.xhr();return t.upload&&t.upload.addEventListener("progress",(function(e){var t=0,n=e.loaded||e.position,r=e.total;e.lengthComputable&&(t=Math.ceil(n/r*100)),i.uploadProgress(e,n,r,t)}),!1),t});s.data=null;var l=s.beforeSend;return s.beforeSend=function(e,t){i.formData?t.data=i.formData:t.data=n,l&&l.call(this,e,t)},e.ajax(s)}(f):e.ajax(i),l.removeData("jqxhr").data("jqxhr",_);for(var E=0;E<h.length;E++)h[E]=null;return this.trigger("form-submit-notify",[this,i]),this;function S(t){var a,s,c,u,d,f,p,m,g,v,b,y,w=l[0],x=e.Deferred();if(x.abort=function(e){m.abort(e)},t)for(s=0;s<h.length;s++)a=e(h[s]),n?a.prop("disabled",!1):a.removeAttr("disabled");if((c=e.extend(!0,{},e.ajaxSettings,i)).context=c.context||c,d="jqFormIO"+(new Date).getTime(),c.iframeTarget?(v=(f=e(c.iframeTarget)).attr2("name"))?d=v:f.attr2("name",d):(f=e('<iframe name="'+d+'" src="'+c.iframeSrc+'" />')).css({position:"absolute",top:"-1000px",left:"-1000px"}),p=f[0],m={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(t){var n="timeout"===t?"timeout":"aborted";o("aborting upload... "+n),this.aborted=1;try{p.contentWindow.document.execCommand&&p.contentWindow.document.execCommand("Stop")}catch(e){}f.attr("src",c.iframeSrc),m.error=n,c.error&&c.error.call(c.context,m,n,t),u&&e.event.trigger("ajaxError",[m,c,n]),c.complete&&c.complete.call(c.context,m,n)}},(u=c.global)&&0==e.active++&&e.event.trigger("ajaxStart"),u&&e.event.trigger("ajaxSend",[m,c]),c.beforeSend&&!1===c.beforeSend.call(c.context,m,c))return c.global&&e.active--,x.reject(),x;if(m.aborted)return x.reject(),x;(g=w.clk)&&(v=g.name)&&!g.disabled&&(c.extraData=c.extraData||{},c.extraData[v]=g.value,"image"==g.type&&(c.extraData[v+".x"]=w.clk_x,c.extraData[v+".y"]=w.clk_y));var C=1,_=2;function k(e){var t=null;try{e.contentWindow&&(t=e.contentWindow.document)}catch(e){o("cannot get iframe.contentWindow document: "+e)}if(t)return t;try{t=e.contentDocument?e.contentDocument:e.document}catch(n){o("cannot get iframe.contentDocument: "+n),t=e.document}return t}var E=e("meta[name=csrf-token]").attr("content"),S=e("meta[name=csrf-param]").attr("content");function T(){var t=l.attr2("target"),n=l.attr2("action"),i=l.attr("enctype")||l.attr("encoding")||"multipart/form-data";w.setAttribute("target",d),r&&!/post/i.test(r)||w.setAttribute("method","POST"),n!=c.url&&w.setAttribute("action",c.url),c.skipEncodingOverride||r&&!/post/i.test(r)||l.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),c.timeout&&(y=setTimeout((function(){b=!0,j(C)}),c.timeout));var a=[];try{if(c.extraData)for(var s in c.extraData)c.extraData.hasOwnProperty(s)&&(e.isPlainObject(c.extraData[s])&&c.extraData[s].hasOwnProperty("name")&&c.extraData[s].hasOwnProperty("value")?a.push(e('<input type="hidden" name="'+c.extraData[s].name+'">').val(c.extraData[s].value).appendTo(w)[0]):a.push(e('<input type="hidden" name="'+s+'">').val(c.extraData[s]).appendTo(w)[0]));c.iframeTarget||f.appendTo("body"),p.attachEvent?p.attachEvent("onload",j):p.addEventListener("load",j,!1),setTimeout((function e(){try{var t=k(p).readyState;o("state = "+t),t&&"uninitialized"==t.toLowerCase()&&setTimeout(e,50)}catch(e){o("Server abort: ",e," (",e.name,")"),j(_),y&&clearTimeout(y),y=void 0}}),15);try{w.submit()}catch(e){document.createElement("form").submit.apply(w)}}finally{w.setAttribute("action",n),w.setAttribute("enctype",i),t?w.setAttribute("target",t):l.removeAttr("target"),e(a).remove()}}S&&E&&(c.extraData=c.extraData||{},c.extraData[S]=E),c.forceSync?T():setTimeout(T,10);var D,$,A,P=50;function j(t){if(!m.aborted&&!A){if(($=k(p))||(o("cannot access response document"),t=_),t===C&&m)return m.abort("timeout"),void x.reject(m,"timeout");if(t==_&&m)return m.abort("server abort"),void x.reject(m,"error","server abort");if($&&$.location.href!=c.iframeSrc||b){p.detachEvent?p.detachEvent("onload",j):p.removeEventListener("load",j,!1);var n,i="success";try{if(b)throw"timeout";var r="xml"==c.dataType||$.XMLDocument||e.isXMLDoc($);if(o("isXml="+r),!r&&window.opera&&(null===$.body||!$.body.innerHTML)&&--P)return o("requeing onLoad callback, DOM not available"),void setTimeout(j,250);var a=$.body?$.body:$.documentElement;m.responseText=a?a.innerHTML:null,m.responseXML=$.XMLDocument?$.XMLDocument:$,r&&(c.dataType="xml"),m.getResponseHeader=function(e){return{"content-type":c.dataType}[e.toLowerCase()]},a&&(m.status=Number(a.getAttribute("status"))||m.status,m.statusText=a.getAttribute("statusText")||m.statusText);var s=(c.dataType||"").toLowerCase(),l=/(json|script|text)/.test(s);if(l||c.textarea){var d=$.getElementsByTagName("textarea")[0];if(d)m.responseText=d.value,m.status=Number(d.getAttribute("status"))||m.status,m.statusText=d.getAttribute("statusText")||m.statusText;else if(l){var h=$.getElementsByTagName("pre")[0],g=$.getElementsByTagName("body")[0];h?m.responseText=h.textContent?h.textContent:h.innerText:g&&(m.responseText=g.textContent?g.textContent:g.innerText)}}else"xml"==s&&!m.responseXML&&m.responseText&&(m.responseXML=O(m.responseText));try{D=M(m,s,c)}catch(e){i="parsererror",m.error=n=e||i}}catch(e){o("error caught: ",e),i="error",m.error=n=e||i}m.aborted&&(o("upload aborted"),i=null),m.status&&(i=m.status>=200&&m.status<300||304===m.status?"success":"error"),"success"===i?(c.success&&c.success.call(c.context,D,"success",m),x.resolve(m.responseText,"success",m),u&&e.event.trigger("ajaxSuccess",[m,c])):i&&(void 0===n&&(n=m.statusText),c.error&&c.error.call(c.context,m,i,n),x.reject(m,"error",n),u&&e.event.trigger("ajaxError",[m,c,n])),u&&e.event.trigger("ajaxComplete",[m,c]),u&&! --e.active&&e.event.trigger("ajaxStop"),c.complete&&c.complete.call(c.context,m,i),A=!0,c.timeout&&clearTimeout(y),setTimeout((function(){c.iframeTarget?f.attr("src",c.iframeSrc):f.remove(),m.responseXML=null}),100)}}}var O=e.parseXML||function(e,t){return window.ActiveXObject?((t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&"parsererror"!=t.documentElement.nodeName?t:null},I=e.parseJSON||function(e){return window.eval("("+e+")")},M=function(t,n,i){var r=t.getResponseHeader("content-type")||"",o="xml"===n||!n&&r.indexOf("xml")>=0,a=o?t.responseXML:t.responseText;return o&&"parsererror"===a.documentElement.nodeName&&e.error&&e.error("parsererror"),i&&i.dataFilter&&(a=i.dataFilter(a,n)),"string"==typeof a&&("json"===n||!n&&r.indexOf("json")>=0?a=I(a):("script"===n||!n&&r.indexOf("javascript")>=0)&&e.globalEval(a)),a};return x}},e.fn.ajaxForm=function(t){if((t=t||{}).delegation=t.delegation&&e.isFunction(e.fn.on),!t.delegation&&0===this.length){var n={s:this.selector,c:this.context};return!e.isReady&&n.s?(o("DOM not ready, queuing ajaxForm"),e((function(){e(n.s,n.c).ajaxForm(t)})),this):(o("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)")),this)}return t.delegation?(e(document).off("submit.form-plugin",this.selector,i).off("click.form-plugin",this.selector,r).on("submit.form-plugin",this.selector,t,i).on("click.form-plugin",this.selector,t,r),this):this.ajaxFormUnbind().bind("submit.form-plugin",t,i).bind("click.form-plugin",t,r)},e.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},e.fn.formToArray=function(n,i){var r=[];if(0===this.length)return r;var o,a,s,l,c,u,d,h,f=this[0],p=this.attr("id"),m=n?f.getElementsByTagName("*"):f.elements;if(m&&!/MSIE [678]/.test(navigator.userAgent)&&(m=e(m).get()),p&&(o=e(':input[form="'+p+'"]').get()).length&&(m=(m||[]).concat(o)),!m||!m.length)return r;for(a=0,d=m.length;a<d;a++)if((l=(u=m[a]).name)&&!u.disabled)if(n&&f.clk&&"image"==u.type)f.clk==u&&(r.push({name:l,value:e(u).val(),type:u.type}),r.push({name:l+".x",value:f.clk_x},{name:l+".y",value:f.clk_y}));else if((c=e.fieldValue(u,!0))&&c.constructor==Array)for(i&&i.push(u),s=0,h=c.length;s<h;s++)r.push({name:l,value:c[s]});else if(t.fileapi&&"file"==u.type){i&&i.push(u);var g=u.files;if(g.length)for(s=0;s<g.length;s++)r.push({name:l,value:g[s],type:u.type});else r.push({name:l,value:"",type:u.type})}else null!=c&&(i&&i.push(u),r.push({name:l,value:c,type:u.type,required:u.required}));if(!n&&f.clk){var v=e(f.clk),b=v[0];(l=b.name)&&!b.disabled&&"image"==b.type&&(r.push({name:l,value:v.val()}),r.push({name:l+".x",value:f.clk_x},{name:l+".y",value:f.clk_y}))}return r},e.fn.formSerialize=function(t){return e.param(this.formToArray(t))},e.fn.fieldSerialize=function(t){var n=[];return this.each((function(){var i=this.name;if(i){var r=e.fieldValue(this,t);if(r&&r.constructor==Array)for(var o=0,a=r.length;o<a;o++)n.push({name:i,value:r[o]});else null!=r&&n.push({name:this.name,value:r})}})),e.param(n)},e.fn.fieldValue=function(t){for(var n=[],i=0,r=this.length;i<r;i++){var o=this[i],a=e.fieldValue(o,t);null==a||a.constructor==Array&&!a.length||(a.constructor==Array?e.merge(n,a):n.push(a))}return n},e.fieldValue=function(t,n){var i=t.name,r=t.type,o=t.tagName.toLowerCase();if(void 0===n&&(n=!0),n&&(!i||t.disabled||"reset"==r||"button"==r||("checkbox"==r||"radio"==r)&&!t.checked||("submit"==r||"image"==r)&&t.form&&t.form.clk!=t||"select"==o&&-1==t.selectedIndex))return null;if("select"==o){var a=t.selectedIndex;if(a<0)return null;for(var s=[],l=t.options,c="select-one"==r,u=c?a+1:l.length,d=c?a:0;d<u;d++){var h=l[d];if(h.selected){var f=h.value;if(f||(f=h.attributes&&h.attributes.value&&!h.attributes.value.specified?h.text:h.value),c)return f;s.push(f)}}return s}return e(t).val()},e.fn.clearForm=function(t){return this.each((function(){e("input,select,textarea",this).clearFields(t)}))},e.fn.clearFields=e.fn.clearInputs=function(t){var n=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each((function(){var i=this.type,r=this.tagName.toLowerCase();n.test(i)||"textarea"==r?this.value="":"checkbox"==i||"radio"==i?this.checked=!1:"select"==r?this.selectedIndex=-1:"file"==i?/MSIE/.test(navigator.userAgent)?e(this).replaceWith(e(this).clone(!0)):e(this).val(""):t&&(!0===t&&/hidden/.test(i)||"string"==typeof t&&e(this).is(t))&&(this.value="")}))},e.fn.resetForm=function(){return this.each((function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()}))},e.fn.enable=function(e){return void 0===e&&(e=!0),this.each((function(){this.disabled=!e}))},e.fn.selected=function(t){return void 0===t&&(t=!0),this.each((function(){var n=this.type;if("checkbox"==n||"radio"==n)this.checked=t;else if("option"==this.tagName.toLowerCase()){var i=e(this).parent("select");t&&i[0]&&"select-one"==i[0].type&&i.find("option").selected(!1),this.selected=t}}))},e.fn.ajaxSubmit.debug=!1})),define("pgui.form_collection",["class","pgui.editors","pgui.validation","pgui.modal_operation_link","pgui.autohide-message","jquery.form"],(function(e,t,n,i,r){var o=e.extend({init:function(e,t,n,i){var r=this;this.forms=[],this.editorControllers=[],this.$formsContainer=e,this.$collectionContainer=t,this.callbacks=$.extend({init:function(){},done:function(){},copy:function(e,t){r.copy(e,$(t))}},i),$.each(e.find("form").toArray().reverse(),function(e,t){this.add($(t))}.bind(this)),this.$formsContainer.on("click",".js-save",this.submit.bind(this));var o=this;this.$formsContainer.on("click",".js-form-add",(function(e){e.preventDefault(),$.get(n,(function(e){o.add($(e))}))})).on("click",".js-form-copy",(function(e){var t=$(e.target).closest("form");$.get(n,function(e){r.callbacks.copy(t,e)}.bind(this))}))},submit:function(e){e.preventDefault();var t=$(e.target).data();this.setLoading(!0);var i=$.map(this.forms,(function(e){return t=$(e),i=t.find(".form-error-container").html(""),r=$.Deferred(),t.ajaxSubmit({dataType:"JSON",beforeSubmit:function(){var e=n.validateForm(t,i,!1);return e.success||(a(i,e.message),r.reject($.extend({$form:t},e))),e.success},success:function(e){if(!e.success)return a(i,e.message),void r.reject($.extend({$form:t},e));r.resolve($.extend({$form:t},e))},error:function(e){a(i,e.responseText),r.reject({$form:t})}}),r.promise();var t,i,r}));$.when.apply($,$.map(i,(function(e){return e.then(null,(function(){return $.Deferred().resolveWith(this,arguments)}))}))).done(function(e){var n=(e=Array.prototype.slice.call(arguments)).reduce((function(e,t){return!t.success||e}),!1);$.each(e,function(e,t){n&&t.success&&this.remove(t.$form)}.bind(this)),n&&this.$formsContainer.find(".has-error").find("input,textarea,select").first().focus(),this.callbacks.done(n,e,t)&&this.setLoading(!1)}.bind(this))},add:function(e,n){var a=this;0===this.$collectionContainer.has(e).length&&this.$collectionContainer.append("<hr/>").append(e),e.pgui_validate_form(),e.on("submit",(function(e){e.preventDefault()})),this.forms.push(e);var s=t.init(e,(function(e){a.callbacks.init(a),_.each(e.editors,(function(e){!function(e){var t,n=e.rootElement.attr("data-editor");t=n.indexOf("cascading")>-1?e.rootElement.find(".js-nested-insert"):e.rootElement.closest(".input-group").find(".js-nested-insert").first();t.each((function(t,n){var r=$(this);if(!r.data("insert-link")){var a=i.createInsertLink(o,r,null,(function(t,n){t||e.trigger("submit.pgui.nested-insert",r,n[0].primaryKeys[0],n[0].record)}));r.data("insert-link",a)}}))}(e)})),"function"==typeof n&&n()}));return this.editorControllers.push(s),this.forms.length>1&&(this.$formsContainer.find(".js-multiple-insert-hide").hide(),this.$formsContainer.find(".js-form-remove").show()),e.on("click",".js-form-remove",function(){this.remove(e)}.bind(this)),e.find("input,select,textarea").filter((function(e,t){return $(t).is(":visible")&&0===$(t).closest("#form-group-fields-to-be-updated").length})).first().focus(),e.on("change","#fields-to-be-updated",(function(e){var t=$(e.target).val();_.each(s.editors,(function(e,n){"undefined"!==n&&e.setEnabled(null!==t&&t.indexOf(n)>-1)}))})).on("click","#clear-fields-to-be-updated",(function(e){$("#fields-to-be-updated").select2("val",[]).trigger("change")})),$.each(e.find(".alert"),(function(e,t){r($(t))})),e.find(".js-hint").each((function(){$(this).popover({placement:"top",trigger:"hover",container:"body",html:!0,content:$(this).attr("data-hint")})})),e},copy:function(e,t){return this.add(t,_.bind((function(){this.copyEditorsValues(e,t)}),this))},copyEditorsValues:function(e,t){e.find("[data-editor]").each((function(e,n){var i=$(n),r=t.find('[data-field-name="'+i.data("field-name")+'"]').data("editor");r&&i.data("editor")&&r.setData(i.data("editor").getData())}))},remove:function(e){var t=$.map(this.forms,(function(e){return e.attr("id")})).indexOf(e.attr("id"));return this.forms.splice(t,1),this.editorControllers[t].destroy(),this.editorControllers.splice(t,1),e.prev("hr").remove(),e.remove(),this.$collectionContainer.find("hr:first-child").remove(),1===this.forms.length&&(this.$formsContainer.find(".js-form-remove").hide(),this.$formsContainer.find(".js-multiple-insert-hide").show()),this.forms},get:function(e){return this.forms[e]},setLoading:function(e){var t=this.$formsContainer.find(".btn-toolbar button.btn-primary,.js-save,.js-cancel,.js-recaptcha").prop("disabled",e);e?t.addClass("btn-loading"):t.removeClass("btn-loading")},focus:function(){this.forms[0].find("input,select,textarea").first().focus()},destroy:function(){_.each(this.editorControllers,(function(e){e.destroy()})),this.forms=[],this.editorControllers=[]}});function a(e,t){t&&$('<div class="alert alert-danger"><button data-dismiss="alert" class="close" type="button">&times;</button>'+t+"</div>").appendTo(e)}return o})),define("pgui.selection-handler",["class","pgui.localizer","pgui.utils","libs/sprintf","pgui.form_collection","pgui.modal_operation_link","underscore","jquery.query","bootbox","jquery.popover"],(function(e,t,n,i,r,o){return e.extend({init:function(e,t,n,i,r,o){if(this.hideContainer=r,this.$container=t||$(".js-selection-actions-container").first(),this.$actions=t.find(".js-action"),this.$count=t.find(".js-count"),this.selection=e,this.grid=o,void 0!==n)var a=n.find("input[type=checkbox]");this.setCheckboxes(a||$(),i||$()),this.$actions.on("click",this._handleAction.bind(this)),this.selection.bind("change",this._handleChange.bind(this)),this._handleChange(this.selection.getData()),this._initSelectionFilters(n)},setCheckboxes:function(e,t){this.$allCheckbox=e||$(),this.$checkboxes=t||$(),this.checkboxesData=_.map(this.$checkboxes,(function(e,t){return $(e).data("value")})),this.$checkboxes.off("change").on("change",this._checkboxChangeHandler.bind(this)),this.$allCheckbox.off("change").on("change",this._allCheckboxChangeHandler.bind(this))},_checkboxChangeHandler:function(e){var t=$(e.currentTarget);this.selection.toggle(t.data("value"),t.prop("checked"))},_allCheckboxChangeHandler:function(e){var t=$(e.currentTarget).prop("checked");this.$checkboxes.prop("checked",t),_.each(this.checkboxesData,function(e){t?this.selection.add(e):this.selection.remove(e)}.bind(this))},_handleChange:function(e){var t=e.length;this.hideContainer&&(this.$container.toggle(t>0),_.defer(this.$container.toggleClass.bind(this.$container),"in",t>0)),this.$count.text(t),this.$checkboxes.prop("checked",!1),_.each(e,function(e){this.$checkboxes.filter("[data-value='"+JSON.stringify(e)+"']").prop("checked",!0)}.bind(this));var n=this.$checkboxes.filter(":checked").length;this.$allCheckbox.prop("checked",n===this.$checkboxes.length&&this.$checkboxes.length>0).prop("indeterminate",n>0&&n<this.$checkboxes.length)},_handleAction:function(e){var t=$(e.currentTarget),n=t.data("type"),i="_blank"==t.attr("target");switch(e.preventDefault(),n){case"compare":return this._compare(t.data("url"));case"compare-remove":return this._compareRemove(t.attr("href"),t.data("value"));case"print":return this._print(t.data("url"),i);case"export":return this._export(t.data("url"),t.data("export-type"),i);case"update":return this._update(t);case"delete":return this._delete(t.data("url"));case"clear":return this.selection.clear();case"select":return this._processSelection(t)}},_delete:function(e){var i=this;bootbox.confirm(t.getString("DeleteSelectedRecordsQuestion"),(function(r){if(r){n.createLoadingModalDialog(t.getString("Deleting")).modal();var o=i.selection.getData(),a={operation:"delsel",recordCount:o.length};_.each(o,(function(e,t){a["rec"+t]=null,_.each(e,(function(e,n){a["rec"+t+"_pk"+n]=e})),i.selection.remove(e)})),function(e,t){var n=$("<form>").hide().attr("method","POST").attr("action",e);return _.each(t,(function(e,t){n.append($('<input name="'+t+'" value="'+e+'">'))})),n.appendTo($("body"))}(e,a).submit()}}))},_compare:function(e){this._processSelectedRecords(e,"compare")},_compareRemove:function(e,t){this.selection.remove(t),location.href=e},_print:function(e,t){this._processSelectedRecords(e,"print_selected",t)},_export:function(e,t,n){this._processSelectedRecords(e,i.sprintf("e%s_selected",t),n)},_update:function(e){var t=this;if("multiple-edit"===e.data("modal-operation")){var n=e.data("multiple-edit-handler-name"),i=jQuery.query.load(e.data("url")).set("hname",n).set("keys",this.selection.getData()).toString();e.data("content-link",i),o.processQuery(r,e,(function(n,i,r,o){var a=e.closest(".js-grid"),s=$();return i||($.each(r[0].row,(function(e,n){s=$(n),a.find(".row-selection input").each((function(){if($(this).attr("data-value")===r[0].primaryKeys[e])return $(this).closest(".pg-row").replaceWith(s),t.grid.integrateRows(s),!1}))})),n.modal("hide"),t.selection.clear(),t.grid.getReloadPageAfterAjaxOperation()&&location.reload()),i}))}else this._processSelectedRecords(e.data("url"),"multi_edit")},_processSelection:function(e){var t=e.data("condition");location.href="all"==t?jQuery.query.load(e.data("url")).remove("keys").set("selection_filter","").toString():jQuery.query.load(e.data("url")).set("selection_filter",t).set("keys",this.selection.getData()).toString()},_initSelectionFilters:function(e){if(void 0!==e){var t=this,n=$("#selection-filters-content").html(),i=e.find("a.selection-filters");if(0!=i.length){var r=i.webuiPopover({trigger:"manual",backdrop:!0,placement:"auto-bottom",padding:!1,content:$(n)}).data("plugin_webuiPopover");i.on("click",(function(e){e.preventDefault(),r.show(),$(".webui-popover-backdrop").one("click",(function(){r.hide()}))})),i.on("show.webui.popover",(function(){r.$contentElement.find("ul.dropdown-menu").show(),r.$contentElement.find(".js-action").one("click",(function(){t._selectRecords($(this)),r.hide()}))}))}}},_selectRecords:function(e){var t=this,n=jQuery.query.load(e.data("url")).set("hname",e.data("handler-name")).set("filterName",e.data("filter-name")).toString();$.getJSON(n,(function(e){t.selection.clear();for(var n=0;n<e.length;n++)t.selection.add(e[n])}))},_processSelectedRecords:function(e,t,n){var i=jQuery.query.load(e).set("operation",t).set("keys",this.selection.getData()).toString();n?window.open(i,"_blank"):location.href=i}})})),define("custom/pgui.selection-handler.ops",["../pgui.selection-handler","../pgui.localizer","underscore","jquery.query","bootbox"],(function(e,t){return e.extend({init:function(e,t,n,i,r,o){this._super(e,t,n,i,!1,o),this.hideContainerToggle=r,this.$containerToggle=t.not(".js-actions-container-always-visible")},_handleChange:function(e){this._super(e);var t=e.length;this.hideContainerToggle&&(this.$containerToggle.toggle(t>0),_.defer(this.$containerToggle.toggleClass.bind(this.$containerToggle),"in",t>0))},_handleAction:function(e){var t=$(e.currentTarget),n=t.data("type");if(e.preventDefault(),null==this._super(e)){var i=this.selection.getData().length,r=t.data("url");switch(n){case"set-ehrenamtlich-selected":return this._op_text("setehrenamtlichsel","Ehrenamtlich | ","&quot;Ehrenamtlich&quot; (0) fÃ¼r das aktuelle Jahr bei "+i+' EintrÃ¤gen setzen?<small><br><br>Bitte Beschreibung und Quelle eingeben:<br>Format: Beschreibung | Quelle | URL<br>Beschreibung leer = "Ehrenamtlich"<br>Quelle oder URL leer = nichts<br>Alles leer = Abbruch</small>',r);case"set-bezahlt-selected":return this._op_text("setbezahltsel","Bezahlt | ","&quot;Bezahlt&quot; (1) fÃ¼r das aktuelle Jahr bei "+i+' EintrÃ¤gen setzen?<small><br><br>Bitte Beschreibung und Quelle eingeben:<br>Format: Beschreibung | Quelle | URL<br>Beschreibung leer = "Bezahlt"<br>Quelle oder URL leer = nichts<br>Alles leer = Abbruch</small>',r);case"set-zahlend-selected":return this._op_text("setzahlendsel","Bezahlendes Mitglied | ","&quot;Bezahlendes Mitglied&quot; (0) fÃ¼r das aktuelle Jahr bei "+i+' EintrÃ¤gen setzen?<small><br><br>Bitte Beschreibung und Quelle eingeben:<br>Format: Beschreibung | Quelle | URL<br>Beschreibung leer = "Bezahlendes Mitglied"<br>Quelle oder URL leer = nichts<br>Alles leer = Abbruch</small>',r);case"set-imratbis-selected":return this._op_date("setimratbissel","&quot;Im Rat bis&quot; bei "+i+" Parlamentarieren setzen?<small><br><br>Der Zugang der GÃ¤ste erlischt. Das Bis-Datum der Zutrittsberechtigten wird ebenfalls gesetzt.<br><br>Bitte &quot;Im Rat bis&quot; (TT.MM.JJJJ) eingeben (leer = heute):</small>",r);case"clear-imratbis-selected":return this._op_confirm("clearimratbissel","&quot;Im Rat bis&quot; bei "+i+" EintrÃ¤gen entfernen?<small><br><br>Das Bis-Datum der Zutrittsberechtigten wird ebenfalls entfernt, sofern das Datum gleich wie beim Parlamentarier ist.</small>",r);case"input-finished-selected":return this._op_confirm("finsel",i+" markierte EintrÃ¤ge abschliessen?",r);case"de-input-finished-selected":return this._op_confirm("definsel",'"Eingabe abgeschlossen" bei '+i+" EintrÃ¤gen entfernen?",r);case"controlled-selected":return this._op_confirm("consel",i+" markierte EintrÃ¤ge kontrolliert?",r);case"de-controlled-selected":return this._op_confirm("deconsel",'"Kontrolliert" bei '+i+" EintrÃ¤gen entfernen?",r);case"authorization-sent-selected":return this._op_date("sndsel","Bei "+i+" markierten EintrÃ¤gen eine Autorisierungsanfrage verschickt?<small><br><br>Bitte Sendedatum (TT.MM.JJJJ) eingeben (leer = heute):</small>",r);case"de-authorization-sent-selected":return this._op_confirm("desndsel",'"Autorisierungsanfrage verschickt" bei '+i+" EintrÃ¤gen entfernen?",r);case"authorization-reminder-sent-selected":return this._op_date("sndremindersel","Bei "+i+" markierten EintrÃ¤gen eine Autorisierungsreminder verschickt?<small><br><br>Bitte Sendedatum (TT.MM.JJJJ) eingeben (leer = heute):</small>",r);case"de-authorization-reminder-sent-selected":return this._op_confirm("desndremindersel",'"Autorisierungsreminder verschickt" bei '+i+" EintrÃ¤gen entfernen?",r);case"create-verguetungstransparenzliste":return this._op_date("create-verguetungstransparenzliste","VergÃ¼tungstransparenzliste erstellen?<small><br><br>Bitte Stichdatum (TT.MM.JJJJ) eingeben (leer = heute):</small>",r);case"copy-interessenbindungsverguetungen":return this._op_confirm("copy-interessenbindungsverguetungen","Kopiere die InteressenbindungsvergÃ¼tungen des letzten Jahres aufs aktuelle Jahr?<br>Falls fÃ¼rs aktuelle Jahr bereits InteressenbindungsvergÃ¼tungen erfasst wurden, werden diese EintrÃ¤ge beim Kopieren ignoriert. Falls fÃ¼rs letzte Jahr EintrÃ¤ge nacherfasst wurden, kann das Kopieren nochmals ausgefÃ¼hrt werden und diese EintrÃ¤ge werden fÃ¼r aktuelle Jahr Ã¼bernommen.",r);case"authorize-selected":return this._op_date("autsel",i+" markierte EintrÃ¤ge autorisieren?<small><br><br>Bitte Autorisierungsdatum (TT.MM.JJJJ) eingeben (leer = heute):</small>",r);case"de-authorize-selected":return this._op_confirm("deautsel","Autorisierung bei "+i+" EintrÃ¤gen entfernen?",r);case"release-selected":return this._op_date("relsel",i+" markierte EintrÃ¤ge freigeben?<small><br><br>Bitte Freigabedatum (TT.MM.JJJJ) eingeben (leer = heute):</small>",r);case"de-release-selected":return this._op_confirm("derelsel","Freigabe bei "+i+" EintrÃ¤gen entfernen?",r)}}},_op_date:function(e,t,n){var i=this,r=i.selection.getData();bootbox.prompt(t,(function(t){null!==t&&(""===t||i.isDateValid(t)?i.operateSelectRows(e,r,n,t,void 0,void 0,void 0):bootbox.alert("Bitte Datum als TT.MM.JJJJ eingeben"))}))},_op_text:function(e,t,n,i){var r=this,o=r.selection.getData();bootbox.prompt({title:n,value:t,callback:function(t){if(t){var n=t.split("|"),a=n[0].trim(),s=n.length>1?n[1].trim():"",l=n.length>2?n[2].trim():"";if(l&&!/^https?:\/\//i.test(l))return void bootbox.alert("URL nicht gÃ¼ltig: "+l+"<br>Der URL muss mit http:// oder https:// starten.");r.operateSelectRows(e,o,i,void 0,a,s,l)}}})},_op_confirm:function(e,t,n){var i=this,r=i.selection.getData();bootbox.confirm(t,(function(t){t&&i.operateSelectRows(e,r,n,void 0,void 0,void 0,void 0)}))},operateSelectRows:function(e,t,n,i,r,o,a){var s=this,l={operation:e,recordCount:t.length,date:i,text1:r,text2:o,text3:a};_.each(t,(function(e,t){l["rec"+t]=null,_.each(e,(function(e,n){l["rec"+t+"_pk"+n]=e})),s.selection.remove(e)})),this.buildForm(n,l).submit()},buildForm:function(e,t){var n=$("<form>").hide().attr("method","POST").attr("action",e);return _.each(t,(function(e,t){n.append($('<input name="'+t+'" value="'+e+'">'))})),n.appendTo($("body"))},isDateValid:function(e){return null!==e.match(/^(0[1-9]|[12][0-9]|3[01])\.(0[1-9]|1[012])\.(20)\d\d$/)}})})),define("pgui.cell-edit",["pgui.form_collection","pgui.shortcuts","jquery.popover"],(function(e,t){function n(e){return e.data("plugin_webuiPopover")}function i(e,t,n){e.hide(!0),e.destroy(),t.webuiPopover(n)}return function(r,o){var a=r.data("edit-url");if(a){var s={cache:!1,type:"async",url:a,placement:"vertical",style:"cell-edit",backdrop:!0,trigger:"manual"},l=$('<span class="icon-edit pgui-cell-edit-button"></span>'),c=function(e){27===e.keyCode&&i(n(r),r,s)};l.on("click",(function(){n(r).show()})),r.webuiPopover(s),r.on("shown.webui.popover",(function(){var a=n(r),l=a.$target.find(".webui-popover-content");if(0!==l.find("form").length){new e(l,l,null,{init:function(){!function(e){var t=e.data("plugin_webuiPopover"),n=t.getElementPosition(),i=t.getTargetPositin(n,t.getPlacement(n),t.$target[0].offsetWidth,t.$target[0].offsetHeight);t.$target.css(i.position),i.arrowOffset||(i.arrowOffset={left:"50%"}),t.$target.find(".webui-arrow").css(i.arrowOffset)}(r)},done:function(e,t){return e||(i(a,r,s),"function"==typeof o&&o(t[0])),!0}});l.data("forms-ready",!0),$([$(".webui-popover-backdrop").get(0),l.find(".js-cancel").get(0)]).one("click",(function(){i(a,r,s)})),$(document).on("keyup",c),a.$target.find("input,select,textarea").on("keyup",c),t.push(["quick_edit"])}})).on("hidden.webui.popover",(function(){var e=n(r);e&&e.hide&&i(e,r,s),$(document).off("keyup",c),t.pop()})).on("mouseenter",(function(){r.append(l)})).on("mouseleave",(function(){l.detach()}))}}})),define("pgui.modal_delete_link",["pgui.localizer","pgui.utils","bootbox"],(function(e,t){return function(n,i){n.off("click","a[data-modal-operation=delete]").on("click","a[data-modal-operation=delete]",(function(n){n.preventDefault();var r=$(this);bootbox.confirm(e.getString("DeleteRecordQuestion"),(function(n){if(n){var o=t.createLoadingModalDialog(e.getString("Deleting")).modal();o.one("hidden.bs.modal",(function(){o.remove()}));var a=r.data("content-link");$.ajax({url:a,dataType:"json",success:function(e){e.success?(i.removeRow(r.closest(".pg-row")),i.showMessage(e.message,e.messageDisplayTime),i.getReloadPageAfterAjaxOperation()&&location.reload()):t.showErrorMessage(e.message)},complete:function(){o.modal("hide")}})}}))}))}})),function(e){var t,n,i,r,o,a,s,l="Close",c="BeforeClose",u="MarkupParse",d="Open",h="Change",f="mfp",p="."+f,m="mfp-ready",g="mfp-removing",v="mfp-prevent-close",b=function(){},y=!!window.jQuery,w=e(window),x=function(e,n){t.ev.on(f+e+p,n)},C=function(t,n,i,r){var o=document.createElement("div");return o.className="mfp-"+t,i&&(o.innerHTML=i),r?n&&n.appendChild(o):(o=e(o),n&&o.appendTo(n)),o},_=function(n,i){t.ev.triggerHandler(f+n,i),t.st.callbacks&&(n=n.charAt(0).toLowerCase()+n.slice(1),t.st.callbacks[n]&&t.st.callbacks[n].apply(t,e.isArray(i)?i:[i]))},k=function(n){return n===s&&t.currTemplate.closeBtn||(t.currTemplate.closeBtn=e(t.st.closeMarkup.replace("%title%",t.st.tClose)),s=n),t.currTemplate.closeBtn},E=function(){e.magnificPopup.instance||((t=new b).init(),e.magnificPopup.instance=t)};b.prototype={constructor:b,init:function(){var n=navigator.appVersion;t.isIE7=-1!==n.indexOf("MSIE 7."),t.isIE8=-1!==n.indexOf("MSIE 8."),t.isLowIE=t.isIE7||t.isIE8,t.isAndroid=/android/gi.test(n),t.isIOS=/iphone|ipad|ipod/gi.test(n),t.supportsTransition=function(){var e=document.createElement("p").style,t=["ms","O","Moz","Webkit"];if(void 0!==e.transition)return!0;for(;t.length;)if(t.pop()+"Transition"in e)return!0;return!1}(),t.probablyMobile=t.isAndroid||t.isIOS||/(Opera Mini)|Kindle|webOS|BlackBerry|(Opera Mobi)|(Windows Phone)|IEMobile/i.test(navigator.userAgent),i=e(document.body),r=e(document),t.popupsCache={}},open:function(n){var i;if(!1===n.isObj){t.items=n.items.toArray(),t.index=0;var o,s=n.items;for(i=0;i<s.length;i++)if((o=s[i]).parsed&&(o=o.el[0]),o===n.el[0]){t.index=i;break}}else t.items=e.isArray(n.items)?n.items:[n.items],t.index=n.index||0;if(!t.isOpen){t.types=[],a="",n.mainEl&&n.mainEl.length?t.ev=n.mainEl.eq(0):t.ev=r,n.key?(t.popupsCache[n.key]||(t.popupsCache[n.key]={}),t.currTemplate=t.popupsCache[n.key]):t.currTemplate={},t.st=e.extend(!0,{},e.magnificPopup.defaults,n),t.fixedContentPos="auto"===t.st.fixedContentPos?!t.probablyMobile:t.st.fixedContentPos,t.st.modal&&(t.st.closeOnContentClick=!1,t.st.closeOnBgClick=!1,t.st.showCloseBtn=!1,t.st.enableEscapeKey=!1),t.bgOverlay||(t.bgOverlay=C("bg").on("click"+p,(function(){t.close()})),t.wrap=C("wrap").attr("tabindex",-1).on("click"+p,(function(e){t._checkIfClose(e.target)&&t.close()})),t.container=C("container",t.wrap)),t.contentContainer=C("content"),t.st.preloader&&(t.preloader=C("preloader",t.container,t.st.tLoading));var l=e.magnificPopup.modules;for(i=0;i<l.length;i++){var c=l[i];c=c.charAt(0).toUpperCase()+c.slice(1),t["init"+c].call(t)}_("BeforeOpen"),t.st.showCloseBtn&&(t.st.closeBtnInside?(x(u,(function(e,t,n,i){n.close_replaceWith=k(i.type)})),a+=" mfp-close-btn-in"):t.wrap.append(k())),t.st.alignTop&&(a+=" mfp-align-top"),t.fixedContentPos?t.wrap.css({overflow:t.st.overflowY,overflowX:"hidden",overflowY:t.st.overflowY}):t.wrap.css({top:w.scrollTop(),position:"absolute"}),(!1===t.st.fixedBgPos||"auto"===t.st.fixedBgPos&&!t.fixedContentPos)&&t.bgOverlay.css({height:r.height(),position:"absolute"}),t.st.enableEscapeKey&&r.on("keyup"+p,(function(e){27===e.keyCode&&t.close()})),w.on("resize"+p,(function(){t.updateSize()})),t.st.closeOnContentClick||(a+=" mfp-auto-cursor"),a&&t.wrap.addClass(a);var h=t.wH=w.height(),f={};if(t.fixedContentPos&&t._hasScrollBar(h)){var g=t._getScrollbarSize();g&&(f.marginRight=g)}t.fixedContentPos&&(t.isIE7?e("body, html").css("overflow","hidden"):f.overflow="hidden");var v=t.st.mainClass;return t.isIE7&&(v+=" mfp-ie7"),v&&t._addClassToMFP(v),t.updateItemHTML(),_("BuildControls"),e("html").css(f),t.bgOverlay.add(t.wrap).prependTo(document.body),t._lastFocusedEl=document.activeElement,setTimeout((function(){t.content?(t._addClassToMFP(m),t._setFocus()):t.bgOverlay.addClass(m),r.on("focusin"+p,t._onFocusIn)}),16),t.isOpen=!0,t.updateSize(h),_(d),n}t.updateItemHTML()},close:function(){t.isOpen&&(_(c),t.isOpen=!1,t.st.removalDelay&&!t.isLowIE&&t.supportsTransition?(t._addClassToMFP(g),setTimeout((function(){t._close()}),t.st.removalDelay)):t._close())},_close:function(){_(l);var n=g+" "+m+" ";if(t.bgOverlay.detach(),t.wrap.detach(),t.container.empty(),t.st.mainClass&&(n+=t.st.mainClass+" "),t._removeClassFromMFP(n),t.fixedContentPos){var i={marginRight:""};t.isIE7?e("body, html").css("overflow",""):i.overflow="",e("html").css(i)}r.off("keyup.mfp focusin"+p),t.ev.off(p),t.wrap.attr("class","mfp-wrap").removeAttr("style"),t.bgOverlay.attr("class","mfp-bg"),t.container.attr("class","mfp-container"),!t.st.showCloseBtn||t.st.closeBtnInside&&!0!==t.currTemplate[t.currItem.type]||t.currTemplate.closeBtn&&t.currTemplate.closeBtn.detach(),t._lastFocusedEl&&e(t._lastFocusedEl).focus(),t.currItem=null,t.content=null,t.currTemplate=null,t.prevHeight=0,_("AfterClose")},updateSize:function(e){if(t.isIOS){var n=document.documentElement.clientWidth/window.innerWidth,i=window.innerHeight*n;t.wrap.css("height",i),t.wH=i}else t.wH=e||w.height();t.fixedContentPos||t.wrap.css("height",t.wH),_("Resize")},updateItemHTML:function(){var n=t.items[t.index];t.contentContainer.detach(),t.content&&t.content.detach(),n.parsed||(n=t.parseEl(t.index));var i=n.type;if(_("BeforeChange",[t.currItem?t.currItem.type:"",i]),t.currItem=n,!t.currTemplate[i]){var r=!!t.st[i]&&t.st[i].markup;_("FirstMarkupParse",r),t.currTemplate[i]=!r||e(r)}o&&o!==n.type&&t.container.removeClass("mfp-"+o+"-holder");var a=t["get"+i.charAt(0).toUpperCase()+i.slice(1)](n,t.currTemplate[i]);t.appendContent(a,i),n.preloaded=!0,_(h,n),o=n.type,t.container.prepend(t.contentContainer),_("AfterChange")},appendContent:function(e,n){t.content=e,e?t.st.showCloseBtn&&t.st.closeBtnInside&&!0===t.currTemplate[n]?t.content.find(".mfp-close").length||t.content.append(k()):t.content=e:t.content="",_("BeforeAppend"),t.container.addClass("mfp-"+n+"-holder"),t.contentContainer.append(t.content)},parseEl:function(n){var i=t.items[n],r=i.type;if((i=i.tagName?{el:e(i)}:{data:i,src:i.src}).el){for(var o=t.types,a=0;a<o.length;a++)if(i.el.hasClass("mfp-"+o[a])){r=o[a];break}i.src=i.el.attr("data-mfp-src"),i.src||(i.src=i.el.attr("href"))}return i.type=r||t.st.type||"inline",i.index=n,i.parsed=!0,t.items[n]=i,_("ElementParse",i),t.items[n]},addGroup:function(e,n){var i=function(i){i.mfpEl=this,t._openClick(i,e,n)};n||(n={});var r="click.magnificPopup";n.mainEl=e,n.items?(n.isObj=!0,e.off(r).on(r,i)):(n.isObj=!1,n.delegate?e.off(r).on(r,n.delegate,i):(n.items=e,e.off(r).on(r,i)))},_openClick:function(n,i,r){if((void 0!==r.midClick?r.midClick:e.magnificPopup.defaults.midClick)||2!==n.which&&!n.ctrlKey&&!n.metaKey){var o=void 0!==r.disableOn?r.disableOn:e.magnificPopup.defaults.disableOn;if(o)if(e.isFunction(o)){if(!o.call(t))return!0}else if(w.width()<o)return!0;n.type&&(n.preventDefault(),t.isOpen&&n.stopPropagation()),r.el=e(n.mfpEl),r.delegate&&(r.items=i.find(r.delegate)),t.open(r)}},updateStatus:function(e,i){if(t.preloader){n!==e&&t.container.removeClass("mfp-s-"+n),i||"loading"!==e||(i=t.st.tLoading);var r={status:e,text:i};_("UpdateStatus",r),e=r.status,i=r.text,t.preloader.html(i),t.preloader.find("a").on("click",(function(e){e.stopImmediatePropagation()})),t.container.addClass("mfp-s-"+e),n=e}},_checkIfClose:function(n){if(!e(n).hasClass(v)){var i=t.st.closeOnContentClick,r=t.st.closeOnBgClick;if(i&&r)return!0;if(!t.content||e(n).hasClass("mfp-close")||t.preloader&&n===t.preloader[0])return!0;if(n===t.content[0]||e.contains(t.content[0],n)){if(i)return!0}else if(r&&e.contains(document,n))return!0;return!1}},_addClassToMFP:function(e){t.bgOverlay.addClass(e),t.wrap.addClass(e)},_removeClassFromMFP:function(e){this.bgOverlay.removeClass(e),t.wrap.removeClass(e)},_hasScrollBar:function(e){return(t.isIE7?r.height():document.body.scrollHeight)>(e||w.height())},_setFocus:function(){(t.st.focus?t.content.find(t.st.focus).eq(0):t.wrap).focus()},_onFocusIn:function(n){if(n.target!==t.wrap[0]&&!e.contains(t.wrap[0],n.target))return t._setFocus(),!1},_parseMarkup:function(t,n,i){var r;i.data&&(n=e.extend(i.data,n)),_(u,[t,n,i]),e.each(n,(function(e,n){if(void 0===n||!1===n)return!0;if((r=e.split("_")).length>1){var i=t.find(p+"-"+r[0]);if(i.length>0){var o=r[1];"replaceWith"===o?i[0]!==n[0]&&i.replaceWith(n):"img"===o?i.is("img")?i.attr("src",n):i.replaceWith('<img src="'+n+'" class="'+i.attr("class")+'" />'):i.attr(r[1],n)}}else t.find(p+"-"+e).html(n)}))},_getScrollbarSize:function(){if(void 0===t.scrollbarSize){var e=document.createElement("div");e.id="mfp-sbm",e.style.cssText="width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;",document.body.appendChild(e),t.scrollbarSize=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return t.scrollbarSize}},e.magnificPopup={instance:null,proto:b.prototype,modules:[],open:function(t,n){return E(),(t=t?e.extend(!0,{},t):{}).isObj=!0,t.index=n||0,this.instance.open(t)},close:function(){return e.magnificPopup.instance&&e.magnificPopup.instance.close()},registerModule:function(t,n){n.options&&(e.magnificPopup.defaults[t]=n.options),e.extend(this.proto,n.proto),this.modules.push(t)},defaults:{disableOn:0,key:null,midClick:!1,mainClass:"",preloader:!0,focus:"",closeOnContentClick:!1,closeOnBgClick:!0,closeBtnInside:!0,showCloseBtn:!0,enableEscapeKey:!0,modal:!1,alignTop:!1,removalDelay:0,fixedContentPos:"auto",fixedBgPos:"auto",overflowY:"auto",closeMarkup:'<button title="%title%" type="button" class="mfp-close">&times;</button>',tClose:"Close (Esc)",tLoading:"Loading..."}},e.fn.magnificPopup=function(n){E();var i=e(this);if("string"==typeof n)if("open"===n){var r,o=y?i.data("magnificPopup"):i[0].magnificPopup,a=parseInt(arguments[1],10)||0;o.items?r=o.items[a]:(r=i,o.delegate&&(r=r.find(o.delegate)),r=r.eq(a)),t._openClick({mfpEl:r},i,o)}else t.isOpen&&t[n].apply(t,Array.prototype.slice.call(arguments,1));else n=e.extend(!0,{},n),y?i.data("magnificPopup",n):i[0].magnificPopup=n,t.addGroup(i,n);return i};var S,T,D,$="inline",A=function(){D&&(T.after(D.addClass(S)).detach(),D=null)};e.magnificPopup.registerModule($,{options:{hiddenClass:"hide",markup:"",tNotFound:"Content not found"},proto:{initInline:function(){t.types.push($),x(l+"."+$,(function(){A()}))},getInline:function(n,i){if(A(),n.src){var r=t.st.inline,o=e(n.src);if(o.length){var a=o[0].parentNode;a&&a.tagName&&(T||(S=r.hiddenClass,T=C(S),S="mfp-"+S),D=o.after(T).detach().removeClass(S)),t.updateStatus("ready")}else t.updateStatus("error",r.tNotFound),o=e("<div>");return n.inlineElement=o,o}return t.updateStatus("ready"),t._parseMarkup(i,{},n),i}}});var P,j="ajax",O=function(){P&&i.removeClass(P)},I=function(){O(),t.req&&t.req.abort()};e.magnificPopup.registerModule(j,{options:{settings:null,cursor:"mfp-ajax-cur",tError:'<a href="%url%">The content</a> could not be loaded.'},proto:{initAjax:function(){t.types.push(j),P=t.st.ajax.cursor,x(l+"."+j,I),x("BeforeChange."+j,I)},getAjax:function(n){P&&i.addClass(P),t.updateStatus("loading");var r=e.extend({url:n.src,success:function(i,r,o){var a={data:i,xhr:o};_("ParseAjax",a),t.appendContent(e(a.data),j),n.finished=!0,O(),t._setFocus(),setTimeout((function(){t.wrap.addClass(m)}),16),t.updateStatus("ready"),_("AjaxContentAdded")},error:function(){O(),n.finished=n.loadError=!0,t.updateStatus("error",t.st.ajax.tError.replace("%url%",n.src))}},t.st.ajax.settings);return t.req=e.ajax(r),""}}});var M,N=function(n){if(n.data&&void 0!==n.data.title)return n.data.title;var i=t.st.image.titleSrc;if(i){if(e.isFunction(i))return i.call(t,n);if(n.el)return n.el.attr(i)||""}return""};e.magnificPopup.registerModule("image",{options:{markup:'<div class="mfp-figure"><div class="mfp-close"></div><figure><div class="mfp-img"></div><figcaption><div class="mfp-bottom-bar"><div class="mfp-title"></div><div class="mfp-counter"></div></div></figcaption></figure></div>',cursor:"mfp-zoom-out-cur",titleSrc:"title",verticalFit:!0,tError:'<a href="%url%">The image</a> could not be loaded.'},proto:{initImage:function(){var e=t.st.image,n=".image";t.types.push("image"),x(d+n,(function(){"image"===t.currItem.type&&e.cursor&&i.addClass(e.cursor)})),x(l+n,(function(){e.cursor&&i.removeClass(e.cursor),w.off("resize"+p)})),x("Resize"+n,t.resizeImage),t.isLowIE&&x("AfterChange",t.resizeImage)},resizeImage:function(){var e=t.currItem;if(e&&e.img&&t.st.image.verticalFit){var n=0;t.isLowIE&&(n=parseInt(e.img.css("padding-top"),10)+parseInt(e.img.css("padding-bottom"),10)),e.img.css("max-height",t.wH-n)}},_onImageHasSize:function(e){e.img&&(e.hasSize=!0,M&&clearInterval(M),e.isCheckingImgSize=!1,_("ImageHasSize",e),e.imgHidden&&(t.content&&t.content.removeClass("mfp-loading"),e.imgHidden=!1))},findImageSize:function(e){var n=0,i=e.img[0],r=function(o){M&&clearInterval(M),M=setInterval((function(){i.naturalWidth>0?t._onImageHasSize(e):(n>200&&clearInterval(M),3===++n?r(10):40===n?r(50):100===n&&r(500))}),o)};r(1)},getImage:function(n,i){var r=0,o=function(){n&&(n.img[0].complete?(n.img.off(".mfploader"),n===t.currItem&&(t._onImageHasSize(n),t.updateStatus("ready")),n.hasSize=!0,n.loaded=!0,_("ImageLoadComplete")):++r<200?setTimeout(o,100):a())},a=function(){n&&(n.img.off(".mfploader"),n===t.currItem&&(t._onImageHasSize(n),t.updateStatus("error",s.tError.replace("%url%",n.src))),n.hasSize=!0,n.loaded=!0,n.loadError=!0)},s=t.st.image,l=i.find(".mfp-img");if(l.length){var c=document.createElement("img");c.className="mfp-img",n.img=e(c).on("load.mfploader",o).on("error.mfploader",a),c.src=n.src,l.is("img")&&(n.img=n.img.clone()),n.img[0].naturalWidth>0&&(n.hasSize=!0)}return t._parseMarkup(i,{title:N(n),img_replaceWith:n.img},n),t.resizeImage(),n.hasSize?(M&&clearInterval(M),n.loadError?(i.addClass("mfp-loading"),t.updateStatus("error",s.tError.replace("%url%",n.src))):(i.removeClass("mfp-loading"),t.updateStatus("ready")),i):(t.updateStatus("loading"),n.loading=!0,n.hasSize||(n.imgHidden=!0,i.addClass("mfp-loading"),t.findImageSize(n)),i)}}});var F;e.magnificPopup.registerModule("zoom",{options:{enabled:!1,easing:"ease-in-out",duration:300,opener:function(e){return e.is("img")?e:e.find("img")}},proto:{initZoom:function(){var e,n=t.st.zoom,i=".zoom";if(n.enabled&&t.supportsTransition){var r,o,a=n.duration,s=function(e){var t=e.clone().removeAttr("style").removeAttr("class").addClass("mfp-animated-image"),i="all "+n.duration/1e3+"s "+n.easing,r={position:"fixed",zIndex:9999,left:0,top:0,"-webkit-backface-visibility":"hidden"},o="transition";return r["-webkit-"+o]=r["-moz-"+o]=r["-o-"+o]=r[o]=i,t.css(r),t},u=function(){t.content.css("visibility","visible")};x("BuildControls"+i,(function(){if(t._allowZoom()){if(clearTimeout(r),t.content.css("visibility","hidden"),!(e=t._getItemToZoom()))return void u();(o=s(e)).css(t._getOffset()),t.wrap.append(o),r=setTimeout((function(){o.css(t._getOffset(!0)),r=setTimeout((function(){u(),setTimeout((function(){o.remove(),e=o=null,_("ZoomAnimationEnded")}),16)}),a)}),16)}})),x(c+i,(function(){if(t._allowZoom()){if(clearTimeout(r),t.st.removalDelay=a,!e){if(!(e=t._getItemToZoom()))return;o=s(e)}o.css(t._getOffset(!0)),t.wrap.append(o),t.content.css("visibility","hidden"),setTimeout((function(){o.css(t._getOffset())}),16)}})),x(l+i,(function(){t._allowZoom()&&(u(),o&&o.remove(),e=null)}))}},_allowZoom:function(){return"image"===t.currItem.type},_getItemToZoom:function(){return!!t.currItem.hasSize&&t.currItem.img},_getOffset:function(n){var i,r=(i=n?t.currItem.img:t.st.zoom.opener(t.currItem.el||t.currItem)).offset(),o=parseInt(i.css("padding-top"),10),a=parseInt(i.css("padding-bottom"),10);r.top-=e(window).scrollTop()-o;var s={width:i.width(),height:(y?i.innerHeight():i[0].offsetHeight)-a-o};return void 0===F&&(F=void 0!==document.createElement("p").style.MozTransform),F?s["-moz-transform"]=s.transform="translate("+r.left+"px,"+r.top+"px)":(s.left=r.left,s.top=r.top),s}}});var R="iframe",L=function(e){if(t.currTemplate[R]){var n=t.currTemplate[R].find("iframe");n.length&&(e||(n[0].src="//about:blank"),t.isIE8&&n.css("display",e?"block":"none"))}};e.magnificPopup.registerModule(R,{options:{markup:'<div class="mfp-iframe-scaler"><div class="mfp-close"></div><iframe class="mfp-iframe" src="//about:blank" frameborder="0" allowfullscreen></iframe></div>',srcAction:"iframe_src",patterns:{youtube:{index:"youtube.com",id:"v=",src:"//www.youtube.com/embed/%id%?autoplay=1"},vimeo:{index:"vimeo.com/",id:"/",src:"//player.vimeo.com/video/%id%?autoplay=1"},gmaps:{index:"//maps.google.",src:"%id%&output=embed"}}},proto:{initIframe:function(){t.types.push(R),x("BeforeChange",(function(e,t,n){t!==n&&(t===R?L():n===R&&L(!0))})),x(l+"."+R,(function(){L()}))},getIframe:function(n,i){var r=n.src,o=t.st.iframe;e.each(o.patterns,(function(){if(r.indexOf(this.index)>-1)return this.id&&(r="string"==typeof this.id?r.substr(r.lastIndexOf(this.id)+this.id.length,r.length):this.id.call(this,r)),r=this.src.replace("%id%",r),!1}));var a={};return o.srcAction&&(a[o.srcAction]=r),t._parseMarkup(i,a,n),t.updateStatus("ready"),i}}});var z=function(e){var n=t.items.length;return e>n-1?e-n:e<0?n+e:e},H=function(e,t,n){return e.replace(/%curr%/gi,t+1).replace(/%total%/gi,n)};e.magnificPopup.registerModule("gallery",{options:{enabled:!1,arrowMarkup:'<button title="%title%" type="button" class="mfp-arrow mfp-arrow-%dir%"></button>',preload:[0,2],navigateByImgClick:!0,arrows:!0,tPrev:"Previous (Left arrow key)",tNext:"Next (Right arrow key)",tCounter:"%curr% of %total%"},proto:{initGallery:function(){var n=t.st.gallery,i=".mfp-gallery",o=Boolean(e.fn.mfpFastClick);if(t.direction=!0,!n||!n.enabled)return!1;a+=" mfp-gallery",x(d+i,(function(){n.navigateByImgClick&&t.wrap.on("click"+i,".mfp-img",(function(){if(t.items.length>1)return t.next(),!1})),r.on("keydown"+i,(function(e){37===e.keyCode?t.prev():39===e.keyCode&&t.next()}))})),x("UpdateStatus"+i,(function(e,n){n.text&&(n.text=H(n.text,t.currItem.index,t.items.length))})),x(u+i,(function(e,i,r,o){var a=t.items.length;r.counter=a>1?H(n.tCounter,o.index,a):""})),x("BuildControls"+i,(function(){if(t.items.length>1&&n.arrows&&!t.arrowLeft){var i=n.arrowMarkup,r=t.arrowLeft=e(i.replace(/%title%/gi,n.tPrev).replace(/%dir%/gi,"left")).addClass(v),a=t.arrowRight=e(i.replace(/%title%/gi,n.tNext).replace(/%dir%/gi,"right")).addClass(v),s=o?"mfpFastClick":"click";r[s]((function(){t.prev()})),a[s]((function(){t.next()})),t.isIE7&&(C("b",r[0],!1,!0),C("a",r[0],!1,!0),C("b",a[0],!1,!0),C("a",a[0],!1,!0)),t.container.append(r.add(a))}})),x(h+i,(function(){t._preloadTimeout&&clearTimeout(t._preloadTimeout),t._preloadTimeout=setTimeout((function(){t.preloadNearbyImages(),t._preloadTimeout=null}),16)})),x(l+i,(function(){r.off(i),t.wrap.off("click"+i),t.arrowLeft&&o&&t.arrowLeft.add(t.arrowRight).destroyMfpFastClick(),t.arrowRight=t.arrowLeft=null}))},next:function(){t.direction=!0,t.index=z(t.index+1),t.updateItemHTML()},prev:function(){t.direction=!1,t.index=z(t.index-1),t.updateItemHTML()},goTo:function(e){t.direction=e>=t.index,t.index=e,t.updateItemHTML()},preloadNearbyImages:function(){var e,n=t.st.gallery.preload,i=Math.min(n[0],t.items.length),r=Math.min(n[1],t.items.length);for(e=1;e<=(t.direction?r:i);e++)t._preloadItem(t.index+e);for(e=1;e<=(t.direction?i:r);e++)t._preloadItem(t.index-e)},_preloadItem:function(n){if(n=z(n),!t.items[n].preloaded){var i=t.items[n];i.parsed||(i=t.parseEl(n)),_("LazyLoad",i),"image"===i.type&&(i.img=e('<img class="mfp-img" />').on("load.mfploader",(function(){i.hasSize=!0})).on("error.mfploader",(function(){i.hasSize=!0,i.loadError=!0,_("LazyLoadError",i)})).attr("src",i.src)),i.preloaded=!0}}}});var B,q,U,W="retina";e.magnificPopup.registerModule(W,{options:{replaceSrc:function(e){return e.src.replace(/\.\w+$/,(function(e){return"@2x"+e}))},ratio:1},proto:{initRetina:function(){if(window.devicePixelRatio>1){var e=t.st.retina,n=e.ratio;(n=isNaN(n)?n():n)>1&&(x("ImageHasSize."+W,(function(e,t){t.img.css({"max-width":t.img[0].naturalWidth/n,width:"100%"})})),x("ElementParse."+W,(function(t,i){i.src=e.replaceSrc(i,n)})))}}}}),B="ontouchstart"in window,q=function(){w.off("touchmove"+U+" touchend"+U)},U=".mfpFastClick",e.fn.mfpFastClick=function(t){return e(this).each((function(){var n,i,r,o,a,s,l,c=e(this);B&&c.on("touchstart"+U,(function(e){a=!1,l=1,s=e.originalEvent?e.originalEvent.touches[0]:e.touches[0],r=s.clientX,o=s.clientY,w.on("touchmove"+U,(function(e){s=e.originalEvent?e.originalEvent.touches:e.touches,l=s.length,s=s[0],(Math.abs(s.clientX-r)>10||Math.abs(s.clientY-o)>10)&&(a=!0,q())})).on("touchend"+U,(function(e){q(),a||l>1||(n=!0,e.preventDefault(),clearTimeout(i),i=setTimeout((function(){n=!1}),1e3),t())}))})),c.on("click"+U,(function(){n||t()}))}))},e.fn.destroyMfpFastClick=function(){e(this).off("touchstart"+U+" click"+U),B&&w.off("touchmove"+U+" touchend"+U)},E()}(window.jQuery||window.Zepto),define("jquery.magnific-popup",(function(){})),define("pgui.image_popup",["underscore","jquery.magnific-popup"],(function(e){return function(t){e.chain(t.find("a.gallery-item")).reduce((function(e,t){var n=$(t).data("name");return-1===e.indexOf(n)&&e.push(n),e}),[]).each((function(e){t.find('a.gallery-item[data-name="'+e+'"]').magnificPopup({type:"image",gallery:{enabled:!0,preload:[0,1]},image:{titleSrc:function(e){return e.el.attr("title")}}})})),function(e){e.find(".linked-images-retriever").on("click",(function(e){e.preventDefault();var t=$(this),n=t.parent();if(t.hasClass("retrieved"))n.find("a.gallery-item").first().click();else{var i=t.data("url");$.get(i,(function(e){n.append(e),n.find("a.gallery-item").magnificPopup({type:"image",gallery:{enabled:!0,preload:[0,1]},image:{titleSrc:function(e){return e.el.attr("title")}}}),t.addClass("retrieved"),n.find("a.gallery-item").first().click()}))}}))}(t)}})),define("pgui.toggle",["pgui.utils","bootstrap.toggle"],(function(e){return function(t,n){t.find(".pgui-toggle-checkbox").each((function(t,i){var r=$(i),o={on:r.data("toggle-on-caption"),off:r.data("toggle-off-caption"),size:r.data("toggle-size"),onstyle:r.data("toggle-on-style"),offstyle:r.data("toggle-off-style")};r.data("toggle-width")&&(o.width=r.data("toggle-width")),r.data("toggle-height")&&(o.height=r.data("toggle-height")),r.bootstrapToggle(o),r.data("toggle-disabled")&&r.bootstrapToggle("disable");var a=!1;r.change((function(){if(a)a=!1;else{var t=$(this),i=t.data("pk-values")?t.data("pk-values"):{};i.column=t.closest("td").data("column-name");var o=t.data("editor-name");t.is(":checked")&&(i[o]=1),$.ajax({method:"POST",url:t.data("editing-link"),data:i,dataType:"json",success:function(i){if(!i.success)return a=!0,r.bootstrapToggle("toggle"),void e.showErrorMessage(i.message);if(void 0!==n){n.showMessage(i.message,i.messageDisplayTime);var o=$(i.row);e.replaceRow(t.closest(".pg-row"),o),n.integrateRows(o),n.getReloadPageAfterAjaxOperation()&&location.reload()}}})}}))}))}})),define("pgui.modal_view",["pgui.field-embedded-video","pgui.cell-edit","pgui.utils","pgui.image_popup","pgui.toggle"],(function(e,t,n,i,r){var o=$("body");return function a(s){if(!s.data("modal-view")){var l=$('<div class="modal fade"></div>'),c=s.data("content-link");s.click((function(s){s.preventDefault(),$.get(c,(function(s){o.append(l),l.html(s).one("hidden.bs.modal",(function(){this.remove()})).modal(),e(l,!1,!1),i(l),r(l),l.find("[data-edit-url]").each((function(e,i){var r=$(i),o=r.data("column-name");t(r,(function(e){r.html(e.columns[o]),l.find(".js-message-container").append(n.buildDismissableMessage("success",e.message,e.messageDisplayTime))}))})),l.find("[data-modal-operation=view]").each((function(e,t){a($(t))}))}))})),s.data("modal-view",!0)}}})),define("pgui.inline-edit",["pgui.form_collection","pgui.utils","pgui.field-embedded-video","pgui.image_popup","pgui.toggle","jquery.query"],(function(e,t,n,i,r){function o(e,t){return e.getRowTemplate().on("click",".js-cancel",(function(e){"function"==typeof t&&t(),$(e.delegateTarget).remove()}))}function a(e){return $.query.load(e.data("content-link")).set("is_inline","true").toString()}function s(e,t){e.find(".js-inline-edit-container").first().removeClass("pg-inline-edit-container-loading").html(t)}function l(e,t){t[0].success&&e&&e.showMessage(t[0].message,t[0].messageDisplayTime)}function c(t,n,i,r,a){return s(t,i),new e(t,t,r,$.extend({done:function(e,i,r){if(l(n,i),!e){var o=$(i[0].row);t.after(o),n.integrateRows(o),t.remove(),n.updateEmptyGridMessage(),r&&"edit"==r.action&&o.find("[data-inline-operation=edit]").first().click(),void 0===r.action&&n.getReloadPageAfterAjaxOperation()&&location.reload()}return!0},copy:function(e,i){$copiedContainer=o(n),t.after($copiedContainer),c($copiedContainer,n,i,r,{init:function(t){t.copyEditorsValues(e,t.get(0))}})}},a))}return{createInsertLink:function(e,t,n){n=n||1;var i=a(e);e.on("click",(function(e){e.preventDefault();for(var r=[],a=0;a<n;a++){var s=o(t);t.container.find(".pg-row-list:first").prepend(s),r.push(s)}$.get(i,(function(e){$.each(r,(function(n,r){c(r,t,e,i,{})}))}))}))},createEditLink:function(n,i){var r=n.closest(".pg-row");n.data("form-container",null),n.on("click",(function(c){c.preventDefault();var u=r.find("[data-inline-operation=view]");if(u.length&&u.data("form-container")&&(u.data("form-container").remove(),u.data("form-container",null)),n.data("form-container"))return n.data("form-container").remove(),void n.data("form-container",null);var d=o(i,(function(){n.data("form-container",null),r.show()}));n.data("form-container",d),i.isCard()&&r.hide(),r.after(d),$.get(a(n),(function(o){s(d,o),new e(d,d,null,{done:function(e,o,a){if(l(i,o),!e){var s=$(o[0].row);t.replaceRow(r,s),r.show(),i.integrateRows(s),n.data("form-container",null),d.remove(),i.updateEmptyGridMessage(),a&&"edit"==a.action&&s.find("[data-column-name=edit] > a").first().click(),void 0===a.action&&i.getReloadPageAfterAjaxOperation()&&location.reload()}return!0}})}))}))},createViewLink:function(e,t){var l=a(e),c=e.closest(".pg-row");e.data("form-container",null),e.on("click",(function(a){a.preventDefault();var u=c.find("[data-inline-operation=edit]");if(u.length&&u.data("form-container")&&(u.data("form-container").remove(),u.data("form-container",null)),e.data("form-container"))return e.data("form-container").remove(),void e.data("form-container",null);var d=o(t,(function(){e.data("form-container",null),c.show()}));e.data("form-container",d),t.isCard()&&c.hide(),c.after(d),$.get(l,(function(e){s(d,e),n(d,!1,!1),i(d),r(d)}))}))}}})),define("pgui.column_group",["libs/match-media"],(function(){function e(e){return window.matchMedia("(max-width: "+e+"px)").matches}return function(t){var n=t.find(".js-column-group");function i(){window.outerWidth;var t=4;e(767)?t=1:e(991)?t=2:e(1200)&&(t=3),n.each((function(e,n){var i=$(n);i.attr("colspan",i.data("visibility")[t])}))}$(window).on("resize",i),i()}})),define("pgui.charts",["moment"],(function(e){var t=[];function n(t){var n=new google.visualization.DataTable;return $.each(t.data.columns,(function(e,t){"data"===t.role?n.addColumn({type:i(t.type),label:t.label}):n.addColumn({role:t.role,type:"string",p:{html:!0}})})),$.each(t.data.rows,(function(i,r){var o=[];$.each(t.data.columns,(function(t,n){var i=r[t];"date"!==n.type&&"datetime"!==n.type||null===i||(i=e(i).toDate()),o.push(i)})),n.addRow(o)})),function(e,t){var n={number:google.visualization.NumberFormat,date:google.visualization.DateFormat,datetime:google.visualization.DateFormat};$.each(e,(function(e,r){var o=n[i(r.type)];r.format&&o&&new o({pattern:r.format}).format(t,e)}))}(t.data.columns,n),n}function i(e){switch((e=e||"string").toLowerCase()){case"string":return"string";case"date":return"date";case"datetime":return"datetime";default:return"number"}}function r(){return"undefined"!=typeof google&&google}function o(){r()&&$.each(t,(function(e,t){t.table=t.table||n(t);var i=$("[data-id="+t.id+"]");t.options=function(e,t,n){var i=e.css("color"),r=e.css("border-color"),o=$.extend(!0,{backgroundColor:"none",titleTextStyle:{color:i},vAxis:{gridlines:{color:r}},hAxis:{gridlines:{color:r}}},n);if("Geo"!=t&&(o=$.extend(!0,{legend:{textStyle:{color:i}}},o)),"Pie"==t)return o;var a={titleTextStyle:{color:i},textStyle:{color:i}};return $.extend(!0,{},{hAxis:a,vAxis:a},o)}(i,t.type,t.options),"TreeMap"==t.type&&"generateTooltip"in t&&(window["chartData_"+t.id].dataTable=t.table,t.options.generateTooltip=t.generateTooltip);var r=t.type;["Histogram","Gantt","Timeline","TreeMap"].includes(r)||(r+="Chart"),new google.visualization[r](i.get(0)).draw(t.table,t.options)}))}return{init:function(e){e.find(".pgui-chart").each((function(e,n){var i,r=$(n);r.data("ready")||(i=window["chartData_"+r.data("id")],t.push(i),r.data("ready",!0))})),r()&&google.charts.setOnLoadCallback(o),$(window).off("resize",o).on("resize",o)},draw:o}})),define("pgui.grid-details",["class","pgui.charts","underscore"],(function(e,t,n){var i=e.extend({init:function(e,t,n,i,r){this.$row=t,this.$button=n,this.$expandAll=i,this.grid=e,this.details=r,this.$container=e.isCard()?function(e,t){var n=$('<div class="grid-card-item col-xs-12"><div class="well grid-details grid-details-card js-content"></div></div>'),i=e.getRows();function r(){var r=e.container.find(".pg-row-list").width(),o=t.width(),a=Math.floor(r/o),s=i.index(t),l=Math.min(i.length-1,s+a-s%a-1);n.detach(),$(i.get(l)).after(n)}return $(window).on("resize",r),r(),n}(e,t):function(e,t){var n=$('<tr class="grid-details grid-details-table detail"><td class="js-content" colspan="'+e.getColumnCount()+'"></td></tr>');return t.after(n),n}(e,t),this.$container.find(".js-content").append($('<button class="close js-close" type="button">&times;</button>')).append($('<div class="grid-details-loading js-loading"><img src="components/assets/img/loading.gif"></div>')),this.isLoaded=!1,this.isLoading=!1},open:function(){this._load(),this.$container.show(),this.$container.find(".js-close").first().on("click",n.bind(this.close,this)),window.scroll(window.scrollX,this.$container.offset().top-$("#navbar").height()-32),t.draw(),this.toggleButtons(!0)},close:function(){this.$container.hide(),this.toggleButtons(!1)},toggle:function(e){e?this.open():this.close()},toggleButtons:function(e){var t=this.grid.getRows();this.grid.isCard()&&(e&&t.find(".js-expand-details.expanded").click(),this.$row.toggleClass("grid-card-item-details-expanded",e)),this.$button.toggleClass("collapsed",!e).toggleClass("expanded",e);var n=t.length===t.find(".js-expand-details.expanded").length;this.$expandAll.toggleClass("collapsed",!n).toggleClass("expanded",n)},_load:function(){this.isLoaded||this.isLoading||(this.isLoading=!0,$.when.apply($,n.map(this.details,(function(e){return $.get(e.gridLink,{inline:!0}).then((function(t){return{caption:e.caption,id:e.detailId,$el:$(t)}}))}))).done(n.bind((function(){var e,i,r;this.isLoaded=!0,this.isLoading=!1,this.$container.find(".js-loading").hide(),this.$container.find(".js-content").append((e=[].slice.call(arguments),i=$('<ul class="nav nav-tabs grid-details-tabs">'),r=$('<div class="tab-content">'),n.each(e,(function(e,t){var n=e.id+Math.ceil(1e8*Math.random());i.append($("<li>").toggleClass("active",0===t).append($('<a href="#'+n+'" data-toggle="tab">'+e.caption+"</a>"))),r.append($('<div class="tab-pane" id="'+n+'">').toggleClass("active",0===t).append(e.$el))})),i.find('[data-toggle="tab"]').on("shown.bs.tab",(function(){t.draw()})),$("<div>").append(i).append(r))),this._initGrids()}),this)))},_initGrids:function(){this.$container.find(".js-grid").each(n.bind((function(e,t){new this.grid.constructor($(t))}),this)),t.init(this.$container)},remove:function(){this.$container.remove()}});return function(e,t,n){t.off("click").on("click",(function(e){var i=t.hasClass("expanded");n.find(".js-expand-details").filter(i?".expanded":".collapsed").click(),t.toggleClass("collapsed",i).toggleClass("expanded",!i),e.preventDefault()})),n.each((function(n,r){var o=$(r),a=o.find(".js-expand-details").first();a.data("details")||a.off("click").on("click",(function(n){var r=!a.hasClass("expanded"),s=a.data("details");s||(s=new i(e,o,a,t,a.data("info")),a.data("details",s),o.data("details",s)),s.toggle(r),n.preventDefault()}))}))}})),define("pgui.grid",["class","pgui.filter_builder","pgui.column_filter","pgui.quick_filter","pgui.localizer","microevent","pgui.overlay","underscore","multiple_sorting","sorter","pgui.shortcuts","pgui.utils","pgui.field-embedded-video","pgui.autohide-message","pgui.selection","custom/pgui.selection-handler.ops","pgui.cell-edit","pgui.modal_operation_link","pgui.modal_delete_link","pgui.modal_view","pgui.inline-edit","pgui.column_group","pgui.grid-details","pgui.form_collection","pgui.image_popup","pgui.toggle"],(function(e,t,n,i,r,o,a,s,l,c,u,d,h,f,p,m,g,v,b,y,w,x,C,_,k,E){return e.extend({init:function(e,t){if(this.container=e,this.container.data("grid-class",this),this.filters={},this.options=t||{},this.reloadPageAfterAjaxOperation=this.container.data("reload-page-after-ajax-operation"),this.$header=this.container.find("thead").first(),this.selectionActions=new m(new p(this.getSelectionId()),this.container.find(".js-selection-actions-container"),this.$header.find("th.row-selection"),this.container.find(".pg-row .row-selection input[type=checkbox]"),!0,this),this._initActions(),this.integrateRows(this.container.find(".pg-row")),this._recalculateRowNumbers(),this._createFilters(),this._bindHandlers(),this._processHiddenValues(),this.$header.length&&this.$header.data("has-groups")&&x(this.$header),!this.container.data("is-master")){var n=this.container.data("sortable-columns"),i=new c(n),r=$("#multiple-sorting-"+this.getId());new l(i,r)}$.each(this.container.find(".alert"),(function(e,t){f($(t))}))},getId:function(){return this.container.attr("id")},isCard:function(){return this.container.hasClass("grid-card")},getSelectionId:function(){return this.container.data("selection-id")},getRowTemplate:function(){var e=$(s.template($("#"+this.getId()+"_row_template").html())(this));return e.find("td.pg-inline-edit-container").attr("colspan",this.getColumnCount()),e},getColumnCount:function(){return this.container.data("column-count")},getQuickFilter:function(){return this.filters.quickFilter},getFilterBuilder:function(){return this.filters.filterBuilder},getColumnFilter:function(){return this.filters.columnFilter},getReloadPageAfterAjaxOperation:function(){return this.reloadPageAfterAjaxOperation},getRows:function(){return this.container.find(".pg-row-list:first > .pg-row")},removeRow:function(e){e.data("details")&&e.data("details").remove();var t=e.find(".row-selection input[type=checkbox]").first();t.length&&t.prop("checked")&&t.click();var n=e.find("[data-inline-operation=edit]");n.length&&n.data("form-container")&&n.data("form-container").remove(),e.remove(),this.updateEmptyGridMessage()},updateEmptyGridMessage:function(){this.container.find(".pg-row-list:first .empty-grid").toggle(0==this.container.find(".pg-row").length)},insertRowAtBegin:function(e){var t=this.container.find(".pg-row-list:first > .pg-row").first(),n=this.container.find(".pg-row-list:first .empty-grid").closest("tr");return 0==t.length&&(t=n),t.before(e),this.integrateRows(e),this.updateEmptyGridMessage(),e},addHiddenValue:function(e,t){this.hiddenValues[e]=t},showMessage:function(e,t,n){e&&this.container.find(".js-grid-message-container").first().append(d.buildDismissableMessage(n?"danger":"success",e,t))},integrateRows:function(e){var t=this;this.selectionActions.setCheckboxes(this.$header.find(".row-selection input[type=checkbox]"),this.container.find(".pg-row .row-selection input[type=checkbox]")),h(e),k(e),E(e,t),e.find("[data-edit-url]").each((function(e,n){var i=$(n);g($(n),(function(e){t.showMessage(e.message,e.messageDisplayTime,!e.success);var n=$(e.row);d.replaceRow(i.closest(".pg-row"),n),t.integrateRows(n),t.getReloadPageAfterAjaxOperation()&&location.reload()}))})),e.find("[data-modal-operation=edit]").each((function(e,n){var i=$(n);i.data("modal-edit")||i.data("modal-edit",v.createEditLink(_,i,t))})),e.find("[data-modal-operation=copy]").each((function(e,n){var i=$(n);i.data("modal-copy")||i.data("modal-copy",v.createInsertLink(_,i,t))})),e.find("[data-modal-operation=view]").each((function(e,t){y($(t))})),e.find("[data-modal-operation=delete]").length>0&&b(e,t),e.find("[data-inline-operation=edit]").each((function(e,n){var i=$(n);i.data("inline-edit")||i.data("inline-edit",w.createEditLink(i,t))})),e.find("[data-inline-operation=copy]").each((function(e,n){var i=$(n);i.data("inline-copy")||i.data("inline-copy",w.createInsertLink(i,t))})),e.find("[data-inline-operation=view]").each((function(e,n){var i=$(n);i.data("inline-view")||i.data("inline-view",w.createViewLink(i,t))})),C(this,this.container.find(".js-expand-all-details").first(),this.getRows()),d.updatePopupHints(e)},_createFilters:function(){this.filters={filterBuilder:t.create(this.container.find(".js-filter-builder-modal")),columnFilter:n.create(this.container.find(".js-column-filter-container").first()),quickFilter:new i(this.container.find(".js-quick-filter").first())},this.container.find(".js-filter-builder-open").on("click",s.bind((function(e){this.filters.filterBuilder.show(),e.preventDefault()}),this))},_bindFilterStatusHandlers:function(e){var t=this;function n(e){return t.filters[$(e.currentTarget).data("id")]}e.on("click",".js-edit-filter",(function(e){n(e).show(),e.preventDefault()})).on("click",".js-toggle-filter",(function(e){n(e).setEnabled($(e.currentTarget).data("value")).submit(),e.preventDefault()})).on("click",".js-reset-filter",(function(e){n(e).reset().submit(),e.preventDefault()})).on("click",".js-reset-selection-filter",(function(e){location.href=$.query.remove("keys").set("selection_filter",""),e.preventDefault()}))},_processHiddenValues:function(){var e=this;this.hiddenValues={},s.each(this.container.data("grid-hidden-values"),(function(t,n){e.addHiddenValue(n,t)}))},_recalculateRowNumbers:function(){var e,t=parseInt(this.container.data("start-line-number")),n=this.container.find("tbody > tr > td.line-number"),i=t+n.length;e=i.toString().length,n.each((function(n){$(this).html(function(e,t){for(var n=""+e;n.length<t;)n="0"+n;return n}(n+t,e))}))},_initActions:function(){var e=this,t=this.container.find(".js-actions").first();t.find("[data-modal-insert=true]").each((function(t,n){var i=$(n);i.data("modal-insert-object")||i.data("modal-insert-object",v.createInsertLink(_,i,e))})),t.find("[data-inline-insert=true]").each((function(t,n){var i=$(n);i.data("inline-insert-object")||i.data("inline-insert-object",w.createInsertLink(i,e,i.data("count")||1))}))},_bindHandlers:function(){this.$header.find("th[data-comment]").each((function(){$(this).popover({placement:"top",container:"body",trigger:"hover",html:!0,title:$(this).attr("data-field-caption"),content:$(this).attr("data-comment")})})),this._bindFilterStatusHandlers(this.container.find(".js-filter-status").first())}})})),function(e,t,n){"use strict";var i="stickyTableHeaders",r=0,o={fixedOffset:0,leftOffset:0,marginTop:0,scrollableArea:t,selector:"thead:first"};function a(n,a){var s=this;s.$el=e(n),s.el=n,s.id=r++,s.$window=e(t),s.$document=e(document),s.$el.bind("destroyed",e.proxy(s.teardown,s)),s.$clonedHeader=null,s.$originalHeader=null,s.isSticky=!1,s.hasBeenSticky=!1,s.leftOffset=null,s.topOffset=null,s.init=function(){s.setOptions(a),s.$el.each((function(){var t=e(this);t.css("padding",0),s.$originalHeader=e(s.options.selector,this),s.$clonedHeader=s.$originalHeader.clone(),t.trigger("clonedHeader."+i,[s.$clonedHeader]),s.$clonedHeader.addClass("tableFloatingHeader"),s.$clonedHeader.css("display","none"),s.$originalHeader.addClass("tableFloatingHeaderOriginal"),s.$originalHeader.after(s.$clonedHeader),s.$printStyle=e('<style type="text/css" media="print">.tableFloatingHeader{display:none !important;}.tableFloatingHeaderOriginal{position:static !important;}</style>'),e("head").append(s.$printStyle)})),s.updateWidth(),s.toggleHeaders(),s.bind()},s.destroy=function(){s.$el.unbind("destroyed",s.teardown),s.teardown()},s.teardown=function(){s.isSticky&&s.$originalHeader.css("position","static"),e.removeData(s.el,"plugin_"+i),s.unbind(),s.$clonedHeader.remove(),s.$originalHeader.removeClass("tableFloatingHeaderOriginal"),s.$originalHeader.css("visibility","visible"),s.$printStyle.remove(),s.el=null,s.$el=null},s.bind=function(){s.$scrollableArea.on("scroll."+i,s.toggleHeaders),s.isWindowScrolling||(s.$window.on("scroll."+i+s.id,s.setPositionValues),s.$window.on("resize."+i+s.id,s.toggleHeaders)),s.$scrollableArea.on("resize."+i,s.toggleHeaders),s.$scrollableArea.on("resize."+i,s.updateWidth)},s.unbind=function(){s.$scrollableArea.off("."+i,s.toggleHeaders),s.isWindowScrolling||(s.$window.off("."+i+s.id,s.setPositionValues),s.$window.off("."+i+s.id,s.toggleHeaders)),s.$scrollableArea.off("."+i,s.updateWidth)},s.toggleHeaders=function(){s.$el&&s.$el.each((function(){var t,n=e(this),i=s.isWindowScrolling?isNaN(s.options.fixedOffset)?s.options.fixedOffset.outerHeight():s.options.fixedOffset:s.$scrollableArea.offset().top+(isNaN(s.options.fixedOffset)?0:s.options.fixedOffset),r=n.offset(),o=s.$scrollableArea.scrollTop()+i,a=s.$scrollableArea.scrollLeft(),l=s.isWindowScrolling?o>r.top:i>r.top,c=(s.isWindowScrolling?o:0)<r.top+n.height()-s.$clonedHeader.height()-(s.isWindowScrolling?0:i);l&&c?(t=r.left-a+s.options.leftOffset,s.$originalHeader.css({position:"fixed","margin-top":s.options.marginTop,left:t,"z-index":3}),s.leftOffset=t,s.topOffset=i,s.$clonedHeader.css("display",""),s.isSticky||(s.isSticky=!0,s.updateWidth()),s.setPositionValues()):s.isSticky&&(s.$originalHeader.css("position","static"),s.$clonedHeader.css("display","none"),s.isSticky=!1,s.resetWidth(e("td,th",s.$clonedHeader),e("td,th",s.$originalHeader)))}))},s.setPositionValues=function(){var e=s.$window.scrollTop(),t=s.$window.scrollLeft();!s.isSticky||e<0||e+s.$window.height()>s.$document.height()||t<0||t+s.$window.width()>s.$document.width()||s.$originalHeader.css({top:s.topOffset-(s.isWindowScrolling?0:e),left:s.leftOffset-(s.isWindowScrolling?0:t)})},s.updateWidth=function(){if(s.isSticky){s.$originalHeaderCells||(s.$originalHeaderCells=e("th,td",s.$originalHeader)),s.$clonedHeaderCells||(s.$clonedHeaderCells=e("th,td",s.$clonedHeader));var t=s.getWidth(s.$clonedHeaderCells);s.setWidth(t,s.$clonedHeaderCells,s.$originalHeaderCells),s.$originalHeader.css("width",s.$clonedHeader.width())}},s.getWidth=function(n){var i=[];return n.each((function(n){var r,o=e(this);if("border-box"===o.css("box-sizing"))r=o[0].getBoundingClientRect().width;else if("collapse"===e("th",s.$originalHeader).css("border-collapse"))if(t.getComputedStyle)r=parseFloat(t.getComputedStyle(this,null).width);else{var a=parseFloat(o.css("padding-left")),l=parseFloat(o.css("padding-right")),c=parseFloat(o.css("border-width"));r=o.outerWidth()-a-l-c}else r=o.width();i[n]=r})),i},s.setWidth=function(e,t,n){t.each((function(t){var i=e[t];n.eq(t).css({"min-width":i,"max-width":i})}))},s.resetWidth=function(t,n){t.each((function(t){var i=e(this);n.eq(t).css({"min-width":i.css("min-width"),"max-width":i.css("max-width")})}))},s.setOptions=function(n){s.options=e.extend({},o,n),s.$scrollableArea=e(s.options.scrollableArea),s.isWindowScrolling=s.$scrollableArea[0]===t},s.updateOptions=function(e){s.setOptions(e),s.unbind(),s.bind(),s.updateWidth(),s.toggleHeaders()},s.init()}e.fn[i]=function(t){return this.each((function(){var n=e.data(this,"plugin_"+i);n?"string"==typeof t?n[t].apply(n):n.updateOptions(t):"destroy"!==t&&e.data(this,"plugin_"+i,new a(this,t))}))}}(jQuery,window),define("jquery.stickytableheaders",["jquery"],(function(){})),define("pgui.list-page-main",["underscore","pgui.page_settings","pgui.shortcuts","pgui.grid","pgui.filter_common","pgui.filter_builder","pgui.column_filter","pgui.charts","pgui.utils","jquery.stickytableheaders"],(function(e,t,n,i,r,o,a,s,l){return function(){var c=$("body");t(c);var u=$("table.table.fixed-header");if(u.length>0){var d=$(".navbar"),h=0;d.hasClass("navbar-fixed-top")&&(h+=d.outerHeight()),u.stickyTableHeaders({selector:"thead:first",marginTop:h})}n.push(["grid"]),c.find(".js-grid").each((function(t,n){var s=$(n),c=new i(s),u=c.getId(),d=window["gridData_"+u],h=c.getFilterBuilder();e.each(d.filterBuilder.columns,(function(e){h.addColumn(new r.Column(e.fieldName,e.caption,e.operators))}));var f=new o.Group;f.deserialize(h.getColumns(),d.filterBuilder.data),h.setFilterComponent(f);var p=c.getColumnFilter();e.each(d.columnFilter.columns,(function(e){p.addColumn(new a.Column(e.fieldName,e.caption,e.typeIsDateTime))}));var m=new a.Group;m.deserialize(p.getColumns(),d.columnFilter.data),p.setFilterComponent(m),p.setDefaultsEnabled(d.columnFilter.isDefaultsEnabled),p.attach();var g=c.getQuickFilter();g.setColumnNames(d.quickFilter.columns),g.highlight(s),l.updatePopupHints(s.find(".pg-row"))})),s.init(c)}})),define("pgui.view-page-main",["pgui.utils","pgui.field-embedded-video","pgui.cell-edit","pgui.selection","pgui.selection-handler","pgui.image_popup","pgui.modal_view","pgui.toggle"],(function(e,t,n,i,r,o,a,s){return function(){var l=$("body");e.updatePopupHints(l),t(l),o(l),s(l),l.find("[data-edit-url]").each((function(t,i){var r=$(i),o=r.data("column-name");n(r,(function(t){r.html(t.columns[o]),l.find(".js-message-container").append(e.buildDismissableMessage("success",t.message,t.messageDisplayTime))}))})),l.find("[data-modal-operation=view]").each((function(e,t){a($(t))}));var c=l.find(".js-selection-actions-container");if(c.length)new r(new i(c.data("selection-id")),c)}})),define("pgui.compare-page-main",["pgui.view-page-main"],(function(e){return function(){function t(){var e=$(this);e.prop("checked")&&$("[data-diff=false]").toggle("all"===e.data("mode"))}e(),$(".js-compare-mode").on("change",t).each(t)}})),define("pgui.form-page-main",["pgui.form_collection","pgui.shortcuts"],(function(e,t){return function(){var n=$(".js-form-container").first();new e(n,$(".js-form-collection"),n.data("form-url"),{done:function(e,t,n){if(e)return!0;switch(n.action){case"open":location.href=n.url;break;case"edit":location.href=t[0].editUrl;break;case"details":location.href=t[0].details[n.index]}return!1}});t.push(["form"])}})),define("pgui.user_management_api",[],(function(){return{_invokeApiFunction:function(e,t){var n=new $.Deferred;return $.get("user_management_api.php",$.extend({},{hname:e},t)).done((function(e){"error"==e.status?n.reject(e.result):e.result?n.resolve(e.result):n.resolve()})).fail((function(e,t,i){n.reject(t+": "+i)})),n.promise()},addUser:function(e,t){return this._invokeApiFunction("au",{username:e,password:t})},addUserEx:function(e,t,n){return this._invokeApiFunction("aue",{username:e,password:t,email:n})},updateUser:function(e,t,n,i){return this._invokeApiFunction("uu",{user_id:e,username:t,email:n,status:i})},removeUser:function(e){return this._invokeApiFunction("ru",{user_id:e})},changeUserName:function(e,t){return this._invokeApiFunction("cun",{user_id:e,username:t})},changeUserPassword:function(e,t){return this._invokeApiFunction("cup",{user_id:e,password:t})},getUserGrants:function(e){return this._invokeApiFunction("gug",{user_id:e})},addUserGrant:function(e,t,n){return this._invokeApiFunction("aug",{user_id:e,page_name:t,grant:n})},removeUserGrant:function(e,t,n){return this._invokeApiFunction("rug",{user_id:e,page_name:t,grant:n})},selfChangePassword:function(e,t){return this._invokeApiFunction("self_change_password",{current_password:e,new_password:t})}}})),function(e){var t=this||(0,eval)("this"),n=t.document,i=t.navigator,r=t.jQuery,o=t.JSON;r||"undefined"==typeof jQuery||(r=jQuery),function(e){"function"==typeof define&&define.amd?define("knockout",["exports","require"],e):"object"==typeof exports&&"object"==typeof module?e(module.exports||exports):e(t.ko={})}((function(a,s){function l(e,t){return(null===e||typeof e in x)&&e===t}function c(t,n){var i;return function(){i||(i=w.a.setTimeout((function(){i=e,t()}),n))}}function u(e,t){var n;return function(){clearTimeout(n),n=w.a.setTimeout(e,t)}}function d(e,t){t&&"change"!==t?"beforeChange"===t?this.pc(e):this.gb(e,t):this.qc(e)}function h(e,t){null!==t&&t.s&&t.s()}function f(e,t){var n=this.qd,i=n[S];i.ra||(this.Qb&&this.mb[t]?(n.uc(t,e,this.mb[t]),this.mb[t]=null,--this.Qb):i.I[t]||n.uc(t,e,i.J?{da:e}:n.$c(e)),e.Ja&&e.gd())}var p,m,g,v,b,y,w=void 0!==a?a:{};w.b=function(e,t){for(var n=e.split("."),i=w,r=0;r<n.length-1;r++)i=i[n[r]];i[n[n.length-1]]=t},w.L=function(e,t,n){e[t]=n},w.version="3.5.1",w.b("version",w.version),w.options={deferUpdates:!1,useOnlyNativeEvents:!1,foreachHidesDestroyed:!1},w.a=function(){function a(e,t){for(var n in e)u.call(e,n)&&t(n,e[n])}function s(e,t){if(t)for(var n in t)u.call(t,n)&&(e[n]=t[n]);return e}function l(e,t){return e.__proto__=t,e}function c(e,t,n,i){var r=e[t].match(b)||[];w.a.D(n.match(b),(function(e){w.a.Na(r,e,i)})),e[t]=r.join(" ")}var u=Object.prototype.hasOwnProperty,d={__proto__:[]}instanceof Array,h="function"==typeof Symbol,f={},p={};f[i&&/Firefox\/2/i.test(i.userAgent)?"KeyboardEvent":"UIEvents"]=["keyup","keydown","keypress"],f.MouseEvents="click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave".split(" "),a(f,(function(e,t){if(t.length)for(var n=0,i=t.length;n<i;n++)p[t[n]]=e}));var m,g={propertychange:!0},v=n&&function(){for(var t=3,i=n.createElement("div"),r=i.getElementsByTagName("i");i.innerHTML="\x3c!--[if gt IE "+ ++t+"]><i></i><![endif]--\x3e",r[0];);return 4<t?t:e}(),b=/\S+/g;return{Jc:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],D:function(e,t,n){for(var i=0,r=e.length;i<r;i++)t.call(n,e[i],i,e)},A:"function"==typeof Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t)}:function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},Lb:function(t,n,i){for(var r=0,o=t.length;r<o;r++)if(n.call(i,t[r],r,t))return t[r];return e},Pa:function(e,t){var n=w.a.A(e,t);0<n?e.splice(n,1):0===n&&e.shift()},wc:function(e){var t=[];return e&&w.a.D(e,(function(e){0>w.a.A(t,e)&&t.push(e)})),t},Mb:function(e,t,n){var i=[];if(e)for(var r=0,o=e.length;r<o;r++)i.push(t.call(n,e[r],r));return i},jb:function(e,t,n){var i=[];if(e)for(var r=0,o=e.length;r<o;r++)t.call(n,e[r],r)&&i.push(e[r]);return i},Nb:function(e,t){if(t instanceof Array)e.push.apply(e,t);else for(var n=0,i=t.length;n<i;n++)e.push(t[n]);return e},Na:function(e,t,n){var i=w.a.A(w.a.bc(e),t);0>i?n&&e.push(t):n||e.splice(i,1)},Ba:d,extend:s,setPrototypeOf:l,Ab:d?l:s,P:a,Ga:function(e,t,n){if(!e)return e;var i,r={};for(i in e)u.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r},Tb:function(e){for(;e.firstChild;)w.removeNode(e.firstChild)},Yb:function(e){for(var t=((e=w.a.la(e))[0]&&e[0].ownerDocument||n).createElement("div"),i=0,r=e.length;i<r;i++)t.appendChild(w.oa(e[i]));return t},Ca:function(e,t){for(var n=0,i=e.length,r=[];n<i;n++){var o=e[n].cloneNode(!0);r.push(t?w.oa(o):o)}return r},va:function(e,t){if(w.a.Tb(e),t)for(var n=0,i=t.length;n<i;n++)e.appendChild(t[n])},Xc:function(e,t){var n=e.nodeType?[e]:e;if(0<n.length){for(var i=n[0],r=i.parentNode,o=0,a=t.length;o<a;o++)r.insertBefore(t[o],i);for(o=0,a=n.length;o<a;o++)w.removeNode(n[o])}},Ua:function(e,t){if(e.length){for(t=8===t.nodeType&&t.parentNode||t;e.length&&e[0].parentNode!==t;)e.splice(0,1);for(;1<e.length&&e[e.length-1].parentNode!==t;)e.length--;if(1<e.length){var n=e[0],i=e[e.length-1];for(e.length=0;n!==i;)e.push(n),n=n.nextSibling;e.push(i)}}return e},Zc:function(e,t){7>v?e.setAttribute("selected",t):e.selected=t},Db:function(t){return null===t||t===e?"":t.trim?t.trim():t.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},Ud:function(e,t){return e=e||"",!(t.length>e.length)&&e.substring(0,t.length)===t},vd:function(e,t){if(e===t)return!0;if(11===e.nodeType)return!1;if(t.contains)return t.contains(1!==e.nodeType?e.parentNode:e);if(t.compareDocumentPosition)return!(16&~t.compareDocumentPosition(e));for(;e&&e!=t;)e=e.parentNode;return!!e},Sb:function(e){return w.a.vd(e,e.ownerDocument.documentElement)},kd:function(e){return!!w.a.Lb(e,w.a.Sb)},R:function(e){return e&&e.tagName&&e.tagName.toLowerCase()},Ac:function(e){return w.onError?function(){try{return e.apply(this,arguments)}catch(e){throw w.onError&&w.onError(e),e}}:e},setTimeout:function(e,t){return setTimeout(w.a.Ac(e),t)},Gc:function(e){setTimeout((function(){throw w.onError&&w.onError(e),e}),0)},B:function(e,t,n){var i=w.a.Ac(n);if(n=g[t],w.options.useOnlyNativeEvents||n||!r)if(n||"function"!=typeof e.addEventListener){if(void 0===e.attachEvent)throw Error("Browser doesn't support addEventListener or attachEvent");var o=function(t){i.call(e,t)},a="on"+t;e.attachEvent(a,o),w.a.K.za(e,(function(){e.detachEvent(a,o)}))}else e.addEventListener(t,i,!1);else m||(m="function"==typeof r(e).on?"on":"bind"),r(e)[m](t,i)},Fb:function(e,i){if(!e||!e.nodeType)throw Error("element must be a DOM node when calling triggerEvent");var o;if(o=!("input"!==w.a.R(e)||!e.type||"click"!=i.toLowerCase())&&("checkbox"==(o=e.type)||"radio"==o),w.options.useOnlyNativeEvents||!r||o)if("function"==typeof n.createEvent){if("function"!=typeof e.dispatchEvent)throw Error("The supplied element doesn't support dispatchEvent");(o=n.createEvent(p[i]||"HTMLEvents")).initEvent(i,!0,!0,t,0,0,0,0,0,!1,!1,!1,!1,0,e),e.dispatchEvent(o)}else if(o&&e.click)e.click();else{if(void 0===e.fireEvent)throw Error("Browser doesn't support triggering events");e.fireEvent("on"+i)}else r(e).trigger(i)},f:function(e){return w.O(e)?e():e},bc:function(e){return w.O(e)?e.v():e},Eb:function(e,t,n){var i;t&&("object"==typeof e.classList?(i=e.classList[n?"add":"remove"],w.a.D(t.match(b),(function(t){i.call(e.classList,t)}))):"string"==typeof e.className.baseVal?c(e.className,"baseVal",t,n):c(e,"className",t,n))},Bb:function(t,n){var i=w.a.f(n);null!==i&&i!==e||(i="");var r=w.h.firstChild(t);!r||3!=r.nodeType||w.h.nextSibling(r)?w.h.va(t,[t.ownerDocument.createTextNode(i)]):r.data=i,w.a.Ad(t)},Yc:function(e,t){if(e.name=t,7>=v)try{var i=e.name.replace(/[&<>'"]/g,(function(e){return"&#"+e.charCodeAt(0)+";"}));e.mergeAttributes(n.createElement("<input name='"+i+"'/>"),!1)}catch(e){}},Ad:function(e){9<=v&&(e=1==e.nodeType?e:e.parentNode).style&&(e.style.zoom=e.style.zoom)},wd:function(e){if(v){var t=e.style.width;e.style.width=0,e.style.width=t}},Pd:function(e,t){e=w.a.f(e),t=w.a.f(t);for(var n=[],i=e;i<=t;i++)n.push(i);return n},la:function(e){for(var t=[],n=0,i=e.length;n<i;n++)t.push(e[n]);return t},Da:function(e){return h?Symbol(e):e},Zd:6===v,$d:7===v,W:v,Lc:function(e,t){for(var n=w.a.la(e.getElementsByTagName("input")).concat(w.a.la(e.getElementsByTagName("textarea"))),i="string"==typeof t?function(e){return e.name===t}:function(e){return t.test(e.name)},r=[],o=n.length-1;0<=o;o--)i(n[o])&&r.push(n[o]);return r},Nd:function(e){return"string"==typeof e&&(e=w.a.Db(e))?o&&o.parse?o.parse(e):new Function("return "+e)():null},hc:function(e,t,n){if(!o||!o.stringify)throw Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");return o.stringify(w.a.f(e),t,n)},Od:function(e,t,i){var r=(i=i||{}).params||{},o=i.includeFields||this.Jc,s=e;if("object"==typeof e&&"form"===w.a.R(e)){s=e.action;for(var l=o.length-1;0<=l;l--)for(var c=w.a.Lc(e,o[l]),u=c.length-1;0<=u;u--)r[c[u].name]=c[u].value}t=w.a.f(t);var d=n.createElement("form");for(var h in d.style.display="none",d.action=s,d.method="post",t)(e=n.createElement("input")).type="hidden",e.name=h,e.value=w.a.hc(w.a.f(t[h])),d.appendChild(e);a(r,(function(e,t){var i=n.createElement("input");i.type="hidden",i.name=e,i.value=t,d.appendChild(i)})),n.body.appendChild(d),i.submitter?i.submitter(d):d.submit(),setTimeout((function(){d.parentNode.removeChild(d)}),0)}}}(),w.b("utils",w.a),w.b("utils.arrayForEach",w.a.D),w.b("utils.arrayFirst",w.a.Lb),w.b("utils.arrayFilter",w.a.jb),w.b("utils.arrayGetDistinctValues",w.a.wc),w.b("utils.arrayIndexOf",w.a.A),w.b("utils.arrayMap",w.a.Mb),w.b("utils.arrayPushAll",w.a.Nb),w.b("utils.arrayRemoveItem",w.a.Pa),w.b("utils.cloneNodes",w.a.Ca),w.b("utils.createSymbolOrString",w.a.Da),w.b("utils.extend",w.a.extend),w.b("utils.fieldsIncludedWithJsonPost",w.a.Jc),w.b("utils.getFormFields",w.a.Lc),w.b("utils.objectMap",w.a.Ga),w.b("utils.peekObservable",w.a.bc),w.b("utils.postJson",w.a.Od),w.b("utils.parseJson",w.a.Nd),w.b("utils.registerEventHandler",w.a.B),w.b("utils.stringifyJson",w.a.hc),w.b("utils.range",w.a.Pd),w.b("utils.toggleDomNodeCssClass",w.a.Eb),w.b("utils.triggerEvent",w.a.Fb),w.b("utils.unwrapObservable",w.a.f),w.b("utils.objectForEach",w.a.P),w.b("utils.addOrRemoveItem",w.a.Na),w.b("utils.setTextContent",w.a.Bb),w.b("unwrap",w.a.f),Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if(1===arguments.length)return function(){return t.apply(e,arguments)};var n=Array.prototype.slice.call(arguments,1);return function(){var i=n.slice(0);return i.push.apply(i,arguments),t.apply(e,i)}}),w.a.g=new function(){var t,n,i=0,r="__ko__"+(new Date).getTime(),o={};return w.a.W?(t=function(t,n){var a=t[r];if(!a||"null"===a||!o[a]){if(!n)return e;a=t[r]="ko"+i++,o[a]={}}return o[a]},n=function(e){var t=e[r];return!!t&&(delete o[t],e[r]=null,!0)}):(t=function(e,t){var n=e[r];return!n&&t&&(n=e[r]={}),n},n=function(e){return!!e[r]&&(delete e[r],!0)}),{get:function(e,n){var i=t(e,!1);return i&&i[n]},set:function(n,i,r){(n=t(n,r!==e))&&(n[i]=r)},Ub:function(e,n,i){return(e=t(e,!0))[n]||(e[n]=i)},clear:n,Z:function(){return i+++r}}},w.b("utils.domData",w.a.g),w.b("utils.domData.clear",w.a.g.clear),w.a.K=new function(){function t(t,n){var i=w.a.g.get(t,o);return i===e&&n&&(i=[],w.a.g.set(t,o,i)),i}function n(e){if(n=t(e,!1))for(var n=n.slice(0),r=0;r<n.length;r++)n[r](e);w.a.g.clear(e),w.a.K.cleanExternalData(e),s[e.nodeType]&&i(e.childNodes,!0)}function i(e,t){for(var i,r=[],o=0;o<e.length;o++)if((!t||8===e[o].nodeType)&&(n(r[r.length]=i=e[o]),e[o]!==i))for(;o--&&-1==w.a.A(r,e[o]););}var o=w.a.g.Z(),a={1:!0,8:!0,9:!0},s={1:!0,9:!0};return{za:function(e,n){if("function"!=typeof n)throw Error("Callback must be a function");t(e,!0).push(n)},yb:function(n,i){var r=t(n,!1);r&&(w.a.Pa(r,i),0==r.length&&w.a.g.set(n,o,e))},oa:function(e){return w.u.G((function(){a[e.nodeType]&&(n(e),s[e.nodeType]&&i(e.getElementsByTagName("*")))})),e},removeNode:function(e){w.oa(e),e.parentNode&&e.parentNode.removeChild(e)},cleanExternalData:function(e){r&&"function"==typeof r.cleanData&&r.cleanData([e])}}},w.oa=w.a.K.oa,w.removeNode=w.a.K.removeNode,w.b("cleanNode",w.oa),w.b("removeNode",w.removeNode),w.b("utils.domNodeDisposal",w.a.K),w.b("utils.domNodeDisposal.addDisposeCallback",w.a.K.za),w.b("utils.domNodeDisposal.removeDisposeCallback",w.a.K.yb),p=[0,"",""],b={thead:m=[1,"<table>","</table>"],tbody:m,tfoot:m,tr:[2,"<table><tbody>","</tbody></table>"],td:g=[3,"<table><tbody><tr>","</tr></tbody></table>"],th:g,option:v=[1,"<select multiple='multiple'>","</select>"],optgroup:v},y=8>=w.a.W,w.a.ua=function(e,i){var o;if(r){if(r.parseHTML)o=r.parseHTML(e,i)||[];else if((o=r.clean([e],i))&&o[0]){for(var a=o[0];a.parentNode&&11!==a.parentNode.nodeType;)a=a.parentNode;a.parentNode&&a.parentNode.removeChild(a)}}else{(o=i)||(o=n),a=o.parentWindow||o.defaultView||t;var s,l=w.a.Db(e).toLowerCase(),c=o.createElement("div");for(s=(l=l.match(/^(?:\x3c!--.*?--\x3e\s*?)*?<([a-z]+)[\s>]/))&&b[l[1]]||p,l=s[0],s="ignored<div>"+s[1]+e+s[2]+"</div>","function"==typeof a.innerShiv?c.appendChild(a.innerShiv(s)):(y&&o.body.appendChild(c),c.innerHTML=s,y&&c.parentNode.removeChild(c));l--;)c=c.lastChild;o=w.a.la(c.lastChild.childNodes)}return o},w.a.Md=function(e,t){var n=w.a.ua(e,t);return n.length&&n[0].parentElement||w.a.Yb(n)},w.a.fc=function(t,n){if(w.a.Tb(t),null!==(n=w.a.f(n))&&n!==e)if("string"!=typeof n&&(n=n.toString()),r)r(t).html(n);else for(var i=w.a.ua(n,t.ownerDocument),o=0;o<i.length;o++)t.appendChild(i[o])},w.b("utils.parseHtmlFragment",w.a.ua),w.b("utils.setHtml",w.a.fc),w.aa=function(){function t(e,n){if(e)if(8==e.nodeType)null!=(i=w.aa.Uc(e.nodeValue))&&n.push({ud:e,Kd:i});else if(1==e.nodeType)for(var i=0,r=e.childNodes,o=r.length;i<o;i++)t(r[i],n)}var n={};return{Xb:function(e){if("function"!=typeof e)throw Error("You can only pass a function to ko.memoization.memoize()");var t=(4294967296*(1+Math.random())|0).toString(16).substring(1)+(4294967296*(1+Math.random())|0).toString(16).substring(1);return n[t]=e,"\x3c!--[ko_memo:"+t+"]--\x3e"},bd:function(t,i){var r=n[t];if(r===e)throw Error("Couldn't find any memo with ID "+t+". Perhaps it's already been unmemoized.");try{return r.apply(null,i||[]),!0}finally{delete n[t]}},cd:function(e,n){var i=[];t(e,i);for(var r=0,o=i.length;r<o;r++){var a=i[r].ud,s=[a];n&&w.a.Nb(s,n),w.aa.bd(i[r].Kd,s),a.nodeValue="",a.parentNode&&a.parentNode.removeChild(a)}},Uc:function(e){return(e=e.match(/^\[ko_memo\:(.*?)\]$/))?e[1]:null}}}(),w.b("memoization",w.aa),w.b("memoization.memoize",w.aa.Xb),w.b("memoization.unmemoize",w.aa.bd),w.b("memoization.parseMemoText",w.aa.Uc),w.b("memoization.unmemoizeDomNodeAndDescendants",w.aa.cd),w.na=function(){function e(){if(a)for(var e,t=a,n=0;l<a;)if(e=o[l++]){if(l>t){if(5e3<=++n){l=a,w.a.Gc(Error("'Too much recursion' after processing "+n+" task groups."));break}t=a}try{e()}catch(e){w.a.Gc(e)}}}function i(){e(),l=a=o.length=0}var r,o=[],a=0,s=1,l=0;return r=t.MutationObserver?function(e){var t=n.createElement("div");return new MutationObserver(e).observe(t,{attributes:!0}),function(){t.classList.toggle("foo")}}(i):n&&"onreadystatechange"in n.createElement("script")?function(e){var t=n.createElement("script");t.onreadystatechange=function(){t.onreadystatechange=null,n.documentElement.removeChild(t),t=null,e()},n.documentElement.appendChild(t)}:function(e){setTimeout(e,0)},{scheduler:r,zb:function(e){return a||w.na.scheduler(i),o[a++]=e,s++},cancel:function(e){(e-=s-a)>=l&&e<a&&(o[e]=null)},resetForTesting:function(){var e=a-l;return l=a=o.length=0,e},Sd:e}}(),w.b("tasks",w.na),w.b("tasks.schedule",w.na.zb),w.b("tasks.runEarly",w.na.Sd),w.Ta={throttle:function(e,t){e.throttleEvaluation=t;var n=null;return w.$({read:e,write:function(i){clearTimeout(n),n=w.a.setTimeout((function(){e(i)}),t)}})},rateLimit:function(e,t){var n,i,r;"number"==typeof t?n=t:(n=t.timeout,i=t.method),e.Hb=!1,r="function"==typeof i?i:"notifyWhenChangesStop"==i?u:c,e.ub((function(e){return r(e,n,t)}))},deferred:function(t,n){if(!0!==n)throw Error("The 'deferred' extender only accepts the value 'true', because it is not supported to turn deferral off once enabled.");t.Hb||(t.Hb=!0,t.ub((function(n){var i,r=!1;return function(){if(!r){w.na.cancel(i),i=w.na.zb(n);try{r=!0,t.notifySubscribers(e,"dirty")}finally{r=!1}}}})))},notify:function(e,t){e.equalityComparer="always"==t?null:l}};var x={undefined:1,boolean:1,number:1,string:1};w.b("extenders",w.Ta),w.ic=function(e,t,n){this.da=e,this.lc=t,this.mc=n,this.Ib=!1,this.fb=this.Jb=null,w.L(this,"dispose",this.s),w.L(this,"disposeWhenNodeIsRemoved",this.l)},w.ic.prototype.s=function(){this.Ib||(this.fb&&w.a.K.yb(this.Jb,this.fb),this.Ib=!0,this.mc(),this.da=this.lc=this.mc=this.Jb=this.fb=null)},w.ic.prototype.l=function(e){this.Jb=e,w.a.K.za(e,this.fb=this.s.bind(this))},w.T=function(){w.a.Ab(this,C),C.qb(this)};var C={qb:function(e){e.U={change:[]},e.sc=1},subscribe:function(e,t,n){var i=this;n=n||"change";var r=new w.ic(i,t?e.bind(t):e,(function(){w.a.Pa(i.U[n],r),i.hb&&i.hb(n)}));return i.Qa&&i.Qa(n),i.U[n]||(i.U[n]=[]),i.U[n].push(r),r},notifySubscribers:function(e,t){if("change"===(t=t||"change")&&this.Gb(),this.Wa(t)){var n="change"===t&&this.ed||this.U[t].slice(0);try{w.u.xc();for(var i,r=0;i=n[r];++r)i.Ib||i.lc(e)}finally{w.u.end()}}},ob:function(){return this.sc},Dd:function(e){return this.ob()!==e},Gb:function(){++this.sc},ub:function(e){var t,n,i,r,o,a=this,s=w.O(a);a.gb||(a.gb=a.notifySubscribers,a.notifySubscribers=d);var l=e((function(){a.Ja=!1,s&&r===a&&(r=a.nc?a.nc():a());var e=n||o&&a.sb(i,r);o=n=t=!1,e&&a.gb(i=r)}));a.qc=function(e,n){n&&a.Ja||(o=!n),a.ed=a.U.change.slice(0),a.Ja=t=!0,r=e,l()},a.pc=function(e){t||(i=e,a.gb(e,"beforeChange"))},a.rc=function(){o=!0},a.gd=function(){a.sb(i,a.v(!0))&&(n=!0)}},Wa:function(e){return this.U[e]&&this.U[e].length},Bd:function(e){if(e)return this.U[e]&&this.U[e].length||0;var t=0;return w.a.P(this.U,(function(e,n){"dirty"!==e&&(t+=n.length)})),t},sb:function(e,t){return!this.equalityComparer||!this.equalityComparer(e,t)},toString:function(){return"[object Object]"},extend:function(e){var t=this;return e&&w.a.P(e,(function(e,n){var i=w.Ta[e];"function"==typeof i&&(t=i(t,n)||t)})),t}};w.L(C,"init",C.qb),w.L(C,"subscribe",C.subscribe),w.L(C,"extend",C.extend),w.L(C,"getSubscriptionsCount",C.Bd),w.a.Ba&&w.a.setPrototypeOf(C,Function.prototype),w.T.fn=C,w.Qc=function(e){return null!=e&&"function"==typeof e.subscribe&&"function"==typeof e.notifySubscribers},w.b("subscribable",w.T),w.b("isSubscribable",w.Qc),w.S=w.u=function(){function e(e){i.push(n),n=e}function t(){n=i.pop()}var n,i=[],r=0;return{xc:e,end:t,cc:function(e){if(n){if(!w.Qc(e))throw Error("Only subscribable things can act as dependencies");n.od.call(n.pd,e,e.fd||(e.fd=++r))}},G:function(n,i,r){try{return e(),n.apply(i,r||[])}finally{t()}},qa:function(){if(n)return n.o.qa()},Va:function(){if(n)return n.o.Va()},Ya:function(){if(n)return n.Ya},o:function(){if(n)return n.o}}}(),w.b("computedContext",w.S),w.b("computedContext.getDependenciesCount",w.S.qa),w.b("computedContext.getDependencies",w.S.Va),w.b("computedContext.isInitial",w.S.Ya),w.b("computedContext.registerDependency",w.S.cc),w.b("ignoreDependencies",w.Yd=w.u.G);var _=w.a.Da("_latestValue");w.ta=function(e){function t(){return 0<arguments.length?(t.sb(t[_],arguments[0])&&(t.ya(),t[_]=arguments[0],t.xa()),this):(w.u.cc(t),t[_])}return t[_]=e,w.a.Ba||w.a.extend(t,w.T.fn),w.T.fn.qb(t),w.a.Ab(t,k),w.options.deferUpdates&&w.Ta.deferred(t,!0),t};var k={equalityComparer:l,v:function(){return this[_]},xa:function(){this.notifySubscribers(this[_],"spectate"),this.notifySubscribers(this[_])},ya:function(){this.notifySubscribers(this[_],"beforeChange")}};w.a.Ba&&w.a.setPrototypeOf(k,w.T.fn);var E=w.ta.Ma="__ko_proto__";k[E]=w.ta,w.O=function(e){if((e="function"==typeof e&&e[E])&&e!==k[E]&&e!==w.o.fn[E])throw Error("Invalid object that looks like an observable; possibly from another Knockout instance");return!!e},w.Za=function(e){return"function"==typeof e&&(e[E]===k[E]||e[E]===w.o.fn[E]&&e.Nc)},w.b("observable",w.ta),w.b("isObservable",w.O),w.b("isWriteableObservable",w.Za),w.b("isWritableObservable",w.Za),w.b("observable.fn",k),w.L(k,"peek",k.v),w.L(k,"valueHasMutated",k.xa),w.L(k,"valueWillMutate",k.ya),w.Ha=function(e){if("object"!=typeof(e=e||[])||!("length"in e))throw Error("The argument passed when initializing an observable array must be an array, or null, or undefined.");return e=w.ta(e),w.a.Ab(e,w.Ha.fn),e.extend({trackArrayChanges:!0})},w.Ha.fn={remove:function(e){for(var t=this.v(),n=[],i="function"!=typeof e||w.O(e)?function(t){return t===e}:e,r=0;r<t.length;r++){var o=t[r];if(i(o)){if(0===n.length&&this.ya(),t[r]!==o)throw Error("Array modified during remove; cannot remove item");n.push(o),t.splice(r,1),r--}}return n.length&&this.xa(),n},removeAll:function(t){if(t===e){var n=this.v(),i=n.slice(0);return this.ya(),n.splice(0,n.length),this.xa(),i}return t?this.remove((function(e){return 0<=w.a.A(t,e)})):[]},destroy:function(e){var t=this.v(),n="function"!=typeof e||w.O(e)?function(t){return t===e}:e;this.ya();for(var i=t.length-1;0<=i;i--){var r=t[i];n(r)&&(r._destroy=!0)}this.xa()},destroyAll:function(t){return t===e?this.destroy((function(){return!0})):t?this.destroy((function(e){return 0<=w.a.A(t,e)})):[]},indexOf:function(e){var t=this();return w.a.A(t,e)},replace:function(e,t){var n=this.indexOf(e);0<=n&&(this.ya(),this.v()[n]=t,this.xa())},sorted:function(e){var t=this().slice(0);return e?t.sort(e):t.sort()},reversed:function(){return this().slice(0).reverse()}},w.a.Ba&&w.a.setPrototypeOf(w.Ha.fn,w.ta.fn),w.a.D("pop push reverse shift sort splice unshift".split(" "),(function(e){w.Ha.fn[e]=function(){var t=this.v();this.ya(),this.zc(t,e,arguments);var n=t[e].apply(t,arguments);return this.xa(),n===t?this:n}})),w.a.D(["slice"],(function(e){w.Ha.fn[e]=function(){var t=this();return t[e].apply(t,arguments)}})),w.Pc=function(e){return w.O(e)&&"function"==typeof e.remove&&"function"==typeof e.push},w.b("observableArray",w.Ha),w.b("isObservableArray",w.Pc),w.Ta.trackArrayChanges=function(t,n){function i(){function e(){if(c){var e,n=[].concat(t.v()||[]);t.Wa("arrayChange")&&((!l||1<c)&&(l=w.a.Pb(a,n,t.Ob)),e=l),a=n,l=null,c=0,e&&e.length&&t.notifySubscribers(e,"arrayChange")}}s?e():(s=!0,o=t.subscribe((function(){++c}),null,"spectate"),a=[].concat(t.v()||[]),l=null,r=t.subscribe(e))}if(t.Ob={},n&&"object"==typeof n&&w.a.extend(t.Ob,n),t.Ob.sparse=!0,!t.zc){var r,o,a,s=!1,l=null,c=0,u=t.Qa,d=t.hb;t.Qa=function(e){u&&u.call(t,e),"arrayChange"===e&&i()},t.hb=function(n){d&&d.call(t,n),"arrayChange"!==n||t.Wa("arrayChange")||(r&&r.s(),o&&o.s(),o=r=null,s=!1,a=e)},t.zc=function(e,t,n){function i(e,t,n){return r[r.length]={status:e,value:t,index:n}}if(s&&!c){var r=[],o=e.length,a=n.length,u=0;switch(t){case"push":u=o;case"unshift":for(t=0;t<a;t++)i("added",n[t],u+t);break;case"pop":u=o-1;case"shift":o&&i("deleted",e[u],u);break;case"splice":t=Math.min(Math.max(0,0>n[0]?o+n[0]:n[0]),o),o=1===a?o:Math.min(t+(n[1]||0),o),a=t+a-2,u=Math.max(o,a);for(var d=[],h=[],f=2;t<u;++t,++f)t<o&&h.push(i("deleted",e[t],t)),t<a&&d.push(i("added",n[f],t));w.a.Kc(h,d);break;default:return}l=r}}}};var S=w.a.Da("_state");w.o=w.$=function(t,n,i){function r(){if(0<arguments.length){if("function"!=typeof o)throw Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");return o.apply(a.nb,arguments),this}return a.ra||w.u.cc(r),(a.ka||a.J&&r.Xa())&&r.ha(),a.X}if("object"==typeof t?i=t:(i=i||{},t&&(i.read=t)),"function"!=typeof i.read)throw Error("Pass a function that returns the value of the ko.computed");var o=i.write,a={X:e,sa:!0,ka:!0,rb:!1,jc:!1,ra:!1,wb:!1,J:!1,Wc:i.read,nb:n||i.owner,l:i.disposeWhenNodeIsRemoved||i.l||null,Sa:i.disposeWhen||i.Sa,Rb:null,I:{},V:0,Ic:null};return r[S]=a,r.Nc="function"==typeof o,w.a.Ba||w.a.extend(r,w.T.fn),w.T.fn.qb(r),w.a.Ab(r,T),i.pure?(a.wb=!0,a.J=!0,w.a.extend(r,D)):i.deferEvaluation&&w.a.extend(r,$),w.options.deferUpdates&&w.Ta.deferred(r,!0),a.l&&(a.jc=!0,a.l.nodeType||(a.l=null)),a.J||i.deferEvaluation||r.ha(),a.l&&r.ja()&&w.a.K.za(a.l,a.Rb=function(){r.s()}),r};var T={equalityComparer:l,qa:function(){return this[S].V},Va:function(){var e=[];return w.a.P(this[S].I,(function(t,n){e[n.Ka]=n.da})),e},Vb:function(e){if(!this[S].V)return!1;var t=this.Va();return-1!==w.a.A(t,e)||!!w.a.Lb(t,(function(t){return t.Vb&&t.Vb(e)}))},uc:function(e,t,n){if(this[S].wb&&t===this)throw Error("A 'pure' computed must not be called recursively");this[S].I[e]=n,n.Ka=this[S].V++,n.La=t.ob()},Xa:function(){var e,t,n=this[S].I;for(e in n)if(Object.prototype.hasOwnProperty.call(n,e)&&(t=n[e],this.Ia&&t.da.Ja||t.da.Dd(t.La)))return!0},Jd:function(){this.Ia&&!this[S].rb&&this.Ia(!1)},ja:function(){var e=this[S];return e.ka||0<e.V},Rd:function(){this.Ja?this[S].ka&&(this[S].sa=!0):this.Hc()},$c:function(e){if(e.Hb){var t=e.subscribe(this.Jd,this,"dirty"),n=e.subscribe(this.Rd,this);return{da:e,s:function(){t.s(),n.s()}}}return e.subscribe(this.Hc,this)},Hc:function(){var e=this,t=e.throttleEvaluation;t&&0<=t?(clearTimeout(this[S].Ic),this[S].Ic=w.a.setTimeout((function(){e.ha(!0)}),t)):e.Ia?e.Ia(!0):e.ha(!0)},ha:function(e){var t=this[S],n=t.Sa,i=!1;if(!t.rb&&!t.ra){if(t.l&&!w.a.Sb(t.l)||n&&n()){if(!t.jc)return void this.s()}else t.jc=!1;t.rb=!0;try{i=this.zd(e)}finally{t.rb=!1}return i}},zd:function(t){var n=this[S],i=!1,r=n.wb?e:!n.V;i={qd:this,mb:n.I,Qb:n.V},w.u.xc({pd:i,od:f,o:this,Ya:r}),n.I={},n.V=0;var o=this.yd(n,i);return n.V?i=this.sb(n.X,o):(this.s(),i=!0),i&&(n.J?this.Gb():this.notifySubscribers(n.X,"beforeChange"),n.X=o,this.notifySubscribers(n.X,"spectate"),!n.J&&t&&this.notifySubscribers(n.X),this.rc&&this.rc()),r&&this.notifySubscribers(n.X,"awake"),i},yd:function(e,t){try{var n=e.Wc;return e.nb?n.call(e.nb):n()}finally{w.u.end(),t.Qb&&!e.J&&w.a.P(t.mb,h),e.sa=e.ka=!1}},v:function(e){var t=this[S];return(t.ka&&(e||!t.V)||t.J&&this.Xa())&&this.ha(),t.X},ub:function(e){w.T.fn.ub.call(this,e),this.nc=function(){return this[S].J||(this[S].sa?this.ha():this[S].ka=!1),this[S].X},this.Ia=function(e){this.pc(this[S].X),this[S].ka=!0,e&&(this[S].sa=!0),this.qc(this,!e)}},s:function(){var t=this[S];!t.J&&t.I&&w.a.P(t.I,(function(e,t){t.s&&t.s()})),t.l&&t.Rb&&w.a.K.yb(t.l,t.Rb),t.I=e,t.V=0,t.ra=!0,t.sa=!1,t.ka=!1,t.J=!1,t.l=e,t.Sa=e,t.Wc=e,this.Nc||(t.nb=e)}},D={Qa:function(e){var t=this,n=t[S];if(!n.ra&&n.J&&"change"==e){if(n.J=!1,n.sa||t.Xa())n.I=null,n.V=0,t.ha()&&t.Gb();else{var i=[];w.a.P(n.I,(function(e,t){i[t.Ka]=e})),w.a.D(i,(function(e,i){var r=n.I[e],o=t.$c(r.da);o.Ka=i,o.La=r.La,n.I[e]=o})),t.Xa()&&t.ha()&&t.Gb()}n.ra||t.notifySubscribers(n.X,"awake")}},hb:function(t){var n=this[S];n.ra||"change"!=t||this.Wa("change")||(w.a.P(n.I,(function(e,t){t.s&&(n.I[e]={da:t.da,Ka:t.Ka,La:t.La},t.s())})),n.J=!0,this.notifySubscribers(e,"asleep"))},ob:function(){var e=this[S];return e.J&&(e.sa||this.Xa())&&this.ha(),w.T.fn.ob.call(this)}},$={Qa:function(e){"change"!=e&&"beforeChange"!=e||this.v()}};w.a.Ba&&w.a.setPrototypeOf(T,w.T.fn);var A=w.ta.Ma;T[A]=w.o,w.Oc=function(e){return"function"==typeof e&&e[A]===T[A]},w.Fd=function(e){return w.Oc(e)&&e[S]&&e[S].wb},w.b("computed",w.o),w.b("dependentObservable",w.o),w.b("isComputed",w.Oc),w.b("isPureComputed",w.Fd),w.b("computed.fn",T),w.L(T,"peek",T.v),w.L(T,"dispose",T.s),w.L(T,"isActive",T.ja),w.L(T,"getDependenciesCount",T.qa),w.L(T,"getDependencies",T.Va),w.xb=function(e,t){return"function"==typeof e?w.o(e,t,{pure:!0}):((e=w.a.extend({},e)).pure=!0,w.o(e,t))},w.b("pureComputed",w.xb),function(){function t(i,r,o){if(o=o||new n,"object"!=typeof(i=r(i))||null===i||i===e||i instanceof RegExp||i instanceof Date||i instanceof String||i instanceof Number||i instanceof Boolean)return i;var a=i instanceof Array?[]:{};return o.save(i,a),function(e,t){if(e instanceof Array){for(var n=0;n<e.length;n++)t(n);"function"==typeof e.toJSON&&t("toJSON")}else for(n in e)t(n)}(i,(function(n){var s=r(i[n]);switch(typeof s){case"boolean":case"number":case"string":case"function":a[n]=s;break;case"object":case"undefined":var l=o.get(s);a[n]=l!==e?l:t(s,r,o)}})),a}function n(){this.keys=[],this.values=[]}w.ad=function(e){if(0==arguments.length)throw Error("When calling ko.toJS, pass the object you want to convert.");return t(e,(function(e){for(var t=0;w.O(e)&&10>t;t++)e=e();return e}))},w.toJSON=function(e,t,n){return e=w.ad(e),w.a.hc(e,t,n)},n.prototype={constructor:n,save:function(e,t){var n=w.a.A(this.keys,e);0<=n?this.values[n]=t:(this.keys.push(e),this.values.push(t))},get:function(t){return 0<=(t=w.a.A(this.keys,t))?this.values[t]:e}}}(),w.b("toJS",w.ad),w.b("toJSON",w.toJSON),w.Wd=function(e,t,n){function i(t){var i=w.xb(e,n).extend({ma:"always"}),r=i.subscribe((function(e){e&&(r.s(),t(e))}));return i.notifySubscribers(i.v()),r}return"function"!=typeof Promise||t?i(t.bind(n)):new Promise(i)},w.b("when",w.Wd),w.w={M:function(t){switch(w.a.R(t)){case"option":return!0===t.__ko__hasDomDataOptionValue__?w.a.g.get(t,w.c.options.$b):7>=w.a.W?t.getAttributeNode("value")&&t.getAttributeNode("value").specified?t.value:t.text:t.value;case"select":return 0<=t.selectedIndex?w.w.M(t.options[t.selectedIndex]):e;default:return t.value}},cb:function(t,n,i){switch(w.a.R(t)){case"option":"string"==typeof n?(w.a.g.set(t,w.c.options.$b,e),"__ko__hasDomDataOptionValue__"in t&&delete t.__ko__hasDomDataOptionValue__,t.value=n):(w.a.g.set(t,w.c.options.$b,n),t.__ko__hasDomDataOptionValue__=!0,t.value="number"==typeof n?n:"");break;case"select":""!==n&&null!==n||(n=e);for(var r,o=-1,a=0,s=t.options.length;a<s;++a)if((r=w.w.M(t.options[a]))==n||""===r&&n===e){o=a;break}(i||0<=o||n===e&&1<t.size)&&(t.selectedIndex=o,6===w.a.W&&w.a.setTimeout((function(){t.selectedIndex=o}),0));break;default:null!==n&&n!==e||(n=""),t.value=n}}},w.b("selectExtensions",w.w),w.b("selectExtensions.readValue",w.w.M),w.b("selectExtensions.writeValue",w.w.cb),w.m=function(){function e(e){123===(e=w.a.Db(e)).charCodeAt(0)&&(e=e.slice(1,-1));var t,n=[],a=(e+="\n,").match(i),s=[],l=0;if(1<a.length){for(var c,u=0;c=a[u];++u){var d=c.charCodeAt(0);if(44===d){if(0>=l){n.push(t&&s.length?{key:t,value:s.join("")}:{unknown:t||s.join("")}),t=l=0,s=[];continue}}else if(58===d){if(!l&&!t&&1===s.length){t=s.pop();continue}}else{if(47===d&&1<c.length&&(47===c.charCodeAt(1)||42===c.charCodeAt(1)))continue;47===d&&u&&1<c.length?(d=a[u-1].match(r))&&!o[d[0]]&&(a=(e=e.substr(e.indexOf(c)+1)).match(i),u=-1,c="/"):40===d||123===d||91===d?++l:41===d||125===d||93===d?--l:t||s.length||34!==d&&39!==d||(c=c.slice(1,-1))}s.push(c)}if(0<l)throw Error("Unbalanced parentheses, braces, or brackets")}return n}var t=["true","false","null","undefined"],n=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i,i=RegExp("\"(?:\\\\.|[^\"])*\"|'(?:\\\\.|[^'])*'|`(?:\\\\.|[^`])*`|/\\*(?:[^*]|\\*+[^*/])*\\*+/|//.*\n|/(?:\\\\.|[^/])+/w*|[^\\s:,/][^,\"'`{}()/:[\\]]*[^\\s,\"'`{}()/:[\\]]|[^\\s]","g"),r=/[\])"'A-Za-z0-9_$]+$/,o={in:1,return:1,typeof:1},a={};return{Ra:[],wa:a,ac:e,vb:function(i,r){function o(e,i){var r;if(!u){var d=w.getBindingHandler(e);if(d&&d.preprocess&&!(i=d.preprocess(i,e,o)))return;(d=a[e])&&(r=i,0<=w.a.A(t,r)?r=!1:(d=r.match(n),r=null!==d&&(d[1]?"Object("+d[1]+")"+d[2]:r)),d=r),d&&l.push("'"+("string"==typeof a[e]?a[e]:e)+"':function(_z){"+r+"=_z}")}c&&(i="function(){return "+i+" }"),s.push("'"+e+"':"+i)}var s=[],l=[],c=(r=r||{}).valueAccessors,u=r.bindingParams,d="string"==typeof i?e(i):i;return w.a.D(d,(function(e){o(e.key||e.unknown,e.value)})),l.length&&o("_ko_property_writers","{"+l.join(",")+" }"),s.join(",")},Id:function(e,t){for(var n=0;n<e.length;n++)if(e[n].key==t)return!0;return!1},eb:function(e,t,n,i,r){e&&w.O(e)?!w.Za(e)||r&&e.v()===i||e(i):(e=t.get("_ko_property_writers"))&&e[n]&&e[n](i)}}}(),w.b("expressionRewriting",w.m),w.b("expressionRewriting.bindingRewriteValidators",w.m.Ra),w.b("expressionRewriting.parseObjectLiteral",w.m.ac),w.b("expressionRewriting.preProcessBindings",w.m.vb),w.b("expressionRewriting._twoWayBindings",w.m.wa),w.b("jsonExpressionRewriting",w.m),w.b("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",w.m.vb),function(){function e(e){return 8==e.nodeType&&a.test(o?e.text:e.nodeValue)}function t(e){return 8==e.nodeType&&s.test(o?e.text:e.nodeValue)}function i(n,i){for(var r=n,o=1,a=[];r=r.nextSibling;){if(t(r)&&(w.a.g.set(r,c,!0),0==--o))return a;a.push(r),e(r)&&o++}if(!i)throw Error("Cannot find closing comment tag to match: "+n.nodeValue);return null}function r(e,t){var n=i(e,t);return n?0<n.length?n[n.length-1].nextSibling:e.nextSibling:null}var o=n&&"\x3c!--test--\x3e"===n.createComment("test").text,a=o?/^\x3c!--\s*ko(?:\s+([\s\S]+))?\s*--\x3e$/:/^\s*ko(?:\s+([\s\S]+))?\s*$/,s=o?/^\x3c!--\s*\/ko\s*--\x3e$/:/^\s*\/ko\s*$/,l={ul:!0,ol:!0},c="__ko_matchedEndComment__";w.h={ea:{},childNodes:function(t){return e(t)?i(t):t.childNodes},Ea:function(t){if(e(t))for(var n=0,i=(t=w.h.childNodes(t)).length;n<i;n++)w.removeNode(t[n]);else w.a.Tb(t)},va:function(t,n){if(e(t)){w.h.Ea(t);for(var i=t.nextSibling,r=0,o=n.length;r<o;r++)i.parentNode.insertBefore(n[r],i)}else w.a.va(t,n)},Vc:function(t,n){var i;e(t)?(i=t.nextSibling,t=t.parentNode):i=t.firstChild,i?n!==i&&t.insertBefore(n,i):t.appendChild(n)},Wb:function(t,n,i){i?(i=i.nextSibling,e(t)&&(t=t.parentNode),i?n!==i&&t.insertBefore(n,i):t.appendChild(n)):w.h.Vc(t,n)},firstChild:function(n){if(e(n))return!n.nextSibling||t(n.nextSibling)?null:n.nextSibling;if(n.firstChild&&t(n.firstChild))throw Error("Found invalid end comment, as the first child of "+n);return n.firstChild},nextSibling:function(n){if(e(n)&&(n=r(n)),n.nextSibling&&t(n.nextSibling)){var i=n.nextSibling;if(t(i)&&!w.a.g.get(i,c))throw Error("Found end comment without a matching opening comment, as child of "+n);return null}return n.nextSibling},Cd:e,Vd:function(e){return(e=(o?e.text:e.nodeValue).match(a))?e[1]:null},Sc:function(n){if(l[w.a.R(n)]){var i=n.firstChild;if(i)do{if(1===i.nodeType){var o,a=null;if(o=i.firstChild)do{if(a)a.push(o);else if(e(o)){var s=r(o,!0);s?o=s:a=[o]}else t(o)&&(a=[o])}while(o=o.nextSibling);if(o=a)for(a=i.nextSibling,s=0;s<o.length;s++)a?n.insertBefore(o[s],a):n.appendChild(o[s])}}while(i=i.nextSibling)}}}}(),w.b("virtualElements",w.h),w.b("virtualElements.allowedBindings",w.h.ea),w.b("virtualElements.emptyNode",w.h.Ea),w.b("virtualElements.insertAfter",w.h.Wb),w.b("virtualElements.prepend",w.h.Vc),w.b("virtualElements.setDomNodeChildren",w.h.va),w.ga=function(){this.nd={}},w.a.extend(w.ga.prototype,{nodeHasBindings:function(e){switch(e.nodeType){case 1:return null!=e.getAttribute("data-bind")||w.j.getComponentNameForNode(e);case 8:return w.h.Cd(e);default:return!1}},getBindings:function(e,t){var n=(n=this.getBindingsString(e,t))?this.parseBindingsString(n,t,e):null;return w.j.tc(n,e,t,!1)},getBindingAccessors:function(e,t){var n=(n=this.getBindingsString(e,t))?this.parseBindingsString(n,t,e,{valueAccessors:!0}):null;return w.j.tc(n,e,t,!0)},getBindingsString:function(e){switch(e.nodeType){case 1:return e.getAttribute("data-bind");case 8:return w.h.Vd(e);default:return null}},parseBindingsString:function(e,t,n,i){try{var r,o=this.nd,a=e+(i&&i.valueAccessors||"");if(!(r=o[a])){var s,l="with($context){with($data||{}){return{"+w.m.vb(e,i)+"}}}";s=new Function("$context","$element",l),r=o[a]=s}return r(t,n)}catch(t){throw t.message="Unable to parse bindings.\nBindings value: "+e+"\nMessage: "+t.message,t}}}),w.ga.instance=new w.ga,w.b("bindingProvider",w.ga),function(){function i(e){var t=(e=w.a.g.get(e,x))&&e.N;t&&(e.N=null,t.Tc())}function o(e,t,n){this.node=e,this.yc=t,this.kb=[],this.H=!1,t.N||w.a.K.za(e,i),n&&n.N&&(n.N.kb.push(e),this.Kb=n)}function a(e){return function(){return e}}function s(e){return e()}function l(e){return w.a.Ga(w.u.G(e),(function(t,n){return function(){return e()[n]}}))}function c(e,t,n){return"function"==typeof e?l(e.bind(null,t,n)):w.a.Ga(e,a)}function u(e,t){return l(this.getBindings.bind(this,e,t))}function d(e,t){var n=w.h.firstChild(t);if(n){var i,r=w.ga.instance,o=r.preprocessNode;if(o){for(;i=n;)n=w.h.nextSibling(i),o.call(r,i);n=w.h.firstChild(t)}for(;i=n;)n=w.h.nextSibling(i),h(e,i)}w.i.ma(t,w.i.H)}function h(e,t){var n=e,i=1===t.nodeType;i&&w.h.Sc(t),(i||w.ga.instance.nodeHasBindings(t))&&(n=f(t,null,e).bindingContextForDescendants),n&&!b[w.a.R(t)]&&d(n,t)}function f(t,n,i){var r,o=w.a.g.Ub(t,x,{}),a=o.hd;if(!n){if(a)throw Error("You cannot apply bindings multiple times to the same element.");o.hd=!0}if(a||(o.context=i),o.Zb||(o.Zb={}),n&&"function"!=typeof n)r=n;else{var l=w.ga.instance,c=l.getBindingAccessors||u,d=w.$((function(){return(r=n?n(i,t):c.call(l,t,i))&&(i[m]&&i[m](),i[v]&&i[v]()),r}),null,{l:t});r&&d.ja()||(d=null)}var h,f=i;if(r){var p=function(){return w.a.Ga(d?d():r,s)},g=d?function(e){return function(){return s(d()[e])}}:function(e){return r[e]};p.get=function(e){return r[e]&&s(g(e))},p.has=function(e){return e in r},w.i.H in r&&w.i.subscribe(t,w.i.H,(function(){var e=(0,r[w.i.H])();if(e){var n=w.h.childNodes(t);n.length&&e(n,w.Ec(n[0]))}})),w.i.pa in r&&(f=w.i.Cb(t,i),w.i.subscribe(t,w.i.pa,(function(){var e=(0,r[w.i.pa])();e&&w.h.firstChild(t)&&e(t)}))),o=function(e){var t=[],n={},i=[];return w.a.P(e,(function r(o){if(!n[o]){var a=w.getBindingHandler(o);a&&(a.after&&(i.push(o),w.a.D(a.after,(function(t){if(e[t]){if(-1!==w.a.A(i,t))throw Error("Cannot combine the following bindings, because they have a cyclic dependency: "+i.join(", "));r(t)}})),i.length--),t.push({key:o,Mc:a})),n[o]=!0}})),t}(r),w.a.D(o,(function(n){var i=n.Mc.init,o=n.Mc.update,a=n.key;if(8===t.nodeType&&!w.h.ea[a])throw Error("The binding '"+a+"' cannot be used with virtual elements");try{"function"==typeof i&&w.u.G((function(){var n=i(t,g(a),p,f.$data,f);if(n&&n.controlsDescendantBindings){if(h!==e)throw Error("Multiple bindings ("+h+" and "+a+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");h=a}})),"function"==typeof o&&w.$((function(){o(t,g(a),p,f.$data,f)}),null,{l:t})}catch(e){throw e.message='Unable to process binding "'+a+": "+r[a]+'"\nMessage: '+e.message,e}}))}return{shouldBindDescendants:o=h===e,bindingContextForDescendants:o&&f}}function p(t,n){return t&&t instanceof w.fa?t:new w.fa(t,e,e,n)}var m=w.a.Da("_subscribable"),g=w.a.Da("_ancestorBindingInfo"),v=w.a.Da("_dataDependency");w.c={};var b={script:!0,textarea:!0,template:!0};w.getBindingHandler=function(e){return w.c[e]};var y={};w.fa=function(t,n,i,r,o){function a(){var e=d?u():u,t=w.a.f(e);return n?(w.a.extend(l,n),g in n&&(l[g]=n[g])):(l.$parents=[],l.$root=t,l.ko=w),l[m]=s,c?t=l.$data:(l.$rawData=e,l.$data=t),i&&(l[i]=t),r&&r(l,n,t),n&&n[m]&&!w.S.o().Vb(n[m])&&n[m](),h&&(l[v]=h),l.$data}var s,l=this,c=t===y,u=c?e:t,d="function"==typeof u&&!w.O(u),h=o&&o.dataDependency;o&&o.exportDependencies?a():((s=w.xb(a)).v(),s.ja()?s.equalityComparer=null:l[m]=e)},w.fa.prototype.createChildContext=function(e,t,n,i){if(!i&&t&&"object"==typeof t&&(t=(i=t).as,n=i.extend),t&&i&&i.noChildContext){var r="function"==typeof e&&!w.O(e);return new w.fa(y,this,null,(function(i){n&&n(i),i[t]=r?e():e}),i)}return new w.fa(e,this,t,(function(e,t){e.$parentContext=t,e.$parent=t.$data,e.$parents=(t.$parents||[]).slice(0),e.$parents.unshift(e.$parent),n&&n(e)}),i)},w.fa.prototype.extend=function(e,t){return new w.fa(y,this,null,(function(t){w.a.extend(t,"function"==typeof e?e(t):e)}),t)};var x=w.a.g.Z();o.prototype.Tc=function(){this.Kb&&this.Kb.N&&this.Kb.N.sd(this.node)},o.prototype.sd=function(e){w.a.Pa(this.kb,e),!this.kb.length&&this.H&&this.Cc()},o.prototype.Cc=function(){this.H=!0,this.yc.N&&!this.kb.length&&(this.yc.N=null,w.a.K.yb(this.node,i),w.i.ma(this.node,w.i.pa),this.Tc())},w.i={H:"childrenComplete",pa:"descendantsComplete",subscribe:function(e,t,n,i,r){var o=w.a.g.Ub(e,x,{});return o.Fa||(o.Fa=new w.T),r&&r.notifyImmediately&&o.Zb[t]&&w.u.G(n,i,[e]),o.Fa.subscribe(n,i,t)},ma:function(t,n){var i=w.a.g.get(t,x);if(i&&(i.Zb[n]=!0,i.Fa&&i.Fa.notifySubscribers(t,n),n==w.i.H))if(i.N)i.N.Cc();else if(i.N===e&&i.Fa&&i.Fa.Wa(w.i.pa))throw Error("descendantsComplete event not supported for bindings on this node")},Cb:function(e,t){var n=w.a.g.Ub(e,x,{});return n.N||(n.N=new o(e,n,t[g])),t[g]==n?t:t.extend((function(e){e[g]=n}))}},w.Td=function(e){return(e=w.a.g.get(e,x))&&e.context},w.ib=function(e,t,n){return 1===e.nodeType&&w.h.Sc(e),f(e,t,p(n))},w.ld=function(e,t,n){return n=p(n),w.ib(e,c(t,n,e),n)},w.Oa=function(e,t){1!==t.nodeType&&8!==t.nodeType||d(p(e),t)},w.vc=function(e,i,o){if(!r&&t.jQuery&&(r=t.jQuery),2>arguments.length){if(!(i=n.body))throw Error("ko.applyBindings: could not find document.body; has the document been loaded?")}else if(!i||1!==i.nodeType&&8!==i.nodeType)throw Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");h(p(e,o),i)},w.Dc=function(t){return!t||1!==t.nodeType&&8!==t.nodeType?e:w.Td(t)},w.Ec=function(t){return(t=w.Dc(t))?t.$data:e},w.b("bindingHandlers",w.c),w.b("bindingEvent",w.i),w.b("bindingEvent.subscribe",w.i.subscribe),w.b("bindingEvent.startPossiblyAsyncContentBinding",w.i.Cb),w.b("applyBindings",w.vc),w.b("applyBindingsToDescendants",w.Oa),w.b("applyBindingAccessorsToNode",w.ib),w.b("applyBindingsToNode",w.ld),w.b("contextFor",w.Dc),w.b("dataFor",w.Ec)}(),function(e){function t(t,i){var a,s=Object.prototype.hasOwnProperty.call(r,t)?r[t]:e;s?s.subscribe(i):((s=r[t]=new w.T).subscribe(i),n(t,(function(e,n){var i=!(!n||!n.synchronous);o[t]={definition:e,Gd:i},delete r[t],a||i?s.notifySubscribers(e):w.na.zb((function(){s.notifySubscribers(e)}))})),a=!0)}function n(e,t){i("getConfig",[e],(function(n){n?i("loadComponent",[e,n],(function(e){t(e,n)})):t(null,null)}))}function i(t,n,r,o){o||(o=w.j.loaders.slice(0));var a=o.shift();if(a){var s=a[t];if(s){var l=!1;if(s.apply(a,n.concat((function(e){l?r(null):null!==e?r(e):i(t,n,r,o)})))!==e&&(l=!0,!a.suppressLoaderExceptions))throw Error("Component loaders must supply values by invoking the callback, not by returning values synchronously.")}else i(t,n,r,o)}else r(null)}var r={},o={};w.j={get:function(n,i){var r=Object.prototype.hasOwnProperty.call(o,n)?o[n]:e;r?r.Gd?w.u.G((function(){i(r.definition)})):w.na.zb((function(){i(r.definition)})):t(n,i)},Bc:function(e){delete o[e]},oc:i},w.j.loaders=[],w.b("components",w.j),w.b("components.get",w.j.get),w.b("components.clearCachedDefinition",w.j.Bc)}(),function(){function e(e,t,n,i){function r(){0==--s&&i(o)}var o={},s=2,l=n.template;n=n.viewModel,l?a(t,l,(function(t){w.j.oc("loadTemplate",[e,t],(function(e){o.template=e,r()}))})):r(),n?a(t,n,(function(t){w.j.oc("loadViewModel",[e,t],(function(e){o[u]=e,r()}))})):r()}function i(e,t,n){if("function"==typeof t)n((function(e){return new t(e)}));else if("function"==typeof t[u])n(t[u]);else if("instance"in t){var r=t.instance;n((function(){return r}))}else"viewModel"in t?i(e,t.viewModel,n):e("Unknown viewModel value: "+t)}function r(e){switch(w.a.R(e)){case"script":return w.a.ua(e.text);case"textarea":return w.a.ua(e.value);case"template":if(o(e.content))return w.a.Ca(e.content.childNodes)}return w.a.Ca(e.childNodes)}function o(e){return t.DocumentFragment?e instanceof DocumentFragment:e&&11===e.nodeType}function a(e,n,i){"string"==typeof n.require?s||t.require?(s||t.require)([n.require],(function(e){e&&"object"==typeof e&&e.Xd&&e.default&&(e=e.default),i(e)})):e("Uses require, but no AMD loader is present"):i(n)}function l(e){return function(t){throw Error("Component '"+e+"': "+t)}}var c={};w.j.register=function(e,t){if(!t)throw Error("Invalid configuration for "+e);if(w.j.tb(e))throw Error("Component "+e+" is already registered");c[e]=t},w.j.tb=function(e){return Object.prototype.hasOwnProperty.call(c,e)},w.j.unregister=function(e){delete c[e],w.j.Bc(e)},w.j.Fc={getConfig:function(e,t){t(w.j.tb(e)?c[e]:null)},loadComponent:function(t,n,i){var r=l(t);a(r,n,(function(n){e(t,r,n,i)}))},loadTemplate:function(e,i,a){if(e=l(e),"string"==typeof i)a(w.a.ua(i));else if(i instanceof Array)a(i);else if(o(i))a(w.a.la(i.childNodes));else if(i.element)if(i=i.element,t.HTMLElement?i instanceof HTMLElement:i&&i.tagName&&1===i.nodeType)a(r(i));else if("string"==typeof i){var s=n.getElementById(i);s?a(r(s)):e("Cannot find element with ID "+i)}else e("Unknown element type: "+i);else e("Unknown template value: "+i)},loadViewModel:function(e,t,n){i(l(e),t,n)}};var u="createViewModel";w.b("components.register",w.j.register),w.b("components.isRegistered",w.j.tb),w.b("components.unregister",w.j.unregister),w.b("components.defaultLoader",w.j.Fc),w.j.loaders.push(w.j.Fc),w.j.dd=c}(),function(){function e(e,n){if(i=e.getAttribute("params")){var i=t.parseBindingsString(i,n,e,{valueAccessors:!0,bindingParams:!0}),r=(i=w.a.Ga(i,(function(t){return w.o(t,null,{l:e})})),w.a.Ga(i,(function(t){var n=t.v();return t.ja()?w.o({read:function(){return w.a.f(t())},write:w.Za(n)&&function(e){t()(e)},l:e}):n})));return Object.prototype.hasOwnProperty.call(r,"$raw")||(r.$raw=i),r}return{$raw:{}}}w.j.getComponentNameForNode=function(e){var t=w.a.R(e);if(w.j.tb(t)&&(-1!=t.indexOf("-")||"[object HTMLUnknownElement]"==""+e||8>=w.a.W&&e.tagName===t))return t},w.j.tc=function(t,n,i,r){if(1===n.nodeType){var o=w.j.getComponentNameForNode(n);if(o){if((t=t||{}).component)throw Error('Cannot use the "component" binding on a custom element matching a component');var a={name:o,params:e(n,i)};t.component=r?function(){return a}:a}}return t};var t=new w.ga;9>w.a.W&&(w.j.register=function(e){return function(t){return e.apply(this,arguments)}}(w.j.register),n.createDocumentFragment=function(e){return function(){var t,n=e(),i=w.j.dd;for(t in i);return n}}(n.createDocumentFragment))}(),function(){var e=0;w.c.component={init:function(t,n,i,r,o){function a(){var e=s&&s.dispose;"function"==typeof e&&e.call(s),c&&c.s(),l=s=c=null}var s,l,c,u=w.a.la(w.h.childNodes(t));return w.h.Ea(t),w.a.K.za(t,a),w.o((function(){var i,r,d=w.a.f(n());if("string"==typeof d?i=d:(i=w.a.f(d.name),r=w.a.f(d.params)),!i)throw Error("No component name specified");var h=w.i.Cb(t,o),f=l=++e;w.j.get(i,(function(e){if(l===f){if(a(),!e)throw Error("Unknown component '"+i+"'");!function(e,t,n){if(!(t=t.template))throw Error("Component '"+e+"' has no template");e=w.a.Ca(t),w.h.va(n,e)}(i,e,t);var n=function(e,t,n){var i=e.createViewModel;return i?i.call(e,t,n):t}(e,r,{element:t,templateNodes:u});e=h.createChildContext(n,{extend:function(e){e.$component=n,e.$componentTemplateNodes=u}}),n&&n.koDescendantsComplete&&(c=w.i.subscribe(t,w.i.pa,n.koDescendantsComplete,n)),s=n,w.Oa(e,t)}}))}),null,{l:t}),{controlsDescendantBindings:!0}}},w.h.ea.component=!0}();var P={class:"className",for:"htmlFor"};w.c.attr={update:function(t,n){var i=w.a.f(n())||{};w.a.P(i,(function(n,i){i=w.a.f(i);var r=n.indexOf(":"),o=(r="lookupNamespaceURI"in t&&0<r&&t.lookupNamespaceURI(n.substr(0,r)),!1===i||null===i||i===e);o?r?t.removeAttributeNS(r,n):t.removeAttribute(n):i=i.toString(),8>=w.a.W&&n in P?(n=P[n],o?t.removeAttribute(n):t[n]=i):o||(r?t.setAttributeNS(r,n,i):t.setAttribute(n,i)),"name"===n&&w.a.Yc(t,o?"":i)}))}},w.c.checked={after:["value","attr"],init:function(t,n,i){function r(){var r=t.checked,l=o();if(!w.S.Ya()&&(r||!s&&!w.S.qa())){var d=w.u.G(n);if(c){var f=u?d.v():d,p=h;h=l,p!==l?r&&(w.a.Na(f,l,!0),w.a.Na(f,p,!1)):w.a.Na(f,l,r),u&&w.Za(d)&&d(f)}else a&&(l===e?l=r:r||(l=e)),w.m.eb(d,i,"checked",l,!0)}}var o=w.xb((function(){return i.has("checkedValue")?w.a.f(i.get("checkedValue")):d?i.has("value")?w.a.f(i.get("value")):t.value:void 0})),a="checkbox"==t.type,s="radio"==t.type;if(a||s){var l=n(),c=a&&w.a.f(l)instanceof Array,u=!(c&&l.push&&l.splice),d=s||c,h=c?o():e;s&&!t.name&&w.c.uniqueName.init(t,(function(){return!0})),w.o(r,null,{l:t}),w.a.B(t,"click",r),w.o((function(){var i=w.a.f(n()),r=o();c?(t.checked=0<=w.a.A(i,r),h=r):t.checked=a&&r===e?!!i:o()===i}),null,{l:t}),l=e}}},w.m.wa.checked=!0,w.c.checkedValue={update:function(e,t){e.value=w.a.f(t())}},w.c.class={update:function(e,t){var n=w.a.Db(w.a.f(t()));w.a.Eb(e,e.__ko__cssValue,!1),e.__ko__cssValue=n,w.a.Eb(e,n,!0)}},w.c.css={update:function(e,t){var n=w.a.f(t());null!==n&&"object"==typeof n?w.a.P(n,(function(t,n){n=w.a.f(n),w.a.Eb(e,t,n)})):w.c.class.update(e,t)}},w.c.enable={update:function(e,t){var n=w.a.f(t());n&&e.disabled?e.removeAttribute("disabled"):n||e.disabled||(e.disabled=!0)}},w.c.disable={update:function(e,t){w.c.enable.update(e,(function(){return!w.a.f(t())}))}},w.c.event={init:function(e,t,n,i,r){var o=t()||{};w.a.P(o,(function(o){"string"==typeof o&&w.a.B(e,o,(function(e){var a,s=t()[o];if(s){try{var l=w.a.la(arguments);i=r.$data,l.unshift(i),a=s.apply(i,l)}finally{!0!==a&&(e.preventDefault?e.preventDefault():e.returnValue=!1)}!1===n.get(o+"Bubble")&&(e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation())}}))}))}},w.c.foreach={Rc:function(e){return function(){var t=e(),n=w.a.bc(t);return n&&"number"!=typeof n.length?(w.a.f(t),{foreach:n.data,as:n.as,noChildContext:n.noChildContext,includeDestroyed:n.includeDestroyed,afterAdd:n.afterAdd,beforeRemove:n.beforeRemove,afterRender:n.afterRender,beforeMove:n.beforeMove,afterMove:n.afterMove,templateEngine:w.ba.Ma}):{foreach:t,templateEngine:w.ba.Ma}}},init:function(e,t){return w.c.template.init(e,w.c.foreach.Rc(t))},update:function(e,t,n,i,r){return w.c.template.update(e,w.c.foreach.Rc(t),n,i,r)}},w.m.Ra.foreach=!1,w.h.ea.foreach=!0,w.c.hasfocus={init:function(e,t,n){function i(i){e.__ko_hasfocusUpdating=!0;var r=e.ownerDocument;if("activeElement"in r){var o;try{o=r.activeElement}catch(e){o=r.body}i=o===e}r=t(),w.m.eb(r,n,"hasfocus",i,!0),e.__ko_hasfocusLastValue=i,e.__ko_hasfocusUpdating=!1}var r=i.bind(null,!0),o=i.bind(null,!1);w.a.B(e,"focus",r),w.a.B(e,"focusin",r),w.a.B(e,"blur",o),w.a.B(e,"focusout",o),e.__ko_hasfocusLastValue=!1},update:function(e,t){var n=!!w.a.f(t());e.__ko_hasfocusUpdating||e.__ko_hasfocusLastValue===n||(n?e.focus():e.blur(),!n&&e.__ko_hasfocusLastValue&&e.ownerDocument.body.focus(),w.u.G(w.a.Fb,null,[e,n?"focusin":"focusout"]))}},w.m.wa.hasfocus=!0,w.c.hasFocus=w.c.hasfocus,w.m.wa.hasFocus="hasfocus",w.c.html={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t){w.a.fc(e,t())}},function(){function e(e,t,n){w.c[e]={init:function(e,i,r,o,a){var s,l,c,u,d,h={};if(t){o=r.get("as");var f=r.get("noChildContext");h={as:o,noChildContext:f,exportDependencies:d=!(o&&f)}}return u=(c="render"==r.get("completeOn"))||r.has(w.i.pa),w.o((function(){var r,o=w.a.f(i()),f=!n!=!o,p=!l;(d||f!==s)&&(u&&(a=w.i.Cb(e,a)),f&&(t&&!d||(h.dataDependency=w.S.o()),r=t?a.createChildContext("function"==typeof o?o:i,h):w.S.qa()?a.extend(null,h):a),p&&w.S.qa()&&(l=w.a.Ca(w.h.childNodes(e),!0)),f?(p||w.h.va(e,w.a.Ca(l)),w.Oa(r,e)):(w.h.Ea(e),c||w.i.ma(e,w.i.H)),s=f)}),null,{l:e}),{controlsDescendantBindings:!0}}},w.m.Ra[e]=!1,w.h.ea[e]=!0}e("if"),e("ifnot",!1,!0),e("with",!0)}(),w.c.let={init:function(e,t,n,i,r){return t=r.extend(t),w.Oa(t,e),{controlsDescendantBindings:!0}}},w.h.ea.let=!0;var j={};w.c.options={init:function(e){if("select"!==w.a.R(e))throw Error("options binding applies only to SELECT elements");for(;0<e.length;)e.remove(0);return{controlsDescendantBindings:!0}},update:function(t,n,i){function r(){return w.a.jb(t.options,(function(e){return e.selected}))}function o(e,t,n){var i=typeof t;return"function"==i?t(e):"string"==i?e[t]:n}function a(e,n){if(p&&u)w.i.ma(t,w.i.H);else if(f.length){var i=0<=w.a.A(f,w.w.M(n[0]));w.a.Zc(n[0],i),p&&!i&&w.u.G(w.a.Fb,null,[t,"change"])}}var s=t.multiple,l=0!=t.length&&s?t.scrollTop:null,c=w.a.f(n()),u=i.get("valueAllowUnset")&&i.has("value"),d=i.get("optionsIncludeDestroyed");n={};var h,f=[];u||(s?f=w.a.Mb(r(),w.w.M):0<=t.selectedIndex&&f.push(w.w.M(t.options[t.selectedIndex]))),c&&(void 0===c.length&&(c=[c]),h=w.a.jb(c,(function(t){return d||t===e||null===t||!w.a.f(t._destroy)})),i.has("optionsCaption")&&null!==(c=w.a.f(i.get("optionsCaption")))&&c!==e&&h.unshift(j));var p=!1;n.beforeRemove=function(e){t.removeChild(e)},c=a,i.has("optionsAfterRender")&&"function"==typeof i.get("optionsAfterRender")&&(c=function(t,n){a(0,n),w.u.G(i.get("optionsAfterRender"),null,[n[0],t!==j?t:e])}),w.a.ec(t,h,(function(n,r,a){return a.length&&(f=!u&&a[0].selected?[w.w.M(a[0])]:[],p=!0),r=t.ownerDocument.createElement("option"),n===j?(w.a.Bb(r,i.get("optionsCaption")),w.w.cb(r,e)):(a=o(n,i.get("optionsValue"),n),w.w.cb(r,w.a.f(a)),n=o(n,i.get("optionsText"),a),w.a.Bb(r,n)),[r]}),n,c),u||(s?f.length&&r().length<f.length:f.length&&0<=t.selectedIndex?w.w.M(t.options[t.selectedIndex])!==f[0]:f.length||0<=t.selectedIndex)&&w.u.G(w.a.Fb,null,[t,"change"]),(u||w.S.Ya())&&w.i.ma(t,w.i.H),w.a.wd(t),l&&20<Math.abs(l-t.scrollTop)&&(t.scrollTop=l)}},w.c.options.$b=w.a.g.Z(),w.c.selectedOptions={init:function(e,t,n){function i(){var i=t(),r=[];w.a.D(e.getElementsByTagName("option"),(function(e){e.selected&&r.push(w.w.M(e))})),w.m.eb(i,n,"selectedOptions",r)}function r(){var n=w.a.f(t()),i=e.scrollTop;n&&"number"==typeof n.length&&w.a.D(e.getElementsByTagName("option"),(function(e){var t=0<=w.a.A(n,w.w.M(e));e.selected!=t&&w.a.Zc(e,t)})),e.scrollTop=i}if("select"!=w.a.R(e))throw Error("selectedOptions binding applies only to SELECT elements");var o;w.i.subscribe(e,w.i.H,(function(){o?i():(w.a.B(e,"change",i),o=w.o(r,null,{l:e}))}),null,{notifyImmediately:!0})},update:function(){}},w.m.wa.selectedOptions=!0,w.c.style={update:function(t,n){var i=w.a.f(n()||{});w.a.P(i,(function(n,i){if(null!==(i=w.a.f(i))&&i!==e&&!1!==i||(i=""),r)r(t).css(n,i);else if(/^--/.test(n))t.style.setProperty(n,i);else{n=n.replace(/-(\w)/g,(function(e,t){return t.toUpperCase()}));var o=t.style[n];t.style[n]=i,i===o||t.style[n]!=o||isNaN(i)||(t.style[n]=i+"px")}}))}},w.c.submit={init:function(e,t,n,i,r){if("function"!=typeof t())throw Error("The value for a submit binding must be a function");w.a.B(e,"submit",(function(n){var i,o=t();try{i=o.call(r.$data,e)}finally{!0!==i&&(n.preventDefault?n.preventDefault():n.returnValue=!1)}}))}},w.c.text={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t){w.a.Bb(e,t())}},w.h.ea.text=!0,function(){if(t&&t.navigator){var n,i,r,o,a,s=function(e){if(e)return parseFloat(e[1])},l=t.navigator.userAgent;(n=t.opera&&t.opera.version&&parseInt(t.opera.version()))||(a=s(l.match(/Edge\/([^ ]+)$/)))||s(l.match(/Chrome\/([^ ]+)/))||(i=s(l.match(/Version\/([^ ]+) Safari/)))||(r=s(l.match(/Firefox\/([^ ]+)/)))||(o=w.a.W||s(l.match(/MSIE ([^ ]+)/)))||(o=s(l.match(/rv:([^ )]+)/)))}if(8<=o&&10>o)var c=w.a.g.Z(),u=w.a.g.Z(),d=function(e){var t=this.activeElement;(t=t&&w.a.g.get(t,u))&&t(e)},h=function(e,t){var n=e.ownerDocument;w.a.g.get(n,c)||(w.a.g.set(n,c,!0),w.a.B(n,"selectionchange",d)),w.a.g.set(e,u,t)};w.c.textInput={init:function(t,s,l){function c(e,n){w.a.B(t,e,n)}function u(){f||(p=t.value,f=w.a.setTimeout(d,4))}function d(){clearTimeout(f),p=f=e;var n=t.value;m!==n&&(m=n,w.m.eb(s(),l,"textInput",n))}var f,p,m=t.value,g=9==w.a.W?u:d,v=!1;o&&c("keypress",d),11>o&&c("propertychange",(function(e){v||"value"!==e.propertyName||g(e)})),8==o&&(c("keyup",d),c("keydown",d)),h&&(h(t,g),c("dragend",u)),(!o||9<=o)&&c("input",g),5>i&&"textarea"===w.a.R(t)?(c("keydown",u),c("paste",u),c("cut",u)):11>n?c("keydown",u):4>r?(c("DOMAutoComplete",d),c("dragdrop",d),c("drop",d)):a&&"number"===t.type&&c("keydown",u),c("change",d),c("blur",d),w.o((function n(){var i=w.a.f(s());null!==i&&i!==e||(i=""),p!==e&&i===p?w.a.setTimeout(n,4):t.value!==i&&(v=!0,t.value=i,v=!1,m=t.value)}),null,{l:t})}},w.m.wa.textInput=!0,w.c.textinput={preprocess:function(e,t,n){n("textInput",e)}}}(),w.c.uniqueName={init:function(e,t){if(t()){var n="ko_unique_"+ ++w.c.uniqueName.rd;w.a.Yc(e,n)}}},w.c.uniqueName.rd=0,w.c.using={init:function(e,t,n,i,r){var o;return n.has("as")&&(o={as:n.get("as"),noChildContext:n.get("noChildContext")}),t=r.createChildContext(t,o),w.Oa(t,e),{controlsDescendantBindings:!0}}},w.h.ea.using=!0,w.c.value={init:function(t,n,i){var r=w.a.R(t),o="input"==r;if(!o||"checkbox"!=t.type&&"radio"!=t.type){var a=[],s=i.get("valueUpdate"),l=!1,c=null;s&&(a="string"==typeof s?[s]:w.a.wc(s),w.a.Pa(a,"change"));var u,d,h=function(){c=null,l=!1;var e=n(),r=w.w.M(t);w.m.eb(e,i,"value",r)};!w.a.W||!o||"text"!=t.type||"off"==t.autocomplete||t.form&&"off"==t.form.autocomplete||-1!=w.a.A(a,"propertychange")||(w.a.B(t,"propertychange",(function(){l=!0})),w.a.B(t,"focus",(function(){l=!1})),w.a.B(t,"blur",(function(){l&&h()}))),w.a.D(a,(function(e){var n=h;w.a.Ud(e,"after")&&(n=function(){c=w.w.M(t),w.a.setTimeout(h,0)},e=e.substring(5)),w.a.B(t,e,n)})),u=o&&"file"==t.type?function(){var i=w.a.f(n());null===i||i===e||""===i?t.value="":w.u.G(h)}:function(){var o=w.a.f(n()),a=w.w.M(t);null!==c&&o===c?w.a.setTimeout(u,0):o===a&&a!==e||("select"===r?(a=i.get("valueAllowUnset"),w.w.cb(t,o,a),a||o===w.w.M(t)||w.u.G(h)):w.w.cb(t,o))},"select"===r?w.i.subscribe(t,w.i.H,(function(){d?i.get("valueAllowUnset")?u():h():(w.a.B(t,"change",h),d=w.o(u,null,{l:t}))}),null,{notifyImmediately:!0}):(w.a.B(t,"change",h),w.o(u,null,{l:t}))}else w.ib(t,{checkedValue:n})},update:function(){}},w.m.wa.value=!0,w.c.visible={update:function(e,t){var n=w.a.f(t()),i="none"!=e.style.display;n&&!i?e.style.display="":!n&&i&&(e.style.display="none")}},w.c.hidden={update:function(e,t){w.c.visible.update(e,(function(){return!w.a.f(t())}))}},function(e){w.c[e]={init:function(t,n,i,r,o){return w.c.event.init.call(this,t,(function(){var t={};return t[e]=n(),t}),i,r,o)}}}("click"),w.ca=function(){},w.ca.prototype.renderTemplateSource=function(){throw Error("Override renderTemplateSource")},w.ca.prototype.createJavaScriptEvaluatorBlock=function(){throw Error("Override createJavaScriptEvaluatorBlock")},w.ca.prototype.makeTemplateSource=function(e,t){if("string"==typeof e){var i=(t=t||n).getElementById(e);if(!i)throw Error("Cannot find template with ID "+e);return new w.C.F(i)}if(1==e.nodeType||8==e.nodeType)return new w.C.ia(e);throw Error("Unknown template type: "+e)},w.ca.prototype.renderTemplate=function(e,t,n,i){return e=this.makeTemplateSource(e,i),this.renderTemplateSource(e,t,n,i)},w.ca.prototype.isTemplateRewritten=function(e,t){return!1===this.allowTemplateRewriting||this.makeTemplateSource(e,t).data("isRewritten")},w.ca.prototype.rewriteTemplate=function(e,t,n){t=t((e=this.makeTemplateSource(e,n)).text()),e.text(t),e.data("isRewritten",!0)},w.b("templateEngine",w.ca),w.kc=function(){function e(e,t,n,i){e=w.m.ac(e);for(var r=w.m.Ra,o=0;o<e.length;o++){var a=e[o].key;if(Object.prototype.hasOwnProperty.call(r,a)){var s=r[a];if("function"==typeof s){if(a=s(e[o].value))throw Error(a)}else if(!s)throw Error("This template engine does not support the '"+a+"' binding within its templates")}}return n="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+w.m.vb(e,{valueAccessors:!0})+" } })()},'"+n.toLowerCase()+"')",i.createJavaScriptEvaluatorBlock(n)+t}var t=/(<([a-z]+\d*)(?:\s+(?!data-bind\s*=\s*)[a-z0-9\-]+(?:=(?:\"[^\"]*\"|\'[^\']*\'|[^>]*))?)*\s+)data-bind\s*=\s*(["'])([\s\S]*?)\3/gi,n=/\x3c!--\s*ko\b\s*([\s\S]*?)\s*--\x3e/g;return{xd:function(e,t,n){t.isTemplateRewritten(e,n)||t.rewriteTemplate(e,(function(e){return w.kc.Ld(e,t)}),n)},Ld:function(i,r){return i.replace(t,(function(t,n,i,o,a){return e(a,n,i,r)})).replace(n,(function(t,n){return e(n,"\x3c!-- ko --\x3e","#comment",r)}))},md:function(e,t){return w.aa.Xb((function(n,i){var r=n.nextSibling;r&&r.nodeName.toLowerCase()===t&&w.ib(r,e,i)}))}}}(),w.b("__tr_ambtns",w.kc.md),function(){w.C={},w.C.F=function(e){if(this.F=e){var t=w.a.R(e);this.ab="script"===t?1:"textarea"===t?2:"template"==t&&e.content&&11===e.content.nodeType?3:4}},w.C.F.prototype.text=function(){var e=1===this.ab?"text":2===this.ab?"value":"innerHTML";if(0==arguments.length)return this.F[e];var t=arguments[0];"innerHTML"===e?w.a.fc(this.F,t):this.F[e]=t};var t=w.a.g.Z()+"_";w.C.F.prototype.data=function(e){if(1===arguments.length)return w.a.g.get(this.F,t+e);w.a.g.set(this.F,t+e,arguments[1])};var n=w.a.g.Z();w.C.F.prototype.nodes=function(){var t=this.F;if(0==arguments.length){var i=w.a.g.get(t,n)||{},r=i.lb||(3===this.ab?t.content:4===this.ab?t:e);if(!r||i.jd){var o=this.text();o&&o!==i.bb&&(r=w.a.Md(o,t.ownerDocument),w.a.g.set(t,n,{lb:r,bb:o,jd:!0}))}return r}i=arguments[0],this.ab!==e&&this.text(""),w.a.g.set(t,n,{lb:i})},w.C.ia=function(e){this.F=e},w.C.ia.prototype=new w.C.F,w.C.ia.prototype.constructor=w.C.ia,w.C.ia.prototype.text=function(){if(0==arguments.length){var t=w.a.g.get(this.F,n)||{};return t.bb===e&&t.lb&&(t.bb=t.lb.innerHTML),t.bb}w.a.g.set(this.F,n,{bb:arguments[0]})},w.b("templateSources",w.C),w.b("templateSources.domElement",w.C.F),w.b("templateSources.anonymousTemplate",w.C.ia)}(),function(){function t(e,t,n){var i;for(t=w.h.nextSibling(t);e&&(i=e)!==t;)n(i,e=w.h.nextSibling(i))}function n(e,n){if(e.length){var i=e[0],r=e[e.length-1],o=i.parentNode,a=w.ga.instance,s=a.preprocessNode;if(s){if(t(i,r,(function(e,t){var n=e.previousSibling,o=s.call(a,e);o&&(e===i&&(i=o[0]||t),e===r&&(r=o[o.length-1]||n))})),e.length=0,!i)return;i===r?e.push(i):(e.push(i,r),w.a.Ua(e,o))}t(i,r,(function(e){1!==e.nodeType&&8!==e.nodeType||w.vc(n,e)})),t(i,r,(function(e){1!==e.nodeType&&8!==e.nodeType||w.aa.cd(e,[n])})),w.a.Ua(e,o)}}function i(e){return e.nodeType?e:0<e.length?e[0]:null}function r(e,t,r,o,s){s=s||{};var l=(e&&i(e)||r||{}).ownerDocument,c=s.templateEngine||a;if(w.kc.xd(r,c,l),"number"!=typeof(r=c.renderTemplate(r,o,s,l)).length||0<r.length&&"number"!=typeof r[0].nodeType)throw Error("Template engine must return an array of DOM nodes");switch(l=!1,t){case"replaceChildren":w.h.va(e,r),l=!0;break;case"replaceNode":w.a.Xc(e,r),l=!0;break;case"ignoreTargetNode":break;default:throw Error("Unknown renderMode: "+t)}return l&&(n(r,o),s.afterRender&&w.u.G(s.afterRender,null,[r,o[s.as||"$data"]]),"replaceChildren"==t&&w.i.ma(e,w.i.H)),r}function o(e,t,n){return w.O(e)?e():"function"==typeof e?e(t,n):e}var a;w.gc=function(t){if(t!=e&&!(t instanceof w.ca))throw Error("templateEngine must inherit from ko.templateEngine");a=t},w.dc=function(t,n,s,l,c){if(((s=s||{}).templateEngine||a)==e)throw Error("Set a template engine before calling renderTemplate");if(c=c||"replaceChildren",l){var u=i(l);return w.$((function(){var e=n&&n instanceof w.fa?n:new w.fa(n,null,null,null,{exportDependencies:!0}),a=o(t,e.$data,e);e=r(l,c,a,e,s),"replaceNode"==c&&(u=i(l=e))}),null,{Sa:function(){return!u||!w.a.Sb(u)},l:u&&"replaceNode"==c?u.parentNode:u})}return w.aa.Xb((function(e){w.dc(t,n,s,e,"replaceNode")}))},w.Qd=function(t,i,a,s,l){function c(e,t){w.u.G(w.a.ec,null,[s,e,d,a,u,t]),w.i.ma(s,w.i.H)}function u(e,t){n(t,h),a.afterRender&&a.afterRender(t,e),h=null}function d(e,n){h=l.createChildContext(e,{as:f,noChildContext:a.noChildContext,extend:function(e){e.$index=n,f&&(e[f+"Index"]=n)}});var i=o(t,e,h);return r(s,"ignoreTargetNode",i,h,a)}var h,f=a.as,p=!1===a.includeDestroyed||w.options.foreachHidesDestroyed&&!a.includeDestroyed;if(p||a.beforeRemove||!w.Pc(i))return w.$((function(){var t=w.a.f(i)||[];void 0===t.length&&(t=[t]),p&&(t=w.a.jb(t,(function(t){return t===e||null===t||!w.a.f(t._destroy)}))),c(t)}),null,{l:s});c(i.v());var m=i.subscribe((function(e){c(i(),e)}),null,"arrayChange");return m.l(s),m};var s=w.a.g.Z(),l=w.a.g.Z();w.c.template={init:function(e,t){var n=w.a.f(t());if("string"==typeof n||"name"in n)w.h.Ea(e);else if("nodes"in n){if(n=n.nodes||[],w.O(n))throw Error('The "nodes" option must be a plain, non-observable array.');var i=n[0]&&n[0].parentNode;i&&w.a.g.get(i,l)||(i=w.a.Yb(n),w.a.g.set(i,l,!0)),new w.C.ia(e).nodes(i)}else{if(!(0<(n=w.h.childNodes(e)).length))throw Error("Anonymous template defined, but no template content was provided");i=w.a.Yb(n),new w.C.ia(e).nodes(i)}return{controlsDescendantBindings:!0}},update:function(t,n,i,r,o){var a=n();i=!0,r=null,"string"==typeof(n=w.a.f(a))?n={}:(a="name"in n?n.name:t,"if"in n&&(i=w.a.f(n.if)),i&&"ifnot"in n&&(i=!w.a.f(n.ifnot)),i&&!a&&(i=!1)),"foreach"in n?r=w.Qd(a,i&&n.foreach||[],n,t,o):i?(i=o,"data"in n&&(i=o.createChildContext(n.data,{as:n.as,noChildContext:n.noChildContext,exportDependencies:!0})),r=w.dc(a,i,n,t)):w.h.Ea(t),o=r,(n=w.a.g.get(t,s))&&"function"==typeof n.s&&n.s(),w.a.g.set(t,s,!o||o.ja&&!o.ja()?e:o)}},w.m.Ra.template=function(e){return 1==(e=w.m.ac(e)).length&&e[0].unknown||w.m.Id(e,"name")?null:"This template engine does not support anonymous templates nested within its templates"},w.h.ea.template=!0}(),w.b("setTemplateEngine",w.gc),w.b("renderTemplate",w.dc),w.a.Kc=function(e,t,n){var i,r,o,a,s;if(e.length&&t.length)for(i=r=0;(!n||i<n)&&(a=e[r]);++r){for(o=0;s=t[o];++o)if(a.value===s.value){a.moved=s.index,s.moved=a.index,t.splice(o,1),i=o=0;break}i+=o}},w.a.Pb=function(){function e(e,t,n,i,r){var o,a,s,l,c,u=Math.min,d=Math.max,h=[],f=e.length,p=t.length,m=p-f||1,g=f+p+1;for(o=0;o<=f;o++)for(l=s,h.push(s=[]),c=u(p,o+m),a=d(0,o-1);a<=c;a++)s[a]=a?o?e[o-1]===t[a-1]?l[a-1]:u(l[a]||g,s[a-1]||g)+1:a+1:o+1;for(u=[],d=[],m=[],o=f,a=p;o||a;)p=h[o][a]-1,a&&p===h[o][a-1]?d.push(u[u.length]={status:n,value:t[--a],index:a}):o&&p===h[o-1][a]?m.push(u[u.length]={status:i,value:e[--o],index:o}):(--a,--o,r.sparse||u.push({status:"retained",value:t[a]}));return w.a.Kc(m,d,!r.dontLimitMoves&&10*f),u.reverse()}return function(t,n,i){return i="boolean"==typeof i?{dontLimitMoves:i}:i||{},n=n||[],(t=t||[]).length<n.length?e(t,n,"added","deleted",i):e(n,t,"deleted","added",i)}}(),w.b("utils.compareArrays",w.a.Pb),function(){function t(t,n,i,r,o){var a=[],s=w.$((function(){var e=n(i,o,w.a.Ua(a,t))||[];0<a.length&&(w.a.Xc(a,e),r&&w.u.G(r,null,[i,e,o])),a.length=0,w.a.Nb(a,e)}),null,{l:t,Sa:function(){return!w.a.kd(a)}});return{Y:a,$:s.ja()?s:e}}var n=w.a.g.Z(),i=w.a.g.Z();w.a.ec=function(r,o,a,s,l,c){function u(e){f={Aa:e,pb:w.ta(C++)},y.push(f),b||T.push(f)}function d(e){f=v[e],C!==f.pb.v()&&S.push(f),f.pb(C++),w.a.Ua(f.Y,r),y.push(f)}function h(e,t){if(e)for(var n=0,i=t.length;n<i;n++)w.a.D(t[n].Y,(function(i){e(i,n,t[n].Aa)}))}void 0===(o=o||[]).length&&(o=[o]),s=s||{};var f,p,m,g,v=w.a.g.get(r,n),b=!v,y=[],x=0,C=0,_=[],k=[],E=[],S=[],T=[],D=0;if(b)w.a.D(o,u);else{if(!c||v&&v._countWaitingForRemove){var $=w.a.Mb(v,(function(e){return e.Aa}));c=w.a.Pb($,o,{dontLimitMoves:s.dontLimitMoves,sparse:!0})}var A,P,j;for($=0;A=c[$];$++)switch(P=A.moved,j=A.index,A.status){case"deleted":for(;x<j;)d(x++);P===e&&((f=v[x]).$&&(f.$.s(),f.$=e),w.a.Ua(f.Y,r).length&&(s.beforeRemove&&(y.push(f),D++,f.Aa===i?f=null:E.push(f)),f&&_.push.apply(_,f.Y))),x++;break;case"added":for(;C<j;)d(x++);P!==e?(k.push(y.length),d(P)):u(A.value)}for(;C<o.length;)d(x++);y._countWaitingForRemove=D}w.a.g.set(r,n,y),h(s.beforeMove,S),w.a.D(_,s.beforeRemove?w.oa:w.removeNode);try{g=r.ownerDocument.activeElement}catch(e){}if(k.length)for(;($=k.shift())!=e;){for(f=y[$],p=e;$;)if((m=y[--$].Y)&&m.length){p=m[m.length-1];break}for(o=0;x=f.Y[o];p=x,o++)w.h.Wb(r,x,p)}for($=0;f=y[$];$++){for(f.Y||w.a.extend(f,t(r,a,f.Aa,l,f.pb)),o=0;x=f.Y[o];p=x,o++)w.h.Wb(r,x,p);!f.Ed&&l&&(l(f.Aa,f.Y,f.pb),f.Ed=!0,p=f.Y[f.Y.length-1])}for(g&&r.ownerDocument.activeElement!=g&&g.focus(),h(s.beforeRemove,E),$=0;$<E.length;++$)E[$].Aa=i;h(s.afterMove,S),h(s.afterAdd,T)}}(),w.b("utils.setDomNodeChildrenFromArrayMapping",w.a.ec),w.ba=function(){this.allowTemplateRewriting=!1},w.ba.prototype=new w.ca,w.ba.prototype.constructor=w.ba,w.ba.prototype.renderTemplateSource=function(e,t,n,i){return(t=9>w.a.W||!e.nodes?null:e.nodes())?w.a.la(t.cloneNode(!0).childNodes):(e=e.text(),w.a.ua(e,i))},w.ba.Ma=new w.ba,w.gc(w.ba.Ma),w.b("nativeTemplateEngine",w.ba),function(){w.$a=function(){var e=this.Hd=function(){if(!r||!r.tmpl)return 0;try{if(0<=r.tmpl.tag.tmpl.open.toString().indexOf("__"))return 2}catch(e){}return 1}();this.renderTemplateSource=function(t,i,o,a){if(a=a||n,o=o||{},2>e)throw Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.");var s=t.data("precompiled");return s||(s=t.text()||"",s=r.template(null,"{{ko_with $item.koBindingContext}}"+s+"{{/ko_with}}"),t.data("precompiled",s)),t=[i.$data],i=r.extend({koBindingContext:i},o.templateOptions),(i=r.tmpl(s,t,i)).appendTo(a.createElement("div")),r.fragments={},i},this.createJavaScriptEvaluatorBlock=function(e){return"{{ko_code ((function() { return "+e+" })()) }}"},this.addTemplate=function(e,t){n.write("<script type='text/html' id='"+e+"'>"+t+"<\/script>")},0<e&&(r.tmpl.tag.ko_code={open:"__.push($1 || '');"},r.tmpl.tag.ko_with={open:"with($1) {",close:"} "})},w.$a.prototype=new w.ca,w.$a.prototype.constructor=w.$a;var e=new w.$a;0<e.Hd&&w.gc(e),w.b("jqueryTmplTemplateEngine",w.$a)}()}))}(),define("pgui.change_password_dialog",["pgui.utils","pgui.localizer","bootstrap"],(function(e,t){window.PhpGenChangePasswordDialogAdminStrategy=function(e){this.onChangePasswordCallback=e,this.initializeDialog=function(){$("#pg-change-password-dialog-header-admin").show(),$("#pg-change-password-dialog-header-user").hide(),$("#pg-change-password-dialog-current-password-form-group").hide()},this.callChangePasswordCallback=function(e,t){return this.onChangePasswordCallback(t)}},window.PhpGenChangePasswordDialogUserStrategy=function(e){this.onChangePasswordCallback=e,this.initializeDialog=function(){$("#pg-change-password-dialog-header-admin").hide(),$("#pg-change-password-dialog-header-user").show(),$("#pg-change-password-dialog-current-password-form-group").show()},this.callChangePasswordCallback=function(e,t){return this.onChangePasswordCallback(e,t)}},window.PhpGenChangePasswordDialog={initialize:function(e){this.dialog=$("#pg-change-password-dialog"),this.userStrategy=e,this.currentPassword=$("#pg-change-password-dialog-current-password"),this.newPassword=$("#pg-change-password-dialog-new-password"),this.confirmedPassword=$("#pg-change-password-dialog-confirmed-password"),this.confirmedPasswordErrorControl=$("#pg-change-password-dialog-confirmed-password-error"),this.dialog.modal("hide"),this.userStrategy.initializeDialog(),$("#pg-change-password-dialog-ok-button").off("click").on("click",function(e){this.onChangePasswordClick(e)}.bind(this))},open:function(){this.clearPasswordElements(),this.confirmedPasswordErrorControl.hide(),this.dialog.modal("show"),this.dialog.find("input:visible:first").focus()},clearPasswordElements:function(){this.currentPassword.val(""),this.newPassword.val(""),this.confirmedPassword.val("")},onChangePasswordClick:function(n){n.preventDefault(),PhpGenPasswordDialogUtils.validateConfirmedPassword(this.newPassword.val(),this.confirmedPassword.val(),this.confirmedPasswordErrorControl)&&this.userStrategy.callChangePasswordCallback(this.currentPassword.val(),this.newPassword.val()).fail((function(t){e.showErrorMessage(t)})).done(function(){this.dialog.modal("hide"),e.showSuccessMessage(t.getString("PasswordChanged"))}.bind(this))}}})),function(){function e(e,t,r){if(i)for(var o=i.length;o--;){var a=i[o];n.call(e,a)&&t.call(r,a,e[a])}}this.MooTools={version:"1.6.0",build:"529422872adfff401b901b8b6c7ca5114ee95e2b"};var t=this.typeOf=function(e){if(null==e)return"null";if(null!=e.$family)return e.$family();if(e.nodeName){if(1==e.nodeType)return"element";if(3==e.nodeType)return/\S/.test(e.nodeValue)?"textnode":"whitespace"}else if("number"==typeof e.length){if("callee"in e)return"arguments";if("item"in e)return"collection"}return typeof e},n=(this.instanceOf=function(e,t){if(null==e)return!1;for(var n=e.$constructor||e.constructor;n;){if(n===t)return!0;n=n.parent}return!!e.hasOwnProperty&&e instanceof t},Object.prototype.hasOwnProperty),i=!0;for(var r in{toString:1})i=null;i&&(i=["hasOwnProperty","valueOf","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","constructor"]);var o=this.Function;o.prototype.overloadSetter=function(t){var n=this;return function(i,r){if(null==i)return this;if(t||"string"!=typeof i){for(var o in i)n.call(this,o,i[o]);e(i,n,this)}else n.call(this,i,r);return this}},o.prototype.overloadGetter=function(e){var t=this;return function(n){var i,r;if("string"!=typeof n?i=n:arguments.length>1?i=arguments:e&&(i=[n]),i){r={};for(var o=0;o<i.length;o++)r[i[o]]=t.call(this,i[o])}else r=t.call(this,n);return r}},o.prototype.extend=function(e,t){this[e]=t}.overloadSetter(),o.prototype.implement=function(e,t){this.prototype[e]=t}.overloadSetter();var a=Array.prototype.slice;Array.convert=function(e){return null==e?[]:s.isEnumerable(e)&&"string"!=typeof e?"array"==t(e)?e:a.call(e):[e]},o.convert=function(e){return"function"==t(e)?e:function(){return e}},Number.convert=function(e){var t=parseFloat(e);return isFinite(t)?t:null},String.convert=function(e){return e+""},o.from=o.convert,Number.from=Number.convert,String.from=String.convert,o.implement({hide:function(){return this.$hidden=!0,this},protect:function(){return this.$protected=!0,this}});var s=this.Type=function(e,n){if(e){var i=e.toLowerCase();s["is"+e]=function(e){return t(e)==i},null!=n&&(n.prototype.$family=function(){return i}.hide())}return null==n?null:(n.extend(this),n.$constructor=s,n.prototype.$constructor=n,n)},l=Object.prototype.toString;s.isEnumerable=function(e){return null!=e&&"number"==typeof e.length&&"[object Function]"!=l.call(e)};var c={},u=function(e){var n=t(e.prototype);return c[n]||(c[n]=[])},d=function(e,n){if(!n||!n.$hidden){for(var i=u(this),r=0;r<i.length;r++){var o=i[r];"type"==t(o)?d.call(o,e,n):o.call(this,e,n)}var s=this.prototype[e];null!=s&&s.$protected||(this.prototype[e]=n),null==this[e]&&"function"==t(n)&&h.call(this,e,(function(e){return n.apply(e,a.call(arguments,1))}))}},h=function(e,t){if(!t||!t.$hidden){var n=this[e];null!=n&&n.$protected||(this[e]=t)}};s.implement({implement:d.overloadSetter(),extend:h.overloadSetter(),alias:function(e,t){d.call(this,e,this.prototype[t])}.overloadSetter(),mirror:function(e){return u(this).push(e),this}}),new s("Type",s);var f=function(e,t,n){var i=t!=Object,r=t.prototype;i&&(t=new s(e,t));for(var o=0,a=n.length;a>o;o++){var l=n[o],c=t[l],u=r[l];c&&c.protect(),i&&u&&t.implement(l,u.protect())}if(i){var d=r.propertyIsEnumerable(n[0]);t.forEachMethod=function(e){if(!d)for(var t=0,i=n.length;i>t;t++)e.call(r,r[n[t]],n[t]);for(var o in r)e.call(r,r[o],o)}}return f};f("String",String,["charAt","charCodeAt","concat","contains","indexOf","lastIndexOf","match","quote","replace","search","slice","split","substr","substring","trim","toLowerCase","toUpperCase"])("Array",Array,["pop","push","reverse","shift","sort","splice","unshift","concat","join","slice","indexOf","lastIndexOf","filter","forEach","every","map","some","reduce","reduceRight","contains"])("Number",Number,["toExponential","toFixed","toLocaleString","toPrecision"])("Function",o,["apply","call","bind"])("RegExp",RegExp,["exec","test"])("Object",Object,["create","defineProperty","defineProperties","keys","getPrototypeOf","getOwnPropertyDescriptor","getOwnPropertyNames","preventExtensions","isExtensible","seal","isSealed","freeze","isFrozen"])("Date",Date,["now"]),Object.extend=h.overloadSetter(),Date.extend("now",(function(){return+new Date})),new s("Boolean",Boolean),Number.prototype.$family=function(){return isFinite(this)?"number":"null"}.hide(),Number.extend("random",(function(e,t){return Math.floor(Math.random()*(t-e+1)+e)})),Array.implement({forEach:function(e,t){for(var n=0,i=this.length;i>n;n++)n in this&&e.call(t,this[n],n,this)},each:function(e,t){return Array.forEach(this,e,t),this}}),Object.extend({keys:function(t){var i=[];for(var r in t)n.call(t,r)&&i.push(r);return e(t,(function(e){i.push(e)})),i},forEach:function(e,t,n){Object.keys(e).forEach((function(i){t.call(n,e[i],i,e)}))}}),Object.each=Object.forEach;var p=function(e){switch(t(e)){case"array":return e.clone();case"object":return Object.clone(e);default:return e}};Array.implement("clone",(function(){for(var e=this.length,t=new Array(e);e--;)t[e]=p(this[e]);return t}));var m=function(e,n,i){switch(t(i)){case"object":"object"==t(e[n])?Object.merge(e[n],i):e[n]=Object.clone(i);break;case"array":e[n]=i.clone();break;default:e[n]=i}return e};Object.extend({merge:function(e,n,i){if("string"==t(n))return m(e,n,i);for(var r=1,o=arguments.length;o>r;r++){var a=arguments[r];for(var s in a)m(e,s,a[s])}return e},clone:function(e){var t={};for(var n in e)t[n]=p(e[n]);return t},append:function(e){for(var t=1,n=arguments.length;n>t;t++){var i=arguments[t]||{};for(var r in i)e[r]=i[r]}return e}}),["Object","WhiteSpace","TextNode","Collection","Arguments"].each((function(e){new s(e)}));var g=Date.now();String.extend("uniqueID",(function(){return(g++).toString(36)}))}(),Array.implement({every:function(e,t){for(var n=0,i=this.length>>>0;i>n;n++)if(n in this&&!e.call(t,this[n],n,this))return!1;return!0},filter:function(e,t){for(var n,i=[],r=0,o=this.length>>>0;o>r;r++)r in this&&(n=this[r],e.call(t,n,r,this)&&i.push(n));return i},indexOf:function(e,t){for(var n=this.length>>>0,i=0>t?Math.max(0,n+t):t||0;n>i;i++)if(this[i]===e)return i;return-1},map:function(e,t){for(var n=this.length>>>0,i=Array(n),r=0;n>r;r++)r in this&&(i[r]=e.call(t,this[r],r,this));return i},some:function(e,t){for(var n=0,i=this.length>>>0;i>n;n++)if(n in this&&e.call(t,this[n],n,this))return!0;return!1},clean:function(){return this.filter((function(e){return null!=e}))},invoke:function(e){var t=Array.slice(arguments,1);return this.map((function(n){return n[e].apply(n,t)}))},associate:function(e){for(var t={},n=Math.min(this.length,e.length),i=0;n>i;i++)t[e[i]]=this[i];return t},link:function(e){for(var t={},n=0,i=this.length;i>n;n++)for(var r in e)if(e[r](this[n])){t[r]=this[n],delete e[r];break}return t},contains:function(e,t){return-1!=this.indexOf(e,t)},append:function(e){return this.push.apply(this,e),this},getLast:function(){return this.length?this[this.length-1]:null},getRandom:function(){return this.length?this[Number.random(0,this.length-1)]:null},include:function(e){return this.contains(e)||this.push(e),this},combine:function(e){for(var t=0,n=e.length;n>t;t++)this.include(e[t]);return this},erase:function(e){for(var t=this.length;t--;)this[t]===e&&this.splice(t,1);return this},empty:function(){return this.length=0,this},flatten:function(){for(var e=[],t=0,n=this.length;n>t;t++){var i=typeOf(this[t]);"null"!=i&&(e=e.concat("array"==i||"collection"==i||"arguments"==i||instanceOf(this[t],Array)?Array.flatten(this[t]):this[t]))}return e},pick:function(){for(var e=0,t=this.length;t>e;e++)if(null!=this[e])return this[e];return null},hexToRgb:function(e){if(3!=this.length)return null;var t=this.map((function(e){return 1==e.length&&(e+=e),parseInt(e,16)}));return e?t:"rgb("+t+")"},rgbToHex:function(e){if(this.length<3)return null;if(4==this.length&&0==this[3]&&!e)return"transparent";for(var t=[],n=0;3>n;n++){var i=(this[n]-0).toString(16);t.push(1==i.length?"0"+i:i)}return e?t:"#"+t.join("")}}),String.implement({contains:function(e,t){return(t?String(this).slice(t):String(this)).indexOf(e)>-1},test:function(e,t){return("regexp"==typeOf(e)?e:new RegExp(""+e,t)).test(this)},trim:function(){return String(this).replace(/^\s+|\s+$/g,"")},clean:function(){return String(this).replace(/\s+/g," ").trim()},camelCase:function(){return String(this).replace(/-\D/g,(function(e){return e.charAt(1).toUpperCase()}))},hyphenate:function(){return String(this).replace(/[A-Z]/g,(function(e){return"-"+e.charAt(0).toLowerCase()}))},capitalize:function(){return String(this).replace(/\b[a-z]/g,(function(e){return e.toUpperCase()}))},escapeRegExp:function(){return String(this).replace(/([-.*+?^${}()|[\]\/\\])/g,"\\$1")},toInt:function(e){return parseInt(this,e||10)},toFloat:function(){return parseFloat(this)},hexToRgb:function(e){var t=String(this).match(/^#?(\w{1,2})(\w{1,2})(\w{1,2})$/);return t?t.slice(1).hexToRgb(e):null},rgbToHex:function(e){var t=String(this).match(/\d{1,3}/g);return t?t.rgbToHex(e):null},substitute:function(e,t){return String(this).replace(t||/\\?\{([^{}]+)\}/g,(function(t,n){return"\\"==t.charAt(0)?t.slice(1):null!=e[n]?e[n]:""}))}}),Number.implement({limit:function(e,t){return Math.min(t,Math.max(e,this))},round:function(e){return e=Math.pow(10,e||0).toFixed(0>e?-e:0),Math.round(this*e)/e},times:function(e,t){for(var n=0;this>n;n++)e.call(t,n,this)},toFloat:function(){return parseFloat(this)},toInt:function(e){return parseInt(this,e||10)}}),Number.alias("each","times"),function(e){var t={};["abs","acos","asin","atan","atan2","ceil","cos","exp","floor","log","max","min","pow","sin","sqrt","tan"].each((function(e){Number[e]||(t[e]=function(){return Math[e].apply(null,[this].concat(Array.convert(arguments)))})})),Number.implement(t)}(),Function.extend({attempt:function(){for(var e=0,t=arguments.length;t>e;e++)try{return arguments[e]()}catch(e){}return null}}),Function.implement({attempt:function(e,t){try{return this.apply(t,Array.convert(e))}catch(e){}return null},bind:function(e){var t=this,n=arguments.length>1?Array.slice(arguments,1):null,i=function(){},r=function(){var o=e,a=arguments.length;this instanceof r&&(i.prototype=t.prototype,o=new i);var s=n||a?t.apply(o,n&&a?n.concat(Array.slice(arguments)):n||arguments):t.call(o);return o==e?s:o};return r},pass:function(e,t){var n=this;return null!=e&&(e=Array.convert(e)),function(){return n.apply(t,e||arguments)}},delay:function(e,t,n){return setTimeout(this.pass(null==n?[]:n,t),e)},periodical:function(e,t,n){return setInterval(this.pass(null==n?[]:n,t),e)}}),Object.extend({subset:function(e,t){for(var n={},i=0,r=t.length;r>i;i++){var o=t[i];o in e&&(n[o]=e[o])}return n},map:function(e,t,n){for(var i={},r=Object.keys(e),o=0;o<r.length;o++){var a=r[o];i[a]=t.call(n,e[a],a,e)}return i},filter:function(e,t,n){for(var i={},r=Object.keys(e),o=0;o<r.length;o++){var a=r[o],s=e[a];t.call(n,s,a,e)&&(i[a]=s)}return i},every:function(e,t,n){for(var i=Object.keys(e),r=0;r<i.length;r++){var o=i[r];if(!t.call(n,e[o],o))return!1}return!0},some:function(e,t,n){for(var i=Object.keys(e),r=0;r<i.length;r++){var o=i[r];if(t.call(n,e[o],o))return!0}return!1},values:function(e){for(var t=[],n=Object.keys(e),i=0;i<n.length;i++){var r=n[i];t.push(e[r])}return t},getLength:function(e){return Object.keys(e).length},keyOf:function(e,t){for(var n=Object.keys(e),i=0;i<n.length;i++){var r=n[i];if(e[r]===t)return r}return null},contains:function(e,t){return null!=Object.keyOf(e,t)},toQueryString:function(e,t){var n=[];return Object.each(e,(function(e,i){var r;switch(t&&(i=t+"["+i+"]"),typeOf(e)){case"object":r=Object.toQueryString(e,i);break;case"array":var o={};e.each((function(e,t){o[t]=e})),r=Object.toQueryString(o,i);break;default:r=i+"="+encodeURIComponent(e)}null!=e&&n.push(r)})),n.join("&")}}),function(){var e,t,n,i=this.document,r=i.window=this,o=function(e,t){e=e.toLowerCase(),t=t?t.toLowerCase():"";var n=e.match(/(edge)[\s\/:]([\w\d\.]+)/);return n||(n=e.match(/(opera|ie|firefox|chrome|trident|crios|version)[\s\/:]([\w\d\.]+)?.*?(safari|(?:rv[\s\/:]|version[\s\/:])([\w\d\.]+)|$)/)||[null,"unknown",0]),"trident"==n[1]?(n[1]="ie",n[4]&&(n[2]=n[4])):"crios"==n[1]&&(n[1]="chrome"),"win"==(t=e.match(/ip(?:ad|od|hone)/)?"ios":(e.match(/(?:webos|android)/)||e.match(/mac|win|linux/)||["other"])[0])&&(t="windows"),{extend:Function.prototype.extend,name:"version"==n[1]?n[3]:n[1],version:parseFloat("opera"==n[1]&&n[4]?n[4]:n[2]),platform:t}},a=this.Browser=o(navigator.userAgent,navigator.platform);if("ie"==a.name&&i.documentMode&&(a.version=i.documentMode),a.extend({Features:{xpath:!!i.evaluate,air:!!r.runtime,query:!!i.querySelector,json:!!r.JSON},parseUA:o}),a.Request=(e=function(){return new XMLHttpRequest},t=function(){return new ActiveXObject("MSXML2.XMLHTTP")},n=function(){return new ActiveXObject("Microsoft.XMLHTTP")},Function.attempt((function(){return e(),e}),(function(){return t(),t}),(function(){return n(),n}))),a.Features.xhr=!!a.Request,a.exec=function(e){if(!e)return e;if(r.execScript)r.execScript(e);else{var t=i.createElement("script");t.setAttribute("type","text/javascript"),t.text=e,i.head.appendChild(t),i.head.removeChild(t)}return e},String.implement("stripScripts",(function(e){var t="",n=this.replace(/<script[^>]*>([\s\S]*?)<\/script>/gi,(function(e,n){return t+=n+"\n",""}));return!0===e?a.exec(t):"function"==typeOf(e)&&e(t,n),n})),a.extend({Document:this.Document,Window:this.Window,Element:this.Element,Event:this.Event}),this.Window=this.$constructor=new Type("Window",(function(){})),this.$family=Function.convert("window").hide(),Window.mirror((function(e,t){r[e]=t})),this.Document=i.$constructor=new Type("Document",(function(){})),i.$family=Function.convert("document").hide(),Document.mirror((function(e,t){i[e]=t})),i.html=i.documentElement,i.head||(i.head=i.getElementsByTagName("head")[0]),i.execCommand)try{i.execCommand("BackgroundImageCache",!1,!0)}catch(e){}if(this.attachEvent&&!this.addEventListener){var s=function(){this.detachEvent("onunload",s),i.head=i.html=i.window=null,r=this.Window=i=null};this.attachEvent("onunload",s)}var l=Array.convert;try{l(i.html.childNodes)}catch(e){Array.convert=function(e){if("string"!=typeof e&&Type.isEnumerable(e)&&"array"!=typeOf(e)){for(var t=e.length,n=new Array(t);t--;)n[t]=e[t];return n}return l(e)};var c=Array.prototype,u=c.slice;["pop","push","reverse","shift","sort","splice","unshift","concat","join","slice"].each((function(e){var t=c[e];Array[e]=function(e){return t.apply(Array.convert(e),u.call(arguments,1))}}))}}(),function(){var e={},t=this.DOMEvent=new Type("DOMEvent",(function(t,n){if(n||(n=window),(t=t||n.event).$extended)return t;this.event=t,this.$extended=!0,this.shift=t.shiftKey,this.control=t.ctrlKey,this.alt=t.altKey,this.meta=t.metaKey;for(var i=this.type=t.type,r=t.target||t.srcElement;r&&3==r.nodeType;)r=r.parentNode;if(this.target=document.id(r),0==i.indexOf("key")){var o=this.code=t.which||t.keyCode;this.shift&&"keypress"==i||(this.key=e[o]),("keydown"==i||"keyup"==i)&&(o>111&&124>o?this.key="f"+(o-111):o>95&&106>o&&(this.key=o-96)),null==this.key&&(this.key=String.fromCharCode(o).toLowerCase())}else if("click"==i||"dblclick"==i||"contextmenu"==i||"wheel"==i||"DOMMouseScroll"==i||0==i.indexOf("mouse")){var a=n.document;if(a=a.compatMode&&"CSS1Compat"!=a.compatMode?a.body:a.html,this.page={x:null!=t.pageX?t.pageX:t.clientX+a.scrollLeft,y:null!=t.pageY?t.pageY:t.clientY+a.scrollTop},this.client={x:null!=t.pageX?t.pageX-n.pageXOffset:t.clientX,y:null!=t.pageY?t.pageY-n.pageYOffset:t.clientY},("DOMMouseScroll"==i||"wheel"==i||"mousewheel"==i)&&(this.wheel=function(e){var t;if(e.wheelDelta)t=e.wheelDelta%120==0?e.wheelDelta/120:e.wheelDelta/12;else{var n=e.deltaY||e.detail||0;t=-(n%3==0?n/3:10*n)}return t}(t)),this.rightClick=3==t.which||2==t.button,"mouseover"==i||"mouseout"==i||"mouseenter"==i||"mouseleave"==i){for(var s="mouseover"==i||"mouseenter"==i,l=t.relatedTarget||t[(s?"from":"to")+"Element"];l&&3==l.nodeType;)l=l.parentNode;this.relatedTarget=document.id(l)}}else if(0==i.indexOf("touch")||0==i.indexOf("gesture")){this.rotation=t.rotation,this.scale=t.scale,this.targetTouches=t.targetTouches,this.changedTouches=t.changedTouches;var c=this.touches=t.touches;if(c&&c[0]){var u=c[0];this.page={x:u.pageX,y:u.pageY},this.client={x:u.clientX,y:u.clientY}}}this.client||(this.client={}),this.page||(this.page={})}));t.implement({stop:function(){return this.preventDefault().stopPropagation()},stopPropagation:function(){return this.event.stopPropagation?this.event.stopPropagation():this.event.cancelBubble=!0,this},preventDefault:function(){return this.event.preventDefault?this.event.preventDefault():this.event.returnValue=!1,this}}),t.defineKey=function(t,n){return e[t]=n,this},t.defineKeys=t.defineKey.overloadSetter(!0),t.defineKeys({38:"up",40:"down",37:"left",39:"right",27:"esc",32:"space",8:"backspace",9:"tab",46:"delete",13:"enter"})}(),function(){var e=this.Class=new Type("Class",(function(i){instanceOf(i,Function)&&(i={initialize:i});var r=function(){if(n(this),r.$prototyping)return this;this.$caller=null,this.$family=null;var e=this.initialize?this.initialize.apply(this,arguments):this;return this.$caller=this.caller=null,e}.extend(this).implement(i);return r.$constructor=e,r.prototype.$constructor=r,r.prototype.parent=t,r})),t=function(){if(!this.$caller)throw new Error('The method "parent" cannot be called.');var e=this.$caller.$name,t=this.$caller.$owner.parent,n=t?t.prototype[e]:null;if(!n)throw new Error('The method "'+e+'" has no parent.');return n.apply(this,arguments)},n=function(e){for(var t in e){var i=e[t];switch(typeOf(i)){case"object":var r=function(){};r.prototype=i,e[t]=n(new r);break;case"array":e[t]=i.clone()}}return e},i=function(t,n,i){if(e.Mutators.hasOwnProperty(t)&&null==(n=e.Mutators[t].call(this,n)))return this;if("function"==typeOf(n)){if(n.$hidden)return this;this.prototype[t]=i?n:function(e,t,n){n.$origin&&(n=n.$origin);var i=function(){if(n.$protected&&null==this.$caller)throw new Error('The method "'+t+'" cannot be called.');var e=this.caller,r=this.$caller;this.caller=r,this.$caller=i;var o=n.apply(this,arguments);return this.$caller=r,this.caller=e,o}.extend({$owner:e,$origin:n,$name:t});return i}(this,t,n)}else Object.merge(this.prototype,t,n);return this};e.implement("implement",i.overloadSetter()),e.Mutators={Extends:function(e){this.parent=e,this.prototype=function(e){e.$prototyping=!0;var t=new e;return delete e.$prototyping,t}(e)},Implements:function(e){Array.convert(e).each((function(e){var t=new e;for(var n in t)i.call(this,n,t[n],!0)}),this)}}}(),function(){this.Chain=new Class({$chain:[],chain:function(){return this.$chain.append(Array.flatten(arguments)),this},callChain:function(){return!!this.$chain.length&&this.$chain.shift().apply(this,arguments)},clearChain:function(){return this.$chain.empty(),this}});var e=function(e){return e.replace(/^on([A-Z])/,(function(e,t){return t.toLowerCase()}))};this.Events=new Class({$events:{},addEvent:function(t,n,i){return t=e(t),this.$events[t]=(this.$events[t]||[]).include(n),i&&(n.internal=!0),this},addEvents:function(e){for(var t in e)this.addEvent(t,e[t]);return this},fireEvent:function(t,n,i){t=e(t);var r=this.$events[t];return r?(n=Array.convert(n),r.each((function(e){i?e.delay(i,this,n):e.apply(this,n)}),this),this):this},removeEvent:function(t,n){t=e(t);var i=this.$events[t];if(i&&!n.internal){var r=i.indexOf(n);-1!=r&&delete i[r]}return this},removeEvents:function(t){var n;if("object"==typeOf(t)){for(n in t)this.removeEvent(n,t[n]);return this}for(n in t&&(t=e(t)),this.$events)if(!t||t==n)for(var i=this.$events[n],r=i.length;r--;)r in i&&this.removeEvent(n,i[r]);return this}}),this.Options=new Class({setOptions:function(){var e=this.options=Object.merge.apply(null,[{},this.options].append(arguments));if(this.addEvent)for(var t in e)"function"==typeOf(e[t])&&/^on[A-Z]/.test(t)&&(this.addEvent(t,e[t]),delete e[t]);return this}})}(),function(){function e(i,r){if(i.$thenableState===a)if(i===r)n(i,new TypeError("Tried to resolve a thenable with itself."));else if(!r||"object"!=typeof r&&"function"!=typeof r)t(i,r);else{var s;try{s=r.then}catch(e){n(i,e)}if("function"==typeof s){var l=!1;o((function(){try{s.call(r,(function(t){l||(l=!0,e(i,t))}),(function(e){l||(l=!0,n(i,e))}))}catch(e){l||(l=!0,n(i,e))}}))}else t(i,r)}}function t(e,t){e.$thenableState===a&&(e.$thenableResult=t,e.$thenableState=s,i(e))}function n(e,t){e.$thenableState===a&&(e.$thenableResult=t,e.$thenableState=l,i(e))}function i(e){var t,n=e.$thenableState,i=e.$thenableResult,a=e.$thenableReactions;n===s?(e.$thenableReactions=[],t="fulfillHandler"):n==l&&(e.$thenableReactions=[],t="rejectHandler"),t&&o(r.pass([i,a,t]))}function r(t,i,r){for(var o=0,a=i.length;a>o;++o){var s=i[o],l=s[r];if("Identity"===l)e(s.thenable,t);else if("Thrower"===l)n(s.thenable,t);else try{e(s.thenable,l(t))}catch(e){n(s.thenable,e)}}}var o,a=0,s=1,l=2,c=Class.Thenable=new Class({$thenableState:a,$thenableResult:null,$thenableReactions:[],resolve:function(t){return e(this,t),this},reject:function(e){return n(this,e),this},getThenableState:function(){switch(this.$thenableState){case a:return"pending";case s:return"fulfilled";case l:return"rejected"}},resetThenable:function(e){return n(this,e),(t=this).$thenableState!==a&&(t.$thenableResult=null,t.$thenableState=a),this;var t},then:function(e,t){"function"!=typeof e&&(e="Identity"),"function"!=typeof t&&(t="Thrower");var n=new c;return this.$thenableReactions.push({thenable:n,fulfillHandler:e,rejectHandler:t}),this.$thenableState!==a&&i(this),n},catch:function(e){return this.then(null,e)}});c.extend({resolve:function(t){var n;return t instanceof c?n=t:e(n=new c,t),n},reject:function(e){var t=new c;return n(t,e),t}}),o="undefined"!=typeof process&&"function"==typeof process.nextTick?process.nextTick:"undefined"!=typeof setImmediate?setImmediate:function(e){setTimeout(e,0)}}(),function(){function e(e,o,a,l,u,h,f,p,m,g,v,b,y,w,x,C){if((o||-1===n)&&(t.expressions[++n]=[],i=-1,o))return"";if(a||l||-1===i){a=a||" ";var _=t.expressions[n];r&&_[i]&&(_[i].reverseCombinator=c(a)),_[++i]={combinator:a,tag:"*"}}var k=t.expressions[n][i];if(u)k.tag=u.replace(s,"");else if(h)k.id=h.replace(s,"");else if(f)f=f.replace(s,""),k.classList||(k.classList=[]),k.classes||(k.classes=[]),k.classList.push(f),k.classes.push({value:f,regexp:new RegExp("(^|\\s)"+d(f)+"(\\s|$)")});else if(y)C=(C=C||x)?C.replace(s,""):null,k.pseudos||(k.pseudos=[]),k.pseudos.push({key:y.replace(s,""),value:C,type:1==b.length?"class":"element"});else if(p){var E,S;switch(p=p.replace(s,""),v=(v||"").replace(s,""),m){case"^=":S=new RegExp("^"+d(v));break;case"$=":S=new RegExp(d(v)+"$");break;case"~=":S=new RegExp("(^|\\s)"+d(v)+"(\\s|$)");break;case"|=":S=new RegExp("^"+d(v)+"(-|$)");break;case"=":E=function(e){return v==e};break;case"*=":E=function(e){return e&&e.indexOf(v)>-1};break;case"!=":E=function(e){return v!=e};break;default:E=function(e){return!!e}}""==v&&/^[*$^]=$/.test(m)&&(E=function(){return!1}),E||(E=function(e){return e&&S.test(e)}),k.attributes||(k.attributes=[]),k.attributes.push({key:p,operator:m,value:v,test:E})}return""}var t,n,i,r,o={},a={},s=/\\/g,l=function(i,s){if(null==i)return null;if(!0===i.Slick)return i;i=(""+i).replace(/^\s+|\s+$/g,"");var c=(r=!!s)?a:o;if(c[i])return c[i];for(t={Slick:!0,expressions:[],raw:i,reverse:function(){return l(this.raw,!0)}},n=-1;i!=(i=i.replace(h,e)););return t.length=t.expressions.length,c[t.raw]=r?u(t):t},c=function(e){return"!"===e?" ":" "===e?"!":/^!/.test(e)?e.replace(/^!/,""):"!"+e},u=function(e){for(var t=e.expressions,n=0;n<t.length;n++){for(var i=t[n],r={parts:[],tag:"*",combinator:c(i[0].combinator)},o=0;o<i.length;o++){var a=i[o];a.reverseCombinator||(a.reverseCombinator=" "),a.combinator=a.reverseCombinator,delete a.reverseCombinator}i.reverse().push(r)}return e},d=function(e){return e.replace(/[-[\]{}()*+?.\\^$|,#\s]/g,(function(e){return"\\"+e}))},h=new RegExp("^(?:\\s*(,)\\s*|\\s*(<combinator>+)\\s*|(\\s+)|(<unicode>+|\\*)|\\#(<unicode>+)|\\.(<unicode>+)|\\[\\s*(<unicode1>+)(?:\\s*([*^$!~|]?=)(?:\\s*(?:([\"']?)(.*?)\\9)))?\\s*\\](?!\\])|(:+)(<unicode>+)(?:\\((?:(?:([\"'])([^\\13]*)\\13)|((?:\\([^)]+\\)|[^()]*)+))\\))?)".replace(/<combinator>/,"["+d(">+~`!@$%^&={}\\;</")+"]").replace(/<unicode>/g,"(?:[\\w\\u00a1-\\uFFFF-]|\\\\[^\\s0-9a-f])").replace(/<unicode1>/g,"(?:[:\\w\\u00a1-\\uFFFF-]|\\\\[^\\s0-9a-f])")),f=this.Slick||{};f.parse=function(e){return l(e)},f.escapeRegExp=d,this.Slick||(this.Slick=f)}.apply("undefined"!=typeof exports?exports:this),function(){var e={},t={},n=Object.prototype.toString;e.isNativeCode=function(e){return/\{\s*\[native code\]\s*\}/.test(""+e)},e.isXML=function(e){return!!e.xmlVersion||!!e.xml||"[object XMLDocument]"==n.call(e)||9==e.nodeType&&"HTML"!=e.documentElement.nodeName},e.setDocument=function(e){var n=e.nodeType;if(9==n);else if(n)e=e.ownerDocument;else{if(!e.navigator)return;e=e.document}if(this.document!==e){this.document=e;var i,r=e.documentElement,o=this.getUIDXML(r),a=t[o];if(a)for(i in a)this[i]=a[i];else{(a=t[o]={}).root=r,a.isXMLDocument=this.isXML(e),a.brokenStarGEBTN=a.starSelectsClosedQSA=a.idGetsName=a.brokenMixedCaseQSA=a.brokenGEBCN=a.brokenCheckedQSA=a.brokenEmptyAttributeQSA=a.isHTMLDocument=a.nativeMatchesSelector=!1;var s,l,c,u,d,h,f="slick_uniqueid",p=e.createElement("div"),m=e.body||e.getElementsByTagName("body")[0]||r;m.appendChild(p);try{p.innerHTML='<a id="'+f+'"></a>',a.isHTMLDocument=!!e.getElementById(f)}catch(e){}if(a.isHTMLDocument){p.style.display="none",p.appendChild(e.createComment("")),l=p.getElementsByTagName("*").length>1;try{p.innerHTML="foo</foo>",s=(h=p.getElementsByTagName("*"))&&!!h.length&&"/"==h[0].nodeName.charAt(0)}catch(e){}a.brokenStarGEBTN=l||s;try{p.innerHTML='<a name="'+f+'"></a><b id="'+f+'"></b>',a.idGetsName=e.getElementById(f)===p.firstChild}catch(e){}if(p.getElementsByClassName){try{p.innerHTML='<a class="f"></a><a class="b"></a>',p.getElementsByClassName("b").length,p.firstChild.className="b",u=2!=p.getElementsByClassName("b").length}catch(e){}try{p.innerHTML='<a class="a"></a><a class="f b a"></a>',c=2!=p.getElementsByClassName("a").length}catch(e){}a.brokenGEBCN=u||c}if(p.querySelectorAll){try{p.innerHTML="foo</foo>",h=p.querySelectorAll("*"),a.starSelectsClosedQSA=h&&!!h.length&&"/"==h[0].nodeName.charAt(0)}catch(e){}try{p.innerHTML='<a class="MiX"></a>',a.brokenMixedCaseQSA=!p.querySelectorAll(".MiX").length}catch(e){}try{p.innerHTML='<select><option selected="selected">a</option></select>',a.brokenCheckedQSA=0==p.querySelectorAll(":checked").length}catch(e){}try{p.innerHTML='<a class=""></a>',a.brokenEmptyAttributeQSA=0!=p.querySelectorAll('[class*=""]').length}catch(e){}}try{p.innerHTML='<form action="s"><input id="action"/></form>',d="s"!=p.firstChild.getAttribute("action")}catch(e){}if(a.nativeMatchesSelector=r.matches||r.mozMatchesSelector||r.webkitMatchesSelector,a.nativeMatchesSelector)try{a.nativeMatchesSelector.call(r,":slick"),a.nativeMatchesSelector=null}catch(e){}}try{r.slick_expando=1,delete r.slick_expando,a.getUID=this.getUIDHTML}catch(e){a.getUID=this.getUIDXML}m.removeChild(p),p=h=m=null,a.getAttribute=a.isHTMLDocument&&d?function(e,t){var n=this.attributeGetters[t];if(n)return n.call(e);var i=e.getAttributeNode(t);return i?i.nodeValue:null}:function(e,t){var n=this.attributeGetters[t];return n?n.call(e):e.getAttribute(t)},a.hasAttribute=r&&this.isNativeCode(r.hasAttribute)?function(e,t){return e.hasAttribute(t)}:function(e,t){return!(!(e=e.getAttributeNode(t))||!e.specified&&!e.nodeValue)};var g=r&&this.isNativeCode(r.contains),v=e&&this.isNativeCode(e.contains);for(i in a.contains=g&&v?function(e,t){return e.contains(t)}:g&&!v?function(t,n){return t===n||(t===e?e.documentElement:t).contains(n)}:r&&r.compareDocumentPosition?function(e,t){return e===t||!!(16&e.compareDocumentPosition(t))}:function(e,t){if(t)do{if(t===e)return!0}while(t=t.parentNode);return!1},a.documentSorter=r.compareDocumentPosition?function(e,t){return e.compareDocumentPosition&&t.compareDocumentPosition?4&e.compareDocumentPosition(t)?-1:e===t?0:1:0}:"sourceIndex"in r?function(e,t){return e.sourceIndex&&t.sourceIndex?e.sourceIndex-t.sourceIndex:0}:e.createRange?function(e,t){if(!e.ownerDocument||!t.ownerDocument)return 0;var n=e.ownerDocument.createRange(),i=t.ownerDocument.createRange();return n.setStart(e,0),n.setEnd(e,0),i.setStart(t,0),i.setEnd(t,0),n.compareBoundaryPoints(Range.START_TO_END,i)}:null,r=null,a)this[i]=a[i]}}};var i=/^([#.]?)((?:[\w-]+|\*))$/,r=/\[.+[*$^]=(?:""|'')?\]/,o={};e.search=function(e,t,n,a){var s=this.found=a?null:n||[];if(!e)return s;if(e.navigator)e=e.document;else if(!e.nodeType)return s;var l,c,u,h,f=this.uniques={},p=!(!n||!n.length),m=9==e.nodeType;if(this.document!==(m?e:e.ownerDocument)&&this.setDocument(e),p)for(c=s.length;c--;)f[this.getUID(s[c])]=!0;if("string"==typeof t){var g=t.match(i);e:if(g){var v=g[1],b=g[2];if(v){if("#"==v){if(!this.isHTMLDocument||!m)break e;if(!(u=e.getElementById(b)))return s;if(this.idGetsName&&u.getAttributeNode("id").nodeValue!=b)break e;if(a)return u||null;p&&f[this.getUID(u)]||s.push(u)}else if("."==v){if(!this.isHTMLDocument||(!e.getElementsByClassName||this.brokenGEBCN)&&e.querySelectorAll)break e;if(e.getElementsByClassName&&!this.brokenGEBCN){if(h=e.getElementsByClassName(b),a)return h[0]||null;for(c=0;u=h[c++];)p&&f[this.getUID(u)]||s.push(u)}else{var y=new RegExp("(^|\\s)"+d.escapeRegExp(b)+"(\\s|$)");for(h=e.getElementsByTagName("*"),c=0;u=h[c++];)if(className=u.className,className&&y.test(className)){if(a)return u;p&&f[this.getUID(u)]||s.push(u)}}}}else{if("*"==b&&this.brokenStarGEBTN)break e;if(h=e.getElementsByTagName(b),a)return h[0]||null;for(c=0;u=h[c++];)p&&f[this.getUID(u)]||s.push(u)}return p&&this.sort(s),a?null:s}e:if(e.querySelectorAll){if(!this.isHTMLDocument||o[t]||this.brokenMixedCaseQSA||this.brokenCheckedQSA&&t.indexOf(":checked")>-1||this.brokenEmptyAttributeQSA&&r.test(t)||!m&&t.indexOf(",")>-1||d.disableQSA)break e;var w,x=t,C=e;m||(w=C.getAttribute("id"),slickid="slickid__",C.setAttribute("id",slickid),x="#"+slickid+" "+x,e=C.parentNode);try{if(a)return e.querySelector(x)||null;h=e.querySelectorAll(x)}catch(e){o[t]=1;break e}finally{m||(w?C.setAttribute("id",w):C.removeAttribute("id"),e=C)}if(this.starSelectsClosedQSA)for(c=0;u=h[c++];)!(u.nodeName>"@")||p&&f[this.getUID(u)]||s.push(u);else for(c=0;u=h[c++];)p&&f[this.getUID(u)]||s.push(u);return p&&this.sort(s),s}if(!(l=this.Slick.parse(t)).length)return s}else{if(null==t)return s;if(!t.Slick)return this.contains(e.documentElement||e,t)?(s?s.push(t):s=t,s):s;l=t}this.posNTH={},this.posNTHLast={},this.posNTHType={},this.posNTHTypeLast={},this.push=!p&&(a||1==l.length&&1==l.expressions[0].length)?this.pushArray:this.pushUID,null==s&&(s=[]);var _,k,E,S,T,D,$,A,P,j,O,I,M,N,F=l.expressions;e:for(c=0;I=F[c];c++)for(_=0;M=I[_];_++){if(!this[S="combinator:"+M.combinator])continue e;if(T=this.isXMLDocument?M.tag:M.tag.toUpperCase(),D=M.id,$=M.classList,A=M.classes,P=M.attributes,j=M.pseudos,N=_===I.length-1,this.bitUniques={},N?(this.uniques=f,this.found=s):(this.uniques={},this.found=[]),0===_){if(this[S](e,T,D,A,P,j,$),a&&N&&s.length)break e}else if(a&&N){for(k=0,E=O.length;E>k;k++)if(this[S](O[k],T,D,A,P,j,$),s.length)break e}else for(k=0,E=O.length;E>k;k++)this[S](O[k],T,D,A,P,j,$);O=this.found}return(p||l.expressions.length>1)&&this.sort(s),a?s[0]||null:s},e.uidx=1,e.uidk="slick-uniqueid",e.getUIDXML=function(e){var t=e.getAttribute(this.uidk);return t||(t=this.uidx++,e.setAttribute(this.uidk,t)),t},e.getUIDHTML=function(e){return e.uniqueNumber||(e.uniqueNumber=this.uidx++)},e.sort=function(e){return this.documentSorter?(e.sort(this.documentSorter),e):e},e.cacheNTH={},e.matchNTH=/^([+-]?\d*)?([a-z]+)?([+-]\d+)?$/,e.parseNTHArgument=function(e){var t=e.match(this.matchNTH);if(!t)return!1;var n=t[2]||!1,i=t[1]||1;"-"==i&&(i=-1);var r=+t[3]||0;return t="n"==n?{a:i,b:r}:"odd"==n?{a:2,b:1}:"even"==n?{a:2,b:0}:{a:0,b:i},this.cacheNTH[e]=t},e.createNTHPseudo=function(e,t,n,i){return function(r,o){var a=this.getUID(r);if(!this[n][a]){var s=r.parentNode;if(!s)return!1;var l=s[e],c=1;if(i){var u=r.nodeName;do{l.nodeName==u&&(this[n][this.getUID(l)]=c++)}while(l=l[t])}else do{1==l.nodeType&&(this[n][this.getUID(l)]=c++)}while(l=l[t])}o=o||"n";var d=this.cacheNTH[o]||this.parseNTHArgument(o);if(!d)return!1;var h=d.a,f=d.b,p=this[n][a];if(0==h)return f==p;if(h>0){if(f>p)return!1}else if(p>f)return!1;return(p-f)%h==0}},e.pushArray=function(e,t,n,i,r,o){this.matchSelector(e,t,n,i,r,o)&&this.found.push(e)},e.pushUID=function(e,t,n,i,r,o){var a=this.getUID(e);!this.uniques[a]&&this.matchSelector(e,t,n,i,r,o)&&(this.uniques[a]=!0,this.found.push(e))},e.matchNode=function(e,t){if(this.isHTMLDocument&&this.nativeMatchesSelector)try{return this.nativeMatchesSelector.call(e,t.replace(/\[([^=]+)=\s*([^'"\]]+?)\s*\]/g,'[$1="$2"]'))}catch(e){}var n=this.Slick.parse(t);if(!n)return!0;var i,r,o=n.expressions,a=0;for(i=0;r=o[i];i++)if(1==r.length){var s=r[0];if(this.matchSelector(e,this.isXMLDocument?s.tag:s.tag.toUpperCase(),s.id,s.classes,s.attributes,s.pseudos))return!0;a++}if(a==n.length)return!1;var l,c=this.search(this.document,n);for(i=0;l=c[i++];)if(l===e)return!0;return!1},e.matchPseudo=function(e,t,n){var i="pseudo:"+t;if(this[i])return this[i](e,n);var r=this.getAttribute(e,t);return n?n==r:!!r},e.matchSelector=function(e,t,n,i,r,o){if(t){var a=this.isXMLDocument?e.nodeName:e.nodeName.toUpperCase();if("*"==t){if("@">a)return!1}else if(a!=t)return!1}if(n&&e.getAttribute("id")!=n)return!1;var s,l,c;if(i)for(s=i.length;s--;)if(!(c=this.getAttribute(e,"class"))||!i[s].regexp.test(c))return!1;if(r)for(s=r.length;s--;)if((l=r[s]).operator?!l.test(this.getAttribute(e,l.key)):!this.hasAttribute(e,l.key))return!1;if(o)for(s=o.length;s--;)if(l=o[s],!this.matchPseudo(e,l.key,l.value))return!1;return!0};var a={" ":function(e,t,n,i,r,o,a){var s,l,c;if(this.isHTMLDocument){e:if(n){if(!(l=this.document.getElementById(n))&&e.all||this.idGetsName&&l&&l.getAttributeNode("id").nodeValue!=n){if(!(c=e.all[n]))return;for(c[0]||(c=[c]),s=0;l=c[s++];){var u=l.getAttributeNode("id");if(u&&u.nodeValue==n){this.push(l,t,null,i,r,o);break}}return}if(!l){if(this.contains(this.root,e))return;break e}if(this.document!==e&&!this.contains(e,l))return;return void this.push(l,t,null,i,r,o)}e:if(i&&e.getElementsByClassName&&!this.brokenGEBCN){if(!(c=e.getElementsByClassName(a.join(" ")))||!c.length)break e;for(s=0;l=c[s++];)this.push(l,t,n,null,r,o);return}}if((c=e.getElementsByTagName(t))&&c.length)for(this.brokenStarGEBTN||(t=null),s=0;l=c[s++];)this.push(l,t,n,i,r,o)},">":function(e,t,n,i,r,o){if(e=e.firstChild)do{1==e.nodeType&&this.push(e,t,n,i,r,o)}while(e=e.nextSibling)},"+":function(e,t,n,i,r,o){for(;e=e.nextSibling;)if(1==e.nodeType){this.push(e,t,n,i,r,o);break}},"^":function(e,t,n,i,r,o){(e=e.firstChild)&&(1==e.nodeType?this.push(e,t,n,i,r,o):this["combinator:+"](e,t,n,i,r,o))},"~":function(e,t,n,i,r,o){for(;e=e.nextSibling;)if(1==e.nodeType){var a=this.getUID(e);if(this.bitUniques[a])break;this.bitUniques[a]=!0,this.push(e,t,n,i,r,o)}},"++":function(e,t,n,i,r,o){this["combinator:+"](e,t,n,i,r,o),this["combinator:!+"](e,t,n,i,r,o)},"~~":function(e,t,n,i,r,o){this["combinator:~"](e,t,n,i,r,o),this["combinator:!~"](e,t,n,i,r,o)},"!":function(e,t,n,i,r,o){for(;e=e.parentNode;)e!==this.document&&this.push(e,t,n,i,r,o)},"!>":function(e,t,n,i,r,o){(e=e.parentNode)!==this.document&&this.push(e,t,n,i,r,o)},"!+":function(e,t,n,i,r,o){for(;e=e.previousSibling;)if(1==e.nodeType){this.push(e,t,n,i,r,o);break}},"!^":function(e,t,n,i,r,o){(e=e.lastChild)&&(1==e.nodeType?this.push(e,t,n,i,r,o):this["combinator:!+"](e,t,n,i,r,o))},"!~":function(e,t,n,i,r,o){for(;e=e.previousSibling;)if(1==e.nodeType){var a=this.getUID(e);if(this.bitUniques[a])break;this.bitUniques[a]=!0,this.push(e,t,n,i,r,o)}}};for(var s in a)e["combinator:"+s]=a[s];var l={empty:function(e){var t=e.firstChild;return!(t&&1==t.nodeType||(e.innerText||e.textContent||"").length)},not:function(e,t){return!this.matchNode(e,t)},contains:function(e,t){return(e.innerText||e.textContent||"").indexOf(t)>-1},"first-child":function(e){for(;e=e.previousSibling;)if(1==e.nodeType)return!1;return!0},"last-child":function(e){for(;e=e.nextSibling;)if(1==e.nodeType)return!1;return!0},"only-child":function(e){for(var t=e;t=t.previousSibling;)if(1==t.nodeType)return!1;for(var n=e;n=n.nextSibling;)if(1==n.nodeType)return!1;return!0},"nth-child":e.createNTHPseudo("firstChild","nextSibling","posNTH"),"nth-last-child":e.createNTHPseudo("lastChild","previousSibling","posNTHLast"),"nth-of-type":e.createNTHPseudo("firstChild","nextSibling","posNTHType",!0),"nth-last-of-type":e.createNTHPseudo("lastChild","previousSibling","posNTHTypeLast",!0),index:function(e,t){return this["pseudo:nth-child"](e,""+(t+1))},even:function(e){return this["pseudo:nth-child"](e,"2n")},odd:function(e){return this["pseudo:nth-child"](e,"2n+1")},"first-of-type":function(e){for(var t=e.nodeName;e=e.previousSibling;)if(e.nodeName==t)return!1;return!0},"last-of-type":function(e){for(var t=e.nodeName;e=e.nextSibling;)if(e.nodeName==t)return!1;return!0},"only-of-type":function(e){for(var t=e,n=e.nodeName;t=t.previousSibling;)if(t.nodeName==n)return!1;for(var i=e;i=i.nextSibling;)if(i.nodeName==n)return!1;return!0},enabled:function(e){return!e.disabled},disabled:function(e){return e.disabled},checked:function(e){return e.checked||e.selected},focus:function(e){return this.isHTMLDocument&&this.document.activeElement===e&&(e.href||e.type||this.hasAttribute(e,"tabindex"))},root:function(e){return e===this.root},selected:function(e){return e.selected}};for(var c in l)e["pseudo:"+c]=l[c];var u=e.attributeGetters={for:function(){return"htmlFor"in this?this.htmlFor:this.getAttribute("for")},href:function(){return"href"in this?this.getAttribute("href",2):this.getAttribute("href")},style:function(){return this.style?this.style.cssText:this.getAttribute("style")},tabindex:function(){var e=this.getAttributeNode("tabindex");return e&&e.specified?e.nodeValue:null},type:function(){return this.getAttribute("type")},maxlength:function(){var e=this.getAttributeNode("maxLength");return e&&e.specified?e.nodeValue:null}};u.MAXLENGTH=u.maxLength=u.maxlength;var d=e.Slick=this.Slick||{};d.version="1.1.7",d.search=function(t,n,i){return e.search(t,n,i)},d.find=function(t,n){return e.search(t,n,null,!0)},d.contains=function(t,n){return e.setDocument(t),e.contains(t,n)},d.getAttribute=function(t,n){return e.setDocument(t),e.getAttribute(t,n)},d.hasAttribute=function(t,n){return e.setDocument(t),e.hasAttribute(t,n)},d.match=function(t,n){return!(!t||!n)&&(!n||n===t||(e.setDocument(t),e.matchNode(t,n)))},d.defineAttributeGetter=function(t,n){return e.attributeGetters[t]=n,this},d.lookupAttributeGetter=function(t){return e.attributeGetters[t]},d.definePseudo=function(t,n){return e["pseudo:"+t]=function(e,t){return n.call(e,t)},this},d.lookupPseudo=function(t){var n=e["pseudo:"+t];return n?function(e){return n.call(this,e)}:null},d.override=function(t,n){return e.override(t,n),this},d.isXML=e.isXML,d.uidOf=function(t){return e.getUIDHTML(t)},this.Slick||(this.Slick=d)}.apply("undefined"!=typeof exports?exports:this);var Element=this.Element=function(e,t){var n=Element.Constructors[e];if(n)return n(t);if("string"!=typeof e)return document.id(e).set(t);if(t||(t={}),!/^[\w-]+$/.test(e)){var i=Slick.parse(e).expressions[0][0];e="*"==i.tag?"div":i.tag,i.id&&null==t.id&&(t.id=i.id);var r=i.attributes;if(r)for(var o,a=0,s=r.length;s>a;a++)null==t[(o=r[a]).key]&&(null!=o.value&&"="==o.operator?t[o.key]=o.value:o.value||o.operator||(t[o.key]=!0));i.classList&&null==t.class&&(t.class=i.classList.join(" "))}return document.newElement(e,t)};Browser.Element&&(Element.prototype=Browser.Element.prototype,Element.prototype._fireEvent=function(e){return function(t,n){return e.call(this,t,n)}}(Element.prototype.fireEvent)),new Type("Element",Element).mirror((function(e){if(!Array.prototype[e]){var t={};t[e]=function(){for(var t=[],n=arguments,i=!0,r=0,o=this.length;o>r;r++){var a=this[r],s=t[r]=a[e].apply(a,n);i=i&&"element"==typeOf(s)}return i?new Elements(t):t},Elements.implement(t)}})),Browser.Element||(Element.parent=Object,Element.Prototype={$constructor:Element,$family:Function.convert("element").hide()},Element.mirror((function(e,t){Element.Prototype[e]=t}))),Element.Constructors={};var IFrame=new Type("IFrame",(function(){var e,t=Array.link(arguments,{properties:Type.isObject,iframe:function(e){return null!=e}}),n=t.properties||{};t.iframe&&(e=document.id(t.iframe));var i=n.onload||function(){};delete n.onload,n.id=n.name=[n.id,n.name,e?e.id||e.name:"IFrame_"+String.uniqueID()].pick(),e=new Element(e||"iframe",n);var r=function(){i.call(e.contentWindow)};return window.frames[n.id]?r():e.addListener("load",r),e})),Elements=this.Elements=function(e){if(e&&e.length)for(var t,n={},i=0;t=e[i++];){var r=Slick.uidOf(t);n[r]||(n[r]=!0,this.push(t))}};Elements.prototype={length:0},Elements.parent=Array,new Type("Elements",Elements).implement({filter:function(e,t){return e?new Elements(Array.filter(this,"string"==typeOf(e)?function(t){return t.match(e)}:e,t)):this}.protect(),push:function(){for(var e=this.length,t=0,n=arguments.length;n>t;t++){var i=document.id(arguments[t]);i&&(this[e++]=i)}return this.length=e}.protect(),unshift:function(){for(var e=[],t=0,n=arguments.length;n>t;t++){var i=document.id(arguments[t]);i&&e.push(i)}return Array.prototype.unshift.apply(this,e)}.protect(),concat:function(){for(var e=new Elements(this),t=0,n=arguments.length;n>t;t++){var i=arguments[t];Type.isEnumerable(i)?e.append(i):e.push(i)}return e}.protect(),append:function(e){for(var t=0,n=e.length;n>t;t++)this.push(e[t]);return this}.protect(),empty:function(){for(;this.length;)delete this[--this.length];return this}.protect()}),function(){var e,t=Array.prototype.splice,n={0:0,1:1,length:2};t.call(n,1,1),1==n[1]&&Elements.implement("splice",function(){for(var e=this.length,n=t.apply(this,arguments);e>=this.length;)delete this[e--];return n}.protect()),Array.forEachMethod((function(e,t){Elements.implement(t,e)})),Array.mirror(Elements);try{e="x"==document.createElement("<input name=x>").name}catch(e){}var i=function(e){return(""+e).replace(/&/g,"&amp;").replace(/"/g,"&quot;")},r=function(){var e=document.createElement("style"),t=!1;try{e.innerHTML="#justTesing{margin: 0px;}",t=!!e.innerHTML}catch(e){}return t}();Document.implement({newElement:function(t,n){if(n){if(null!=n.checked&&(n.defaultChecked=n.checked),"checkbox"!=n.type&&"radio"!=n.type||null!=n.value||(n.value="on"),!r&&"style"==t){var o=document.createElement("style");return o.setAttribute("type","text/css"),n.type&&delete n.type,this.id(o).set(n)}e&&(t="<"+t,n.name&&(t+=' name="'+i(n.name)+'"'),n.type&&(t+=' type="'+i(n.type)+'"'),t+=">",delete n.name,delete n.type)}return this.id(this.createElement(t)).set(n)}})}(),function(){var e;Slick.uidOf(window),Slick.uidOf(document),Document.implement({newTextNode:function(e){return this.createTextNode(e)},getDocument:function(){return this},getWindow:function(){return this.window},id:(e={string:function(t,n,i){return(t=Slick.find(i,"#"+t.replace(/(\W)/g,"\\$1")))?e.element(t,n):null},element:function(e,t){if(Slick.uidOf(e),!t&&!e.$family&&!/^(?:object|embed)$/i.test(e.tagName)){var n=e.fireEvent;e._fireEvent=function(e,t){return n(e,t)},Object.append(e,Element.Prototype)}return e},object:function(t,n,i){return t.toElement?e.element(t.toElement(i),n):null}},e.textnode=e.whitespace=e.window=e.document=function(e){return e},function(t,n,i){if(t&&t.$family&&t.uniqueNumber)return t;var r=typeOf(t);return e[r]?e[r](t,n,i||document):null})}),null==window.$&&Window.implement("$",(function(e,t){return document.id(e,t,this.document)})),Window.implement({getDocument:function(){return this.document},getWindow:function(){return this}}),[Document,Element].invoke("implement",{getElements:function(e){return Slick.search(this,e,new Elements)},getElement:function(e){return document.id(Slick.find(this,e))}});var t={contains:function(e){return Slick.contains(this,e)}};document.contains||Document.implement(t),document.createElement("div").contains||Element.implement(t);var n=function(e,t){if(!e)return t;for(var n=(e=Object.clone(Slick.parse(e))).expressions,i=n.length;i--;)n[i][0].combinator=t;return e};Object.forEach({getNext:"~",getPrevious:"!~",getParent:"!"},(function(e,t){Element.implement(t,(function(t){return this.getElement(n(t,e))}))})),Object.forEach({getAllNext:"~",getAllPrevious:"!~",getSiblings:"~~",getChildren:">",getParents:"!"},(function(e,t){Element.implement(t,(function(t){return this.getElements(n(t,e))}))})),Element.implement({getFirst:function(e){return document.id(Slick.search(this,n(e,">"))[0])},getLast:function(e){return document.id(Slick.search(this,n(e,">")).getLast())},getWindow:function(){return this.ownerDocument.window},getDocument:function(){return this.ownerDocument},getElementById:function(e){return document.id(Slick.find(this,"#"+(""+e).replace(/(\W)/g,"\\$1")))},match:function(e){return!e||Slick.match(this,e)}}),null==window.$$&&Window.implement("$$",(function(e){if(1==arguments.length){if("string"==typeof e)return Slick.search(this.document,e,new Elements);if(Type.isEnumerable(e))return new Elements(e)}return new Elements(arguments)}));var i={before:function(e,t){var n=t.parentNode;n&&n.insertBefore(e,t)},after:function(e,t){var n=t.parentNode;n&&n.insertBefore(e,t.nextSibling)},bottom:function(e,t){t.appendChild(e)},top:function(e,t){t.insertBefore(e,t.firstChild)}};i.inside=i.bottom;var r,o={},a={},s={};Array.forEach(["type","value","defaultValue","accessKey","cellPadding","cellSpacing","colSpan","frameBorder","rowSpan","tabIndex","useMap"],(function(e){s[e.toLowerCase()]=e})),s.html="innerHTML",s.text=null==document.createElement("div").textContent?"innerText":"textContent",Object.forEach(s,(function(e,t){a[t]=function(t,n){t[e]=n},o[t]=function(t){return t[e]}})),a.text=(a.text,function(e,t){"style"==e.get("tag")?e.set("html",t):e[s.text]=t}),o.text=(r=o.text,function(e){return"style"==e.get("tag")?e.innerHTML:r(e)});var c={};Array.forEach(["compact","nowrap","ismap","declare","noshade","checked","disabled","readOnly","multiple","selected","noresize","defer","defaultChecked","autofocus","controls","autoplay","loop"],(function(e){var t=e.toLowerCase();c[t]=e,a[t]=function(t,n){t[e]=!!n},o[t]=function(t){return!!t[e]}})),Object.append(a,{class:function(e,t){"className"in e?e.className=t||"":e.setAttribute("class",t)},for:function(e,t){"htmlFor"in e?e.htmlFor=t:e.setAttribute("for",t)},style:function(e,t){e.style?e.style.cssText=t:e.setAttribute("style",t)},value:function(e,t){e.value=null!=t?t:""}}),o.class=function(e){return"className"in e?e.className||null:e.getAttribute("class")};var u=document.createElement("button");try{u.type="button"}catch(e){}"button"!=u.type&&(a.type=function(e,t){e.setAttribute("type",t)}),u=null;var d,h,f=function(){var e=document.createElement("style"),t=!1;try{e.innerHTML="#justTesing{margin: 0px;}",t=!!e.innerHTML}catch(e){}return t}(),p=document.createElement("input");p.value="t",p.type="submit",d="t"!=p.value;try{p.value="",p.type="email",h="email"==p.type}catch(e){}p=null,(d||!h)&&(a.type=function(e,t){try{var n=e.value;e.type=t,e.value=n}catch(e){}});var m,g=function(e){return e.random="attribute","attribute"==e.getAttribute("random")}(document.createElement("div")),v=((m=document.createElement("div")).innerHTML='<object><param name="should_fix" value="the unknown" /></object>',1!=m.cloneNode(!0).firstChild.childNodes.length),b=!!document.createElement("div").classList,y=function(e){var t=(e||"").clean().split(" "),n={};return t.filter((function(e){return""===e||n[e]?void 0:n[e]=e}))},w=function(e){this.classList.add(e)},x=function(e){this.classList.remove(e)};Element.implement({setProperty:function(e,t){var n,i=a[e.toLowerCase()];i?i(this,t):(g&&(n=this.retrieve("$attributeWhiteList",{})),null==t?(this.removeAttribute(e),g&&delete n[e]):(this.setAttribute(e,""+t),g&&(n[e]=!0)));return this},setProperties:function(e){for(var t in e)this.setProperty(t,e[t]);return this},getProperty:function(e){var t=o[e.toLowerCase()];if(t)return t(this);if(g){var n=this.getAttributeNode(e),i=this.retrieve("$attributeWhiteList",{});if(!n)return null;if(n.expando&&!i[e]){var r=this.outerHTML;if(r.substr(0,r.search(/\/?['"]?>(?![^<]*<['"])/)).indexOf(e)<0)return null;i[e]=!0}}var a=Slick.getAttribute(this,e);return a||Slick.hasAttribute(this,e)?a:null},getProperties:function(){var e=Array.convert(arguments);return e.map(this.getProperty,this).associate(e)},removeProperty:function(e){return this.setProperty(e,null)},removeProperties:function(){return Array.each(arguments,this.removeProperty,this),this},set:function(e,t){var n=Element.Properties[e];n&&n.set?n.set.call(this,t):this.setProperty(e,t)}.overloadSetter(),get:function(e){var t=Element.Properties[e];return t&&t.get?t.get.apply(this):this.getProperty(e)}.overloadGetter(),erase:function(e){var t=Element.Properties[e];return t&&t.erase?t.erase.apply(this):this.removeProperty(e),this},hasClass:b?function(e){return this.classList.contains(e)}:function(e){return y(this.className).contains(e)},addClass:b?function(e){return y(e).forEach(w,this),this}:function(e){return this.className=y(e+" "+this.className).join(" "),this},removeClass:b?function(e){return y(e).forEach(x,this),this}:function(e){var t=y(this.className);return y(e).forEach(t.erase,t),this.className=t.join(" "),this},toggleClass:function(e,t){return null==t&&(t=!this.hasClass(e)),t?this.addClass(e):this.removeClass(e)},adopt:function(){var e,t=this,n=Array.flatten(arguments),i=n.length;i>1&&(t=e=document.createDocumentFragment());for(var r=0;i>r;r++){var o=document.id(n[r],!0);o&&t.appendChild(o)}return e&&this.appendChild(e),this},appendText:function(e,t){return this.grab(this.getDocument().newTextNode(e),t)},grab:function(e,t){return i[t||"bottom"](document.id(e,!0),this),this},inject:function(e,t){return i[t||"bottom"](this,document.id(e,!0)),this},replaces:function(e){return(e=document.id(e,!0)).parentNode.replaceChild(this,e),this},wraps:function(e,t){return e=document.id(e,!0),this.replaces(e).grab(e,t)},getSelected:function(){return this.selectedIndex,new Elements(Array.convert(this.options).filter((function(e){return e.selected})))},toQueryString:function(){var e=[];return this.getElements("input, select, textarea").each((function(t){var n=t.type;if(t.name&&!t.disabled&&"submit"!=n&&"reset"!=n&&"file"!=n&&"image"!=n){var i="select"==t.get("tag")?t.getSelected().map((function(e){return document.id(e).get("value")})):"radio"!=n&&"checkbox"!=n||t.checked?t.get("value"):null;Array.convert(i).each((function(n){void 0!==n&&e.push(encodeURIComponent(t.name)+"="+encodeURIComponent(n))}))}})),e.join("&")}});var C={before:"beforeBegin",after:"afterEnd",bottom:"beforeEnd",top:"afterBegin",inside:"beforeEnd"};Element.implement("appendHTML","insertAdjacentHTML"in document.createElement("div")?function(e,t){return this.insertAdjacentHTML(C[t||"bottom"],e),this}:function(e,t){var n=new Element("div",{html:e}),r=n.childNodes,o=n.firstChild;if(!o)return this;if(r.length>1){o=document.createDocumentFragment();for(var a=0,s=r.length;s>a;a++)o.appendChild(r[a])}return i[t||"bottom"](o,this),this});var _={},k={},E=function(e){return k[e]||(k[e]={})},S=function(e){var t=e.uniqueNumber;return e.removeEvents&&e.removeEvents(),e.clearAttributes&&e.clearAttributes(),null!=t&&(delete _[t],delete k[t]),e},T={input:"checked",option:"selected",textarea:"value"};if(Element.implement({destroy:function(){var e=S(this).getElementsByTagName("*");return Array.each(e,S),Element.dispose(this),null},empty:function(){return Array.convert(this.childNodes).each(Element.dispose),this},dispose:function(){return this.parentNode?this.parentNode.removeChild(this):this},clone:function(e,t){e=!1!==e;var n,i=this.cloneNode(e),r=[i],o=[this];for(e&&(r.append(Array.convert(i.getElementsByTagName("*"))),o.append(Array.convert(this.getElementsByTagName("*")))),n=r.length;n--;){var a=r[n],s=o[n];if(t||a.removeAttribute("id"),a.clearAttributes&&(a.clearAttributes(),a.mergeAttributes(s),a.removeAttribute("uniqueNumber"),a.options))for(var l=a.options,c=s.options,u=l.length;u--;)l[u].selected=c[u].selected;var d=T[s.tagName.toLowerCase()];d&&s[d]&&(a[d]=s[d])}if(v){var h=i.getElementsByTagName("object"),f=this.getElementsByTagName("object");for(n=h.length;n--;)h[n].outerHTML=f[n].outerHTML}return document.id(i)}}),[Element,Window,Document].invoke("implement",{addListener:function(e,t){return window.attachEvent&&!window.addEventListener&&(_[Slick.uidOf(this)]=this),this.addEventListener?this.addEventListener(e,t,!!arguments[2]):this.attachEvent("on"+e,t),this},removeListener:function(e,t){return this.removeEventListener?this.removeEventListener(e,t,!!arguments[2]):this.detachEvent("on"+e,t),this},retrieve:function(e,t){var n=E(Slick.uidOf(this)),i=n[e];return null!=t&&null==i&&(i=n[e]=t),null!=i?i:null},store:function(e,t){return E(Slick.uidOf(this))[e]=t,this},eliminate:function(e){return delete E(Slick.uidOf(this))[e],this}}),window.attachEvent&&!window.addEventListener){var D=function(){Object.each(_,S),window.CollectGarbage&&CollectGarbage(),window.removeListener("unload",D)};window.addListener("unload",D)}Element.Properties={},Element.Properties.style={set:function(e){this.style.cssText=e},get:function(){return this.style.cssText},erase:function(){this.style.cssText=""}},Element.Properties.tag={get:function(){return this.tagName.toLowerCase()}},Element.Properties.html={set:function(e){null==e?e="":"array"==typeOf(e)&&(e=e.join("")),this.styleSheet&&!f?this.styleSheet.cssText=e:this.innerHTML=e},erase:function(){this.set("html","")}};var $,A,P,j,O=document.createElement("div");if(O.innerHTML="<nav></nav>",!(A=1==O.childNodes.length)){var I="abbr article aside audio canvas datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video".split(" ");for($=document.createDocumentFragment(),l=I.length;l--;)$.createElement(I[l])}O=null,P=Function.attempt((function(){return document.createElement("table").innerHTML="<tr><td></td></tr>",!0}));var M,N,F=document.createElement("tr"),R="<td></td>";F.innerHTML=R,j=F.innerHTML==R,F=null,P&&j&&A||(Element.Properties.html.set=(M=Element.Properties.html.set,(N={table:[1,"<table>","</table>"],select:[1,"<select>","</select>"],tbody:[2,"<table><tbody>","</tbody></table>"],tr:[3,"<table><tbody><tr>","</tr></tbody></table>"]}).thead=N.tfoot=N.tbody,function(e){if(this.styleSheet)return M.call(this,e);var t=N[this.get("tag")];if(t||A||(t=[0,"",""]),!t)return M.call(this,e);var n=t[0],i=document.createElement("div"),r=i;for(A||$.appendChild(i),i.innerHTML=[t[1],e,t[2]].flatten().join("");n--;)r=r.firstChild;this.empty().adopt(r.childNodes),A||$.removeChild(i),i=null}));var L=document.createElement("form");L.innerHTML="<select><option>s</option></select>","s"!=L.firstChild.value&&(Element.Properties.value={set:function(e){if("select"!=this.get("tag"))return this.setProperty("value",e);var t=this.getElements("option");e=String(e);for(var n=0;n<t.length;n++){var i=t[n],r=i.getAttributeNode("value");if((r&&r.specified?i.value:i.get("text"))===e)return i.selected=!0}},get:function(){var e=this,t=e.get("tag");if("select"!=t&&"option"!=t)return this.getProperty("value");if("select"==t&&!(e=e.getSelected()[0]))return"";var n=e.getAttributeNode("value");return n&&n.specified?e.value:e.get("text")}}),L=null,document.createElement("div").getAttributeNode("id")&&(Element.Properties.id={set:function(e){this.id=this.getAttributeNode("id").value=e},get:function(){return this.id||null},erase:function(){this.id=this.getAttributeNode("id").value=""}})}(),function(){var e,t=document.html;(e=document.createElement("div")).style.color="red",e.style.color=null;var n="red"==e.style.color,i="1px solid #123abc";e.style.border=i;var r=e.style.border!=i;e=null;var o=!!window.getComputedStyle,a=null!=document.createElement("div").style.borderRadius;Element.Properties.styles={set:function(e){this.setStyles(e)}};var s=null!=t.style.opacity,l=null!=t.style.filter,c=/alpha\(opacity=([\d.]+)\)/i,u=function(e,t,n){var i=e.style,r=i.filter||e.getComputedStyle("filter")||"";i.filter=(t.test(r)?r.replace(t,n):r+" "+n).trim(),i.filter||i.removeAttribute("filter")},d=s?function(e,t){e.style.opacity=t}:l?function(e,t){e.currentStyle&&e.currentStyle.hasLayout||(e.style.zoom=1),null==t||1==t?(u(e,c,""),1==t&&1!=h(e)&&u(e,c,"alpha(opacity=100)")):u(e,c,"alpha(opacity="+(100*t).limit(0,100).round()+")")}:function(e,t){e.store("$opacity",t),e.style.visibility=t>0||null==t?"visible":"hidden"},h=s?function(e){var t=e.style.opacity||e.getComputedStyle("opacity");return""==t?1:t.toFloat()}:l?function(e){var t,n=e.style.filter||e.getComputedStyle("filter");return n&&(t=n.match(c)),null==t||null==n?1:t[1]/100}:function(e){var t=e.retrieve("$opacity");return null==t&&(t="hidden"==e.style.visibility?0:1),t},f=null==t.style.cssFloat?"styleFloat":"cssFloat",p={left:"0%",top:"0%",center:"50%",right:"100%",bottom:"100%"},m=null!=t.style.backgroundPositionX,g=/^-(ms)-/,v=function(e){return e.replace(g,"$1-").camelCase()};Element.implement({getComputedStyle:function(e){if(!o&&this.currentStyle)return this.currentStyle[v(e)];var t=Element.getDocument(this).defaultView,n=t?t.getComputedStyle(this,null):null;return n?n.getPropertyValue(e==f?"float":e.hyphenate()):""},setStyle:function(e,t){if("opacity"==e)return null!=t&&(t=parseFloat(t)),d(this,t),this;if(e=v("float"==e?f:e),"string"!=typeOf(t)){var i=(Element.Styles[e]||"@").split(" ");t=Array.convert(t).map((function(e,t){return i[t]?"number"==typeOf(e)?i[t].replace("@",Math.round(e)):e:""})).join(" ")}else t==String(Number(t))&&(t=Math.round(t));return this.style[e]=t,(""==t||null==t)&&n&&this.style.removeAttribute&&function(e,t){"backgroundPosition"==t&&(e.removeAttribute(t+"X"),t+="Y"),e.removeAttribute(t)}(this.style,e),this},getStyle:function(e){if("opacity"==e)return h(this);if(e=v("float"==e?f:e),a&&-1!=e.indexOf("borderRadius"))return["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"].map((function(e){return this.style[e]||"0px"}),this).join(" ");var t=this.style[e];if(!t||"zIndex"==e){if(Element.ShortStyles.hasOwnProperty(e)){for(var n in t=[],Element.ShortStyles[e])t.push(this.getStyle(n));return t.join(" ")}t=this.getComputedStyle(e)}if(m&&/^backgroundPosition[XY]?$/.test(e))return t.replace(/(top|right|bottom|left)/g,(function(e){return p[e]}))||"0px";if(!t&&"backgroundPosition"==e)return"0px 0px";if(t){var i=(t=String(t)).match(/rgba?\([\d\s,]+\)/);i&&(t=t.replace(i[0],i[0].rgbToHex()))}if(!o&&!this.style[e]){if(/^(height|width)$/.test(e)&&!/px$/.test(t)){var s=0;return("width"==e?["left","right"]:["top","bottom"]).each((function(e){s+=this.getStyle("border-"+e+"-width").toInt()+this.getStyle("padding-"+e).toInt()}),this),this["offset"+e.capitalize()]-s+"px"}if(/^border(.+)Width|margin|padding/.test(e)&&isNaN(parseFloat(t)))return"0px"}return r&&/^border(Top|Right|Bottom|Left)?$/.test(e)&&/^#/.test(t)?t.replace(/^(.+)\s(.+)\s(.+)$/,"$2 $3 $1"):t},setStyles:function(e){for(var t in e)this.setStyle(t,e[t]);return this},getStyles:function(){var e={};return Array.flatten(arguments).each((function(t){e[t]=this.getStyle(t)}),this),e}}),Element.Styles={left:"@px",top:"@px",bottom:"@px",right:"@px",width:"@px",height:"@px",maxWidth:"@px",maxHeight:"@px",minWidth:"@px",minHeight:"@px",backgroundColor:"rgb(@, @, @)",backgroundSize:"@px",backgroundPosition:"@px @px",color:"rgb(@, @, @)",fontSize:"@px",letterSpacing:"@px",lineHeight:"@px",clip:"rect(@px @px @px @px)",margin:"@px @px @px @px",padding:"@px @px @px @px",border:"@px @ rgb(@, @, @) @px @ rgb(@, @, @) @px @ rgb(@, @, @)",borderWidth:"@px @px @px @px",borderStyle:"@ @ @ @",borderColor:"rgb(@, @, @) rgb(@, @, @) rgb(@, @, @) rgb(@, @, @)",zIndex:"@",zoom:"@",fontWeight:"@",textIndent:"@px",opacity:"@",borderRadius:"@px @px @px @px"},Element.ShortStyles={margin:{},padding:{},border:{},borderWidth:{},borderStyle:{},borderColor:{}},["Top","Right","Bottom","Left"].each((function(e){var t=Element.ShortStyles,n=Element.Styles;["margin","padding"].each((function(i){var r=i+e;t[i][r]=n[r]="@px"}));var i="border"+e;t.border[i]=n[i]="@px @ rgb(@, @, @)";var r=i+"Width",o=i+"Style",a=i+"Color";t[i]={},t.borderWidth[r]=t[i][r]=n[r]="@px",t.borderStyle[o]=t[i][o]=n[o]="@",t.borderColor[a]=t[i][a]=n[a]="rgb(@, @, @)"})),m&&(Element.ShortStyles.backgroundPosition={backgroundPositionX:"@",backgroundPositionY:"@"})}(),function(){Element.Properties.events={set:function(e){this.addEvents(e)}},[Element,Window,Document].invoke("implement",{addEvent:function(e,t){var n=this.retrieve("events",{});if(n[e]||(n[e]={keys:[],values:[]}),n[e].keys.contains(t))return this;n[e].keys.push(t);var i=e,r=Element.Events[e],o=t,a=this;r&&(r.onAdd&&r.onAdd.call(this,t,e),r.condition&&(o=function(n){return!r.condition.call(this,n,e)||t.call(this,n)}),r.base&&(i=Function.convert(r.base).call(this,e)));var s=function(){return t.call(a)},l=Element.NativeEvents[i];return l&&(2==l&&(s=function(e){e=new DOMEvent(e,a.getWindow()),!1===o.call(a,e)&&e.stop()}),this.addListener(i,s,arguments[2])),n[e].values.push(s),this},removeEvent:function(e,t){var n=this.retrieve("events");if(!n||!n[e])return this;var i=n[e],r=i.keys.indexOf(t);if(-1==r)return this;var o=i.values[r];delete i.keys[r],delete i.values[r];var a=Element.Events[e];return a&&(a.onRemove&&a.onRemove.call(this,t,e),a.base&&(e=Function.convert(a.base).call(this,e))),Element.NativeEvents[e]?this.removeListener(e,o,arguments[2]):this},addEvents:function(e){for(var t in e)this.addEvent(t,e[t]);return this},removeEvents:function(e){var t;if("object"==typeOf(e)){for(t in e)this.removeEvent(t,e[t]);return this}var n=this.retrieve("events");if(!n)return this;if(e)n[e]&&(n[e].keys.each((function(t){this.removeEvent(e,t)}),this),delete n[e]);else{for(t in n)this.removeEvents(t);this.eliminate("events")}return this},fireEvent:function(e,t,n){var i=this.retrieve("events");return i&&i[e]?(t=Array.convert(t),i[e].keys.each((function(e){n?e.delay(n,this,t):e.apply(this,t)}),this),this):this},cloneEvents:function(e,t){var n=(e=document.id(e)).retrieve("events");if(!n)return this;if(t)n[t]&&n[t].keys.each((function(e){this.addEvent(t,e)}),this);else for(var i in n)this.cloneEvents(e,i);return this}}),Element.NativeEvents={click:2,dblclick:2,mouseup:2,mousedown:2,contextmenu:2,wheel:2,mousewheel:2,DOMMouseScroll:2,mouseover:2,mouseout:2,mousemove:2,selectstart:2,selectend:2,keydown:2,keypress:2,keyup:2,orientationchange:2,touchstart:2,touchmove:2,touchend:2,touchcancel:2,gesturestart:2,gesturechange:2,gestureend:2,focus:2,blur:2,change:2,reset:2,select:2,submit:2,paste:2,input:2,load:2,unload:1,beforeunload:2,resize:1,move:1,DOMContentLoaded:1,readystatechange:1,hashchange:1,popstate:2,pageshow:2,pagehide:2,error:1,abort:1,scroll:1,message:2},Element.Events={mousewheel:{base:"onwheel"in document?"wheel":"onmousewheel"in document?"mousewheel":"DOMMouseScroll"}};var e=function(e){var t=e.relatedTarget;return null==t||!!t&&(t!=this&&"xul"!=t.prefix&&"document"!=typeOf(this)&&!this.contains(t))};"onmouseenter"in document.documentElement?(Element.NativeEvents.mouseenter=Element.NativeEvents.mouseleave=2,Element.MouseenterCheck=e):(Element.Events.mouseenter={base:"mouseover",condition:e},Element.Events.mouseleave={base:"mouseout",condition:e}),window.addEventListener||(Element.NativeEvents.propertychange=2,Element.Events.change={base:function(){var e=this.type;return"input"!=this.get("tag")||"radio"!=e&&"checkbox"!=e?"change":"propertychange"},condition:function(e){return"propertychange"!=e.type||"checked"==e.event.propertyName}})}(),function(){var e=!!window.addEventListener;Element.NativeEvents.focusin=Element.NativeEvents.focusout=2;var t=function(e,t,n,i,r){for(;r&&r!=e;){if(t(r,i))return n.call(r,i,r);r=document.id(r.parentNode)}},n={mouseenter:{base:"mouseover",condition:Element.MouseenterCheck},mouseleave:{base:"mouseout",condition:Element.MouseenterCheck},focus:{base:"focus"+(e?"":"in"),capture:!0},blur:{base:e?"blur":"focusout",capture:!0}},i="$delegation:",r=function(e){return{base:"focusin",remove:function(t,n){var r=t.retrieve(i+e+"listeners",{})[n];if(r&&r.forms)for(var o=r.forms.length;o--;)r.forms[o].removeEvent&&r.forms[o].removeEvent(e,r.fns[o])},listen:function(n,r,o,a,s,l){var c="form"==s.get("tag")?s:a.target.getParent("form");if(c){var u=n.retrieve(i+e+"listeners",{}),d=u[l]||{forms:[],fns:[]},h=d.forms,f=d.fns;if(-1==h.indexOf(c)){h.push(c);var p=function(e){t(n,r,o,e,s)};c.addEvent(e,p),f.push(p),u[l]=d,n.store(i+e+"listeners",u)}}}}},o=function(e){return{base:"focusin",listen:function(n,i,r,o,a){var s={blur:function(){this.removeEvents(s)}};s[e]=function(e){t(n,i,r,e,a)},o.target.addEvents(s)}}};e||Object.append(n,{submit:r("submit"),reset:r("reset"),change:o("change"),select:o("select")});var a=Element.prototype,s=a.addEvent,l=a.removeEvent,c=function(e,t){return function(n,i,r){if(-1==n.indexOf(":relay"))return e.call(this,n,i,r);var o=Slick.parse(n).expressions[0][0];if("relay"!=o.pseudos[0].key)return e.call(this,n,i,r);var a=o.tag;return o.pseudos.slice(1).each((function(e){a+=":"+e.key+(e.value?"("+e.value+")":"")})),e.call(this,n,i),t.call(this,a,o.pseudos[0].value,i)}},u={addEvent:function(e,i,r){var o=this.retrieve("$delegates",{}),a=o[e];if(a)for(var l in a)if(a[l].fn==r&&a[l].match==i)return this;var c=e,u=i,d=r,h=n[e]||{};e=h.base||c,i=function(e){return Slick.match(e,u)};var f=Element.Events[c];if(h.condition||f&&f.condition){var p=i,m=h.condition||f.condition;i=function(t,n){return p(t,n)&&m.call(t,n,e)}}var g=this,v=String.uniqueID(),b=h.listen?function(e,t){!t&&e&&e.target&&(t=e.target),t&&h.listen(g,i,r,e,t,v)}:function(e,n){!n&&e&&e.target&&(n=e.target),n&&t(g,i,r,e,n)};return a||(a={}),a[v]={match:u,fn:d,delegator:b},o[c]=a,s.call(this,e,b,h.capture)},removeEvent:function(e,t,i,r){var o,a,s=this.retrieve("$delegates",{}),c=s[e];if(!c)return this;if(r){var d=e,h=c[r].delegator,f=n[e]||{};return e=f.base||d,f.remove&&f.remove(this,r),delete c[r],s[d]=c,l.call(this,e,h,f.capture)}if(i){for(o in c)if((a=c[o]).match==t&&a.fn==i)return u.removeEvent.call(this,e,t,i,o)}else for(o in c)(a=c[o]).match==t&&u.removeEvent.call(this,e,t,a.fn,o);return this}};[Element,Window,Document].invoke("implement",{addEvent:c(s,u.addEvent),removeEvent:c(l,u.removeEvent)})}(),function(){function e(e,t){return h(e,t).toInt()||0}function t(t){return e(t,"border-top-width")}function n(t){return e(t,"border-left-width")}function i(e){return/^(?:body|html)$/i.test(e.tagName)}function r(e){var t=e.getDocument();return t.compatMode&&"CSS1Compat"!=t.compatMode?t.body:t.html}var o=document.createElement("div"),a=document.createElement("div");o.style.height="0",o.appendChild(a);var s=a.offsetParent===o;o=a=null;var l=["height","paddingTop","paddingBottom","borderTopWidth","borderBottomWidth"],c=["width","paddingLeft","paddingRight","borderLeftWidth","borderRightWidth"],u=function(e){return"static"!=h(e,"position")||i(e)},d=function(e){return u(e)||/^(?:table|td|th)$/i.test(e.tagName)};Element.implement({scrollTo:function(e,t){return i(this)?this.getWindow().scrollTo(e,t):(this.scrollLeft=e,this.scrollTop=t),this},getSize:function(){if(i(this))return this.getWindow().getSize();if(!window.getComputedStyle)return{x:this.offsetWidth,y:this.offsetHeight};if("svg"==this.get("tag"))return function(e){var t=window.getComputedStyle(e),n={x:0,y:0};return l.each((function(e){n.y+=parseFloat(t[e])})),c.each((function(e){n.x+=parseFloat(t[e])})),n}(this);try{var e=this.getBoundingClientRect();return{x:e.width,y:e.height}}catch(e){return{x:0,y:0}}},getScrollSize:function(){return i(this)?this.getWindow().getScrollSize():{x:this.scrollWidth,y:this.scrollHeight}},getScroll:function(){return i(this)?this.getWindow().getScroll():{x:this.scrollLeft,y:this.scrollTop}},getScrolls:function(){for(var e=this.parentNode,t={x:0,y:0};e&&!i(e);)t.x+=e.scrollLeft,t.y+=e.scrollTop,e=e.parentNode;return t},getOffsetParent:s?function(){var e=this;if(i(e)||"fixed"==h(e,"position"))return null;for(var t="static"==h(e,"position")?d:u;e=e.parentNode;)if(t(e))return e;return null}:function(){var e=this;if(i(e)||"fixed"==h(e,"position"))return null;try{return e.offsetParent}catch(e){}return null},getOffsets:function(){if(this.getBoundingClientRect){var e=this.getBoundingClientRect(),t=document.id(this.getDocument().documentElement),n=t.getScroll(),r=this.getScrolls(),o="fixed"==h(this,"position");return{x:e.left.toFloat()+r.x+(o?0:n.x)-t.clientLeft,y:e.top.toFloat()+r.y+(o?0:n.y)-t.clientTop}}var a=this,s={x:0,y:0};if(i(this))return s;for(;a&&!i(a);)s.x+=a.offsetLeft,s.y+=a.offsetTop,a=a.offsetParent;return s},getPosition:function(e){var i=this.getOffsets(),r=this.getScrolls(),o={x:i.x-r.x,y:i.y-r.y};if(e&&(e=document.id(e))){var a=e.getPosition();return{x:o.x-a.x-n(e),y:o.y-a.y-t(e)}}return o},getCoordinates:function(e){if(i(this))return this.getWindow().getCoordinates();var t=this.getPosition(e),n=this.getSize(),r={left:t.x,top:t.y,width:n.x,height:n.y};return r.right=r.left+r.width,r.bottom=r.top+r.height,r},computePosition:function(t){return{left:t.x-e(this,"margin-left"),top:t.y-e(this,"margin-top")}},setPosition:function(e){return this.setStyles(this.computePosition(e))}}),[Document,Window].invoke("implement",{getSize:function(){var e=r(this);return{x:e.clientWidth,y:e.clientHeight}},getScroll:function(){var e=this.getWindow(),t=r(this);return{x:e.pageXOffset||t.scrollLeft,y:e.pageYOffset||t.scrollTop}},getScrollSize:function(){var e=r(this),t=this.getSize(),n=this.getDocument().body;return{x:Math.max(e.scrollWidth,n.scrollWidth,t.x),y:Math.max(e.scrollHeight,n.scrollHeight,t.y)}},getPosition:function(){return{x:0,y:0}},getCoordinates:function(){var e=this.getSize();return{top:0,left:0,bottom:e.y,right:e.x,height:e.y,width:e.x}}});var h=Element.getComputedStyle}(),Element.alias({position:"setPosition"}),[Window,Document,Element].invoke("implement",{getHeight:function(){return this.getSize().y},getWidth:function(){return this.getSize().x},getScrollTop:function(){return this.getScroll().y},getScrollLeft:function(){return this.getScroll().x},getScrollHeight:function(){return this.getScrollSize().y},getScrollWidth:function(){return this.getScrollSize().x},getTop:function(){return this.getPosition().y},getLeft:function(){return this.getPosition().x}}),function(){var e=this.Fx=new Class({Implements:[Chain,Events,Options,Class.Thenable],options:{fps:60,unit:!1,duration:500,frames:null,frameSkip:!0,link:"ignore"},initialize:function(e){this.subject=this.subject||this,this.setOptions(e)},getTransition:function(){return function(e){return-(Math.cos(Math.PI*e)-1)/2}},step:function(e){if(this.options.frameSkip){var t=(null!=this.time?e-this.time:0)/this.frameInterval;this.time=e,this.frame+=t}else this.frame++;if(this.frame<this.frames){var n=this.transition(this.frame/this.frames);this.set(this.compute(this.from,this.to,n))}else this.frame=this.frames,this.set(this.compute(this.from,this.to,1)),this.stop()},set:function(e){return e},compute:function(t,n,i){return e.compute(t,n,i)},check:function(){if(!this.isRunning())return!0;switch(this.options.link){case"cancel":return this.cancel(),!0;case"chain":return this.chain(this.caller.pass(arguments,this)),!1}return!1},start:function(t,n){if(!this.check(t,n))return this;this.from=t,this.to=n,this.frame=this.options.frameSkip?0:-1,this.time=null,this.transition=this.getTransition();var i=this.options.frames,o=this.options.fps,a=this.options.duration;return this.duration=e.Durations[a]||a.toInt(),this.frameInterval=1e3/o,this.frames=i||Math.round(this.duration/this.frameInterval),"pending"!==this.getThenableState()&&this.resetThenable(this.subject),this.fireEvent("start",this.subject),r.call(this,o),this},stop:function(){return this.isRunning()&&(this.time=null,o.call(this,this.options.fps),this.frames==this.frame?(this.fireEvent("complete",this.subject),this.callChain()||this.fireEvent("chainComplete",this.subject)):this.fireEvent("stop",this.subject),this.resolve(this.subject===this?null:this.subject)),this},cancel:function(){return this.isRunning()&&(this.time=null,o.call(this,this.options.fps),this.frame=this.frames,this.fireEvent("cancel",this.subject).clearChain(),this.reject(this.subject)),this},pause:function(){return this.isRunning()&&(this.time=null,o.call(this,this.options.fps)),this},resume:function(){return this.isPaused()&&r.call(this,this.options.fps),this},isRunning:function(){var e=t[this.options.fps];return e&&e.contains(this)},isPaused:function(){return this.frame<this.frames&&!this.isRunning()}});e.compute=function(e,t,n){return(t-e)*n+e},e.Durations={short:250,normal:500,long:1e3};var t={},n={},i=function(){for(var e=Date.now(),t=this.length;t--;){var n=this[t];n&&n.step(e)}},r=function(e){var r=t[e]||(t[e]=[]);r.push(this),n[e]||(n[e]=i.periodical(Math.round(1e3/e),r))},o=function(e){var i=t[e];i&&(i.erase(this),!i.length&&n[e]&&(delete t[e],n[e]=clearInterval(n[e])))}}(),Fx.CSS=new Class({Extends:Fx,prepare:function(e,t,n){var i=(n=Array.convert(n))[0],r=n[1];if(null==r){r=i,i=e.getStyle(t);var o=this.options.unit;if(o&&i&&"string"==typeof i&&i.slice(-o.length)!=o&&0!=parseFloat(i)){e.setStyle(t,r+o);var a=e.getComputedStyle(t);if(!/px$/.test(a)&&null==(a=e.style[("pixel-"+t).camelCase()])){var s=e.style.left;e.style.left=r+o,a=e.style.pixelLeft,e.style.left=s}i=(r||1)/(parseFloat(a)||1)*(parseFloat(i)||0),e.setStyle(t,i+o)}}return{from:this.parse(i),to:this.parse(r)}},parse:function(e){return(e="string"==typeof(e=Function.convert(e)())?e.split(" "):Array.convert(e)).map((function(e){e=String(e);var t=!1;return Object.each(Fx.CSS.Parsers,(function(n){if(!t){var i=n.parse(e);(i||0===i)&&(t={value:i,parser:n})}})),t=t||{value:e,parser:Fx.CSS.Parsers.String}}))},compute:function(e,t,n){var i=[];return Math.min(e.length,t.length).times((function(r){i.push({value:e[r].parser.compute(e[r].value,t[r].value,n),parser:e[r].parser})})),i.$family=Function.convert("fx:css:value"),i},serve:function(e,t){"fx:css:value"!=typeOf(e)&&(e=this.parse(e));var n=[];return e.each((function(e){n=n.concat(e.parser.serve(e.value,t))})),n},render:function(e,t,n,i){e.setStyle(t,this.serve(n,i))},search:function(e){if(Fx.CSS.Cache[e])return Fx.CSS.Cache[e];var t={},n=new RegExp("^"+e.escapeRegExp()+"$"),i=function(e){Array.each(e,(function(e){if(e.media)i(e.rules||e.cssRules);else if(e.style){var r=e.selectorText?e.selectorText.replace(/^\w+/,(function(e){return e.toLowerCase()})):null;r&&n.test(r)&&Object.each(Element.Styles,(function(n,i){e.style[i]&&!Element.ShortStyles[i]&&(n=String(e.style[i]),t[i]=/^rgb/.test(n)?n.rgbToHex():n)}))}}))};return Array.each(document.styleSheets,(function(e){var t=e.href;if(!(t&&t.indexOf("://")>-1&&-1==t.indexOf(document.domain))){var n=e.rules||e.cssRules;i(n)}})),Fx.CSS.Cache[e]=t}}),Fx.CSS.Cache={},Fx.CSS.Parsers={Color:{parse:function(e){return e.match(/^#[0-9a-f]{3,6}$/i)?e.hexToRgb(!0):!!(e=e.match(/(\d+),\s*(\d+),\s*(\d+)/))&&[e[1],e[2],e[3]]},compute:function(e,t,n){return e.map((function(i,r){return Math.round(Fx.compute(e[r],t[r],n))}))},serve:function(e){return e.map(Number)}},Number:{parse:parseFloat,compute:Fx.compute,serve:function(e,t){return t?e+t:e}},String:{parse:Function.convert(!1),compute:function(e,t){return t},serve:function(e){return e}}},Fx.Tween=new Class({Extends:Fx.CSS,initialize:function(e,t){this.element=this.subject=document.id(e),this.parent(t)},set:function(e,t){return 1==arguments.length&&(t=e,e=this.property||this.options.property),this.render(this.element,e,t,this.options.unit),this},start:function(e,t,n){if(!this.check(e,t,n))return this;var i=Array.flatten(arguments);this.property=this.options.property||i.shift();var r=this.prepare(this.element,this.property,i);return this.parent(r.from,r.to)}}),Element.Properties.tween={set:function(e){return this.get("tween").cancel().setOptions(e),this},get:function(){var e=this.retrieve("tween");return e||(e=new Fx.Tween(this,{link:"cancel"}),this.store("tween",e)),e}},Element.implement({tween:function(e,t,n){return this.get("tween").start(e,t,n),this},fade:function(){var e,t,n=this.get("tween"),i=["opacity"].append(arguments);switch(null==i[1]&&(i[1]="toggle"),i[1]){case"in":e="start",i[1]=1;break;case"out":e="start",i[1]=0;break;case"show":e="set",i[1]=1;break;case"hide":e="set",i[1]=0;break;case"toggle":var r=this.retrieve("fade:flag",1==this.getStyle("opacity"));e="start",i[1]=r?0:1,this.store("fade:flag",!r),t=!0;break;default:e="start"}t||this.eliminate("fade:flag"),n[e].apply(n,i);var o=i[i.length-1];return"set"==e?this.setStyle("visibility",0==o?"hidden":"visible"):0!=o?n.$chain.length?n.chain((function(){this.element.setStyle("visibility","visible"),this.callChain()})):this.setStyle("visibility","visible"):n.chain((function(){this.element.getStyle("opacity")||(this.element.setStyle("visibility","hidden"),this.callChain())})),this},highlight:function(e,t){t||(t="transparent"==(t=this.retrieve("highlight:original",this.getStyle("background-color")))?"#fff":t);var n=this.get("tween");return n.start("background-color",e||"#ffff88",t).chain(function(){this.setStyle("background-color",this.retrieve("highlight:original")),n.callChain()}.bind(this)),this}}),Fx.Morph=new Class({Extends:Fx.CSS,initialize:function(e,t){this.element=this.subject=document.id(e),this.parent(t)},set:function(e){for(var t in"string"==typeof e&&(e=this.search(e)),e)this.render(this.element,t,e[t],this.options.unit);return this},compute:function(e,t,n){var i={};for(var r in e)i[r]=this.parent(e[r],t[r],n);return i},start:function(e){if(!this.check(e))return this;"string"==typeof e&&(e=this.search(e));var t={},n={};for(var i in e){var r=this.prepare(this.element,i,e[i]);t[i]=r.from,n[i]=r.to}return this.parent(t,n)}}),Element.Properties.morph={set:function(e){return this.get("morph").cancel().setOptions(e),this},get:function(){var e=this.retrieve("morph");return e||(e=new Fx.Morph(this,{link:"cancel"}),this.store("morph",e)),e}},Element.implement({morph:function(e){return this.get("morph").start(e),this}}),Fx.implement({getTransition:function(){var e=this.options.transition||Fx.Transitions.Sine.easeInOut;if("string"==typeof e){var t=e.split(":");e=(e=Fx.Transitions)[t[0]]||e[t[0].capitalize()],t[1]&&(e=e["ease"+t[1].capitalize()+(t[2]?t[2].capitalize():"")])}return e}}),Fx.Transition=function(e,t){t=Array.convert(t);var n=function(n){return e(n,t)};return Object.append(n,{easeIn:n,easeOut:function(n){return 1-e(1-n,t)},easeInOut:function(n){return(.5>=n?e(2*n,t):2-e(2*(1-n),t))/2}})},Fx.Transitions={linear:function(e){return e}},Fx.Transitions.extend=function(e){for(var t in e)Fx.Transitions[t]=new Fx.Transition(e[t])},Fx.Transitions.extend({Pow:function(e,t){return Math.pow(e,t&&t[0]||6)},Expo:function(e){return Math.pow(2,8*(e-1))},Circ:function(e){return 1-Math.sin(Math.acos(e))},Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Back:function(e,t){return t=t&&t[0]||1.618,Math.pow(e,2)*((t+1)*e-t)},Bounce:function(e){for(var t,n=0,i=1;;n+=i,i/=2)if(e>=(7-4*n)/11){t=i*i-Math.pow((11-6*n-11*e)/4,2);break}return t},Elastic:function(e,t){return Math.pow(2,10*--e)*Math.cos(20*e*Math.PI*(t&&t[0]||1)/3)}}),["Quad","Cubic","Quart","Quint"].each((function(e,t){Fx.Transitions[e]=new Fx.Transition((function(e){return Math.pow(e,t+2)}))})),function(){var e=function(){},t="onprogress"in new Browser.Request,n=this.Request=new Class({Implements:[Chain,Events,Options,Class.Thenable],options:{url:"",data:"",headers:{"X-Requested-With":"XMLHttpRequest",Accept:"text/javascript, text/html, application/xml, text/xml, */*"},async:!0,format:!1,method:"post",link:"ignore",isSuccess:null,emulation:!0,urlEncoded:!0,encoding:"utf-8",evalScripts:!1,evalResponse:!1,timeout:0,noCache:!1},initialize:function(e){this.xhr=new Browser.Request,this.setOptions(e),this.headers=this.options.headers},onStateChange:function(){var n=this.xhr;4==n.readyState&&this.running&&(this.running=!1,this.status=0,Function.attempt(function(){var e=n.status;this.status=1223==e?204:e}.bind(this)),n.onreadystatechange=e,t&&(n.onprogress=n.onloadstart=e),this.timer&&(clearTimeout(this.timer),delete this.timer),this.response={text:this.xhr.responseText||"",xml:this.xhr.responseXML},this.options.isSuccess.call(this,this.status)?this.success(this.response.text,this.response.xml):this.failure())},isSuccess:function(){var e=this.status;return e>=200&&300>e},isRunning:function(){return!!this.running},processScripts:function(e){return this.options.evalResponse||/(ecma|java)script/.test(this.getHeader("Content-type"))?Browser.exec(e):e.stripScripts(this.options.evalScripts)},success:function(e,t){this.onSuccess(this.processScripts(e),t),this.resolve({text:e,xml:t})},onSuccess:function(){this.fireEvent("complete",arguments).fireEvent("success",arguments).callChain()},failure:function(){this.onFailure(),this.reject({reason:"failure",xhr:this.xhr})},onFailure:function(){this.fireEvent("complete").fireEvent("failure",this.xhr)},loadstart:function(e){this.fireEvent("loadstart",[e,this.xhr])},progress:function(e){this.fireEvent("progress",[e,this.xhr])},timeout:function(){this.fireEvent("timeout",this.xhr),this.reject({reason:"timeout",xhr:this.xhr})},setHeader:function(e,t){return this.headers[e]=t,this},getHeader:function(e){return Function.attempt(function(){return this.xhr.getResponseHeader(e)}.bind(this))},check:function(){if(!this.running)return!0;switch(this.options.link){case"cancel":return this.cancel(),!0;case"chain":return this.chain(this.caller.pass(arguments,this)),!1}return!1},send:function(e){if(!this.check(e))return this;this.options.isSuccess=this.options.isSuccess||this.isSuccess,this.running=!0;var n=typeOf(e);("string"==n||"element"==n)&&(e={data:e});var i=this.options,r=(e=Object.append({data:i.data,url:i.url,method:i.method},e)).data,o=String(e.url),a=e.method.toLowerCase();switch(typeOf(r)){case"element":r=document.id(r).toQueryString();break;case"object":case"hash":r=Object.toQueryString(r)}if(this.options.format){var s="format="+this.options.format;r=r?s+"&"+r:s}if(this.options.emulation&&!["get","post"].contains(a)){var l="_method="+a;r=r?l+"&"+r:l,a="post"}if(this.options.urlEncoded&&["post","put"].contains(a)){var c=this.options.encoding?"; charset="+this.options.encoding:"";this.headers["Content-type"]="application/x-www-form-urlencoded"+c}o||(o=document.location.pathname);var u=o.lastIndexOf("/");u>-1&&(u=o.indexOf("#"))>-1&&(o=o.substr(0,u)),this.options.noCache&&(o+=(o.indexOf("?")>-1?"&":"?")+String.uniqueID()),!r||"get"!=a&&"delete"!=a||(o+=(o.indexOf("?")>-1?"&":"?")+r,r=null);var d=this.xhr;return t&&(d.onloadstart=this.loadstart.bind(this),d.onprogress=this.progress.bind(this)),d.open(a.toUpperCase(),o,this.options.async,this.options.user,this.options.password),this.options.withCredentials&&"withCredentials"in d&&(d.withCredentials=!0),d.onreadystatechange=this.onStateChange.bind(this),Object.each(this.headers,(function(e,t){try{d.setRequestHeader(t,e)}catch(n){this.fireEvent("exception",[t,e]),this.reject({reason:"exception",xhr:d,exception:n})}}),this),"pending"!==this.getThenableState()&&this.resetThenable({reason:"send"}),this.fireEvent("request"),d.send(r),this.options.async?this.options.timeout&&(this.timer=this.timeout.delay(this.options.timeout,this)):this.onStateChange(),this},cancel:function(){if(!this.running)return this;this.running=!1;var n=this.xhr;return n.abort(),this.timer&&(clearTimeout(this.timer),delete this.timer),n.onreadystatechange=e,t&&(n.onprogress=n.onloadstart=e),this.xhr=new Browser.Request,this.fireEvent("cancel"),this.reject({reason:"cancel",xhr:n}),this}}),i={};["get","post","put","delete","patch","head","GET","POST","PUT","DELETE","PATCH","HEAD"].each((function(e){i[e]=function(t){var n={method:e};return null!=t&&(n.data=t),this.send(n)}})),n.implement(i),Element.Properties.send={set:function(e){return this.get("send").cancel().setOptions(e),this},get:function(){var e=this.retrieve("send");return e||(e=new n({data:this,link:"cancel",method:this.get("method")||"post",url:this.get("action")}),this.store("send",e)),e}},Element.implement({send:function(e){var t=this.get("send");return t.send({data:this,url:e||t.options.url}),this}})}(),Request.HTML=new Class({Extends:Request,options:{update:!1,append:!1,evalScripts:!0,filter:!1,headers:{Accept:"text/html, application/xml, text/xml, */*"}},success:function(e){var t=this.options,n=this.response;n.html=e.stripScripts((function(e){n.javascript=e}));var i=n.html.match(/<body[^>]*>([\s\S]*?)<\/body>/i);i&&(n.html=i[1]);var r=new Element("div").set("html",n.html);if(n.tree=r.childNodes,n.elements=r.getElements(t.filter||"*"),t.filter&&(n.tree=n.elements),t.update){var o=document.id(t.update).empty();t.filter?o.adopt(n.elements):o.set("html",n.html)}else if(t.append){var a=document.id(t.append);t.filter?n.elements.reverse().inject(a):a.adopt(r.getChildren())}t.evalScripts&&Browser.exec(n.javascript),this.onSuccess(n.tree,n.elements,n.html,n.javascript),this.resolve({tree:n.tree,elements:n.elements,html:n.html,javascript:n.javascript})}}),Element.Properties.load={set:function(e){return this.get("load").cancel().setOptions(e),this},get:function(){var e=this.retrieve("load");return e||(e=new Request.HTML({data:this,link:"cancel",update:this,method:"get"}),this.store("load",e)),e}},Element.implement({load:function(){return this.get("load").send(Array.link(arguments,{data:Type.isObject,url:Type.isString})),this}}),"undefined"==typeof JSON&&(this.JSON={}),function(){var special={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},escape=function(e){return special[e]||"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)};JSON.validate=function(e){return e=e.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""),/^[\],:{}\s]*$/.test(e)},JSON.encode=JSON.stringify?function(e){return JSON.stringify(e)}:function(e){switch(e&&e.toJSON&&(e=e.toJSON()),typeOf(e)){case"string":return'"'+e.replace(/[\x00-\x1f\\"]/g,escape)+'"';case"array":return"["+e.map(JSON.encode).clean()+"]";case"object":case"hash":var t=[];return Object.each(e,(function(e,n){var i=JSON.encode(e);i&&t.push(JSON.encode(n)+":"+i)})),"{"+t+"}";case"number":case"boolean":return""+e;case"null":return"null"}return null},JSON.secure=!0,JSON.decode=function(string,secure){if(!string||"string"!=typeOf(string))return null;if(null==secure&&(secure=JSON.secure),secure){if(JSON.parse)return JSON.parse(string);if(!JSON.validate(string))throw new Error("JSON could not decode the input; security is enabled and the value is not secure.")}return eval("("+string+")")}}(),Request.JSON=new Class({Extends:Request,options:{secure:!0},initialize:function(e){this.parent(e),Object.append(this.headers,{Accept:"application/json","X-Request":"JSON"})},success:function(e){var t;try{t=this.response.json=JSON.decode(e,this.options.secure)}catch(t){return void this.fireEvent("error",[e,t])}null==t?this.failure():(this.onSuccess(t,e),this.resolve({json:t,text:e}))}});var Cookie=new Class({Implements:Options,options:{path:"/",domain:!1,duration:!1,secure:!1,document:document,encode:!0,httpOnly:!1},initialize:function(e,t){this.key=e,this.setOptions(t)},write:function(e){if(this.options.encode&&(e=encodeURIComponent(e)),this.options.domain&&(e+="; domain="+this.options.domain),this.options.path&&(e+="; path="+this.options.path),this.options.duration){var t=new Date;t.setTime(t.getTime()+24*this.options.duration*60*60*1e3),e+="; expires="+t.toGMTString()}return this.options.secure&&(e+="; secure"),this.options.httpOnly&&(e+="; HttpOnly"),this.options.document.cookie=this.key+"="+e,this},read:function(){var e=this.options.document.cookie.match("(?:^|;)\\s*"+this.key.escapeRegExp()+"=([^;]*)");return e?decodeURIComponent(e[1]):null},dispose:function(){return new Cookie(this.key,Object.merge({},this.options,{duration:-1})).write(""),this}});Cookie.write=function(e,t,n){return new Cookie(e,n).write(t)},Cookie.read=function(e){return new Cookie(e).read()},Cookie.dispose=function(e,t){return new Cookie(e,t).dispose()},function(e,t){var n,i,r,o,a=[],s=t.createElement("div"),l=function(){clearTimeout(o),n||(Browser.loaded=n=!0,t.removeListener("DOMContentLoaded",l).removeListener("readystatechange",c),t.fireEvent("domready"),e.fireEvent("domready")),t=e=s=null},c=function(){for(var e=a.length;e--;)if(a[e]())return l(),!0;return!1},u=function(){clearTimeout(o),c()||(o=setTimeout(u,10))};t.addListener("DOMContentLoaded",l);var d=function(){try{return s.doScroll(),!0}catch(e){}return!1};s.doScroll&&!d()&&(a.push(d),r=!0),t.readyState&&a.push((function(){var e=t.readyState;return"loaded"==e||"complete"==e})),"onreadystatechange"in t?t.addListener("readystatechange",c):r=!0,r&&u(),Element.Events.domready={onAdd:function(e){n&&e.call(this)}},Element.Events.load={base:"load",onAdd:function(t){i&&this==e&&t.call(this)},condition:function(){return this==e&&(l(),delete Element.Events.load),!0}},e.addEvent("load",(function(){i=!0}))}(window,document),define("mootools-core",(function(){})),define("pgui.admin-page-main",["pgui.user_management_api","pgui.localizer","libs/sprintf","pgui.utils","knockout","pgui.change_password_dialog","bootbox","mootools-core"],(function(e,t,n,i,r){return function(){window.PhpGenAdmin.Utils={showProgressCursor:function(){$("body").addClass("cursor-progress")},hideProgressCursor:function(){$("body").removeClass("cursor-progress")}},window.PhpGenAdmin.UserViewModel=new Class({initialize:function(e,t,n,i,o,a,s){this.api=e,this.id=t,this.name=r.observable(n),this.password=i,this.email=r.observable(o),this.status=r.observable(a),this.editable=r.observable(s),this.grantsLoaded=r.observable(!1),this.grantsExpanded=r.observable(!1),this.grants=r.observableArray([])},_loadGrants:function(){this.api.getUserGrants(this.id).done(function(e){for(var t=0;t<e.length;t++)this.grants.push(new PhpGenAdmin.UserPageGrantsViewModel(this.api,this.id,e[t].name,e[t].caption,e[t].selectGrant,e[t].updateGrant,e[t].insertGrant,e[t].deleteGrant,e[t].adminGrant));this.grantsLoaded(!0)}.bind(this))},collapseGrants:function(){this.grantsExpanded(!1)},expandGrants:function(){this.grantsExpanded()||(this.grantsExpanded(!0),this.grantsLoaded()||this._loadGrants())},toggleGrantsExpanded:function(){this.grantsExpanded()?this.grantsExpanded(!1):(this.grantsExpanded(!0),this.grantsLoaded()||this._loadGrants())}}),window.PhpGenAdmin.UserPageGrantsViewModel=new Class({initialize:function(e,t,n,i,o,a,s,l,c){this.api=e,this.userId=t,this.pageName=r.observable(n),this.caption=r.observable(i),this.selectGrant=r.observable(o),this.updateGrant=r.observable(a),this.insertGrant=r.observable(s),this.deleteGrant=r.observable(l),this.adminGrant=r.observable(c),this.selectGrant.subscribe(function(e){this._updateUserGrant("SELECT",e)}.bind(this)),this.updateGrant.subscribe(function(e){this._updateUserGrant("UPDATE",e)}.bind(this)),this.insertGrant.subscribe(function(e){this._updateUserGrant("INSERT",e)}.bind(this)),this.deleteGrant.subscribe(function(e){this._updateUserGrant("DELETE",e)}.bind(this)),this.adminGrant.subscribe(function(e){this._updateUserGrant("ADMIN",e)}.bind(this))},isApplication:function(){return 0===this.pageName().length},_updateUserGrant:function(e,t){PhpGenAdmin.Utils.showProgressCursor(),function(){return t?this.api.addUserGrant(this.userId,this.pageName(),e):this.api.removeUserGrant(this.userId,this.pageName(),e)}.bind(this)().always((function(){PhpGenAdmin.Utils.hideProgressCursor()})).fail((function(e){i.showErrorMessage(e)}))}}),window.PhpGenAdmin.AdminPanelViewModel=function(e){this.api=e,this.newUser={id:r.observable(""),name:r.observable("New user"),password:r.observable(""),confirmedPassword:r.observable(""),email:r.observable("")},this.changePasswordUser={id:r.observable(""),name:r.observable("")},this.editUser={id:r.observable(""),name:r.observable("Edit user"),password:r.observable(""),email:r.observable(""),status:r.observable("")},this.currentUserRoles=r.observableArray([]),this.invokeRemoveUserDialog=function(e){var r=this;bootbox.confirm(n.sprintf(t.getString("DeleteUserConfirmation"),e.name()),(function(t){t&&(PhpGenAdmin.Utils.showProgressCursor(),r.api.removeUser(e.id).done(function(t){r.users.remove(e)}.bind(this)).always((function(){PhpGenAdmin.Utils.hideProgressCursor()})).fail((function(e){i.showErrorMessage(e)})))}))},this.invokeChangeUserPasswordDialog=function(e){this.changePasswordUser.id(e.id),this.changePasswordUser.name(e.name()),PhpGenChangePasswordDialog.open()},this.invokeEditUserDialog=function(e){var t=this,n=$("#pg-admin-edit-user-dialog");t.editUser.id(e.id),t.editUser.name(e.name()),t.editUser.password(e.password),t.editUser.email(e.email()),t.editUser.status(e.status()),$("#save-edit-user-dialog").bind("click",(function(r){r.preventDefault(),t.emailBasedFeaturesEnabled?t.api.updateUser(t.editUser.id(),t.editUser.name(),t.editUser.email(),t.editUser.status()).fail((function(e){i.showErrorMessage(e)})).done((function(t){n.modal("hide"),e.name(t.name),e.email(t.email),e.status(t.status)})):t.api.changeUserName(t.editUser.id(),t.editUser.name()).fail((function(e){i.showErrorMessage(e)})).done((function(t){n.modal("hide"),e.name(t.username)}))})),n.modal("show"),$("#user-username").focus(),n.bind("hidden.bs.modal",(function(){$("#save-edit-user-dialog").unbind("click"),n.unbind("hidden.bs.modal")}))},this.expandAllGrants=function(){for(var e=0;e<this.users().length;e++)this.users()[e].expandGrants()},this.collapseAllGrants=function(){for(var e=0;e<this.users().length;e++)this.users()[e].collapseGrants()},this.invokeAddUserDialog=function(){var e=this,t=$("#pg-admin-create-user-dialog"),n=$("#newuser-confirmed-password-error");e.newUser.id(""),e.newUser.name("New user"),e.newUser.password(""),e.newUser.confirmedPassword(""),n.hide(),e.newUser.email(""),$("#save-create-user-dialog").bind("click",(function(r){r.preventDefault(),PhpGenPasswordDialogUtils.validateConfirmedPassword(e.newUser.password(),e.newUser.confirmedPassword(),n)&&(e.emailBasedFeaturesEnabled?e.api.addUserEx(e.newUser.name(),e.newUser.password(),e.newUser.email()).fail((function(e){i.showErrorMessage(e)})).done((function(n){t.modal("hide"),e.users.push(new PhpGenAdmin.UserViewModel(e.api,n.id,n.name,n.password,n.email,0,!0))})):e.api.addUser(e.newUser.name(),e.newUser.password()).fail((function(e){i.showErrorMessage(e)})).done((function(n){t.modal("hide"),e.users.push(new PhpGenAdmin.UserViewModel(e.api,n.id,n.name,n.password,"",0,!0))})))})),t.modal("show"),$("#newuser-id").focus(),t.bind("hidden.bs.modal",(function(){$("#save-create-user-dialog").unbind("click"),t.unbind("hidden.bs.modal")}))},this.users=r.observableArray([]),this.usersOnCurrentPage=r.dependentObservable((function(){return this.users.slice(0,this.users().length).sort((function(e,t){return-1===e.id||0===e.id?0===t.id?1:-1:e.name()<t.name()?-1:e.name()>t.name()?1:0}))}),this)};var o,a=e;for(window.PhpGenAdmin.adminPanelViewModel=new PhpGenAdmin.AdminPanelViewModel(a),PhpGenAdmin.adminPanelViewModel.emailBasedFeaturesEnabled=PhpGenAdmin.EmailBasedFeaturesEnabled,o=0;o<PhpGenAdmin.CurrentUsers.length;o++)PhpGenAdmin.adminPanelViewModel.users.push(new PhpGenAdmin.UserViewModel(a,PhpGenAdmin.CurrentUsers[o].id,PhpGenAdmin.CurrentUsers[o].name,PhpGenAdmin.CurrentUsers[o].password,PhpGenAdmin.CurrentUsers[o].email,PhpGenAdmin.CurrentUsers[o].status,PhpGenAdmin.CurrentUsers[o].editable));r.applyBindings(PhpGenAdmin.adminPanelViewModel),PhpGenChangePasswordDialog.initialize(new PhpGenChangePasswordDialogAdminStrategy((function(e){return a.changeUserPassword(PhpGenAdmin.adminPanelViewModel.changePasswordUser.id,e)}))),$("#pg-admin-create-user-dialog").modal({show:!1}),$("#pg-admin-edit-user-dialog").modal({show:!1})}})),define("pgui.validation-utils",["pgui.localizer"],(function(e){return{validatePasswordBasedForm:function(t,n){return t.password===t.confirmedpassword||(n.SetMessage(e.getString("PasswordAndConfirmationPasswordMustMatch")),!1)}}})),define("pgui.registration-page",["pgui.form-page-main","pgui.validation-utils"],(function(e,t){return function(){e(),window.registrationFormValidation=t.validatePasswordBasedForm}})),define("pgui.reset-password-page",["pgui.form-page-main","pgui.validation-utils"],(function(e,t){return function(){e(),window.resetPasswordFormValidation=t.validatePasswordBasedForm}})),define("pgui.self_change_password",["pgui.user_management_api","pgui.change_password_dialog"],(function(e){return function(){PhpGenChangePasswordDialog.initialize(new PhpGenChangePasswordDialogUserStrategy((function(t,n){return e.selfChangePassword(t,n)}))),$("#self-change-password").click((function(){PhpGenChangePasswordDialog.open()}))}}));var PhpGenPasswordDialogUtils={validateConfirmedPassword:function(e,t,n){return e!==t?(n.show(),!1):(n.hide(),!0)}};define("pgui.password_dialog_utils",(function(){})),$((function(){$("div[data-hint], img[data-hint], th[data-hint]").each((function(){$(this).popover({placement:"right",container:"body",trigger:"hover",html:!0,title:$(this).attr("data-hinttitle"),content:$(this).attr("data-hint")})}))})),define("custom/custom.hints",(function(){})),$((function(){function e(e,t,n,i=!0,r=!0){return function(e,t,n,i,r){const o=$(e).attr("type");var a=$(e).val();const s=!a,l=!t;a==t||s&&l||!i&&!s?$(e).removeClass("ws-changed-value"):"checkbox"===o?(a=$(e).prop("checked"))!==t&&($(e).prop("checked",t).addClass("ws-changed-value"),$(e).parent().addClass("ws-changed-value"),$("#info-message").append('<p><span class="ws-update-val ws-update-val-old">'+n+": "+a+'</span> â <span class="ws-update-val ws-update-val-new">'+t+"</span></p>").show()):r&&l||($(e).val(t).addClass("ws-changed-value"),s||$("#info-message").append('<p><span class="ws-update-val ws-update-val-old">'+n+": "+a+'</span> â <span class="ws-update-val ws-update-val-new">'+t+"</span></p>").show())}("#"+e+"_"+t+"_edit",n,t,i,r)}$("#btn-ws-uid").click((function(){$(".row form").each((function(){const t=$(this).attr("id"),n=$("#"+t+"_uid_edit").val();n?($("#info-message").append("<p>Fetch data from uid webservice for "+n+"</p>").show(),$("#btn-ws-uid").addClass("btn-loading"),$.getJSON(`${window.ws_uid_base_url}/${n}?access_key=cdaVCGjrDqbuR0kuD0lx4eHF9eJmiWBUP6OgLA4t`,(function(n,i,r){n&&n.success&&n.data?(e(t,"name_de",n.data.name_de),e(t,"abkuerzung_de",n.data.abkuerzung_de),e(t,"in_handelsregister",n.data.in_handelsregister),e(t,"land_id",n.data.land_id),e(t,"adresse_strasse",n.data.adresse_strasse),e(t,"adresse_zusatz",n.data.adresse_zusatz),e(t,"adresse_plz",n.data.adresse_plz),e(t,"ort",n.data.ort),e(t,"bfs_gemeinde_nr",n.data.bfs_gemeinde_nr),e(t,"rechtsform",n.data.rechtsform),e(t,"rechtsform_zefix",n.data.rechtsform_zefix),e(t,"rechtsform_handelsregister",n.data.rechtsform_handelsregister),e(t,"beschreibung",n.data.zweck,!1),(n.data.inaktiv||!1===n.data.inaktiv)&&e(t,"inaktiv",n.data.inaktiv,!1),$("#info-message").append("<p>State: "+i+"</p>").show()):$("#error-message").append("<p>Failed: "+n.message+" (Call state: "+i+")</p>").show()})).fail((function(e,t,n){const i=t+", "+n;$("#error-message").append("<p>Request failed: "+i+"</p>").show()})).always((function(e,t,n){$("#btn-ws-uid").removeClass("btn-loading")}))):$("#error-message").append('<p>Failed: Empty UID.<br>Search UID on <a href="https://www.uid.admin.ch/" title="Opens UID-Register@BFS webpage" target="_blank">UID-Register</a>.</p>').show()}))}))})),define("custom/custom.ws-uid",(function(){})),
/*! jQuery UI - v1.12.1 - 2016-11-12
* http://jqueryui.com
* Includes: widget.js, keycode.js, unique-id.js, widgets/tabs.js
* Copyright jQuery Foundation and other contributors; Licensed MIT */
function(e){"function"==typeof define&&define.amd?define("custom/jquery-ui.min",["jquery"],e):e(jQuery)}((function(e){e.ui=e.ui||{},e.ui.version="1.12.1";var t=0,n=Array.prototype.slice;e.cleanData=function(t){return function(n){var i,r,o;for(o=0;null!=(r=n[o]);o++)try{(i=e._data(r,"events"))&&i.remove&&e(r).triggerHandler("remove")}catch(e){}t(n)}}(e.cleanData),e.widget=function(t,n,i){var r,o,a,s={},l=t.split(".")[0],c=l+"-"+(t=t.split(".")[1]);return i||(i=n,n=e.Widget),e.isArray(i)&&(i=e.extend.apply(null,[{}].concat(i))),e.expr[":"][c.toLowerCase()]=function(t){return!!e.data(t,c)},e[l]=e[l]||{},r=e[l][t],o=e[l][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new o(e,t)},e.extend(o,r,{version:i.version,_proto:e.extend({},i),_childConstructors:[]}),(a=new n).options=e.widget.extend({},a.options),e.each(i,(function(t,i){return e.isFunction(i)?void(s[t]=function(){function e(){return n.prototype[t].apply(this,arguments)}function r(e){return n.prototype[t].apply(this,e)}return function(){var t,n=this._super,o=this._superApply;return this._super=e,this._superApply=r,t=i.apply(this,arguments),this._super=n,this._superApply=o,t}}()):void(s[t]=i)})),o.prototype=e.widget.extend(a,{widgetEventPrefix:r&&a.widgetEventPrefix||t},s,{constructor:o,namespace:l,widgetName:t,widgetFullName:c}),r?(e.each(r._childConstructors,(function(t,n){var i=n.prototype;e.widget(i.namespace+"."+i.widgetName,o,n._proto)})),delete r._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o),o},e.widget.extend=function(t){for(var i,r,o=n.call(arguments,1),a=0,s=o.length;s>a;a++)for(i in o[a])r=o[a][i],o[a].hasOwnProperty(i)&&void 0!==r&&(t[i]=e.isPlainObject(r)?e.isPlainObject(t[i])?e.widget.extend({},t[i],r):e.widget.extend({},r):r);return t},e.widget.bridge=function(t,i){var r=i.prototype.widgetFullName||t;e.fn[t]=function(o){var a="string"==typeof o,s=n.call(arguments,1),l=this;return a?this.length||"instance"!==o?this.each((function(){var n,i=e.data(this,r);return"instance"===o?(l=i,!1):i?e.isFunction(i[o])&&"_"!==o.charAt(0)?(n=i[o].apply(i,s))!==i&&void 0!==n?(l=n&&n.jquery?l.pushStack(n.get()):n,!1):void 0:e.error("no such method '"+o+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+o+"'")})):l=void 0:(s.length&&(o=e.widget.extend.apply(null,[o].concat(s))),this.each((function(){var t=e.data(this,r);t?(t.option(o||{}),t._init&&t._init()):e.data(this,r,new i(o,this))}))),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(n,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=t++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),this.classesElementLookup={},i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),n),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){var t=this;this._destroy(),e.each(this.classesElementLookup,(function(e,n){t._removeClass(n,e)})),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:e.noop,widget:function(){return this.element},option:function(t,n){var i,r,o,a=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(a={},i=t.split("."),t=i.shift(),i.length){for(r=a[t]=e.widget.extend({},this.options[t]),o=0;i.length-1>o;o++)r[i[o]]=r[i[o]]||{},r=r[i[o]];if(t=i.pop(),1===arguments.length)return void 0===r[t]?null:r[t];r[t]=n}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];a[t]=n}return this._setOptions(a),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return"classes"===e&&this._setOptionClasses(t),this.options[e]=t,"disabled"===e&&this._setOptionDisabled(t),this},_setOptionClasses:function(t){var n,i,r;for(n in t)r=this.classesElementLookup[n],t[n]!==this.options.classes[n]&&r&&r.length&&(i=e(r.get()),this._removeClass(r,n),i.addClass(this._classes({element:i,keys:n,classes:t,add:!0})))},_setOptionDisabled:function(e){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!e),e&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(t){function n(n,o){var a,s;for(s=0;n.length>s;s++)a=r.classesElementLookup[n[s]]||e(),a=t.add?e(e.unique(a.get().concat(t.element.get()))):e(a.not(t.element).get()),r.classesElementLookup[n[s]]=a,i.push(n[s]),o&&t.classes[n[s]]&&i.push(t.classes[n[s]])}var i=[],r=this;return t=e.extend({element:this.element,classes:this.options.classes||{}},t),this._on(t.element,{remove:"_untrackClassesElement"}),t.keys&&n(t.keys.match(/\S+/g)||[],!0),t.extra&&n(t.extra.match(/\S+/g)||[]),i.join(" ")},_untrackClassesElement:function(t){var n=this;e.each(n.classesElementLookup,(function(i,r){-1!==e.inArray(t.target,r)&&(n.classesElementLookup[i]=e(r.not(t.target).get()))}))},_removeClass:function(e,t,n){return this._toggleClass(e,t,n,!1)},_addClass:function(e,t,n){return this._toggleClass(e,t,n,!0)},_toggleClass:function(e,t,n,i){i="boolean"==typeof i?i:n;var r="string"==typeof e||null===e,o={extra:r?t:n,keys:r?e:t,element:r?this.element:e,add:i};return o.element.toggleClass(this._classes(o),i),this},_on:function(t,n,i){var r,o=this;"boolean"!=typeof t&&(i=n,n=t,t=!1),i?(n=r=e(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,r=this.widget()),e.each(i,(function(i,a){function s(){return t||!0!==o.options.disabled&&!e(this).hasClass("ui-state-disabled")?("string"==typeof a?o[a]:a).apply(o,arguments):void 0}"string"!=typeof a&&(s.guid=a.guid=a.guid||s.guid||e.guid++);var l=i.match(/^([\w:-]*)\s*(.*)$/),c=l[1]+o.eventNamespace,u=l[2];u?r.on(c,u,s):n.on(c,s)}))},_off:function(t,n){n=(n||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.off(n).off(n),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){var n=this;return setTimeout((function(){return("string"==typeof e?n[e]:e).apply(n,arguments)}),t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){this._addClass(e(t.currentTarget),null,"ui-state-hover")},mouseleave:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){this._addClass(e(t.currentTarget),null,"ui-state-focus")},focusout:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-focus")}})},_trigger:function(t,n,i){var r,o,a=this.options[t];if(i=i||{},(n=e.Event(n)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],o=n.originalEvent)for(r in o)r in n||(n[r]=o[r]);return this.element.trigger(n,i),!(e.isFunction(a)&&!1===a.apply(this.element[0],[n].concat(i))||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},(function(t,n){e.Widget.prototype["_"+t]=function(i,r,o){"string"==typeof r&&(r={effect:r});var a,s=r?!0===r||"number"==typeof r?n:r.effect||n:t;"number"==typeof(r=r||{})&&(r={duration:r}),a=!e.isEmptyObject(r),r.complete=o,r.delay&&i.delay(r.delay),a&&e.effects&&e.effects.effect[s]?i[t](r):s!==t&&i[s]?i[s](r.duration,r.easing,o):i.queue((function(n){e(this)[t](),o&&o.call(i[0]),n()}))}})),e.widget,e.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},e.fn.extend({uniqueId:function(){var e=0;return function(){return this.each((function(){this.id||(this.id="ui-id-"+ ++e)}))}}(),removeUniqueId:function(){return this.each((function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")}))}}),e.ui.escapeSelector=function(){var e=/([!"#$%&'()*+,./:;<=>?@[\]^`{|}~])/g;return function(t){return t.replace(e,"\\$1")}}(),e.ui.safeActiveElement=function(e){var t;try{t=e.activeElement}catch(n){t=e.body}return t||(t=e.body),t.nodeName||(t=e.body),t},e.widget("ui.tabs",{version:"1.12.1",delay:300,options:{active:null,classes:{"ui-tabs":"ui-corner-all","ui-tabs-nav":"ui-corner-all","ui-tabs-panel":"ui-corner-bottom","ui-tabs-tab":"ui-corner-top"},collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:function(){var e=/#.*$/;return function(t){var n,i;n=t.href.replace(e,""),i=location.href.replace(e,"");try{n=decodeURIComponent(n)}catch(e){}try{i=decodeURIComponent(i)}catch(e){}return t.hash.length>1&&n===i}}(),_create:function(){var t=this,n=this.options;this.running=!1,this._addClass("ui-tabs","ui-widget ui-widget-content"),this._toggleClass("ui-tabs-collapsible",null,n.collapsible),this._processTabs(),n.active=this._initialActive(),e.isArray(n.disabled)&&(n.disabled=e.unique(n.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),(function(e){return t.tabs.index(e)})))).sort()),this.active=!1!==this.options.active&&this.anchors.length?this._findActive(n.active):e(),this._refresh(),this.active.length&&this.load(n.active)},_initialActive:function(){var t=this.options.active,n=this.options.collapsible,i=location.hash.substring(1);return null===t&&(i&&this.tabs.each((function(n,r){return e(r).attr("aria-controls")===i?(t=n,!1):void 0})),null===t&&(t=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===t||-1===t)&&(t=!!this.tabs.length&&0)),!1!==t&&(-1===(t=this.tabs.index(this.tabs.eq(t)))&&(t=!n&&0)),!n&&!1===t&&this.anchors.length&&(t=0),t},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(t){var n=e(e.ui.safeActiveElement(this.document[0])).closest("li"),i=this.tabs.index(n),r=!0;if(!this._handlePageNav(t)){switch(t.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:i++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:r=!1,i--;break;case e.ui.keyCode.END:i=this.anchors.length-1;break;case e.ui.keyCode.HOME:i=0;break;case e.ui.keyCode.SPACE:return t.preventDefault(),clearTimeout(this.activating),void this._activate(i);case e.ui.keyCode.ENTER:return t.preventDefault(),clearTimeout(this.activating),void this._activate(i!==this.options.active&&i);default:return}t.preventDefault(),clearTimeout(this.activating),i=this._focusNextTab(i,r),t.ctrlKey||t.metaKey||(n.attr("aria-selected","false"),this.tabs.eq(i).attr("aria-selected","true"),this.activating=this._delay((function(){this.option("active",i)}),this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.trigger("focus"))},_handlePageNav:function(t){return t.altKey&&t.keyCode===e.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):t.altKey&&t.keyCode===e.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(t,n){for(var i=this.tabs.length-1;-1!==e.inArray((t>i&&(t=0),0>t&&(t=i),t),this.options.disabled);)t=n?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).trigger("focus"),e},_setOption:function(e,t){return"active"===e?void this._activate(t):(this._super(e,t),"collapsible"===e&&(this._toggleClass("ui-tabs-collapsible",null,t),t||!1!==this.options.active||this._activate(0)),"event"===e&&this._setupEvents(t),void("heightStyle"===e&&this._setupHeightStyle(t)))},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,n=this.tablist.children(":has(a[href])");t.disabled=e.map(n.filter(".ui-state-disabled"),(function(e){return n.index(e)})),this._processTabs(),!1!==t.active&&this.anchors.length?this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=e()),this._refresh()},_refresh:function(){this._setOptionDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._addClass(this.active,"ui-tabs-active","ui-state-active"),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this,n=this.tabs,i=this.anchors,r=this.panels;this.tablist=this._getList().attr("role","tablist"),this._addClass(this.tablist,"ui-tabs-nav","ui-helper-reset ui-helper-clearfix ui-widget-header"),this.tablist.on("mousedown"+this.eventNamespace,"> li",(function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()})).on("focus"+this.eventNamespace,".ui-tabs-anchor",(function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()})),this.tabs=this.tablist.find("> li:has(a[href])").attr({role:"tab",tabIndex:-1}),this._addClass(this.tabs,"ui-tabs-tab","ui-state-default"),this.anchors=this.tabs.map((function(){return e("a",this)[0]})).attr({role:"presentation",tabIndex:-1}),this._addClass(this.anchors,"ui-tabs-anchor"),this.panels=e(),this.anchors.each((function(n,i){var r,o,a,s=e(i).uniqueId().attr("id"),l=e(i).closest("li"),c=l.attr("aria-controls");t._isLocal(i)?(a=(r=i.hash).substring(1),o=t.element.find(t._sanitizeSelector(r))):(r="#"+(a=l.attr("aria-controls")||e({}).uniqueId()[0].id),(o=t.element.find(r)).length||(o=t._createPanel(a)).insertAfter(t.panels[n-1]||t.tablist),o.attr("aria-live","polite")),o.length&&(t.panels=t.panels.add(o)),c&&l.data("ui-tabs-aria-controls",c),l.attr({"aria-controls":a,"aria-labelledby":s}),o.attr("aria-labelledby",s)})),this.panels.attr("role","tabpanel"),this._addClass(this.panels,"ui-tabs-panel","ui-widget-content"),n&&(this._off(n.not(this.tabs)),this._off(i.not(this.anchors)),this._off(r.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol, ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).data("ui-tabs-destroy",!0)},_setOptionDisabled:function(t){var n,i,r;for(e.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1),r=0;i=this.tabs[r];r++)n=e(i),!0===t||-1!==e.inArray(r,t)?(n.attr("aria-disabled","true"),this._addClass(n,null,"ui-state-disabled")):(n.removeAttr("aria-disabled"),this._removeClass(n,null,"ui-state-disabled"));this.options.disabled=t,this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!0===t)},_setupEvents:function(t){var n={};t&&e.each(t.split(" "),(function(e,t){n[t]="_eventHandler"})),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(e){e.preventDefault()}}),this._on(this.anchors,n),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var n,i=this.element.parent();"fill"===t?(n=i.height(),n-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each((function(){var t=e(this),i=t.css("position");"absolute"!==i&&"fixed"!==i&&(n-=t.outerHeight(!0))})),this.element.children().not(this.panels).each((function(){n-=e(this).outerHeight(!0)})),this.panels.each((function(){e(this).height(Math.max(0,n-e(this).innerHeight()+e(this).height()))})).css("overflow","auto")):"auto"===t&&(n=0,this.panels.each((function(){n=Math.max(n,e(this).height("").height())})).height(n))},_eventHandler:function(t){var n=this.options,i=this.active,r=e(t.currentTarget).closest("li"),o=r[0]===i[0],a=o&&n.collapsible,s=a?e():this._getPanelForTab(r),l=i.length?this._getPanelForTab(i):e(),c={oldTab:i,oldPanel:l,newTab:a?e():r,newPanel:s};t.preventDefault(),r.hasClass("ui-state-disabled")||r.hasClass("ui-tabs-loading")||this.running||o&&!n.collapsible||!1===this._trigger("beforeActivate",t,c)||(n.active=!a&&this.tabs.index(r),this.active=o?e():r,this.xhr&&this.xhr.abort(),l.length||s.length||e.error("jQuery UI Tabs: Mismatching fragment identifier."),s.length&&this.load(this.tabs.index(r),t),this._toggle(t,c))},_toggle:function(t,n){function i(){o.running=!1,o._trigger("activate",t,n)}function r(){o._addClass(n.newTab.closest("li"),"ui-tabs-active","ui-state-active"),a.length&&o.options.show?o._show(a,o.options.show,i):(a.show(),i())}var o=this,a=n.newPanel,s=n.oldPanel;this.running=!0,s.length&&this.options.hide?this._hide(s,this.options.hide,(function(){o._removeClass(n.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),r()})):(this._removeClass(n.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),s.hide(),r()),s.attr("aria-hidden","true"),n.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),a.length&&s.length?n.oldTab.attr("tabIndex",-1):a.length&&this.tabs.filter((function(){return 0===e(this).attr("tabIndex")})).attr("tabIndex",-1),a.attr("aria-hidden","false"),n.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(t){var n,i=this._findActive(t);i[0]!==this.active[0]&&(i.length||(i=this.active),n=i.find(".ui-tabs-anchor")[0],this._eventHandler({target:n,currentTarget:n,preventDefault:e.noop}))},_findActive:function(t){return!1===t?e():this.tabs.eq(t)},_getIndex:function(t){return"string"==typeof t&&(t=this.anchors.index(this.anchors.filter("[href$='"+e.ui.escapeSelector(t)+"']"))),t},_destroy:function(){this.xhr&&this.xhr.abort(),this.tablist.removeAttr("role").off(this.eventNamespace),this.anchors.removeAttr("role tabIndex").removeUniqueId(),this.tabs.add(this.panels).each((function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeAttr("role tabIndex aria-live aria-busy aria-selected aria-labelledby aria-hidden aria-expanded")})),this.tabs.each((function(){var t=e(this),n=t.data("ui-tabs-aria-controls");n?t.attr("aria-controls",n).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")})),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(t){var n=this.options.disabled;!1!==n&&(void 0===t?n=!1:(t=this._getIndex(t),n=e.isArray(n)?e.map(n,(function(e){return e!==t?e:null})):e.map(this.tabs,(function(e,n){return n!==t?n:null}))),this._setOptionDisabled(n))},disable:function(t){var n=this.options.disabled;if(!0!==n){if(void 0===t)n=!0;else{if(t=this._getIndex(t),-1!==e.inArray(t,n))return;n=e.isArray(n)?e.merge([t],n).sort():[t]}this._setOptionDisabled(n)}},load:function(t,n){t=this._getIndex(t);var i=this,r=this.tabs.eq(t),o=r.find(".ui-tabs-anchor"),a=this._getPanelForTab(r),s={tab:r,panel:a},l=function(e,t){"abort"===t&&i.panels.stop(!1,!0),i._removeClass(r,"ui-tabs-loading"),a.removeAttr("aria-busy"),e===i.xhr&&delete i.xhr};this._isLocal(o[0])||(this.xhr=e.ajax(this._ajaxSettings(o,n,s)),this.xhr&&"canceled"!==this.xhr.statusText&&(this._addClass(r,"ui-tabs-loading"),a.attr("aria-busy","true"),this.xhr.done((function(e,t,r){setTimeout((function(){a.html(e),i._trigger("load",n,s),l(r,t)}),1)})).fail((function(e,t){setTimeout((function(){l(e,t)}),1)}))))},_ajaxSettings:function(t,n,i){var r=this;return{url:t.attr("href").replace(/#.*$/,""),beforeSend:function(t,o){return r._trigger("beforeLoad",n,e.extend({jqXHR:t,ajaxSettings:o},i))}}},_getPanelForTab:function(t){var n=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+n))}}),!1!==e.uiBackCompat&&e.widget("ui.tabs",e.ui.tabs,{_processTabs:function(){this._superApply(arguments),this._addClass(this.tabs,"ui-tab")}}),e.ui.tabs})),define("custom/custom-require",["custom/custom.hints","custom/custom.ws-uid","custom/pgui.selection-handler.ops","custom/jquery-ui.min"],(function(e,t,n,i){})),define("modal_customize",["bootstrap"],(function(){var e=function(e){document.activeElement===document.body&&27==e.which&&$(".modal").modal("hide")},t=$(document),n=$.fn.modal.Constructor.prototype.show;$.fn.modal.Constructor.prototype.show=function(){n.apply(this,arguments);var i=this;this.$element.one("shown.bs.modal",(function(){var n=i.$element.find(".form-control").get(0);n&&n.focus(),t.on("keydown",e)})),this.$element.one("hidden.bs.modal",(function(){t.off("keydown",e)}))};$.fn.modal.Constructor.prototype.hideModal;$.fn.modal.Constructor.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop((function(){0===e.$body.find(".modal:visible").length&&e.$body.removeClass("modal-open"),e.resetAdjustments(),e.resetScrollbar(),e.$element.trigger("hidden.bs.modal")}))},t.on("show.bs.modal",".modal",(function(e){var n=t.find(".modal:visible").last();if(n.length){var i=n.find(".modal-dialog").width(),r=$(this).find(".modal-dialog");i===r.width()&&r.css("width",i-40)}var o=1040+10*$(".modal:visible").length;$(this).css("z-index",o),setTimeout((function(){$(".modal-backdrop").not(".modal-stack").css("z-index",o-1).addClass("modal-stack")}),0)}))})),define("main",["pgui.localizer","pgui.sidebar","pgui.list-page-main","pgui.view-page-main","pgui.compare-page-main","pgui.form-page-main","pgui.admin-page-main","pgui.registration-page","pgui.reset-password-page","pgui.self_change_password","pgui.utils","pgui.user_management_api","pgui.change_password_dialog","pgui.password_dialog_utils","jquery","bootstrap","custom/custom-require","modal_customize"],(function(e,t,n,i,r,o,a,s,l,c,u){require(["user"],(function(){"function"==typeof window.beforePageLoad&&window.beforePageLoad(),$((function(){var d=$("body"),h=d.data("page-entry"),f=d.data("inactivity-timeout");""!=h&&f>0&&require(["inactivity_timeout"],(function(){initInactivityTimeout(f)})),t(d),c(),e.load().done((function(){switch(h){case"list":n();break;case"view":i();break;case"compare":r();break;case"form":o();break;case"admin":a();break;case"register":s();break;case"reset-password":l()}d.data("inactivity-timeout-expired")&&u.showMessage(e.getString("InactivityTimeoutExpired"))})),"function"==typeof window.afterPageLoad&&window.afterPageLoad()}))}))})),require(["main"]);
